<script src="<mt:var name="static_uri">js/build/edit-author.js"></script>

<$mt:setvar name="page_title" value="<__trans phrase="Web Services Password">"$>
<$mt:setvar name="screen_type" value="dialog-screen"$>

<mt:setvarblock name="modal_body">

  <mt:if name="api_password">
    <mtapp:statusmsg class="success" can_close="0">
      <__trans phrase="Web Services password is successfully issued as follows.">
    </mtapp:statusmsg>

    <div class="mb-4">
      <__trans phrase="Please save it in a secure place since the password won't be shown again.">
    </div>
    <div class="mb-4">
      <code><mt:var name="api_password"></code>
    </div>
  <mt:elseif name="deleted">
    <mtapp:statusmsg class="success" can_close="0">
      <__trans phrase="Web Services password is successfully deleted.">
    </mtapp:statusmsg>
  <mt:else>
    <mt:if name="has_api_password">
      <div class="mb-4">
        <__trans phrase="You have a Web serveres password securely stored in the database. If you forgot the password, please delete it and issue the new one.">
      </div>
      <form name="delete_api_password" id="delete_api_password" method="post" action="<mt:var name="script_url">">
        <input type="hidden" name="__mode" value="dialog_api_password">
        <input type="hidden" name="magic_token" value="<mt:var name="magic_token">">
        <input type="hidden" name="id" value="<mt:var name="dest_author_id">">
        <input type="hidden" name="delete" value="1" />
        <input class="btn btn-danger" type="submit" value="<__trans phrase="Delete password">">
      </form>
    <mt:else>
      <div class="mb-4">
        <__trans phrase="Web services password is not currently available.">
      </div>
      <form name="issue_api_password" id="issue_api_password" method="post" action="<mt:var name="script_url">">
        <input type="hidden" name="__mode" value="dialog_api_password">
        <input type="hidden" name="magic_token" value="<mt:var name="magic_token">">
        <input type="hidden" name="id" value="<mt:var name="dest_author_id">">
        <input type="hidden" name="issue" value="1">
        <input class="btn btn-primary" type="submit" value="<__trans phrase="Issue a new password">">
      </form>
    </mt:if>
  </mt:if>

</mt:setvarblock>

<mt:setvarblock name="action_buttons">
  <mt:if name="back_link">
    <a class="btn btn-default" href="<mt:var name="script_url">?__mode=dialog_api_password&amp;id=<mt:var name="dest_author_id">"&amp;dialog=1><__trans phrase="Back"></a>
  </mt:if>
  <button
      type="submit"
      accesskey="x"
      class="cancel button mt-close-dialog btn btn-default"
      data-mt-modal-close
      title="<__trans phrase="Close (x)">">
    <__trans phrase="Close"></button>
</mt:setvarblock>

<mt:include name="layout/modal.tmpl">
<mt:var name="layout">
