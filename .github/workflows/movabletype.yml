name: movabletype/movabletype
on:
  push:
    branches:
    - "**/*"
  pull_request:
  schedule:
    - cron:  '30 0 * * *'
concurrency:
#   # This item has no matching transformer
#   maximum_number_of_builds: 0
  group: "${{ github.ref }}"
  cancel-in-progress: true
env:
  MT_TEST_IGNORE_FIXTURE: '0'
  DOCKER_USERNAME: "${{ secrets.DOCKER_USERNAME }}"
  DOCKER_PASSWORD: "${{ secrets.DOCKER_PASSWORD }}"
jobs:
  test:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_2:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_3:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_4:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/admin_theme_id/ t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_5:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_6:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_7:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_8:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_9:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora39
      TEST_COMMAND: phpunit && make test-php-lint
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_10:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_11:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_12:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_13:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_14:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_15:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_16:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_17:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: MT_TEST_RUN_APP_AS_CGI=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_18:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora35
      TEST_COMMAND: phpunit php/tests/*Test.php && make test-php-lint
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_19:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_20:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_21:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_22:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_23:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_24:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_25:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_26:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: fedora37
      TEST_COMMAND: MT_TEST_BUILDER=MT::Builder::Fast prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_27:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_28:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_29:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_30:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_31:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_32:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_33:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBJECT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_34:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: centos6
      TEST_COMMAND: MT_TEST_DISABLE_OBEJCT_CACHE=1 prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_35:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_36:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_37:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_38:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_39:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_40:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 MT_TEST_FORCE_DATAAPI_VERSION=5 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_41:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_42:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: MT_TEST_ADMIN_THEME_ID=0 prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_43:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: bullseye
      TEST_COMMAND: phpunit && make test-php-lint
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_44:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/*.t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_45:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/[^t]*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_46:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/mt7/t*
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_47:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/app/ t/class/ t/cms/ t/model/ t/mt_object/ t/object_driver/ t/task/ t/template/ t/tools t/util/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_48:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/cms_permission/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_49:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: MT_TEST_FORCE_DATAAPI_VERSION=5 prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/data_api/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_50:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib t/tag/
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_51:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib plugins/*/t
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_52:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: phpunit && make test-php-lint
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || (github.ref == 'refs/heads/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_53:
    runs-on: ubuntu-20.04
    env:
      TEST_COMMAND: MT_TEST_SELENIUM_MAX_RETRY=5 prove -v -j1 -PMySQLPool=MT::Test::Env -It/lib t/selenium/*.t
      TEST_IMAGE_NAME: chromiumdriver
    if: ${{ github.event_name != 'schedule' }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_54:
    runs-on: ubuntu-20.04
    env:
      TEST_COMMAND: MT_TEST_SELENIUM_MAX_RETRY=5 MT_TEST_CRAWL=1 prove -j1 -PMySQLPool=MT::Test::Env -It/lib t/selenium/crawl.t
      TEST_IMAGE_NAME: chromiumdriver
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
  test_55:
    runs-on: ubuntu-20.04
    env:
      TEST_IMAGE_NAME: buster
      TEST_COMMAND: prove -j4 -PMySQLPool=MT::Test::Env -It/lib xt
    if: ${{ ((github.event_name == 'schedule') && ((github.ref == 'refs/heads/master') || contains(github.ref, '/develop') || contains(github.ref, '/support-') || contains(github.ref, '/release-'))) || contains(github.ref, 'cron') }}
    steps:
    - name: checkout
      uses: actions/checkout@v4.1.0
    - run: docker login --username "$DOCKER_USERNAME" --password "$DOCKER_PASSWORD"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:fedora39 bash -c "BUILD_RELEASE_NUMBER=1 make"
    - run: docker run -t -v $PWD:/mt -w /mt movabletype/test:$TEST_IMAGE_NAME bash -c "$TEST_COMMAND"
    - uses: rtCamp/action-slack-notify@v2.2.1
      env:
        SLACK_WEBHOOK: "${{ secrets.SLACK_WEBHOOK }}"
