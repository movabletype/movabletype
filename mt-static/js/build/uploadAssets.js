function c({files:r,context:i,options:m,requestOptions:a}){return[...r??[]].map(async u=>{var s;const o=(s=document.querySelector('input[name="magic_token"]'))===null||s===void 0?void 0:s.value;if(!o)throw new Error("Failed to get magick token.");const t=new FormData;t.set("file",u),t.set("__mode","js_upload_file"),t.set("blog_id",String(i.blogId)),t.set("magic_token",o);const e=new XMLHttpRequest;return e.open("POST",window.CMSScriptURI),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(t),Object.assign(e,a),new Promise((l,d)=>{e.onload=()=>{const p={status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.getAllResponseHeaders().split(/\r\n/).filter(n=>n.includes(":")).map(n=>n.split(/\s*:\s*/,2)))};l(new Response(e.responseText,p))},e.onerror=()=>{d("Request failed")}})})}export{c as uploadAssets};
