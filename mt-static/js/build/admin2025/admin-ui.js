const Gt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function D(){}function vt(t){return t()}function kt(){return Object.create(null)}function ee(t){t.forEach(vt)}function Ze(t){return typeof t=="function"}function he(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function be(t){return t&&Ze(t.destroy)?t.destroy:D}function c(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function De(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function xe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function v(){return q(" ")}function Ce(){return q("")}function O(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Xt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Yt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Zt(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Le;function Ne(t){Le=t}function xt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function $e(t){xt().$$.on_mount.push(t)}const ge=[],ye=[];let we=[];const Ct=[],Lt=Promise.resolve();let et=!1;function Nt(){et||(et=!0,Lt.then(Et))}function $t(){return Nt(),Lt}function Fe(t){we.push(t)}const tt=new Set;let ve=0;function Et(){if(ve!==0)return;const t=Le;do{try{for(;ve<ge.length;){const e=ge[ve];ve++,Ne(e),en(e.$$)}}catch(e){throw ge.length=0,ve=0,e}for(Ne(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];tt.has(n)||(tt.add(n),n())}we.length=0}while(ge.length);for(;Ct.length;)Ct.pop()();et=!1,tt.clear(),Ne(t)}function en(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Fe)}}function tn(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Ve=new Set;let ae;function We(){ae={r:0,c:[],p:ae}}function Qe(){ae.r||ee(ae.c),ae=ae.p}function F(t,e){t&&t.i&&(Ve.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Ve.has(t))return;Ve.add(t),ae.c.push(()=>{Ve.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function se(t){return t?.length!==void 0?t:Array.from(t)}function ze(t){t&&t.c()}function Ee(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),Fe(()=>{const s=t.$$.on_mount.map(vt).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...s):ee(s),t.$$.on_mount=[]}),o.forEach(Fe)}function Ie(t,e){const n=t.$$;n.fragment!==null&&(tn(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nn(t,e){t.$$.dirty[0]===-1&&(ge.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,n,l,o,s,i=null,a=[-1]){const r=Le;Ne(t);const _=t.$$={fragment:null,ctx:[],props:s,update:D,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:kt(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};i&&i(_.root);let y=!1;if(_.ctx=n?n(t,e.props||{},(g,d,...p)=>{const b=p.length?p[0]:d;return _.ctx&&o(_.ctx[g],_.ctx[g]=b)&&(!_.skip_bound&&_.bound[g]&&_.bound[g](b),y&&nn(t,g)),d}):[],_.update(),y=!0,ee(_.before_update),_.fragment=l?l(_.ctx):!1,e.target){if(e.hydrate){const g=Yt(e.target);_.fragment&&_.fragment.l(g),g.forEach(T)}else _.fragment&&_.fragment.c();e.intro&&F(t.$$.fragment),Ee(t,e.target,e.anchor),Et()}Ne(r)}class Te{$$=void 0;$$set=void 0;$destroy(){Ie(this,1),this.$destroy=D}$on(e,n){if(!Ze(n))return D;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ln="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ln);function Se(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await $t(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function nt(t,e){return!t.some(n=>n&&n.contains(e))}function It(t,e,n){const l=t.slice();return l[10]=e[n],l}function Mt(t){let e,n,l,o,s,i,a,r,_,y,g,d=window.trans("New [_1] creation",window.trans("Entry"))+"",p,b,h,j,E,A=window.trans("New [_1] creation",window.trans("Page"))+"",L,R,P,M,w=t[1].length>0&&jt(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=v(),s=f("div"),w&&w.c(),i=v(),a=f("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=v(),_=f("ul"),y=f("li"),g=f("a"),p=q(d),h=v(),j=f("li"),E=f("a"),L=q(A),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(a,"class","block-title"),u(g,"href",b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(E,"href",R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(_,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(k,C){S(k,e,C),c(e,n),c(n,l),c(e,o),c(e,s),w&&w.m(s,null),c(s,i),c(s,a),c(s,r),c(s,_),c(_,y),c(y,g),c(g,p),c(_,h),c(_,j),c(j,E),c(E,L),t[9](e),P||(M=[O(l,"click",t[4]),be(Se.call(null,e,"body"))],P=!0)},p(k,C){k[1].length>0?w?w.p(k,C):(w=jt(k),w.c(),w.m(s,i)):w&&(w.d(1),w=null),C&4&&b!==(b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${k[2]}`)&&u(g,"href",b),C&4&&R!==(R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${k[2]}`)&&u(E,"href",R)},d(k){k&&T(e),w&&w.d(),t[9](null),P=!1,ee(M)}}}function jt(t){let e,n,l,o=se(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ut(It(t,o,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=v(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,a){S(i,e,a),S(i,n,a),S(i,l,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(i,a){if(a&6){o=se(i[1]);let r;for(r=0;r<o.length;r+=1){const _=It(i,o,r);s[r]?s[r].p(_,a):(s[r]=Ut(_),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(i){i&&(T(e),T(n),T(l)),De(s,i)}}}function Ut(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=f("li"),n=f("a"),o=q(l),i=v(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(a,r){S(a,e,r),c(e,n),c(n,o),c(e,i)},p(a,r){r&2&&l!==(l=window.trans("New [_1] creation",a[10].name)+"")&&oe(o,l),r&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[10].id}&type=content_data_${a[10].id}&blog_id=${a[2]}`)&&u(n,"href",s)},d(a){a&&T(e)}}}function on(t){let e,n,l,o,s=t[0]&&Mt(t);return{c(){e=v(),s&&s.c(),n=Ce()},m(i,a){S(i,e,a),s&&s.m(i,a),S(i,n,a),l||(o=O(document.body,"click",t[5]),l=!0)},p(i,[a]){i[0]?s?s.p(i,a):(s=Mt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:D,o:D,d(i){i&&(T(e),T(n)),s&&s.d(i),l=!1,o()}}}function sn(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:a=null}=e,{containerRef:r=null}=e,_=null;const y=()=>{n(0,s=!1)},g=p=>{if(r&&r.classList.contains("show"))return;const b=p.target;s&&nt([i,_],b)&&y()};function d(p){ye[p?"unshift":"push"](()=>{_=p,n(3,_),n(7,a),n(0,s)})}return t.$$set=p=>{"contentTypes"in p&&n(1,l=p.contentTypes),"blog_id"in p&&n(2,o=p.blog_id),"open"in p&&n(0,s=p.open),"buttonRef"in p&&n(6,i=p.buttonRef),"anchorRef"in p&&n(7,a=p.anchorRef),"containerRef"in p&&n(8,r=p.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&a){if(_){const p=a.getBoundingClientRect(),b=`calc(${p.bottom}px + 10px)`;n(3,_.style.top=b,_);const h=`calc(100vh - ${p.bottom}px - 10px - 20px)`;n(3,_.style.maxHeight=h,_)}s?a.classList.add("open"):a.classList.remove("open")}},[s,l,o,_,y,g,i,a,r,d]}class an extends Te{constructor(e){super(),ke(this,e,sn,on,he,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const cn=({target:t,props:e})=>{const n=new an({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function rn(t){let e,n,l,o;return{c(){e=f("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){S(s,e,i),l||(o=[be(Se.call(null,e,"body")),O(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(e,"style",n)},i:D,o:D,d(s){s&&T(e),l=!1,ee(o)}}}function un(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const a=(d,p)=>{const b=document.querySelector('[data-is="content-wrapper"]');p?b.classList.add(d):b.classList.remove(d)},r=()=>{a("collapsed",o)},_=()=>{a("mouseover",i)},y=()=>{var d;o&&(i=!0,_(),(d=document.querySelector('[data-is="primary-navigation"]'))===null||d===void 0||d.addEventListener("mouseleave",g,{once:!0}))},g=()=>{i=!1,_()};return $e(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),r()}),t.$$set=d=>{"buttonRef"in d&&n(2,l=d.buttonRef),"collapsed"in d&&n(0,o=d.collapsed),"isStored"in d&&n(3,s=d.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(r(),i=!1,_(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,y,l,s]}class fn extends Te{constructor(e){super(),ke(this,e,un,rn,he,{buttonRef:2,collapsed:0,isStored:3})}}function dn(t,e){const n=new fn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Ot(t){let e,n;return{c(){e=xe("title"),n=q(t[2])},m(l,o){S(l,e,o),c(e,n)},p(l,o){o&4&&oe(n,l[2])},d(l){l&&T(e)}}}function _n(t){let e,n,l=t[2]&&Ot(t);return{c(){e=xe("svg"),l&&l.c(),n=xe("use"),Tt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){S(o,e,s),l&&l.m(e,null),c(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Ot(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Tt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:D,o:D,d(o){o&&T(e),l&&l.d()}}}function mn(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class lt extends Te{constructor(e){super(),ke(this,e,mn,_n,he,{class:0,href:1,title:2})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function qt(t,e,n){const l=t.slice();return l[12]=e[n],l}function At(t){let e,n,l,o=!1,s,i,a,r=t[12].label+"",_,y,g,d,p;return g=Xt(t[7][0]),{c(){e=f("label"),n=f("input"),a=v(),_=q(r),y=v(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[12].key,Z(n,n.__value),u(n,"id",s=t[12].key),n.checked=i=t[0]===t[12].key,g.p(n)},m(b,h){S(b,e,h),c(e,n),n.checked=n.__value===t[0],c(e,a),c(e,_),c(e,y),d||(p=O(n,"change",t[6]),d=!0)},p(b,h){h&16&&l!==(l=b[12].key)&&(n.__value=l,Z(n,n.__value),o=!0),h&16&&s!==(s=b[12].key)&&u(n,"id",s),h&17&&i!==(i=b[0]===b[12].key)&&(n.checked=i),(o||h&17)&&(n.checked=n.__value===b[0]),h&16&&r!==(r=b[12].label+"")&&oe(_,r)},d(b){b&&T(e),g.r(),d=!1,p()}}}function pn(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Z(e,e.__value)},m(n,l){S(n,e,l)},p:D,d(n){n&&T(e)}}}function hn(t){let e,n=se(t[3]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Bt(Pt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);S(o,e,s)},p(o,s){if(s&8){n=se(o[3]);let i;for(i=0;i<n.length;i+=1){const a=Pt(o,n,i);l[i]?l[i].p(a,s):(l[i]=Bt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&T(e),De(l,o)}}}function Bt(t){let e,n=t[9].name+"",l,o;return{c(){e=f("option"),l=q(n),e.__value=o=t[9].id,Z(e,e.__value)},m(s,i){S(s,e,i),c(e,l)},p(s,i){i&8&&n!==(n=s[9].name+"")&&oe(l,n),i&8&&o!==(o=s[9].id)&&(e.__value=o,Z(e,e.__value))},d(s){s&&T(e)}}}function bn(t){let e,n,l,o,s,i,a,r,_,y,g,d,p,b,h,j,E,A,L,R,P,M,w,k,C,te,B,z=se(t[4]),U=[];for(let m=0;m<z.length;m+=1)U[m]=At(qt(t,z,m));function x(m,H){return m[3].length>0?hn:pn}let Y=x(t),V=Y(t);return k=new lt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("form"),n=f("input"),l=v(),o=f("input"),s=v(),i=f("input"),a=v(),r=f("input"),_=v(),y=f("input"),g=v(),d=f("div");for(let m=0;m<U.length;m+=1)U[m].c();p=v(),b=f("div"),h=f("select"),V.c(),E=v(),A=f("div"),L=f("div"),R=f("input"),P=v(),M=f("div"),w=f("button"),ze(k.$$.fragment),C=v(),te=f("span"),te.textContent=`${window.trans("Search")}`,u(n,"type","hidden"),u(n,"name","__mode"),n.value="search_replace",u(o,"type","hidden"),u(o,"name","blog_id"),o.value=t[1],u(i,"type","hidden"),u(i,"name","_type"),i.value=t[0],u(r,"type","hidden"),u(r,"name","do_search"),r.value="1",u(y,"type","hidden"),u(y,"name","magic_token"),y.value=t[2],u(d,"class","search-type"),u(h,"class","custom-select form-control form-select"),u(h,"name","content_type_id"),h.disabled=j=t[0]!=="content_data"||t[3].length===0,Rt(h,"disabled",t[0]!=="content_data"),u(b,"class","search-content-type"),u(R,"type","text"),u(R,"placeholder",window.trans("Select target and search text...")),u(R,"name","search"),u(L,"class","search-text-box"),u(w,"type","submit"),u(w,"class","btn btn-primary"),u(M,"class","submit-button"),u(A,"class","search-input-group"),u(e,"class","mt-search-form"),u(e,"method","post"),u(e,"action",window.ScriptURI)},m(m,H){S(m,e,H),c(e,n),c(e,l),c(e,o),c(e,s),c(e,i),c(e,a),c(e,r),c(e,_),c(e,y),c(e,g),c(e,d);for(let I=0;I<U.length;I+=1)U[I]&&U[I].m(d,null);c(e,p),c(e,b),c(b,h),V.m(h,null),c(e,E),c(e,A),c(A,L),c(L,R),t[8](R),c(A,P),c(A,M),c(M,w),Ee(k,w,null),c(w,C),c(w,te),B=!0},p(m,[H]){if((!B||H&2)&&(o.value=m[1]),(!B||H&1)&&(i.value=m[0]),(!B||H&4)&&(y.value=m[2]),H&17){z=se(m[4]);let I;for(I=0;I<z.length;I+=1){const Re=qt(m,z,I);U[I]?U[I].p(Re,H):(U[I]=At(Re),U[I].c(),U[I].m(d,null))}for(;I<U.length;I+=1)U[I].d(1);U.length=z.length}Y===(Y=x(m))&&V?V.p(m,H):(V.d(1),V=Y(m),V&&(V.c(),V.m(h,null))),(!B||H&9&&j!==(j=m[0]!=="content_data"||m[3].length===0))&&(h.disabled=j),(!B||H&1)&&Rt(h,"disabled",m[0]!=="content_data")},i(m){B||(F(k.$$.fragment,m),B=!0)},o(m){Q(k.$$.fragment,m),B=!1},d(m){m&&T(e),De(U,m),V.d(),t[8](null),Ie(k)}}}function gn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,r=null;const _=[[]];function y(){a=this.__value,n(0,a)}function g(d){ye[d?"unshift":"push"](()=>{r=d,n(5,r)})}return t.$$set=d=>{"blogId"in d&&n(1,l=d.blogId),"magicToken"in d&&n(2,o=d.magicToken),"contentTypes"in d&&n(3,s=d.contentTypes),"searchTabs"in d&&n(4,i=d.searchTabs),"objectType"in d&&n(0,a=d.objectType)},t.$$.update=()=>{t.$$.dirty&32&&r&&r.focus()},[a,l,o,s,i,r,y,_,g]}class Ht extends Te{constructor(e){super(),ke(this,e,gn,bn,he,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,o,s,i,a,r,_,y,g;return r=new Ht({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=v(),a=f("div"),ze(r.$$.fragment),u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(a,"class","modal-body"),u(l,"class","modal search-button-modal")},m(d,p){S(d,e,p),S(d,n,p),S(d,l,p),c(l,o),c(o,s),c(l,i),c(l,a),Ee(r,a,null),t[11](l),_=!0,y||(g=[O(e,"click",t[7]),be(Se.call(null,e,"body")),O(s,"click",t[7]),be(Se.call(null,l,"body"))],y=!0)},p(d,p){const b={};p&4&&(b.blogId=d[2]),p&8&&(b.magicToken=d[3]),p&16&&(b.contentTypes=d[4]),p&2&&(b.objectType=d[1]),p&32&&(b.searchTabs=d[5]),r.$set(b)},i(d){_||(F(r.$$.fragment,d),_=!0)},o(d){Q(r.$$.fragment,d),_=!1},d(d){d&&(T(e),T(n),T(l)),Ie(r),t[11](null),y=!1,ee(g)}}}function yn(t){let e,n,l,o,s,i=t[0]&&Jt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(a,r){S(a,e,r),i&&i.m(a,r),S(a,n,r),l=!0,o||(s=O(document.body,"click",t[8]),o=!0)},p(a,[r]){a[0]?i?(i.p(a,r),r&1&&F(i,1)):(i=Jt(a),i.c(),F(i,1),i.m(n.parentNode,n)):i&&(We(),Q(i,1,1,()=>{i=null}),Qe())},i(a){l||(F(i),l=!0)},o(a){Q(i),l=!1},d(a){a&&(T(e),T(n)),i&&i.d(a),o=!1,s()}}}let Dt=null;function wn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:a}=e,{anchorRef:r}=e,{searchTabs:_}=e,{objectType:y}=e;const g=()=>{n(0,i=!1)};let d=null;const p=h=>{const j=h.target;i&&nt([a,d],j)&&g()};$e(async()=>{y&&_.find(h=>h.key===y)||n(1,y=_[0].key)});function b(h){ye[h?"unshift":"push"](()=>{d=h,n(6,d)})}return t.$$set=h=>{"blogId"in h&&n(2,l=h.blogId),"magicToken"in h&&n(3,o=h.magicToken),"contentTypes"in h&&n(4,s=h.contentTypes),"open"in h&&n(0,i=h.open),"buttonRef"in h&&n(9,a=h.buttonRef),"anchorRef"in h&&n(10,r=h.anchorRef),"searchTabs"in h&&n(5,_=h.searchTabs),"objectType"in h&&n(1,y=h.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&r&&(i?r.classList.add("open"):r.classList.remove("open")),t.$$.dirty&1&&i&&Dt&&Dt.focus()},[i,y,l,o,s,_,d,g,p,a,r,b]}class vn extends Te{constructor(e){super(),ke(this,e,wn,yn,he,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function kn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new vn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const Tn=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Ft(t,e,n){const l=t.slice();return l[30]=e[n],l}function Vt(t){let e,n,l,o,s,i,a,r,_,y=window.trans("[_1]Site",t[2].toString())+"",g,d,p,b,h,j,E,A,L,R,P,M,w,k,C,te,B,z,U,x,Y,V,m,H,I,Re,je,rt,ne,ut,Ue,ft,re,Oe,G,ue,fe,de,dt,_e,$,_t,Pe,me,mt,qe,le,pt,pe,Ae,ht,Be,bt,He,Ke,Je,W,K,X,Xe,gt;me=new lt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[Rn,Sn],ie=[];function wt(N,J){return N[7]?0:1}return W=wt(t),K=ie[W]=yt[W](t),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),a=f("div"),r=f("span"),_=q("("),g=q(y),d=q(")"),p=v(),b=f("p"),b.textContent=`${window.trans("Site List")}`,h=v(),j=f("div"),E=f("button"),E.innerHTML='<span aria-hidden="true">\xD7</span>',A=v(),L=f("div"),R=f("div"),P=f("button"),M=q("<<"),k=v(),C=f("button"),te=q("<"),z=v(),U=f("span"),x=f("span"),Y=q(t[3]),V=q("/"),m=q(t[4]),H=v(),I=f("button"),Re=q(">"),rt=v(),ne=f("button"),ut=q(">>"),ft=v(),re=f("div"),Oe=f("div"),G=f("select"),ue=f("option"),ue.textContent=`${window.trans("Parent Sites")}`,fe=f("option"),fe.textContent=`${window.trans("Parent and child sites")}`,de=f("option"),de.textContent=`${window.trans("Only child sites")}`,dt=v(),_e=f("div"),$=f("input"),_t=v(),Pe=f("button"),ze(me.$$.fragment),mt=v(),qe=f("div"),le=f("button"),le.innerHTML='<span aria-hidden="true">\xD7</span>',pt=v(),pe=f("div"),Ae=f("span"),Ae.textContent=`${window.trans("Site Name")}`,ht=v(),Be=f("span"),Be.textContent=`${window.trans("Parent Site")}`,bt=v(),He=f("div"),Ke=f("table"),Je=f("tbody"),K.c(),u(e,"class","site-list-button-modal-overlay"),u(E,"type","button"),u(E,"class","close"),u(E,"data-dismiss","modal"),u(E,"aria-label","Close"),u(j,"class","d-block d-md-none"),u(a,"class","site-list-title"),u(P,"type","button"),P.disabled=w=t[3]<=1,u(C,"type","button"),C.disabled=B=t[3]<=1,u(x,"class","current"),u(U,"class","page-num"),u(I,"type","button"),I.disabled=je=t[3]===t[4],u(ne,"type","button"),ne.disabled=Ue=t[3]===t[4],u(R,"class","prev-next"),ue.__value="parent_sites",Z(ue,ue.__value),fe.__value="parent_and_child_sites",Z(fe,fe.__value),de.__value="child_sites_only",Z(de,de.__value),u(G,"class","custom-select form-control form-select"),t[5]===void 0&&Fe(()=>t[24].call(G)),u(Oe,"class","site-type-filter"),u($,"type","text"),u($,"placeholder",window.trans("Filter by site name")),u(_e,"class","site-name-filter"),u(re,"class","site-filter-actions"),u(le,"type","button"),u(le,"class","close"),u(le,"data-dismiss","modal"),u(le,"aria-label","Close"),u(qe,"class","d-none d-md-block"),u(L,"class","site-list-actions"),u(i,"class","site-list-header"),u(Ae,"class","table-header-col site-list-header-name"),u(Be,"class","table-header-col site-list-header-parent"),u(pe,"class","site-list-table-header"),u(He,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(N,J){S(N,e,J),S(N,n,J),S(N,l,J),c(l,o),c(o,s),c(s,i),c(i,a),c(a,r),c(r,_),c(r,g),c(r,d),c(a,p),c(a,b),c(a,h),c(a,j),c(j,E),c(i,A),c(i,L),c(L,R),c(R,P),c(P,M),c(R,k),c(R,C),c(C,te),c(R,z),c(R,U),c(U,x),c(x,Y),c(U,V),c(U,m),c(R,H),c(R,I),c(I,Re),c(R,rt),c(R,ne),c(ne,ut),c(L,ft),c(L,re),c(re,Oe),c(Oe,G),c(G,ue),c(G,fe),c(G,de),St(G,t[5],!0),c(re,dt),c(re,_e),c(_e,$),Z($,t[6]),c(_e,_t),c(_e,Pe),Ee(me,Pe,null),c(L,mt),c(L,qe),c(qe,le),c(s,pt),c(s,pe),c(pe,Ae),c(pe,ht),c(pe,Be),c(s,bt),c(s,He),c(He,Ke),c(Ke,Je),ie[W].m(Je,null),t[27](l),X=!0,Xe||(gt=[O(e,"click",t[9]),be(Se.call(null,e,"body")),O(E,"click",t[9]),O(P,"click",t[13]),O(P,"keydown",t[20]),O(C,"click",t[12]),O(C,"keydown",t[21]),O(I,"click",t[10]),O(I,"keydown",t[22]),O(ne,"click",t[11]),O(ne,"keydown",t[23]),O(G,"change",t[24]),O(G,"change",t[14]),O($,"input",t[25]),O($,"keydown",t[26]),O(Pe,"click",t[14]),O(le,"click",t[9]),be(Se.call(null,l,"body"))],Xe=!0)},p(N,J){(!X||J[0]&4)&&y!==(y=window.trans("[_1]Site",N[2].toString())+"")&&oe(g,y),(!X||J[0]&8&&w!==(w=N[3]<=1))&&(P.disabled=w),(!X||J[0]&8&&B!==(B=N[3]<=1))&&(C.disabled=B),(!X||J[0]&8)&&oe(Y,N[3]),(!X||J[0]&16)&&oe(m,N[4]),(!X||J[0]&24&&je!==(je=N[3]===N[4]))&&(I.disabled=je),(!X||J[0]&24&&Ue!==(Ue=N[3]===N[4]))&&(ne.disabled=Ue),J[0]&32&&St(G,N[5]),J[0]&64&&$.value!==N[6]&&Z($,N[6]);let Ye=W;W=wt(N),W===Ye?ie[W].p(N,J):(We(),Q(ie[Ye],1,1,()=>{ie[Ye]=null}),Qe(),K=ie[W],K?K.p(N,J):(K=ie[W]=yt[W](N),K.c()),F(K,1),K.m(Je,null))},i(N){X||(F(me.$$.fragment,N),F(K),X=!0)},o(N){Q(me.$$.fragment,N),Q(K),X=!1},d(N){N&&(T(e),T(n),T(l)),Ie(me),ie[W].d(),t[27](null),Xe=!1,ee(gt)}}}function Sn(t){let e,n,l=se(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Qt(Ft(t,l,i));const s=i=>Q(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(i,a);S(i,e,a),n=!0},p(i,a){if(a[0]&2){l=se(i[1]);let r;for(r=0;r<l.length;r+=1){const _=Ft(i,l,r);o[r]?(o[r].p(_,a),F(o[r],1)):(o[r]=Qt(_),o[r].c(),F(o[r],1),o[r].m(e.parentNode,e))}for(We(),r=l.length;r<o.length;r+=1)s(r);Qe()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)F(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)Q(o[a]);n=!1},d(i){i&&T(e),De(o,i)}}}function Rn(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){S(l,e,o),c(e,n)},p:D,i:D,o:D,d(l){l&&T(e)}}}function Cn(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Child Site")}`,u(e,"class","badge badge-child-site")},m(n,l){S(n,e,l)},p:D,d(n){n&&T(e)}}}function Ln(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Site")}`,u(e,"class","badge badge-site")},m(n,l){S(n,e,l)},p:D,d(n){n&&T(e)}}}function Wt(t){let e,n=t[30].parentSiteName+"";return{c(){e=f("span"),u(e,"class","d-block d-md-none parent-site")},m(l,o){S(l,e,o),e.innerHTML=n},p(l,o){o[0]&2&&n!==(n=l[30].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&T(e)}}}function Qt(t){let e,n,l,o,s=t[30].name+"",i,a,r,_,y,g,d,p,b,h,j,E=t[30].parentSiteName+"",A,L;function R(k,C){return k[30].parentSiteName==="-"?Ln:Cn}let P=R(t),M=P(t),w=t[30].parentSiteName!=="-"&&Wt(t);return p=new lt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=f("tr"),n=f("td"),M.c(),l=v(),o=f("a"),i=q(s),r=v(),w&&w.c(),_=v(),y=f("a"),g=f("span"),g.textContent=`${window.trans("View your site.")}`,d=v(),ze(p.$$.fragment),h=v(),j=f("td"),A=v(),u(o,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(o,"class","dashboard-link"),u(g,"class","d-inline-block d-md-none"),u(y,"href",b=t[30].siteUrl),u(y,"class","site-link"),u(y,"target","_blank")},m(k,C){S(k,e,C),c(e,n),M.m(n,null),c(n,l),c(n,o),c(o,i),c(n,r),w&&w.m(n,null),c(n,_),c(n,y),c(y,g),c(y,d),Ee(p,y,null),c(e,h),c(e,j),j.innerHTML=E,c(e,A),L=!0},p(k,C){P===(P=R(k))&&M?M.p(k,C):(M.d(1),M=P(k),M&&(M.c(),M.m(n,l))),(!L||C[0]&2)&&s!==(s=k[30].name+"")&&oe(i,s),(!L||C[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${k[30].id}`))&&u(o,"href",a),k[30].parentSiteName!=="-"?w?w.p(k,C):(w=Wt(k),w.c(),w.m(n,_)):w&&(w.d(1),w=null),(!L||C[0]&2&&b!==(b=k[30].siteUrl))&&u(y,"href",b),(!L||C[0]&2)&&E!==(E=k[30].parentSiteName+"")&&(j.innerHTML=E)},i(k){L||(F(p.$$.fragment,k),L=!0)},o(k){Q(p.$$.fragment,k),L=!1},d(k){k&&T(e),M.d(),w&&w.d(),Ie(p)}}}function Nn(t){let e,n,l,o,s,i=t[0]&&Vt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(a,r){S(a,e,r),i&&i.m(a,r),S(a,n,r),l=!0,o||(s=O(document.body,"click",t[15]),o=!0)},p(a,r){a[0]?i?(i.p(a,r),r[0]&1&&F(i,1)):(i=Vt(a),i.c(),F(i,1),i.m(n.parentNode,n)):i&&(We(),Q(i,1,1,()=>{i=null}),Qe())},i(a){l||(F(i),l=!0)},o(a){Q(i),l=!1},d(a){a&&(T(e),T(n)),i&&i.d(a),o=!1,s()}}}function En(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:a}=e;const r=()=>{n(0,s=!1)};let _=[],y=0,g=1,d=1,p="parent_sites",b="",h=[],j=!1,E=null;const A=()=>{n(3,g++,g),w()},L=()=>{n(3,g=d),w()},R=()=>{n(3,g--,g),w()},P=()=>{n(3,g=1),w()},M=()=>{h=[],p==="child_sites_only"?h=[{type:"parent_website",args:{value:""}}]:p==="parent_sites"&&(h=[{type:"parent_website",args:{value:"1"}}]),n(6,b=b.trim()),b!==""&&h.push({type:"name",args:{string:b,option:"contains"}}),n(3,g=1),w()},w=async()=>{n(7,j=!0);const m=await Tn({magicToken:l,items:h,page:g,limit:o});n(2,y=m.count),n(4,d=m.pageMax),n(3,g=d!==0?m.page:0),n(1,_=m.sites),n(7,j=!1)},k=m=>{const H=m.target;s&&nt([i,E],H)&&r()};$e(async()=>{M()});const C=m=>m.key==="Enter"&&P(),te=m=>m.key==="Enter"&&R(),B=m=>m.key==="Enter"&&A(),z=m=>m.key==="Enter"&&L();function U(){p=Zt(this),n(5,p)}function x(){b=this.value,n(6,b)}const Y=m=>m.key==="Enter"&&M();function V(m){ye[m?"unshift":"push"](()=>{E=m,n(8,E)})}return t.$$set=m=>{"magicToken"in m&&n(16,l=m.magicToken),"limit"in m&&n(17,o=m.limit),"open"in m&&n(0,s=m.open),"buttonRef"in m&&n(18,i=m.buttonRef),"anchorRef"in m&&n(19,a=m.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&a&&(s?a.classList.add("open"):a.classList.remove("open"))},[s,_,y,g,d,p,b,j,E,r,A,L,R,P,M,k,l,o,i,a,C,te,B,z,U,x,Y,V]}class In extends Te{constructor(e){super(),ke(this,e,En,Nn,he,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function Mn(t,e){const n=new In({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function jn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}new Ht({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var it,ot;const st=document.querySelector('[data-is="primary-navigation-toggle"]');if(st!==null){const t="collapsed",e=sessionStorage.getItem(t);dn(st,{collapsed:e==="true",buttonRef:st.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const at=document.querySelector('[data-script="admin-ui"]');at===null&&console.error("data-script='admin-ui' is not set");const Ge=(it=at?.getAttribute("data-blog-id"))!==null&&it!==void 0?it:"",ce=(ot=at?.getAttribute("data-magic-token"))!==null&&ot!==void 0?ot:"";ce===""&&console.error("data-magic-token is not set");const Un="50",zt=document.querySelectorAll('[data-is="site-list-button"]');zt.length>0&&ce!==""&&zt.forEach(t=>{Mn(t,{magicToken:ce,limit:Number.parseInt(Un),open:!1,buttonRef:t,anchorRef:t})});const ct=document.querySelectorAll('[data-is="create-button"]'),Me=document.querySelector('[data-is="search-button"]'),On=document.querySelector("div.mt-modal");(ct.length>0||Me!==null)&&ce!==""&&Gt({blogId:Ge,magicToken:ce}).then(t=>{if(ct.length>0&&ct.forEach(n=>{cn({target:n,props:{blog_id:Ge,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,buttonRef:n,anchorRef:n,containerRef:On}})}),Me!==null){const n=Me.getElementsByTagName("a")[0];kn(Me,{blogId:Ge,magicToken:ce,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:Me,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&jn(e,{blogId:Ge,magicToken:ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
