function X(){}function wt(t){return t()}function kt(){return Object.create(null)}function he(t){t.forEach(wt)}function tt(t){return typeof t=="function"}function Ee(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function Me(t){return t&&tt(t.destroy)?t.destroy:X}const Yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function lt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function S(){return Y(" ")}function Fe(){return Y("")}function J(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Zt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xt(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function $t(t){const e=t.querySelector(":checked");return e&&e.__value}function Tt(t,e,n){t.classList.toggle(e,!!n)}let Je;function De(t){Je=t}function en(){if(!Je)throw new Error("Function called outside component initialization");return Je}function Rt(t){en().$$.on_mount.push(t)}const je=[],Re=[];let Ue=[];const Nt=[],Ct=Promise.resolve();let it=!1;function Lt(){it||(it=!0,Ct.then(Et))}function It(){return Lt(),Ct}function Ye(t){Ue.push(t)}const st=new Set;let qe=0;function Et(){if(qe!==0)return;const t=Je;do{try{for(;qe<je.length;){const e=je[qe];qe++,De(e),tn(e.$$)}}catch(e){throw je.length=0,qe=0,e}for(De(null),je.length=0,qe=0;Re.length;)Re.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];st.has(n)||(st.add(n),n())}Ue.length=0}while(je.length);for(;Nt.length;)Nt.pop()();it=!1,st.clear(),De(t)}function tn(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ye)}}function nn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const Ze=new Set;let Ne;function We(){Ne={r:0,c:[],p:Ne}}function Ve(){Ne.r||he(Ne.c),Ne=Ne.p}function Z(t,e){t&&t.i&&(Ze.delete(t),t.i(e))}function se(t,e,n,l){if(t&&t.o){if(Ze.has(t))return;Ze.add(t),Ne.c.push(()=>{Ze.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Se(t){return t?.length!==void 0?t:Array.from(t)}function ln(t,e){se(t,1,1,()=>{e.delete(t.key)})}function sn(t,e,n,l,s,o,i,a,d,f,w,y){let m=t.length,k=o.length,h=m;const b={};for(;h--;)b[t[h].key]=h;const p=[],N=new Map,P=new Map,E=[];for(h=k;h--;){const C=y(s,o,h),j=n(C);let T=i.get(j);T?E.push(()=>T.p(C,e)):(T=f(j,C),T.c()),N.set(j,p[h]=T),j in b&&P.set(j,Math.abs(h-b[j]))}const L=new Set,D=new Set;function W(C){Z(C,1),C.m(a,w),i.set(C.key,C),w=C.first,k--}for(;m&&k;){const C=p[k-1],j=t[m-1],T=C.key,q=j.key;C===j?(w=C.first,m--,k--):N.has(q)?!i.has(T)||L.has(T)?W(C):D.has(q)?m--:P.get(T)>P.get(q)?(D.add(T),W(C)):(L.add(q),m--):(d(j,i),m--)}for(;m--;){const C=t[m];N.has(C.key)||d(C,i)}for(;k;)W(p[k-1]);return he(E),p}function Ae(t){t&&t.c()}function Ce(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Ye(()=>{const o=t.$$.on_mount.map(wt).filter(tt);t.$$.on_destroy?t.$$.on_destroy.push(...o):he(o),t.$$.on_mount=[]}),s.forEach(Ye)}function Le(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function on(t,e){t.$$.dirty[0]===-1&&(je.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,l,s,o,i=null,a=[-1]){const d=Je;De(t);const f=t.$$={fragment:null,ctx:[],props:o,update:X,not_equal:s,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:kt(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(f.root);let w=!1;if(f.ctx=n?n(t,e.props||{},(y,m,...k)=>{const h=k.length?k[0]:m;return f.ctx&&s(f.ctx[y],f.ctx[y]=h)&&(!f.skip_bound&&f.bound[y]&&f.bound[y](h),w&&on(t,y)),m}):[],f.update(),w=!0,he(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const y=xt(e.target);f.fragment&&f.fragment.l(y),y.forEach(I)}else f.fragment&&f.fragment.c();e.intro&&Z(t.$$.fragment),Ce(t,e.target,e.anchor),Et()}De(d)}class Oe{$$=void 0;$$set=void 0;$destroy(){Le(this,1),this.$destroy=X}$on(e,n){if(!tt(n))return X;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);function He(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await It(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function ot(t,e){return!t.some(n=>n&&n.contains(e))}const Mt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function jt(t,e,n){const l=t.slice();return l[12]=e[n],l}function Ut(t){let e,n,l,s,o,i,a,d,f,w,y,m=window.trans("New [_1] creation",window.trans("Entry"))+"",k,h,b,p,N,P=window.trans("New [_1] creation",window.trans("Page"))+"",E,L,D,W;function C(q,H){if(q[4])return cn;if(q[1].length>0)return rn}let j=C(t),T=j&&j(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=u("div"),T&&T.c(),i=S(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=S(),f=u("ul"),w=u("li"),y=u("a"),k=Y(m),b=S(),p=u("li"),N=u("a"),E=Y(P),c(l,"type","button"),c(l,"class","close"),c(l,"data-dismiss","modal"),c(l,"aria-label","Close"),c(n,"class","modal-header"),c(a,"class","block-title"),c(y,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),c(N,"href",L=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),c(f,"class","create-button-list"),c(o,"class","modal-body"),c(e,"class","modal create-button-modal")},m(q,H){M(q,e,H),r(e,n),r(n,l),r(e,s),r(e,o),T&&T.m(o,null),r(o,i),r(o,a),r(o,d),r(o,f),r(f,w),r(w,y),r(y,k),r(f,b),r(f,p),r(p,N),r(N,E),t[11](e),D||(W=[J(l,"click",t[5]),Me(He.call(null,e,"body"))],D=!0)},p(q,H){j===(j=C(q))&&T?T.p(q,H):(T&&T.d(1),T=j&&j(q),T&&(T.c(),T.m(o,i))),H&4&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${q[2]}`)&&c(y,"href",h),H&4&&L!==(L=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${q[2]}`)&&c(N,"href",L)},d(q){q&&I(e),T&&T.d(),t[11](null),D=!1,he(W)}}}function rn(t){let e,n,l,s=Se(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=qt(jt(t,s,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=S(),l=u("ul");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","block-title"),c(l,"class","create-button-list")},m(i,a){M(i,e,a),M(i,n,a),M(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&6){s=Se(i[1]);let d;for(d=0;d<s.length;d+=1){const f=jt(i,s,d);o[d]?o[d].p(f,a):(o[d]=qt(f),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(I(e),I(n),I(l)),nt(o,i)}}}function cn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){M(n,e,l)},p:X,d(n){n&&I(e)}}}function qt(t){let e,n,l=window.trans("New [_1] creation",t[12].name)+"",s,o,i;return{c(){e=u("li"),n=u("a"),s=Y(l),i=S(),c(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[12].id}&type=content_data_${t[12].id}&blog_id=${t[2]}`)},m(a,d){M(a,e,d),r(e,n),r(n,s),r(e,i)},p(a,d){d&2&&l!==(l=window.trans("New [_1] creation",a[12].name)+"")&&ve(s,l),d&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[12].id}&type=content_data_${a[12].id}&blog_id=${a[2]}`)&&c(n,"href",o)},d(a){a&&I(e)}}}function dn(t){let e,n,l,s,o=t[0]&&Ut(t);return{c(){e=S(),o&&o.c(),n=Fe()},m(i,a){M(i,e,a),o&&o.m(i,a),M(i,n,a),l||(s=J(document.body,"click",t[6]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=Ut(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:X,o:X,d(i){i&&(I(e),I(n)),o&&o.d(i),l=!1,s()}}}function un(t,e,n){let{contentTypes:l=[]}=e,{blog_id:s}=e,{magicToken:o}=e,{open:i=!1}=e,{anchorRef:a=null}=e,{containerRef:d=null}=e,f=null,w=!1,y=!1;const m=()=>{n(0,i=!1)},k=b=>{if(d&&d.classList.contains("show"))return;const p=b.target;i&&ot([a,f],p)&&m()};function h(b){Re[b?"unshift":"push"](()=>{f=b,n(3,f),n(8,a),n(0,i),n(10,w),n(4,y),n(2,s),n(7,o)})}return t.$$set=b=>{"contentTypes"in b&&n(1,l=b.contentTypes),"blog_id"in b&&n(2,s=b.blog_id),"magicToken"in b&&n(7,o=b.magicToken),"open"in b&&n(0,i=b.open),"anchorRef"in b&&n(8,a=b.anchorRef),"containerRef"in b&&n(9,d=b.containerRef)},t.$$.update=()=>{if(t.$$.dirty&1437&&a){if(f){const b=a.getBoundingClientRect(),p=`calc(${b.bottom}px + 10px)`;n(3,f.style.top=p,f);const N=`calc(100vh - ${b.bottom}px - 10px - 20px)`;n(3,f.style.maxHeight=N,f)}i?(a.classList.add("open"),!w&&!y&&(n(4,y=!0),Mt({blogId:s,magicToken:o}).then(b=>{n(1,l=b.contentTypes.filter(p=>p.can_create===1)),n(10,w=!0),n(4,y=!1)}).catch(b=>{console.error("Failed to fetch content types:",b),n(4,y=!1)}))):a.classList.remove("open")}},[i,l,s,f,y,m,k,o,a,d,w,h]}class fn extends Oe{constructor(e){super(),Pe(this,e,un,dn,Ee,{contentTypes:1,blog_id:2,magicToken:7,open:0,anchorRef:8,containerRef:9})}}const _n=({target:t,props:e})=>{const n=new fn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function pn(t){let e,n,l,s;return{c(){e=u("div"),c(e,"class","mt-primaryNavigation-overlay"),c(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){M(o,e,i),l||(s=[Me(He.call(null,e,"body")),J(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&c(e,"style",n)},i:X,o:X,d(o){o&&I(e),l=!1,he(s)}}}function mn(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(m,k)=>{const h=document.querySelector('[data-is="content-wrapper"]');k?h.classList.add(m):h.classList.remove(m)},d=()=>{a("collapsed",s)},f=()=>{a("mouseover",i)},w=()=>{var m;s&&(i=!0,f(),(m=document.querySelector('[data-is="primary-navigation"]'))===null||m===void 0||m.addEventListener("mouseleave",y,{once:!0}))},y=()=>{i=!1,f()};return Rt(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=m=>{"buttonRef"in m&&n(2,l=m.buttonRef),"collapsed"in m&&n(0,s=m.collapsed),"isStored"in m&&n(3,o=m.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,f(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed"),document.body.dataset.isCollapsed="true"):(l.classList.remove("collapsed"),l.classList.add("expanded"),document.body.dataset.isCollapsed="false")))},[s,w,l,o]}class hn extends Oe{constructor(e){super(),Pe(this,e,mn,pn,Ee,{buttonRef:2,collapsed:0,isStored:3})}}function bn(t,e){const n=new hn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function At(t){let e,n;return{c(){e=lt("title"),n=Y(t[2])},m(l,s){M(l,e,s),r(e,n)},p(l,s){s&4&&ve(n,l[2])},d(l){l&&I(e)}}}function gn(t){let e,n,l=t[2]&&At(t);return{c(){e=lt("svg"),l&&l.c(),n=lt("use"),vt(n,"xlink:href",t[1]),c(e,"role","img"),c(e,"class",t[0]),c(e,"style",t[3])},m(s,o){M(s,e,o),l&&l.m(e,null),r(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=At(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&vt(n,"xlink:href",s[1]),o&1&&c(e,"class",s[0]),o&8&&c(e,"style",s[3])},i:X,o:X,d(s){s&&I(e),l&&l.d()}}}function yn(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class Qe extends Oe{constructor(e){super(),Pe(this,e,yn,gn,Ee,{class:0,href:1,title:2,style:3})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ot(t,e,n){const l=t.slice();return l[12]=e[n],l}function Ht(t){let e,n,l,s=!1,o,i,a,d=t[12].label+"",f,w,y,m,k;return y=Zt(t[7][0]),{c(){e=u("label"),n=u("input"),a=S(),f=Y(d),w=S(),c(n,"type","radio"),c(n,"name","type"),n.__value=l=t[12].key,be(n,n.__value),c(n,"id",o=t[12].key),n.checked=i=t[0]===t[12].key,y.p(n)},m(h,b){M(h,e,b),r(e,n),n.checked=n.__value===t[0],r(e,a),r(e,f),r(e,w),m||(k=J(n,"change",t[6]),m=!0)},p(h,b){b&16&&l!==(l=h[12].key)&&(n.__value=l,be(n,n.__value),s=!0),b&16&&o!==(o=h[12].key)&&c(n,"id",o),b&17&&i!==(i=h[0]===h[12].key)&&(n.checked=i),(s||b&17)&&(n.checked=n.__value===h[0]),b&16&&d!==(d=h[12].label+"")&&ve(f,d)},d(h){h&&I(e),y.r(),m=!1,k()}}}function wn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",be(e,e.__value)},m(n,l){M(n,e,l)},p:X,d(n){n&&I(e)}}}function kn(t){let e,n=Se(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Bt(Pt(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Fe()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);M(s,e,o)},p(s,o){if(o&8){n=Se(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Pt(s,n,i);l[i]?l[i].p(a,o):(l[i]=Bt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&I(e),nt(l,s)}}}function Bt(t){let e,n=t[9].name+"",l,s;return{c(){e=u("option"),l=Y(n),e.__value=s=t[9].id,be(e,e.__value)},m(o,i){M(o,e,i),r(e,l)},p(o,i){i&8&&n!==(n=o[9].name+"")&&ve(l,n),i&8&&s!==(s=o[9].id)&&(e.__value=s,be(e,e.__value))},d(o){o&&I(e)}}}function vn(t){let e,n,l,s,o,i,a,d,f,w,y,m,k,h,b,p,N,P,E,L,D,W,C,j,T,q,H,z=Se(t[4]),A=[];for(let R=0;R<z.length;R+=1)A[R]=Ht(Ot(t,z,R));function ne(R,U){return R[3].length>0?kn:wn}let le=ne(t),V=le(t);return j=new Qe({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("form"),n=u("input"),l=S(),s=u("input"),o=S(),i=u("input"),a=S(),d=u("input"),f=S(),w=u("input"),y=S(),m=u("div");for(let R=0;R<A.length;R+=1)A[R].c();k=S(),h=u("div"),b=u("select"),V.c(),N=S(),P=u("div"),E=u("div"),L=u("input"),D=S(),W=u("div"),C=u("button"),Ae(j.$$.fragment),T=S(),q=u("span"),q.textContent=`${window.trans("Search")}`,c(n,"type","hidden"),c(n,"name","__mode"),n.value="search_replace",c(s,"type","hidden"),c(s,"name","blog_id"),s.value=t[1],c(i,"type","hidden"),c(i,"name","_type"),i.value=t[0],c(d,"type","hidden"),c(d,"name","do_search"),d.value="1",c(w,"type","hidden"),c(w,"name","magic_token"),w.value=t[2],c(m,"class","search-type"),c(b,"class","custom-select form-control form-select"),c(b,"name","content_type_id"),b.disabled=p=t[0]!=="content_data"||t[3].length===0,Tt(b,"disabled",t[0]!=="content_data"),c(h,"class","search-content-type"),c(L,"type","text"),c(L,"placeholder",window.trans("Select target and search text...")),c(L,"name","search"),c(E,"class","search-text-box"),c(C,"type","submit"),c(C,"class","btn btn-primary"),c(W,"class","submit-button"),c(P,"class","search-input-group"),c(e,"class","mt-search-form"),c(e,"method","post"),c(e,"action",window.ScriptURI)},m(R,U){M(R,e,U),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(e,a),r(e,d),r(e,f),r(e,w),r(e,y),r(e,m);for(let O=0;O<A.length;O+=1)A[O]&&A[O].m(m,null);r(e,k),r(e,h),r(h,b),V.m(b,null),r(e,N),r(e,P),r(P,E),r(E,L),t[8](L),r(P,D),r(P,W),r(W,C),Ce(j,C,null),r(C,T),r(C,q),H=!0},p(R,[U]){if((!H||U&2)&&(s.value=R[1]),(!H||U&1)&&(i.value=R[0]),(!H||U&4)&&(w.value=R[2]),U&17){z=Se(R[4]);let O;for(O=0;O<z.length;O+=1){const ce=Ot(R,z,O);A[O]?A[O].p(ce,U):(A[O]=Ht(ce),A[O].c(),A[O].m(m,null))}for(;O<A.length;O+=1)A[O].d(1);A.length=z.length}le===(le=ne(R))&&V?V.p(R,U):(V.d(1),V=le(R),V&&(V.c(),V.m(b,null))),(!H||U&9&&p!==(p=R[0]!=="content_data"||R[3].length===0))&&(b.disabled=p),(!H||U&1)&&Tt(b,"disabled",R[0]!=="content_data")},i(R){H||(Z(j.$$.fragment,R),H=!0)},o(R){se(j.$$.fragment,R),H=!1},d(R){R&&I(e),nt(A,R),V.d(),t[8](null),Le(j)}}}function Sn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,d=null;const f=[[]];function w(){a=this.__value,n(0,a)}function y(m){Re[m?"unshift":"push"](()=>{d=m,n(5,d)})}return t.$$set=m=>{"blogId"in m&&n(1,l=m.blogId),"magicToken"in m&&n(2,s=m.magicToken),"contentTypes"in m&&n(3,o=m.contentTypes),"searchTabs"in m&&n(4,i=m.searchTabs),"objectType"in m&&n(0,a=m.objectType)},t.$$.update=()=>{t.$$.dirty&32&&d&&d.focus()},[a,l,s,o,i,d,w,f,y]}class Ft extends Oe{constructor(e){super(),Pe(this,e,Sn,vn,Ee,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,s,o,i,a,d,f,w,y,m;const k=[Rn,Tn],h=[];function b(p,N){return p[6]?0:1}return d=b(t),f=h[d]=k[d](t),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=S(),a=u("div"),f.c(),c(e,"class","search-button-modal-overlay"),c(o,"type","button"),c(o,"class","close"),c(o,"data-dismiss","modal"),c(o,"aria-label","Close"),c(s,"class","modal-header"),c(a,"class","modal-body"),c(l,"class","modal search-button-modal")},m(p,N){M(p,e,N),M(p,n,N),M(p,l,N),r(l,s),r(s,o),r(l,i),r(l,a),h[d].m(a,null),t[12](l),w=!0,y||(m=[J(e,"click",t[8]),Me(He.call(null,e,"body")),J(o,"click",t[8]),Me(He.call(null,l,"body"))],y=!0)},p(p,N){let P=d;d=b(p),d===P?h[d].p(p,N):(We(),se(h[P],1,1,()=>{h[P]=null}),Ve(),f=h[d],f?f.p(p,N):(f=h[d]=k[d](p),f.c()),Z(f,1),f.m(a,null))},i(p){w||(Z(f),w=!0)},o(p){se(f),w=!1},d(p){p&&(I(e),I(n),I(l)),h[d].d(),t[12](null),y=!1,he(m)}}}function Tn(t){let e,n;return e=new Ft({props:{blogId:t[3],magicToken:t[4],contentTypes:t[1],objectType:t[2],searchTabs:t[5]}}),{c(){Ae(e.$$.fragment)},m(l,s){Ce(e,l,s),n=!0},p(l,s){const o={};s&8&&(o.blogId=l[3]),s&16&&(o.magicToken=l[4]),s&2&&(o.contentTypes=l[1]),s&4&&(o.objectType=l[2]),s&32&&(o.searchTabs=l[5]),e.$set(o)},i(l){n||(Z(e.$$.fragment,l),n=!0)},o(l){se(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function Rn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){M(n,e,l)},p:X,i:X,o:X,d(n){n&&I(e)}}}function Nn(t){let e,n,l,s,o,i=t[0]&&Jt(t);return{c(){e=S(),i&&i.c(),n=Fe()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=J(document.body,"click",t[9]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&Z(i,1)):(i=Jt(a),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(We(),se(i,1,1,()=>{i=null}),Ve())},i(a){l||(Z(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(I(e),I(n)),i&&i.d(a),s=!1,o()}}}function Cn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:i=!1}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:f}=e,w=!1,y=!1;const m=()=>{n(0,i=!1)};let k=null;const h=p=>{const N=p.target;i&&ot([a,k],N)&&m()};Rt(async()=>{f&&d.find(p=>p.key===f)||n(2,f=d[0].key)});function b(p){Re[p?"unshift":"push"](()=>{k=p,n(7,k)})}return t.$$set=p=>{"blogId"in p&&n(3,l=p.blogId),"magicToken"in p&&n(4,s=p.magicToken),"contentTypes"in p&&n(1,o=p.contentTypes),"open"in p&&n(0,i=p.open),"anchorRef"in p&&n(10,a=p.anchorRef),"searchTabs"in p&&n(5,d=p.searchTabs),"objectType"in p&&n(2,f=p.objectType)},t.$$.update=()=>{t.$$.dirty&3161&&a&&(i?(a.classList.add("open"),!w&&!y&&(n(6,y=!0),Mt({blogId:l,magicToken:s}).then(p=>{n(1,o=p.contentTypes.filter(N=>N.can_search===1)),n(11,w=!0),n(6,y=!1)}).catch(p=>{console.error("Failed to fetch content types:",p),n(6,y=!1)}))):a.classList.remove("open")),t.$$.dirty&1},[i,o,f,l,s,d,y,k,m,h,a,w,b]}class Ln extends Oe{constructor(e){super(),Pe(this,e,Cn,Nn,Ee,{blogId:3,magicToken:4,contentTypes:1,open:0,anchorRef:10,searchTabs:5,objectType:2})}}function In(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new Ln({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const at=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:En}=Yt;function Dt(t,e,n){const l=t.slice();return l[46]=e[n],l}function Wt(t){let e,n,l,s,o,i,a,d,f,w=window.trans("[_1]Site",t[4].toString())+"",y,m,k,h,b,p,N,P,E,L,D,W,C,j,T,q,H,z,A,ne,le,V,R,U,O,ce,ue,$,oe,ge,ee,Te,ae,te,B,fe,re,G,_,g,v,Q,x,K,_e,ze,we,pt,Ie,Xe,mt,Ge,ht,Ke,xe,Be,de,pe,me,$e,bt;K=new Qe({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const gt=[jn,Mn],ke=[];function yt(F,ie){return F[2]?0:1}return de=yt(t),pe=ke[de]=gt[de](t),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("div"),i=u("div"),a=u("div"),d=u("span"),f=Y("("),y=Y(w),m=Y(")"),k=S(),h=u("p"),h.textContent=`${window.trans("Site List")}`,b=S(),p=u("div"),N=u("button"),N.innerHTML='<span aria-hidden="true">\xD7</span>',P=S(),E=u("div"),L=u("div"),D=u("button"),W=Y("<<"),j=S(),T=u("button"),q=Y("<"),z=S(),A=u("span"),ne=u("span"),le=Y(t[5]),V=Y("/"),R=Y(t[6]),U=S(),O=u("button"),ce=Y(">"),$=S(),oe=u("button"),ge=Y(">>"),Te=S(),ae=u("div"),te=u("div"),B=u("select"),fe=u("option"),fe.textContent=`${window.trans("Parent Sites")}`,re=u("option"),re.textContent=`${window.trans("Parent and child sites")}`,G=u("option"),G.textContent=`${window.trans("Only child sites")}`,_=S(),g=u("div"),v=u("input"),Q=S(),x=u("button"),Ae(K.$$.fragment),_e=S(),ze=u("div"),we=u("button"),we.innerHTML='<span aria-hidden="true">\xD7</span>',pt=S(),Ie=u("div"),Xe=u("span"),Xe.textContent=`${window.trans("Site Name")}`,mt=S(),Ge=u("span"),Ge.textContent=`${window.trans("Parent Site")}`,ht=S(),Ke=u("div"),xe=u("table"),Be=u("tbody"),pe.c(),c(e,"class","site-list-button-modal-overlay"),c(N,"type","button"),c(N,"class","close"),c(N,"data-dismiss","modal"),c(N,"aria-label","Close"),c(p,"class","d-block d-md-none"),c(a,"class","site-list-title"),c(D,"type","button"),D.disabled=C=t[5]<=1,c(T,"type","button"),T.disabled=H=t[5]<=1,c(ne,"class","current"),c(A,"class","page-num"),c(O,"type","button"),O.disabled=ue=t[5]===t[6],c(oe,"type","button"),oe.disabled=ee=t[5]===t[6],c(L,"class","prev-next"),fe.__value="parent_sites",be(fe,fe.__value),re.__value="parent_and_child_sites",be(re,re.__value),G.__value="child_sites_only",be(G,G.__value),c(B,"class","custom-select form-control form-select"),t[7]===void 0&&Ye(()=>t[29].call(B)),c(te,"class","site-type-filter"),c(v,"type","text"),c(v,"placeholder",window.trans("Filter by site name")),c(g,"class","site-name-filter"),c(ae,"class","site-filter-actions"),c(we,"type","button"),c(we,"class","close"),c(we,"data-dismiss","modal"),c(we,"aria-label","Close"),c(ze,"class","d-none d-md-block"),c(E,"class","site-list-actions"),c(i,"class","site-list-header"),c(Xe,"class","table-header-col site-list-header-name"),c(Ge,"class","table-header-col site-list-header-parent"),c(Ie,"class","site-list-table-header"),c(Ke,"class","site-list-table-wrapper"),c(o,"class","site-list-container"),c(s,"class","modal-body"),c(l,"class","modal site-list-button-modal")},m(F,ie){M(F,e,ie),M(F,n,ie),M(F,l,ie),r(l,s),r(s,o),r(o,i),r(i,a),r(a,d),r(d,f),r(d,y),r(d,m),r(a,k),r(a,h),r(a,b),r(a,p),r(p,N),r(i,P),r(i,E),r(E,L),r(L,D),r(D,W),r(L,j),r(L,T),r(T,q),r(L,z),r(L,A),r(A,ne),r(ne,le),r(A,V),r(A,R),r(L,U),r(L,O),r(O,ce),r(L,$),r(L,oe),r(oe,ge),r(E,Te),r(E,ae),r(ae,te),r(te,B),r(B,fe),r(B,re),r(B,G),St(B,t[7],!0),r(ae,_),r(ae,g),r(g,v),be(v,t[8]),r(g,Q),r(g,x),Ce(K,x,null),r(E,_e),r(E,ze),r(ze,we),r(o,pt),r(o,Ie),r(Ie,Xe),r(Ie,mt),r(Ie,Ge),r(o,ht),r(o,Ke),r(Ke,xe),r(xe,Be),ke[de].m(Be,null),t[36](Be),t[37](l),me=!0,$e||(bt=[J(e,"click",t[11]),Me(He.call(null,e,"body")),J(N,"click",t[11]),J(D,"click",t[15]),J(D,"keydown",t[25]),J(T,"click",t[14]),J(T,"keydown",t[26]),J(O,"click",t[12]),J(O,"keydown",t[27]),J(oe,"click",t[13]),J(oe,"keydown",t[28]),J(B,"change",t[29]),J(B,"change",t[16]),J(v,"input",t[30]),J(v,"keydown",t[31]),J(x,"click",t[16]),J(we,"click",t[11]),Me(He.call(null,l,"body"))],$e=!0)},p(F,ie){(!me||ie[0]&16)&&w!==(w=window.trans("[_1]Site",F[4].toString())+"")&&ve(y,w),(!me||ie[0]&32&&C!==(C=F[5]<=1))&&(D.disabled=C),(!me||ie[0]&32&&H!==(H=F[5]<=1))&&(T.disabled=H),(!me||ie[0]&32)&&ve(le,F[5]),(!me||ie[0]&64)&&ve(R,F[6]),(!me||ie[0]&96&&ue!==(ue=F[5]===F[6]))&&(O.disabled=ue),(!me||ie[0]&96&&ee!==(ee=F[5]===F[6]))&&(oe.disabled=ee),ie[0]&128&&St(B,F[7]),ie[0]&256&&v.value!==F[8]&&be(v,F[8]);let et=de;de=yt(F),de===et?ke[de].p(F,ie):(We(),se(ke[et],1,1,()=>{ke[et]=null}),Ve(),pe=ke[de],pe?pe.p(F,ie):(pe=ke[de]=gt[de](F),pe.c()),Z(pe,1),pe.m(Be,null))},i(F){me||(Z(K.$$.fragment,F),Z(pe),me=!0)},o(F){se(K.$$.fragment,F),se(pe),me=!1},d(F){F&&(I(e),I(n),I(l)),Le(K),ke[de].d(),t[36](null),t[37](null),$e=!1,he(bt)}}}function Mn(t){let e=[],n=new Map,l,s,o=Se(t[1]);const i=a=>a[46].id;for(let a=0;a<o.length;a+=1){let d=Dt(t,o,a),f=i(d);n.set(f,e[a]=Qt(f,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Fe()},m(a,d){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,d);M(a,l,d),s=!0},p(a,d){d[0]&393226&&(o=Se(a[1]),We(),e=sn(e,d,i,1,a,o,n,l.parentNode,ln,Qt,l,Dt),Ve())},i(a){if(!s){for(let d=0;d<o.length;d+=1)Z(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)se(e[d]);s=!1},d(a){a&&I(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function jn(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,c(n,"colspan","2"),c(n,"class","loading")},m(l,s){M(l,e,s),r(e,n)},p:X,i:X,o:X,d(l){l&&I(e)}}}function Un(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,c(e,"class","badge badge-child-site")},m(n,l){M(n,e,l)},p:X,d(n){n&&I(e)}}}function qn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,c(e,"class","badge badge-site")},m(n,l){M(n,e,l)},p:X,d(n){n&&I(e)}}}function An(t){let e,n,l,s;function o(...i){return t[33](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&I(e),l=!1,s()}}}function Pn(t){let e,n,l,s;function o(...i){return t[32](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&I(e),l=!1,s()}}}function Vt(t){let e,n=t[46].parentSiteName+"";return{c(){e=u("span"),c(e,"class","d-block d-md-none parent-site")},m(l,s){M(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[46].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&I(e)}}}function On(t){let e,n,l,s;function o(...i){return t[35](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&I(e),l=!1,s()}}}function Hn(t){let e,n,l,s;function o(...i){return t[34](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&I(e),l=!1,s()}}}function Qt(t,e){let n,l,s,o,i,a,d,f,w,y,m,k,h=e[46].name+"",b,p,N,P,E,L,D,W,C,j,T,q=e[46].parentSiteName+"",H,z,A,ne,le,V,R,U,O,ce,ue,$;function oe(_,g){return _[46].parentSiteName==="-"?qn:Un}let ge=oe(e),ee=ge(e);function Te(_,g){return g[0]&10&&(a=null),a==null&&(a=!!_[3].includes(Number(_[46].id))),a?Pn:An}let ae=Te(e,[-1,-1]),te=ae(e);w=new Qe({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let B=e[46].parentSiteName!=="-"&&Vt(e);W=new Qe({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function fe(_,g){return g[0]&10&&(ne=null),ne==null&&(ne=!!_[3].includes(Number(_[46].id))),ne?Hn:On}let re=fe(e,[-1,-1]),G=re(e);return R=new Qe({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),s=u("span"),ee.c(),o=S(),i=u("span"),te.c(),d=S(),f=u("span"),Ae(w.$$.fragment),m=S(),k=u("a"),b=Y(h),N=S(),B&&B.c(),P=S(),E=u("a"),L=u("span"),L.textContent=`${window.trans("View your site.")}`,D=S(),Ae(W.$$.fragment),j=S(),T=u("td"),H=S(),z=u("td"),A=u("span"),G.c(),le=S(),V=u("span"),Ae(R.$$.fragment),O=S(),c(f,"class","site-list-table-sortable-handle"),c(f,"style",y=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(i,"class","site-list-table-action-buttons-mobile"),c(s,"class","site-list-table-bagde-container"),c(k,"href",p=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`),c(k,"class","dashboard-link"),c(L,"class","d-inline-block d-md-none"),c(E,"href",C=e[46].siteUrl),c(E,"class","site-link"),c(E,"target","_blank"),c(T,"class","site-list-table-parent-site"),c(V,"class","site-list-table-sortable-handle"),c(V,"style",U=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(A,"class","site-list-table-action-buttons"),c(z,"class","site-list-table-action"),c(n,"data-site-id",ce=e[46].id),c(n,"data-is-starred",ue=e[3].includes(Number(e[46].id))||void 0),this.first=n},m(_,g){M(_,n,g),r(n,l),r(l,s),ee.m(s,null),r(s,o),r(s,i),te.m(i,null),r(i,d),r(i,f),Ce(w,f,null),r(l,m),r(l,k),r(k,b),r(l,N),B&&B.m(l,null),r(l,P),r(l,E),r(E,L),r(E,D),Ce(W,E,null),r(n,j),r(n,T),T.innerHTML=q,r(n,H),r(n,z),r(z,A),G.m(A,null),r(A,le),r(A,V),Ce(R,V,null),r(n,O),$=!0},p(_,g){e=_,ge===(ge=oe(e))&&ee?ee.p(e,g):(ee.d(1),ee=ge(e),ee&&(ee.c(),ee.m(s,o))),ae===(ae=Te(e,g))&&te?te.p(e,g):(te.d(1),te=ae(e),te&&(te.c(),te.m(i,d))),(!$||g[0]&10&&y!==(y=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(f,"style",y),(!$||g[0]&2)&&h!==(h=e[46].name+"")&&ve(b,h),(!$||g[0]&2&&p!==(p=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`))&&c(k,"href",p),e[46].parentSiteName!=="-"?B?B.p(e,g):(B=Vt(e),B.c(),B.m(l,P)):B&&(B.d(1),B=null),(!$||g[0]&2&&C!==(C=e[46].siteUrl))&&c(E,"href",C),(!$||g[0]&2)&&q!==(q=e[46].parentSiteName+"")&&(T.innerHTML=q),re===(re=fe(e,g))&&G?G.p(e,g):(G.d(1),G=re(e),G&&(G.c(),G.m(A,le))),(!$||g[0]&10&&U!==(U=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(V,"style",U),(!$||g[0]&2&&ce!==(ce=e[46].id))&&c(n,"data-site-id",ce),(!$||g[0]&10&&ue!==(ue=e[3].includes(Number(e[46].id))||void 0))&&c(n,"data-is-starred",ue)},i(_){$||(Z(w.$$.fragment,_),Z(W.$$.fragment,_),Z(R.$$.fragment,_),$=!0)},o(_){se(w.$$.fragment,_),se(W.$$.fragment,_),se(R.$$.fragment,_),$=!1},d(_){_&&I(n),ee.d(),te.d(),Le(w),B&&B.d(),Le(W),G.d(),Le(R)}}}function Bn(t){let e,n,l,s,o,i=t[0]&&Wt(t);return{c(){e=S(),i&&i.c(),n=Fe()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=J(En.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&Z(i,1)):(i=Wt(a),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(We(),se(i,1,1,()=>{i=null}),Ve())},i(a){l||(Z(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(I(e),I(n)),i&&i.d(a),s=!1,o()}}}function Fn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{anchorRef:i}=e,{initialStarredSites:a}=e,d=!1;const f=()=>{n(0,o=!1)};let w={},y=[],m=[],k=[],h=a,b=0,p=1,N=1,P="parent_and_child_sites",E="",L=[],D=!1,W=null;const C=()=>{n(5,p++,p),z()},j=()=>{n(5,p=N),z()},T=()=>{n(5,p--,p),z()},q=()=>{n(5,p=1),z()},H=()=>{y=[],m=h,L=[],P==="child_sites_only"?L=[{type:"parent_website",args:{value:""}}]:P==="parent_sites"&&(L=[{type:"parent_website",args:{value:"1"}}]),n(8,E=E.trim()),E!==""&&L.push({type:"name",args:{string:E,option:"contains"}}),n(5,p=1),z()},z=async()=>{if(n(2,D=!0),n(1,k=[]),y.length===0){const _=await at({magicToken:l,items:L,page:p,limit:s});n(4,b=_.count),n(6,N=_.pageMax),n(5,p=N!==0?_.page:0);const g=[];if(m.forEach(v=>{const Q=_.sites.findIndex(x=>Number(x.id)===v);if(Q!==-1)w[v]=_.sites[Q],_.sites.splice(Q,1);else{const x=w[v];if(!x)g.push(v);else{const K=x.parentSiteName.match(/^<a/);(P==="child_sites_only"&&!K||P==="parent_sites"&&K)&&(m=m.filter(_e=>_e!==v))}}}),y=[..._.sites],g.length>0){const v=await at({magicToken:l,items:[...L,{type:"pack",args:{op:"or",items:g.map(Q=>({type:"id",args:{value:Q,option:"equal"}}))}}],page:0,limit:200});g.forEach(Q=>{const x=v.sites.findIndex(K=>Number(K.id)===Q);x!==-1?w[Q]=v.sites[x]:(m=m.filter(K=>K!==Q),n(3,h=h.filter(K=>K!==Q)))})}for(let v=0;v<s&&v<m.length;v++)k.push(w[m[v]]);for(let v=0;v<y.length&&k.length<s;v++)k.push(y[v])}else{const _=m.length,g=(p-1)*s;for(let v=g;v<_&&k.length<s;v++)k.push(w[m[v]]);for(let v=Math.max(g-_,0);v<b-_&&k.length<s;v++){if(!y[v]){const Q=Math.floor(v/s),x=await at({magicToken:l,items:[...L,...m.map(_e=>({type:"id",args:{value:_e,option:"not_equal"}}))],page:Q+1,limit:s}),K=Q*s;for(let _e=0;_e<x.sites.length;_e++)y[K+_e]=x.sites[_e]}k.push(y[v])}}n(2,D=!1)},A=async _=>{const g=new FormData;return g.append("__mode","save_starred_sites"),g.append("magic_token",l),_.forEach(v=>{g.append("id",String(v))}),fetch(window.ScriptURI,{method:"POST",body:g,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(v=>v.json()).then(v=>{if(v.error)throw new Error(v.error)})},ne=_=>{const g=[...h];n(3,h=_),A(h).catch(v=>{alert(v.message),n(3,h=g)})},le=(_,g)=>{_.stopPropagation(),ne([...new Set([...h,Number(g.id)])])},V=(_,g)=>{_.stopPropagation();const v=Number(g.id);ne(h.filter(Q=>Q!==v))},R=_=>{const g=_.target;o&&ot([i,W],g)&&f()};let U=null;const O=async()=>{await It(),U&&jQuery(U).sortable({delay:100,distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,g){if(!U)return;const v=document.createElement("tr");v.classList.add("site-list-table-placeholder"),v.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",U.insertBefore(v,U.firstChild),g.placeholder.height(g.item.height())},stop(){var _;(_=U?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(!U)return;const _=[],g=[];U.querySelectorAll("tr[data-site-id]").forEach(Q=>{const x=Number(Q.dataset.siteId);Q.dataset.isStarred&&g.push(Number(x)),_.push(k.find(K=>Number(K.id)===x))}),n(1,k=_);const v=h.findIndex(Q=>g.includes(Q));n(3,h=[...h]),h.splice(v,g.length,...g),ne(h)}})},ce=_=>_.key==="Enter"&&q(),ue=_=>_.key==="Enter"&&T(),$=_=>_.key==="Enter"&&C(),oe=_=>_.key==="Enter"&&j();function ge(){P=$t(this),n(7,P)}function ee(){E=this.value,n(8,E)}const Te=_=>_.key==="Enter"&&H(),ae=(_,g)=>V(g,_),te=(_,g)=>le(g,_),B=(_,g)=>V(g,_),fe=(_,g)=>le(g,_);function re(_){Re[_?"unshift":"push"](()=>{U=_,n(10,U)})}function G(_){Re[_?"unshift":"push"](()=>{W=_,n(9,W)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,s=_.limit),"open"in _&&n(0,o=_.open),"anchorRef"in _&&n(22,i=_.anchorRef),"initialStarredSites"in _&&n(23,a=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&20971521&&i&&(o?(i.classList.add("open"),d||(n(24,d=!0),H())):i.classList.remove("open")),t.$$.dirty[0]&7&&k&&k.length>0&&o&&!D&&O()},[o,k,D,h,b,p,N,P,E,W,U,f,C,j,T,q,H,le,V,R,l,s,i,a,d,ce,ue,$,oe,ge,ee,Te,ae,te,B,fe,re,G]}class Jn extends Oe{constructor(e){super(),Pe(this,e,Fn,Bn,Ee,{magicToken:20,limit:21,open:0,anchorRef:22,initialStarredSites:23},null,[-1,-1])}}function Dn(t,e){const n=new Jn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Wn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}new Ft({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var rt,ct;const dt=document.querySelector('[data-is="primary-navigation-toggle"]');if(dt!==null){const t="collapsed",e=sessionStorage.getItem(t);bn(dt,{collapsed:e==="true",buttonRef:dt.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const ut=document.querySelector('[data-script="admin-ui"]');ut===null&&console.error("data-script='admin-ui' is not set");const ft=(rt=ut?.getAttribute("data-blog-id"))!==null&&rt!==void 0?rt:"",ye=(ct=ut?.getAttribute("data-magic-token"))!==null&&ct!==void 0?ct:"";ye===""&&console.error("data-magic-token is not set");const Vn="50",zt=document.querySelectorAll('[data-is="site-list-button"]');zt.length>0&&ye!==""&&zt.forEach(t=>{var e;Dn(t,{magicToken:ye,limit:Number.parseInt(Vn),open:!1,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const Xt=document.querySelectorAll('[data-is="create-button"]'),_t=document.querySelector('[data-is="search-button"]'),Qn=document.querySelector("div.mt-modal");Xt.length>0&&ye!==""&&Xt.forEach(t=>{_n({target:t,props:{blog_id:ft,magicToken:ye,contentTypes:[],open:!1,anchorRef:t,containerRef:Qn}})}),_t!==null&&ye!==""&&In(_t,{blogId:ft,magicToken:ye,contentTypes:[],open:!1,anchorRef:_t});const Gt=document.querySelector('[data-is="search-form"]');Gt!==null&&ye!==""&&Wn(Gt,{blogId:ft,magicToken:ye,contentTypes:[]});
