const Gt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function le(){}function kt(t){return t()}function St(){return Object.create(null)}function me(t){t.forEach(kt)}function nt(t){return typeof t=="function"}function Ee(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function Le(t){return t&&nt(t.destroy)?t.destroy:le}const Yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function it(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function S(){return z(" ")}function Be(){return z("")}function H(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Zt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xt(t){return Array.from(t.childNodes)}function we(t,e){e=""+e,t.data!==e&&(t.data=e)}function he(t,e){t.value=e??""}function Rt(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function $t(t){const e=t.querySelector(":checked");return e&&e.__value}function Nt(t,e,n){t.classList.toggle(e,!!n)}let Je;function Fe(t){Je=t}function en(){if(!Je)throw new Error("Function called outside component initialization");return Je}function st(t){en().$$.on_mount.push(t)}const Me=[],Se=[];let je=[];const Ct=[],It=Promise.resolve();let ot=!1;function Et(){ot||(ot=!0,It.then(Mt))}function Lt(){return Et(),It}function Xe(t){je.push(t)}const at=new Set;let Ue=0;function Mt(){if(Ue!==0)return;const t=Je;do{try{for(;Ue<Me.length;){const e=Me[Ue];Ue++,Fe(e),tn(e.$$)}}catch(e){throw Me.length=0,Ue=0,e}for(Fe(null),Me.length=0,Ue=0;Se.length;)Se.pop()();for(let e=0;e<je.length;e+=1){const n=je[e];at.has(n)||(at.add(n),n())}je.length=0}while(Me.length);for(;Ct.length;)Ct.pop()();ot=!1,at.clear(),Fe(t)}function tn(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xe)}}function nn(t){const e=[],n=[];je.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),je=e}const Ge=new Set;let Te;function Ke(){Te={r:0,c:[],p:Te}}function Ye(){Te.r||me(Te.c),Te=Te.p}function Z(t,e){t&&t.i&&(Ge.delete(t),t.i(e))}function se(t,e,n,l){if(t&&t.o){if(Ge.has(t))return;Ge.add(t),Te.c.push(()=>{Ge.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ve(t){return t?.length!==void 0?t:Array.from(t)}function ln(t,e){se(t,1,1,()=>{e.delete(t.key)})}function sn(t,e,n,l,s,o,i,a,d,p,v,y){let u=t.length,b=o.length,m=u;const T={};for(;m--;)T[t[m].key]=m;const A=[],j=new Map,B=new Map,R=[];for(m=b;m--;){const k=y(s,o,m),I=n(k);let N=i.get(I);N?R.push(()=>N.p(k,e)):(N=p(I,k),N.c()),j.set(I,A[m]=N),I in T&&B.set(I,Math.abs(m-T[I]))}const C=new Set,J=new Set;function F(k){Z(k,1),k.m(a,v),i.set(k.key,k),v=k.first,b--}for(;u&&b;){const k=A[b-1],I=t[u-1],N=k.key,Q=I.key;k===I?(v=k.first,u--,b--):j.has(Q)?!i.has(N)||C.has(N)?F(k):J.has(Q)?u--:B.get(N)>B.get(Q)?(J.add(N),F(k)):(C.add(Q),u--):(d(I,i),u--)}for(;u--;){const k=t[u];j.has(k.key)||d(k,i)}for(;b;)F(A[b-1]);return me(R),A}function qe(t){t&&t.c()}function Re(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Xe(()=>{const o=t.$$.on_mount.map(kt).filter(nt);t.$$.on_destroy?t.$$.on_destroy.push(...o):me(o),t.$$.on_mount=[]}),s.forEach(Xe)}function Ne(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function on(t,e){t.$$.dirty[0]===-1&&(Me.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ae(t,e,n,l,s,o,i=null,a=[-1]){const d=Je;Fe(t);const p=t.$$={fragment:null,ctx:[],props:o,update:le,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(p.root);let v=!1;if(p.ctx=n?n(t,e.props||{},(y,u,...b)=>{const m=b.length?b[0]:u;return p.ctx&&s(p.ctx[y],p.ctx[y]=m)&&(!p.skip_bound&&p.bound[y]&&p.bound[y](m),v&&on(t,y)),u}):[],p.update(),v=!0,me(p.before_update),p.fragment=l?l(p.ctx):!1,e.target){if(e.hydrate){const y=xt(e.target);p.fragment&&p.fragment.l(y),y.forEach(E)}else p.fragment&&p.fragment.c();e.intro&&Z(t.$$.fragment),Re(t,e.target,e.anchor),Mt()}Fe(d)}class Pe{$$=void 0;$$set=void 0;$destroy(){Ne(this,1),this.$destroy=le}$on(e,n){if(!nt(n))return le;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);function Oe(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Lt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function rt(t,e){return!t.some(n=>n&&n.contains(e))}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ut(t){let e,n,l,s,o,i,a,d,p,v,y,u=window.trans("New [_1] creation",window.trans("Entry"))+"",b,m,T,A,j,B=window.trans("New [_1] creation",window.trans("Page"))+"",R,C,J,F,k=t[1].length>0&&qt(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=f("div"),k&&k.c(),i=S(),a=f("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=S(),p=f("ul"),v=f("li"),y=f("a"),b=z(u),T=S(),A=f("li"),j=f("a"),R=z(B),c(l,"type","button"),c(l,"class","close"),c(l,"data-dismiss","modal"),c(l,"aria-label","Close"),c(n,"class","modal-header"),c(a,"class","block-title"),c(y,"href",m=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),c(j,"href",C=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),c(p,"class","create-button-list"),c(o,"class","modal-body"),c(e,"class","modal create-button-modal")},m(I,N){L(I,e,N),r(e,n),r(n,l),r(e,s),r(e,o),k&&k.m(o,null),r(o,i),r(o,a),r(o,d),r(o,p),r(p,v),r(v,y),r(y,b),r(p,T),r(p,A),r(A,j),r(j,R),t[8](e),J||(F=[H(l,"click",t[4]),Le(Oe.call(null,e,"body"))],J=!0)},p(I,N){I[1].length>0?k?k.p(I,N):(k=qt(I),k.c(),k.m(o,i)):k&&(k.d(1),k=null),N&4&&m!==(m=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${I[2]}`)&&c(y,"href",m),N&4&&C!==(C=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${I[2]}`)&&c(j,"href",C)},d(I){I&&E(e),k&&k.d(),t[8](null),J=!1,me(F)}}}function qt(t){let e,n,l,s=ve(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=At(jt(t,s,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=S(),l=f("ul");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","block-title"),c(l,"class","create-button-list")},m(i,a){L(i,e,a),L(i,n,a),L(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&6){s=ve(i[1]);let d;for(d=0;d<s.length;d+=1){const p=jt(i,s,d);o[d]?o[d].p(p,a):(o[d]=At(p),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(E(e),E(n),E(l)),lt(o,i)}}}function At(t){let e,n,l=window.trans("New [_1] creation",t[9].name)+"",s,o,i;return{c(){e=f("li"),n=f("a"),s=z(l),i=S(),c(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[9].id}&type=content_data_${t[9].id}&blog_id=${t[2]}`)},m(a,d){L(a,e,d),r(e,n),r(n,s),r(e,i)},p(a,d){d&2&&l!==(l=window.trans("New [_1] creation",a[9].name)+"")&&we(s,l),d&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[9].id}&type=content_data_${a[9].id}&blog_id=${a[2]}`)&&c(n,"href",o)},d(a){a&&E(e)}}}function rn(t){let e,n,l,s,o=t[0]&&Ut(t);return{c(){e=S(),o&&o.c(),n=Be()},m(i,a){L(i,e,a),o&&o.m(i,a),L(i,n,a),l||(s=H(document.body,"click",t[5]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=Ut(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:le,o:le,d(i){i&&(E(e),E(n)),o&&o.d(i),l=!1,s()}}}function cn(t,e,n){let{contentTypes:l=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{anchorRef:i=null}=e,{containerRef:a=null}=e,d=null;const p=()=>{n(0,o=!1)},v=u=>{if(a&&a.classList.contains("show"))return;const b=u.target;o&&rt([i,d],b)&&p()};function y(u){Se[u?"unshift":"push"](()=>{d=u,n(3,d),n(6,i),n(0,o)})}return t.$$set=u=>{"contentTypes"in u&&n(1,l=u.contentTypes),"blog_id"in u&&n(2,s=u.blog_id),"open"in u&&n(0,o=u.open),"anchorRef"in u&&n(6,i=u.anchorRef),"containerRef"in u&&n(7,a=u.containerRef)},t.$$.update=()=>{if(t.$$.dirty&73&&i){if(d){const u=i.getBoundingClientRect(),b=`calc(${u.bottom}px + 10px)`;n(3,d.style.top=b,d);const m=`calc(100vh - ${u.bottom}px - 10px - 20px)`;n(3,d.style.maxHeight=m,d)}o?i.classList.add("open"):i.classList.remove("open")}},[o,l,s,d,p,v,i,a,y]}class dn extends Pe{constructor(e){super(),Ae(this,e,cn,rn,Ee,{contentTypes:1,blog_id:2,open:0,anchorRef:6,containerRef:7})}}const un=({target:t,props:e})=>{const n=new dn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function fn(t){let e,n,l,s;return{c(){e=f("div"),c(e,"class","mt-primaryNavigation-overlay"),c(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){L(o,e,i),l||(s=[Le(Oe.call(null,e,"body")),H(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&c(e,"style",n)},i:le,o:le,d(o){o&&E(e),l=!1,me(s)}}}function _n(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(u,b)=>{const m=document.querySelector('[data-is="content-wrapper"]');b?m.classList.add(u):m.classList.remove(u)},d=()=>{a("collapsed",s)},p=()=>{a("mouseover",i)},v=()=>{var u;s&&(i=!0,p(),(u=document.querySelector('[data-is="primary-navigation"]'))===null||u===void 0||u.addEventListener("mouseleave",y,{once:!0}))},y=()=>{i=!1,p()};return st(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=u=>{"buttonRef"in u&&n(2,l=u.buttonRef),"collapsed"in u&&n(0,s=u.collapsed),"isStored"in u&&n(3,o=u.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,p(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed"),document.body.dataset.isCollapsed="true"):(l.classList.remove("collapsed"),l.classList.add("expanded"),document.body.dataset.isCollapsed="false")))},[s,v,l,o]}class pn extends Pe{constructor(e){super(),Ae(this,e,_n,fn,Ee,{buttonRef:2,collapsed:0,isStored:3})}}function mn(t,e){const n=new pn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Pt(t){let e,n;return{c(){e=it("title"),n=z(t[2])},m(l,s){L(l,e,s),r(e,n)},p(l,s){s&4&&we(n,l[2])},d(l){l&&E(e)}}}function hn(t){let e,n,l=t[2]&&Pt(t);return{c(){e=it("svg"),l&&l.c(),n=it("use"),Tt(n,"xlink:href",t[1]),c(e,"role","img"),c(e,"class",t[0]),c(e,"style",t[3])},m(s,o){L(s,e,o),l&&l.m(e,null),r(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=Pt(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&Tt(n,"xlink:href",s[1]),o&1&&c(e,"class",s[0]),o&8&&c(e,"style",s[3])},i:le,o:le,d(s){s&&E(e),l&&l.d()}}}function bn(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class De extends Pe{constructor(e){super(),Ae(this,e,bn,hn,Ee,{class:0,href:1,title:2,style:3})}}function Ot(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ht(t,e,n){const l=t.slice();return l[12]=e[n],l}function Bt(t){let e,n,l,s=!1,o,i,a,d=t[12].label+"",p,v,y,u,b;return y=Zt(t[7][0]),{c(){e=f("label"),n=f("input"),a=S(),p=z(d),v=S(),c(n,"type","radio"),c(n,"name","type"),n.__value=l=t[12].key,he(n,n.__value),c(n,"id",o=t[12].key),n.checked=i=t[0]===t[12].key,y.p(n)},m(m,T){L(m,e,T),r(e,n),n.checked=n.__value===t[0],r(e,a),r(e,p),r(e,v),u||(b=H(n,"change",t[6]),u=!0)},p(m,T){T&16&&l!==(l=m[12].key)&&(n.__value=l,he(n,n.__value),s=!0),T&16&&o!==(o=m[12].key)&&c(n,"id",o),T&17&&i!==(i=m[0]===m[12].key)&&(n.checked=i),(s||T&17)&&(n.checked=n.__value===m[0]),T&16&&d!==(d=m[12].label+"")&&we(p,d)},d(m){m&&E(e),y.r(),u=!1,b()}}}function gn(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",he(e,e.__value)},m(n,l){L(n,e,l)},p:le,d(n){n&&E(e)}}}function yn(t){let e,n=ve(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Jt(Ot(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Be()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);L(s,e,o)},p(s,o){if(o&8){n=ve(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Ot(s,n,i);l[i]?l[i].p(a,o):(l[i]=Jt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&E(e),lt(l,s)}}}function Jt(t){let e,n=t[9].name+"",l,s;return{c(){e=f("option"),l=z(n),e.__value=s=t[9].id,he(e,e.__value)},m(o,i){L(o,e,i),r(e,l)},p(o,i){i&8&&n!==(n=o[9].name+"")&&we(l,n),i&8&&s!==(s=o[9].id)&&(e.__value=s,he(e,e.__value))},d(o){o&&E(e)}}}function wn(t){let e,n,l,s,o,i,a,d,p,v,y,u,b,m,T,A,j,B,R,C,J,F,k,I,N,Q,D,x=ve(t[4]),M=[];for(let w=0;w<x.length;w+=1)M[w]=Bt(Ht(t,x,w));function $(w,V){return w[3].length>0?yn:gn}let ee=$(t),W=ee(t);return I=new De({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("form"),n=f("input"),l=S(),s=f("input"),o=S(),i=f("input"),a=S(),d=f("input"),p=S(),v=f("input"),y=S(),u=f("div");for(let w=0;w<M.length;w+=1)M[w].c();b=S(),m=f("div"),T=f("select"),W.c(),j=S(),B=f("div"),R=f("div"),C=f("input"),J=S(),F=f("div"),k=f("button"),qe(I.$$.fragment),N=S(),Q=f("span"),Q.textContent=`${window.trans("Search")}`,c(n,"type","hidden"),c(n,"name","__mode"),n.value="search_replace",c(s,"type","hidden"),c(s,"name","blog_id"),s.value=t[1],c(i,"type","hidden"),c(i,"name","_type"),i.value=t[0],c(d,"type","hidden"),c(d,"name","do_search"),d.value="1",c(v,"type","hidden"),c(v,"name","magic_token"),v.value=t[2],c(u,"class","search-type"),c(T,"class","custom-select form-control form-select"),c(T,"name","content_type_id"),T.disabled=A=t[0]!=="content_data"||t[3].length===0,Nt(T,"disabled",t[0]!=="content_data"),c(m,"class","search-content-type"),c(C,"type","text"),c(C,"placeholder",window.trans("Select target and search text...")),c(C,"name","search"),c(R,"class","search-text-box"),c(k,"type","submit"),c(k,"class","btn btn-primary"),c(F,"class","submit-button"),c(B,"class","search-input-group"),c(e,"class","mt-search-form"),c(e,"method","post"),c(e,"action",window.ScriptURI)},m(w,V){L(w,e,V),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(e,a),r(e,d),r(e,p),r(e,v),r(e,y),r(e,u);for(let U=0;U<M.length;U+=1)M[U]&&M[U].m(u,null);r(e,b),r(e,m),r(m,T),W.m(T,null),r(e,j),r(e,B),r(B,R),r(R,C),t[8](C),r(B,J),r(B,F),r(F,k),Re(I,k,null),r(k,N),r(k,Q),D=!0},p(w,[V]){if((!D||V&2)&&(s.value=w[1]),(!D||V&1)&&(i.value=w[0]),(!D||V&4)&&(v.value=w[2]),V&17){x=ve(w[4]);let U;for(U=0;U<x.length;U+=1){const ce=Ht(w,x,U);M[U]?M[U].p(ce,V):(M[U]=Bt(ce),M[U].c(),M[U].m(u,null))}for(;U<M.length;U+=1)M[U].d(1);M.length=x.length}ee===(ee=$(w))&&W?W.p(w,V):(W.d(1),W=ee(w),W&&(W.c(),W.m(T,null))),(!D||V&9&&A!==(A=w[0]!=="content_data"||w[3].length===0))&&(T.disabled=A),(!D||V&1)&&Nt(T,"disabled",w[0]!=="content_data")},i(w){D||(Z(I.$$.fragment,w),D=!0)},o(w){se(I.$$.fragment,w),D=!1},d(w){w&&E(e),lt(M,w),W.d(),t[8](null),Ne(I)}}}function vn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,d=null;const p=[[]];function v(){a=this.__value,n(0,a)}function y(u){Se[u?"unshift":"push"](()=>{d=u,n(5,d)})}return t.$$set=u=>{"blogId"in u&&n(1,l=u.blogId),"magicToken"in u&&n(2,s=u.magicToken),"contentTypes"in u&&n(3,o=u.contentTypes),"searchTabs"in u&&n(4,i=u.searchTabs),"objectType"in u&&n(0,a=u.objectType)},t.$$.update=()=>{t.$$.dirty&32&&d&&d.focus()},[a,l,s,o,i,d,v,p,y]}class Ft extends Pe{constructor(e){super(),Ae(this,e,vn,wn,Ee,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Dt(t){let e,n,l,s,o,i,a,d,p,v,y;return d=new Ft({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=f("div"),n=S(),l=f("div"),s=f("div"),o=f("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=S(),a=f("div"),qe(d.$$.fragment),c(e,"class","search-button-modal-overlay"),c(o,"type","button"),c(o,"class","close"),c(o,"data-dismiss","modal"),c(o,"aria-label","Close"),c(s,"class","modal-header"),c(a,"class","modal-body"),c(l,"class","modal search-button-modal")},m(u,b){L(u,e,b),L(u,n,b),L(u,l,b),r(l,s),r(s,o),r(l,i),r(l,a),Re(d,a,null),t[10](l),p=!0,v||(y=[H(e,"click",t[7]),Le(Oe.call(null,e,"body")),H(o,"click",t[7]),Le(Oe.call(null,l,"body"))],v=!0)},p(u,b){const m={};b&4&&(m.blogId=u[2]),b&8&&(m.magicToken=u[3]),b&16&&(m.contentTypes=u[4]),b&2&&(m.objectType=u[1]),b&32&&(m.searchTabs=u[5]),d.$set(m)},i(u){p||(Z(d.$$.fragment,u),p=!0)},o(u){se(d.$$.fragment,u),p=!1},d(u){u&&(E(e),E(n),E(l)),Ne(d),t[10](null),v=!1,me(y)}}}function kn(t){let e,n,l,s,o,i=t[0]&&Dt(t);return{c(){e=S(),i&&i.c(),n=Be()},m(a,d){L(a,e,d),i&&i.m(a,d),L(a,n,d),l=!0,s||(o=H(document.body,"click",t[8]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&Z(i,1)):(i=Dt(a),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(Ke(),se(i,1,1,()=>{i=null}),Ye())},i(a){l||(Z(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(E(e),E(n)),i&&i.d(a),s=!1,o()}}}function Sn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:i=!1}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:p}=e;const v=()=>{n(0,i=!1)};let y=null;const u=m=>{const T=m.target;i&&rt([a,y],T)&&v()};st(async()=>{p&&d.find(m=>m.key===p)||n(1,p=d[0].key)});function b(m){Se[m?"unshift":"push"](()=>{y=m,n(6,y)})}return t.$$set=m=>{"blogId"in m&&n(2,l=m.blogId),"magicToken"in m&&n(3,s=m.magicToken),"contentTypes"in m&&n(4,o=m.contentTypes),"open"in m&&n(0,i=m.open),"anchorRef"in m&&n(9,a=m.anchorRef),"searchTabs"in m&&n(5,d=m.searchTabs),"objectType"in m&&n(1,p=m.objectType)},t.$$.update=()=>{t.$$.dirty&513&&a&&(i?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty&1},[i,p,l,s,o,d,y,v,u,a,b]}class Tn extends Pe{constructor(e){super(),Ae(this,e,Sn,kn,Ee,{blogId:2,magicToken:3,contentTypes:4,open:0,anchorRef:9,searchTabs:5,objectType:1})}}function Rn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new Tn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const ct=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:Nn}=Yt;function Wt(t,e,n){const l=t.slice();return l[45]=e[n],l}function Vt(t){let e,n,l,s,o,i,a,d,p,v=window.trans("[_1]Site",t[3].toString())+"",y,u,b,m,T,A,j,B,R,C,J,F,k,I,N,Q,D,x,M,$,ee,W,w,V,U,ce,ue,X,oe,be,G,ke,ae,K,P,fe,re,_,g,h,q,te,Y,ie,mt,We,ge,ht,Ie,Ve,bt,Qe,gt,ze,$e,He,de,_e,pe,et,yt;ie=new De({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const wt=[In,Cn],ye=[];function vt(O,ne){return O[8]?0:1}return de=vt(t),_e=ye[de]=wt[de](t),{c(){e=f("div"),n=S(),l=f("div"),s=f("div"),o=f("div"),i=f("div"),a=f("div"),d=f("span"),p=z("("),y=z(v),u=z(")"),b=S(),m=f("p"),m.textContent=`${window.trans("Site List")}`,T=S(),A=f("div"),j=f("button"),j.innerHTML='<span aria-hidden="true">\xD7</span>',B=S(),R=f("div"),C=f("div"),J=f("button"),F=z("<<"),I=S(),N=f("button"),Q=z("<"),x=S(),M=f("span"),$=f("span"),ee=z(t[4]),W=z("/"),w=z(t[5]),V=S(),U=f("button"),ce=z(">"),X=S(),oe=f("button"),be=z(">>"),ke=S(),ae=f("div"),K=f("div"),P=f("select"),fe=f("option"),fe.textContent=`${window.trans("Parent Sites")}`,re=f("option"),re.textContent=`${window.trans("Parent and child sites")}`,_=f("option"),_.textContent=`${window.trans("Only child sites")}`,g=S(),h=f("div"),q=f("input"),te=S(),Y=f("button"),qe(ie.$$.fragment),mt=S(),We=f("div"),ge=f("button"),ge.innerHTML='<span aria-hidden="true">\xD7</span>',ht=S(),Ie=f("div"),Ve=f("span"),Ve.textContent=`${window.trans("Site Name")}`,bt=S(),Qe=f("span"),Qe.textContent=`${window.trans("Parent Site")}`,gt=S(),ze=f("div"),$e=f("table"),He=f("tbody"),_e.c(),c(e,"class","site-list-button-modal-overlay"),c(j,"type","button"),c(j,"class","close"),c(j,"data-dismiss","modal"),c(j,"aria-label","Close"),c(A,"class","d-block d-md-none"),c(a,"class","site-list-title"),c(J,"type","button"),J.disabled=k=t[4]<=1,c(N,"type","button"),N.disabled=D=t[4]<=1,c($,"class","current"),c(M,"class","page-num"),c(U,"type","button"),U.disabled=ue=t[4]===t[5],c(oe,"type","button"),oe.disabled=G=t[4]===t[5],c(C,"class","prev-next"),fe.__value="parent_sites",he(fe,fe.__value),re.__value="parent_and_child_sites",he(re,re.__value),_.__value="child_sites_only",he(_,_.__value),c(P,"class","custom-select form-control form-select"),t[6]===void 0&&Xe(()=>t[28].call(P)),c(K,"class","site-type-filter"),c(q,"type","text"),c(q,"placeholder",window.trans("Filter by site name")),c(h,"class","site-name-filter"),c(ae,"class","site-filter-actions"),c(ge,"type","button"),c(ge,"class","close"),c(ge,"data-dismiss","modal"),c(ge,"aria-label","Close"),c(We,"class","d-none d-md-block"),c(R,"class","site-list-actions"),c(i,"class","site-list-header"),c(Ve,"class","table-header-col site-list-header-name"),c(Qe,"class","table-header-col site-list-header-parent"),c(Ie,"class","site-list-table-header"),c(ze,"class","site-list-table-wrapper"),c(o,"class","site-list-container"),c(s,"class","modal-body"),c(l,"class","modal site-list-button-modal")},m(O,ne){L(O,e,ne),L(O,n,ne),L(O,l,ne),r(l,s),r(s,o),r(o,i),r(i,a),r(a,d),r(d,p),r(d,y),r(d,u),r(a,b),r(a,m),r(a,T),r(a,A),r(A,j),r(i,B),r(i,R),r(R,C),r(C,J),r(J,F),r(C,I),r(C,N),r(N,Q),r(C,x),r(C,M),r(M,$),r($,ee),r(M,W),r(M,w),r(C,V),r(C,U),r(U,ce),r(C,X),r(C,oe),r(oe,be),r(R,ke),r(R,ae),r(ae,K),r(K,P),r(P,fe),r(P,re),r(P,_),Rt(P,t[6],!0),r(ae,g),r(ae,h),r(h,q),he(q,t[7]),r(h,te),r(h,Y),Re(ie,Y,null),r(R,mt),r(R,We),r(We,ge),r(o,ht),r(o,Ie),r(Ie,Ve),r(Ie,bt),r(Ie,Qe),r(o,gt),r(o,ze),r(ze,$e),r($e,He),ye[de].m(He,null),t[35](He),t[36](l),pe=!0,et||(yt=[H(e,"click",t[11]),Le(Oe.call(null,e,"body")),H(j,"click",t[11]),H(J,"click",t[15]),H(J,"keydown",t[24]),H(N,"click",t[14]),H(N,"keydown",t[25]),H(U,"click",t[12]),H(U,"keydown",t[26]),H(oe,"click",t[13]),H(oe,"keydown",t[27]),H(P,"change",t[28]),H(P,"change",t[16]),H(q,"input",t[29]),H(q,"keydown",t[30]),H(Y,"click",t[16]),H(ge,"click",t[11]),Le(Oe.call(null,l,"body"))],et=!0)},p(O,ne){(!pe||ne[0]&8)&&v!==(v=window.trans("[_1]Site",O[3].toString())+"")&&we(y,v),(!pe||ne[0]&16&&k!==(k=O[4]<=1))&&(J.disabled=k),(!pe||ne[0]&16&&D!==(D=O[4]<=1))&&(N.disabled=D),(!pe||ne[0]&16)&&we(ee,O[4]),(!pe||ne[0]&32)&&we(w,O[5]),(!pe||ne[0]&48&&ue!==(ue=O[4]===O[5]))&&(U.disabled=ue),(!pe||ne[0]&48&&G!==(G=O[4]===O[5]))&&(oe.disabled=G),ne[0]&64&&Rt(P,O[6]),ne[0]&128&&q.value!==O[7]&&he(q,O[7]);let tt=de;de=vt(O),de===tt?ye[de].p(O,ne):(Ke(),se(ye[tt],1,1,()=>{ye[tt]=null}),Ye(),_e=ye[de],_e?_e.p(O,ne):(_e=ye[de]=wt[de](O),_e.c()),Z(_e,1),_e.m(He,null))},i(O){pe||(Z(ie.$$.fragment,O),Z(_e),pe=!0)},o(O){se(ie.$$.fragment,O),se(_e),pe=!1},d(O){O&&(E(e),E(n),E(l)),Ne(ie),ye[de].d(),t[35](null),t[36](null),et=!1,me(yt)}}}function Cn(t){let e=[],n=new Map,l,s,o=ve(t[1]);const i=a=>a[45].id;for(let a=0;a<o.length;a+=1){let d=Wt(t,o,a),p=i(d);n.set(p,e[a]=zt(p,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Be()},m(a,d){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(a,d);L(a,l,d),s=!0},p(a,d){d[0]&393222&&(o=ve(a[1]),Ke(),e=sn(e,d,i,1,a,o,n,l.parentNode,ln,zt,l,Wt),Ye())},i(a){if(!s){for(let d=0;d<o.length;d+=1)Z(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)se(e[d]);s=!1},d(a){a&&E(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function In(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,c(n,"colspan","2"),c(n,"class","loading")},m(l,s){L(l,e,s),r(e,n)},p:le,i:le,o:le,d(l){l&&E(e)}}}function En(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Child Site")}`,c(e,"class","badge badge-child-site")},m(n,l){L(n,e,l)},p:le,d(n){n&&E(e)}}}function Ln(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Site")}`,c(e,"class","badge badge-site")},m(n,l){L(n,e,l)},p:le,d(n){n&&E(e)}}}function Mn(t){let e,n,l,s;function o(...i){return t[32](t[45],...i)}return{c(){e=f("button"),n=f("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){L(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,s()}}}function jn(t){let e,n,l,s;function o(...i){return t[31](t[45],...i)}return{c(){e=f("button"),n=f("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){L(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,s()}}}function Qt(t){let e,n=t[45].parentSiteName+"";return{c(){e=f("span"),c(e,"class","d-block d-md-none parent-site")},m(l,s){L(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[45].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&E(e)}}}function Un(t){let e,n,l,s;function o(...i){return t[34](t[45],...i)}return{c(){e=f("button"),n=f("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){L(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,s()}}}function qn(t){let e,n,l,s;function o(...i){return t[33](t[45],...i)}return{c(){e=f("button"),n=f("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){L(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,s()}}}function zt(t,e){let n,l,s,o,i,a,d,p,v,y,u,b,m=e[45].name+"",T,A,j,B,R,C,J,F,k,I,N,Q=e[45].parentSiteName+"",D,x,M,$,ee,W,w,V,U,ce,ue,X;function oe(g,h){return g[45].parentSiteName==="-"?Ln:En}let be=oe(e),G=be(e);function ke(g,h){return h[0]&6&&(a=null),a==null&&(a=!!g[2].includes(Number(g[45].id))),a?jn:Mn}let ae=ke(e,[-1,-1]),K=ae(e);v=new De({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let P=e[45].parentSiteName!=="-"&&Qt(e);F=new De({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function fe(g,h){return h[0]&6&&($=null),$==null&&($=!!g[2].includes(Number(g[45].id))),$?qn:Un}let re=fe(e,[-1,-1]),_=re(e);return w=new De({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=f("tr"),l=f("td"),s=f("span"),G.c(),o=S(),i=f("span"),K.c(),d=S(),p=f("span"),qe(v.$$.fragment),u=S(),b=f("a"),T=z(m),j=S(),P&&P.c(),B=S(),R=f("a"),C=f("span"),C.textContent=`${window.trans("View your site.")}`,J=S(),qe(F.$$.fragment),I=S(),N=f("td"),D=S(),x=f("td"),M=f("span"),_.c(),ee=S(),W=f("span"),qe(w.$$.fragment),U=S(),c(p,"class","site-list-table-sortable-handle"),c(p,"style",y=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"),c(i,"class","site-list-table-action-buttons-mobile"),c(s,"class","site-list-table-bagde-container"),c(b,"href",A=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[45].id}`),c(b,"class","dashboard-link"),c(C,"class","d-inline-block d-md-none"),c(R,"href",k=e[45].siteUrl),c(R,"class","site-link"),c(R,"target","_blank"),c(N,"class","site-list-table-parent-site"),c(W,"class","site-list-table-sortable-handle"),c(W,"style",V=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"),c(M,"class","site-list-table-action-buttons"),c(x,"class","site-list-table-action"),c(n,"data-site-id",ce=e[45].id),c(n,"data-is-starred",ue=e[2].includes(Number(e[45].id))||void 0),this.first=n},m(g,h){L(g,n,h),r(n,l),r(l,s),G.m(s,null),r(s,o),r(s,i),K.m(i,null),r(i,d),r(i,p),Re(v,p,null),r(l,u),r(l,b),r(b,T),r(l,j),P&&P.m(l,null),r(l,B),r(l,R),r(R,C),r(R,J),Re(F,R,null),r(n,I),r(n,N),N.innerHTML=Q,r(n,D),r(n,x),r(x,M),_.m(M,null),r(M,ee),r(M,W),Re(w,W,null),r(n,U),X=!0},p(g,h){e=g,be===(be=oe(e))&&G?G.p(e,h):(G.d(1),G=be(e),G&&(G.c(),G.m(s,o))),ae===(ae=ke(e,h))&&K?K.p(e,h):(K.d(1),K=ae(e),K&&(K.c(),K.m(i,d))),(!X||h[0]&6&&y!==(y=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"))&&c(p,"style",y),(!X||h[0]&2)&&m!==(m=e[45].name+"")&&we(T,m),(!X||h[0]&2&&A!==(A=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[45].id}`))&&c(b,"href",A),e[45].parentSiteName!=="-"?P?P.p(e,h):(P=Qt(e),P.c(),P.m(l,B)):P&&(P.d(1),P=null),(!X||h[0]&2&&k!==(k=e[45].siteUrl))&&c(R,"href",k),(!X||h[0]&2)&&Q!==(Q=e[45].parentSiteName+"")&&(N.innerHTML=Q),re===(re=fe(e,h))&&_?_.p(e,h):(_.d(1),_=re(e),_&&(_.c(),_.m(M,ee))),(!X||h[0]&6&&V!==(V=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"))&&c(W,"style",V),(!X||h[0]&2&&ce!==(ce=e[45].id))&&c(n,"data-site-id",ce),(!X||h[0]&6&&ue!==(ue=e[2].includes(Number(e[45].id))||void 0))&&c(n,"data-is-starred",ue)},i(g){X||(Z(v.$$.fragment,g),Z(F.$$.fragment,g),Z(w.$$.fragment,g),X=!0)},o(g){se(v.$$.fragment,g),se(F.$$.fragment,g),se(w.$$.fragment,g),X=!1},d(g){g&&E(n),G.d(),K.d(),Ne(v),P&&P.d(),Ne(F),_.d(),Ne(w)}}}function An(t){let e,n,l,s,o,i=t[0]&&Vt(t);return{c(){e=S(),i&&i.c(),n=Be()},m(a,d){L(a,e,d),i&&i.m(a,d),L(a,n,d),l=!0,s||(o=H(Nn.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&Z(i,1)):(i=Vt(a),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(Ke(),se(i,1,1,()=>{i=null}),Ye())},i(a){l||(Z(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(E(e),E(n)),i&&i.d(a),s=!1,o()}}}function Pn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{anchorRef:i}=e,{initialStarredSites:a}=e;const d=()=>{n(0,o=!1)};let p={},v=[],y=[],u=[],b=a,m=0,T=1,A=1,j="parent_and_child_sites",B="",R=[],C=!1,J=null;const F=()=>{n(4,T++,T),D()},k=()=>{n(4,T=A),D()},I=()=>{n(4,T--,T),D()},N=()=>{n(4,T=1),D()},Q=()=>{v=[],y=b,R=[],j==="child_sites_only"?R=[{type:"parent_website",args:{value:""}}]:j==="parent_sites"&&(R=[{type:"parent_website",args:{value:"1"}}]),n(7,B=B.trim()),B!==""&&R.push({type:"name",args:{string:B,option:"contains"}}),n(4,T=1),D()},D=async()=>{if(n(8,C=!0),n(1,u=[]),v.length===0){const _=await ct({magicToken:l,items:R,page:T,limit:s});n(3,m=_.count),n(5,A=_.pageMax),n(4,T=A!==0?_.page:0);const g=[];if(y.forEach(h=>{const q=_.sites.findIndex(te=>Number(te.id)===h);if(q!==-1)p[h]=_.sites[q],_.sites.splice(q,1);else{const te=p[h];if(!te)g.push(h);else{const Y=te.parentSiteName.match(/^<a/);(j==="child_sites_only"&&!Y||j==="parent_sites"&&Y)&&(y=y.filter(ie=>ie!==h))}}}),v=[..._.sites],g.length>0){const h=await ct({magicToken:l,items:[...R,{type:"pack",args:{op:"or",items:g.map(q=>({type:"id",args:{value:q,option:"equal"}}))}}],page:0,limit:200});g.forEach(q=>{const te=h.sites.findIndex(Y=>Number(Y.id)===q);te!==-1?p[q]=h.sites[te]:(y=y.filter(Y=>Y!==q),n(2,b=b.filter(Y=>Y!==q)))})}for(let h=0;h<s&&h<y.length;h++)u.push(p[y[h]]);for(let h=0;h<v.length&&u.length<s;h++)u.push(v[h])}else{const _=y.length,g=(T-1)*s;for(let h=g;h<_&&u.length<s;h++)u.push(p[y[h]]);for(let h=Math.max(g-_,0);h<m-_&&u.length<s;h++){if(!v[h]){const q=Math.floor(h/s),te=await ct({magicToken:l,items:[...R,...y.map(ie=>({type:"id",args:{value:ie,option:"not_equal"}}))],page:q+1,limit:s}),Y=q*s;for(let ie=0;ie<te.sites.length;ie++)v[Y+ie]=te.sites[ie]}u.push(v[h])}}n(8,C=!1)},x=async _=>{const g=new FormData;return g.append("__mode","save_starred_sites"),g.append("magic_token",l),_.forEach(h=>{g.append("id",String(h))}),fetch(window.ScriptURI,{method:"POST",body:g,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(h=>h.json()).then(h=>{if(h.error)throw new Error(h.error)})},M=_=>{const g=[...b];n(2,b=_),x(b).catch(h=>{alert(h.message),n(2,b=g)})},$=(_,g)=>{_.stopPropagation(),M([...new Set([...b,Number(g.id)])])},ee=(_,g)=>{_.stopPropagation();const h=Number(g.id);M(b.filter(q=>q!==h))},W=_=>{const g=_.target;o&&rt([i,J],g)&&d()};st(async()=>{Q()});let w=null;const V=async()=>{await Lt(),w&&jQuery(w).sortable({delay:100,distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,g){if(!w)return;const h=document.createElement("tr");h.classList.add("site-list-table-placeholder"),h.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",w.insertBefore(h,w.firstChild),g.placeholder.height(g.item.height())},stop(){var _;(_=w?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(!w)return;const _=[],g=[];w.querySelectorAll("tr[data-site-id]").forEach(q=>{const te=Number(q.dataset.siteId);q.dataset.isStarred&&g.push(Number(te)),_.push(u.find(Y=>Number(Y.id)===te))}),n(1,u=_);const h=b.findIndex(q=>g.includes(q));n(2,b=[...b]),b.splice(h,g.length,...g),M(b)}})},U=_=>_.key==="Enter"&&N(),ce=_=>_.key==="Enter"&&I(),ue=_=>_.key==="Enter"&&F(),X=_=>_.key==="Enter"&&k();function oe(){j=$t(this),n(6,j)}function be(){B=this.value,n(7,B)}const G=_=>_.key==="Enter"&&Q(),ke=(_,g)=>ee(g,_),ae=(_,g)=>$(g,_),K=(_,g)=>ee(g,_),P=(_,g)=>$(g,_);function fe(_){Se[_?"unshift":"push"](()=>{w=_,n(10,w)})}function re(_){Se[_?"unshift":"push"](()=>{J=_,n(9,J)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,s=_.limit),"open"in _&&n(0,o=_.open),"anchorRef"in _&&n(22,i=_.anchorRef),"initialStarredSites"in _&&n(23,a=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&4194305&&i&&(o?i.classList.add("open"):i.classList.remove("open")),t.$$.dirty[0]&3&&u&&u.length>0&&o&&V()},[o,u,b,m,T,A,j,B,C,J,w,d,F,k,I,N,Q,$,ee,W,l,s,i,a,U,ce,ue,X,oe,be,G,ke,ae,K,P,fe,re]}class On extends Pe{constructor(e){super(),Ae(this,e,Pn,An,Ee,{magicToken:20,limit:21,open:0,anchorRef:22,initialStarredSites:23},null,[-1,-1])}}function Hn(t,e){const n=new On({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Bn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}new Ft({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var dt,ut;const ft=document.querySelector('[data-is="primary-navigation-toggle"]');if(ft!==null){const t="collapsed",e=sessionStorage.getItem(t);mn(ft,{collapsed:e==="true",buttonRef:ft.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const _t=document.querySelector('[data-script="admin-ui"]');_t===null&&console.error("data-script='admin-ui' is not set");const Ze=(dt=_t?.getAttribute("data-blog-id"))!==null&&dt!==void 0?dt:"",Ce=(ut=_t?.getAttribute("data-magic-token"))!==null&&ut!==void 0?ut:"";Ce===""&&console.error("data-magic-token is not set");const Jn="50",Xt=document.querySelectorAll('[data-is="site-list-button"]');Xt.length>0&&Ce!==""&&Xt.forEach(t=>{var e;Hn(t,{magicToken:Ce,limit:Number.parseInt(Jn),open:!1,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const pt=document.querySelectorAll('[data-is="create-button"]'),xe=document.querySelector('[data-is="search-button"]'),Fn=document.querySelector("div.mt-modal");(pt.length>0||xe!==null)&&Ce!==""&&(Gt({blogId:Ze,magicToken:Ce}).then(t=>{pt.length>0&&pt.forEach(n=>{un({target:n,props:{blog_id:Ze,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,anchorRef:n,containerRef:Fn}})}),xe!==null&&Rn(xe,{blogId:Ze,magicToken:Ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1),open:!1,anchorRef:xe});const e=document.querySelector('[data-is="search-form"]');e!==null&&Bn(e,{blogId:Ze,magicToken:Ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})}),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(function(t){new bootstrap.Tooltip(t)}));
