function z(){}function kt(t){return t()}function vt(){return Object.create(null)}function me(t){t.forEach(kt)}function et(t){return typeof t=="function"}function Ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function Ee(t){return t&&et(t.destroy)?t.destroy:z}const Yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function nt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t){return document.createTextNode(t)}function T(){return X(" ")}function Be(){return X("")}function J(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function St(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Zt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xt(t){return Array.from(t.childNodes)}function ke(t,e){e=""+e,t.data!==e&&(t.data=e)}function he(t,e){t.value=e??""}function Tt(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function $t(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Fe;function Je(t){Fe=t}function en(){if(!Fe)throw new Error("Function called outside component initialization");return Fe}function lt(t){en().$$.on_mount.push(t)}const Me=[],Te=[];let je=[];const Nt=[],Ct=Promise.resolve();let it=!1;function Lt(){it||(it=!0,Ct.then(Et))}function It(){return Lt(),Ct}function Ke(t){je.push(t)}const st=new Set;let Ue=0;function Et(){if(Ue!==0)return;const t=Fe;do{try{for(;Ue<Me.length;){const e=Me[Ue];Ue++,Je(e),tn(e.$$)}}catch(e){throw Me.length=0,Ue=0,e}for(Je(null),Me.length=0,Ue=0;Te.length;)Te.pop()();for(let e=0;e<je.length;e+=1){const n=je[e];st.has(n)||(st.add(n),n())}je.length=0}while(Me.length);for(;Nt.length;)Nt.pop()();it=!1,st.clear(),Je(t)}function tn(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}function nn(t){const e=[],n=[];je.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),je=e}const Ye=new Set;let Re;function De(){Re={r:0,c:[],p:Re}}function We(){Re.r||me(Re.c),Re=Re.p}function G(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function ie(t,e,n,l){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),Re.c.push(()=>{Ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ve(t){return t?.length!==void 0?t:Array.from(t)}function ln(t,e){ie(t,1,1,()=>{e.delete(t.key)})}function sn(t,e,n,l,s,o,i,a,d,f,k,g){let p=t.length,v=o.length,y=p;const h={};for(;y--;)h[t[y].key]=y;const m=[],R=new Map,A=new Map,I=[];for(y=v;y--;){const C=g(s,o,y),U=n(C);let N=i.get(U);N?I.push(()=>N.p(C,e)):(N=f(U,C),N.c()),R.set(U,m[y]=N),U in h&&A.set(U,Math.abs(y-h[U]))}const M=new Set,D=new Set;function W(C){G(C,1),C.m(a,k),i.set(C.key,C),k=C.first,v--}for(;p&&v;){const C=m[v-1],U=t[p-1],N=C.key,q=U.key;C===U?(k=C.first,p--,v--):R.has(q)?!i.has(N)||M.has(N)?W(C):D.has(q)?p--:A.get(N)>A.get(q)?(D.add(N),W(C)):(M.add(q),p--):(d(U,i),p--)}for(;p--;){const C=t[p];R.has(C.key)||d(C,i)}for(;v;)W(m[v-1]);return me(I),m}function qe(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Ke(()=>{const o=t.$$.on_mount.map(kt).filter(et);t.$$.on_destroy?t.$$.on_destroy.push(...o):me(o),t.$$.on_mount=[]}),s.forEach(Ke)}function Ce(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function on(t,e){t.$$.dirty[0]===-1&&(Me.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ae(t,e,n,l,s,o,i=null,a=[-1]){const d=Fe;Je(t);const f=t.$$={fragment:null,ctx:[],props:o,update:z,not_equal:s,bound:vt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:vt(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(f.root);let k=!1;if(f.ctx=n?n(t,e.props||{},(g,p,...v)=>{const y=v.length?v[0]:p;return f.ctx&&s(f.ctx[g],f.ctx[g]=y)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](y),k&&on(t,g)),p}):[],f.update(),k=!0,me(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const g=xt(e.target);f.fragment&&f.fragment.l(g),g.forEach(L)}else f.fragment&&f.fragment.c();e.intro&&G(t.$$.fragment),Ne(t,e.target,e.anchor),Et()}Je(d)}class Pe{$$=void 0;$$set=void 0;$destroy(){Ce(this,1),this.$destroy=z}$on(e,n){if(!et(n))return z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);function Oe(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await It(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function ot(t,e){return!t.some(n=>n&&n.contains(e))}const Mt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function jt(t,e,n){const l=t.slice();return l[12]=e[n],l}function Ut(t){let e,n,l,s,o,i,a,d,f,k,g,p=window.trans("New [_1] creation",window.trans("Entry"))+"",v,y,h,m,R,A=window.trans("New [_1] creation",window.trans("Page"))+"",I,M,D,W;function C(q,O){if(q[4])return cn;if(q[1].length>0)return rn}let U=C(t),N=U&&U(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=T(),o=u("div"),N&&N.c(),i=T(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=T(),f=u("ul"),k=u("li"),g=u("a"),v=X(p),h=T(),m=u("li"),R=u("a"),I=X(A),c(l,"type","button"),c(l,"class","close"),c(l,"data-dismiss","modal"),c(l,"aria-label","Close"),c(n,"class","modal-header"),c(a,"class","block-title"),c(g,"href",y=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),c(R,"href",M=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),c(f,"class","create-button-list"),c(o,"class","modal-body"),c(e,"class","modal create-button-modal")},m(q,O){E(q,e,O),r(e,n),r(n,l),r(e,s),r(e,o),N&&N.m(o,null),r(o,i),r(o,a),r(o,d),r(o,f),r(f,k),r(k,g),r(g,v),r(f,h),r(f,m),r(m,R),r(R,I),t[11](e),D||(W=[J(l,"click",t[5]),Ee(Oe.call(null,e,"body"))],D=!0)},p(q,O){U===(U=C(q))&&N?N.p(q,O):(N&&N.d(1),N=U&&U(q),N&&(N.c(),N.m(o,i))),O&4&&y!==(y=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${q[2]}`)&&c(g,"href",y),O&4&&M!==(M=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${q[2]}`)&&c(R,"href",M)},d(q){q&&L(e),N&&N.d(),t[11](null),D=!1,me(W)}}}function rn(t){let e,n,l,s=ve(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=qt(jt(t,s,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=T(),l=u("ul");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","block-title"),c(l,"class","create-button-list")},m(i,a){E(i,e,a),E(i,n,a),E(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&6){s=ve(i[1]);let d;for(d=0;d<s.length;d+=1){const f=jt(i,s,d);o[d]?o[d].p(f,a):(o[d]=qt(f),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(L(e),L(n),L(l)),tt(o,i)}}}function cn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){E(n,e,l)},p:z,d(n){n&&L(e)}}}function qt(t){let e,n,l=window.trans("New [_1] creation",t[12].name)+"",s,o,i;return{c(){e=u("li"),n=u("a"),s=X(l),i=T(),c(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[12].id}&type=content_data_${t[12].id}&blog_id=${t[2]}`)},m(a,d){E(a,e,d),r(e,n),r(n,s),r(e,i)},p(a,d){d&2&&l!==(l=window.trans("New [_1] creation",a[12].name)+"")&&ke(s,l),d&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[12].id}&type=content_data_${a[12].id}&blog_id=${a[2]}`)&&c(n,"href",o)},d(a){a&&L(e)}}}function dn(t){let e,n,l,s,o=t[0]&&Ut(t);return{c(){e=T(),o&&o.c(),n=Be()},m(i,a){E(i,e,a),o&&o.m(i,a),E(i,n,a),l||(s=J(document.body,"click",t[6]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=Ut(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:z,o:z,d(i){i&&(L(e),L(n)),o&&o.d(i),l=!1,s()}}}function un(t,e,n){let{contentTypes:l=[]}=e,{blog_id:s}=e,{magicToken:o}=e,{open:i=!1}=e,{anchorRef:a=null}=e,{containerRef:d=null}=e,f=null,k=!1,g=!1;const p=()=>{n(0,i=!1)},v=h=>{if(d&&d.classList.contains("show"))return;const m=h.target;i&&ot([a,f],m)&&p()};function y(h){Te[h?"unshift":"push"](()=>{f=h,n(3,f),n(8,a),n(0,i),n(10,k),n(4,g),n(2,s),n(7,o)})}return t.$$set=h=>{"contentTypes"in h&&n(1,l=h.contentTypes),"blog_id"in h&&n(2,s=h.blog_id),"magicToken"in h&&n(7,o=h.magicToken),"open"in h&&n(0,i=h.open),"anchorRef"in h&&n(8,a=h.anchorRef),"containerRef"in h&&n(9,d=h.containerRef)},t.$$.update=()=>{if(t.$$.dirty&1437&&a){if(f){const h=a.getBoundingClientRect(),m=`calc(${h.bottom}px + 10px)`;n(3,f.style.top=m,f);const R=`calc(100vh - ${h.bottom}px - 10px - 20px)`;n(3,f.style.maxHeight=R,f)}i?(a.classList.add("open"),!k&&!g&&(n(4,g=!0),Mt({blogId:s,magicToken:o}).then(h=>{n(1,l=h.contentTypes.filter(m=>m.can_create===1)),n(10,k=!0),n(4,g=!1)}).catch(h=>{console.error("Failed to fetch content types:",h),n(4,g=!1)}))):a.classList.remove("open")}},[i,l,s,f,g,p,v,o,a,d,k,y]}class fn extends Pe{constructor(e){super(),Ae(this,e,un,dn,Ie,{contentTypes:1,blog_id:2,magicToken:7,open:0,anchorRef:8,containerRef:9})}}const _n=({target:t,props:e})=>{const n=new fn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function pn(t){let e,n,l,s;return{c(){e=u("div"),c(e,"class","mt-primaryNavigation-overlay"),c(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){E(o,e,i),l||(s=[Ee(Oe.call(null,e,"body")),J(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&c(e,"style",n)},i:z,o:z,d(o){o&&L(e),l=!1,me(s)}}}function mn(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(p,v)=>{const y=document.querySelector('[data-is="content-wrapper"]');v?y.classList.add(p):y.classList.remove(p)},d=()=>{a("collapsed",s)},f=()=>{a("mouseover",i)},k=()=>{var p;s&&(i=!0,f(),(p=document.querySelector('[data-is="primary-navigation"]'))===null||p===void 0||p.addEventListener("mouseleave",g,{once:!0}))},g=()=>{i=!1,f()};return lt(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=p=>{"buttonRef"in p&&n(2,l=p.buttonRef),"collapsed"in p&&n(0,s=p.collapsed),"isStored"in p&&n(3,o=p.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,f(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed"),document.body.dataset.isCollapsed="true"):(l.classList.remove("collapsed"),l.classList.add("expanded"),document.body.dataset.isCollapsed="false")))},[s,k,l,o]}class hn extends Pe{constructor(e){super(),Ae(this,e,mn,pn,Ie,{buttonRef:2,collapsed:0,isStored:3})}}function bn(t,e){const n=new hn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function At(t){let e,n;return{c(){e=nt("title"),n=X(t[2])},m(l,s){E(l,e,s),r(e,n)},p(l,s){s&4&&ke(n,l[2])},d(l){l&&L(e)}}}function gn(t){let e,n,l=t[2]&&At(t);return{c(){e=nt("svg"),l&&l.c(),n=nt("use"),St(n,"xlink:href",t[1]),c(e,"role","img"),c(e,"class",t[0]),c(e,"style",t[3])},m(s,o){E(s,e,o),l&&l.m(e,null),r(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=At(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&St(n,"xlink:href",s[1]),o&1&&c(e,"class",s[0]),o&8&&c(e,"style",s[3])},i:z,o:z,d(s){s&&L(e),l&&l.d()}}}function yn(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class Ve extends Pe{constructor(e){super(),Ae(this,e,yn,gn,Ie,{class:0,href:1,title:2,style:3})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ot(t,e,n){const l=t.slice();return l[12]=e[n],l}function Ht(t){let e,n,l,s=!1,o,i,a,d=t[12].label+"",f,k,g,p,v;return g=Zt(t[7][0]),{c(){e=u("label"),n=u("input"),a=T(),f=X(d),k=T(),c(n,"type","radio"),c(n,"name","type"),n.__value=l=t[12].key,he(n,n.__value),c(n,"id",o=t[12].key),n.checked=i=t[0]===t[12].key,g.p(n)},m(y,h){E(y,e,h),r(e,n),n.checked=n.__value===t[0],r(e,a),r(e,f),r(e,k),p||(v=J(n,"change",t[6]),p=!0)},p(y,h){h&16&&l!==(l=y[12].key)&&(n.__value=l,he(n,n.__value),s=!0),h&16&&o!==(o=y[12].key)&&c(n,"id",o),h&17&&i!==(i=y[0]===y[12].key)&&(n.checked=i),(s||h&17)&&(n.checked=n.__value===y[0]),h&16&&d!==(d=y[12].label+"")&&ke(f,d)},d(y){y&&L(e),g.r(),p=!1,v()}}}function wn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",he(e,e.__value)},m(n,l){E(n,e,l)},p:z,d(n){n&&L(e)}}}function kn(t){let e,n=ve(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Bt(Pt(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Be()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);E(s,e,o)},p(s,o){if(o&8){n=ve(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Pt(s,n,i);l[i]?l[i].p(a,o):(l[i]=Bt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&L(e),tt(l,s)}}}function Bt(t){let e,n=t[9].name+"",l,s;return{c(){e=u("option"),l=X(n),e.__value=s=t[9].id,he(e,e.__value)},m(o,i){E(o,e,i),r(e,l)},p(o,i){i&8&&n!==(n=o[9].name+"")&&ke(l,n),i&8&&s!==(s=o[9].id)&&(e.__value=s,he(e,e.__value))},d(o){o&&L(e)}}}function vn(t){let e,n,l,s,o,i,a,d,f,k,g,p,v,y,h,m,R,A,I,M,D,W,C,U,N,q,O,$=ve(t[4]),j=[];for(let S=0;S<$.length;S+=1)j[S]=Ht(Ot(t,$,S));function ee(S,Q){return S[3].length>0?kn:wn}let te=ee(t),V=te(t);return U=new Ve({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("form"),n=u("input"),l=T(),s=u("input"),o=T(),i=u("input"),a=T(),d=u("input"),f=T(),k=u("input"),g=T(),p=u("div");for(let S=0;S<j.length;S+=1)j[S].c();v=T(),y=u("div"),h=u("select"),V.c(),R=T(),A=u("div"),I=u("div"),M=u("input"),D=T(),W=u("div"),C=u("button"),qe(U.$$.fragment),N=T(),q=u("span"),q.textContent=`${window.trans("Search")}`,c(n,"type","hidden"),c(n,"name","__mode"),n.value="search_replace",c(s,"type","hidden"),c(s,"name","blog_id"),s.value=t[1],c(i,"type","hidden"),c(i,"name","_type"),i.value=t[0],c(d,"type","hidden"),c(d,"name","do_search"),d.value="1",c(k,"type","hidden"),c(k,"name","magic_token"),k.value=t[2],c(p,"class","search-type"),c(h,"class","custom-select form-control form-select"),c(h,"name","content_type_id"),h.disabled=m=t[0]!=="content_data"||t[3].length===0,Rt(h,"disabled",t[0]!=="content_data"),c(y,"class","search-content-type"),c(M,"type","text"),c(M,"placeholder",window.trans("Select target and search text...")),c(M,"name","search"),c(I,"class","search-text-box"),c(C,"type","submit"),c(C,"class","btn btn-primary"),c(W,"class","submit-button"),c(A,"class","search-input-group"),c(e,"class","mt-search-form"),c(e,"method","post"),c(e,"action",window.ScriptURI)},m(S,Q){E(S,e,Q),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(e,a),r(e,d),r(e,f),r(e,k),r(e,g),r(e,p);for(let P=0;P<j.length;P+=1)j[P]&&j[P].m(p,null);r(e,v),r(e,y),r(y,h),V.m(h,null),r(e,R),r(e,A),r(A,I),r(I,M),t[8](M),r(A,D),r(A,W),r(W,C),Ne(U,C,null),r(C,N),r(C,q),O=!0},p(S,[Q]){if((!O||Q&2)&&(s.value=S[1]),(!O||Q&1)&&(i.value=S[0]),(!O||Q&4)&&(k.value=S[2]),Q&17){$=ve(S[4]);let P;for(P=0;P<$.length;P+=1){const ce=Ot(S,$,P);j[P]?j[P].p(ce,Q):(j[P]=Ht(ce),j[P].c(),j[P].m(p,null))}for(;P<j.length;P+=1)j[P].d(1);j.length=$.length}te===(te=ee(S))&&V?V.p(S,Q):(V.d(1),V=te(S),V&&(V.c(),V.m(h,null))),(!O||Q&9&&m!==(m=S[0]!=="content_data"||S[3].length===0))&&(h.disabled=m),(!O||Q&1)&&Rt(h,"disabled",S[0]!=="content_data")},i(S){O||(G(U.$$.fragment,S),O=!0)},o(S){ie(U.$$.fragment,S),O=!1},d(S){S&&L(e),tt(j,S),V.d(),t[8](null),Ce(U)}}}function Sn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,d=null;const f=[[]];function k(){a=this.__value,n(0,a)}function g(p){Te[p?"unshift":"push"](()=>{d=p,n(5,d)})}return t.$$set=p=>{"blogId"in p&&n(1,l=p.blogId),"magicToken"in p&&n(2,s=p.magicToken),"contentTypes"in p&&n(3,o=p.contentTypes),"searchTabs"in p&&n(4,i=p.searchTabs),"objectType"in p&&n(0,a=p.objectType)},t.$$.update=()=>{t.$$.dirty&32&&d&&d.focus()},[a,l,s,o,i,d,k,f,g]}class Ft extends Pe{constructor(e){super(),Ae(this,e,Sn,vn,Ie,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,s,o,i,a,d,f,k,g,p;const v=[Rn,Tn],y=[];function h(m,R){return m[6]?0:1}return d=h(t),f=y[d]=v[d](t),{c(){e=u("div"),n=T(),l=u("div"),s=u("div"),o=u("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=T(),a=u("div"),f.c(),c(e,"class","search-button-modal-overlay"),c(o,"type","button"),c(o,"class","close"),c(o,"data-dismiss","modal"),c(o,"aria-label","Close"),c(s,"class","modal-header"),c(a,"class","modal-body"),c(l,"class","modal search-button-modal")},m(m,R){E(m,e,R),E(m,n,R),E(m,l,R),r(l,s),r(s,o),r(l,i),r(l,a),y[d].m(a,null),t[12](l),k=!0,g||(p=[J(e,"click",t[8]),Ee(Oe.call(null,e,"body")),J(o,"click",t[8]),Ee(Oe.call(null,l,"body"))],g=!0)},p(m,R){let A=d;d=h(m),d===A?y[d].p(m,R):(De(),ie(y[A],1,1,()=>{y[A]=null}),We(),f=y[d],f?f.p(m,R):(f=y[d]=v[d](m),f.c()),G(f,1),f.m(a,null))},i(m){k||(G(f),k=!0)},o(m){ie(f),k=!1},d(m){m&&(L(e),L(n),L(l)),y[d].d(),t[12](null),g=!1,me(p)}}}function Tn(t){let e,n;return e=new Ft({props:{blogId:t[3],magicToken:t[4],contentTypes:t[1],objectType:t[2],searchTabs:t[5]}}),{c(){qe(e.$$.fragment)},m(l,s){Ne(e,l,s),n=!0},p(l,s){const o={};s&8&&(o.blogId=l[3]),s&16&&(o.magicToken=l[4]),s&2&&(o.contentTypes=l[1]),s&4&&(o.objectType=l[2]),s&32&&(o.searchTabs=l[5]),e.$set(o)},i(l){n||(G(e.$$.fragment,l),n=!0)},o(l){ie(e.$$.fragment,l),n=!1},d(l){Ce(e,l)}}}function Rn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){E(n,e,l)},p:z,i:z,o:z,d(n){n&&L(e)}}}function Nn(t){let e,n,l,s,o,i=t[0]&&Jt(t);return{c(){e=T(),i&&i.c(),n=Be()},m(a,d){E(a,e,d),i&&i.m(a,d),E(a,n,d),l=!0,s||(o=J(document.body,"click",t[9]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&G(i,1)):(i=Jt(a),i.c(),G(i,1),i.m(n.parentNode,n)):i&&(De(),ie(i,1,1,()=>{i=null}),We())},i(a){l||(G(i),l=!0)},o(a){ie(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Cn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:i=!1}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:f}=e,k=!1,g=!1;const p=()=>{n(0,i=!1)};let v=null;const y=m=>{const R=m.target;i&&ot([a,v],R)&&p()};lt(async()=>{f&&d.find(m=>m.key===f)||n(2,f=d[0].key)});function h(m){Te[m?"unshift":"push"](()=>{v=m,n(7,v)})}return t.$$set=m=>{"blogId"in m&&n(3,l=m.blogId),"magicToken"in m&&n(4,s=m.magicToken),"contentTypes"in m&&n(1,o=m.contentTypes),"open"in m&&n(0,i=m.open),"anchorRef"in m&&n(10,a=m.anchorRef),"searchTabs"in m&&n(5,d=m.searchTabs),"objectType"in m&&n(2,f=m.objectType)},t.$$.update=()=>{t.$$.dirty&3161&&a&&(i?(a.classList.add("open"),!k&&!g&&(n(6,g=!0),Mt({blogId:l,magicToken:s}).then(m=>{n(1,o=m.contentTypes.filter(R=>R.can_search===1)),n(11,k=!0),n(6,g=!1)}).catch(m=>{console.error("Failed to fetch content types:",m),n(6,g=!1)}))):a.classList.remove("open")),t.$$.dirty&1},[i,o,f,l,s,d,g,v,p,y,a,k,h]}class Ln extends Pe{constructor(e){super(),Ae(this,e,Cn,Nn,Ie,{blogId:3,magicToken:4,contentTypes:1,open:0,anchorRef:10,searchTabs:5,objectType:2})}}function In(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new Ln({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const at=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:En}=Yt;function Dt(t,e,n){const l=t.slice();return l[45]=e[n],l}function Wt(t){let e,n,l,s,o,i,a,d,f,k=window.trans("[_1]Site",t[3].toString())+"",g,p,v,y,h,m,R,A,I,M,D,W,C,U,N,q,O,$,j,ee,te,V,S,Q,P,ce,ue,K,oe,be,Y,Se,ae,Z,B,fe,re,_,w,b,H,ne,x,se,pt,Qe,ye,mt,Le,ze,ht,Xe,bt,Ge,Ze,He,de,_e,pe,xe,gt;se=new Ve({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[jn,Mn],we=[];function wt(F,le){return F[8]?0:1}return de=wt(t),_e=we[de]=yt[de](t),{c(){e=u("div"),n=T(),l=u("div"),s=u("div"),o=u("div"),i=u("div"),a=u("div"),d=u("span"),f=X("("),g=X(k),p=X(")"),v=T(),y=u("p"),y.textContent=`${window.trans("Site List")}`,h=T(),m=u("div"),R=u("button"),R.innerHTML='<span aria-hidden="true">\xD7</span>',A=T(),I=u("div"),M=u("div"),D=u("button"),W=X("<<"),U=T(),N=u("button"),q=X("<"),$=T(),j=u("span"),ee=u("span"),te=X(t[4]),V=X("/"),S=X(t[5]),Q=T(),P=u("button"),ce=X(">"),K=T(),oe=u("button"),be=X(">>"),Se=T(),ae=u("div"),Z=u("div"),B=u("select"),fe=u("option"),fe.textContent=`${window.trans("Parent Sites")}`,re=u("option"),re.textContent=`${window.trans("Parent and child sites")}`,_=u("option"),_.textContent=`${window.trans("Only child sites")}`,w=T(),b=u("div"),H=u("input"),ne=T(),x=u("button"),qe(se.$$.fragment),pt=T(),Qe=u("div"),ye=u("button"),ye.innerHTML='<span aria-hidden="true">\xD7</span>',mt=T(),Le=u("div"),ze=u("span"),ze.textContent=`${window.trans("Site Name")}`,ht=T(),Xe=u("span"),Xe.textContent=`${window.trans("Parent Site")}`,bt=T(),Ge=u("div"),Ze=u("table"),He=u("tbody"),_e.c(),c(e,"class","site-list-button-modal-overlay"),c(R,"type","button"),c(R,"class","close"),c(R,"data-dismiss","modal"),c(R,"aria-label","Close"),c(m,"class","d-block d-md-none"),c(a,"class","site-list-title"),c(D,"type","button"),D.disabled=C=t[4]<=1,c(N,"type","button"),N.disabled=O=t[4]<=1,c(ee,"class","current"),c(j,"class","page-num"),c(P,"type","button"),P.disabled=ue=t[4]===t[5],c(oe,"type","button"),oe.disabled=Y=t[4]===t[5],c(M,"class","prev-next"),fe.__value="parent_sites",he(fe,fe.__value),re.__value="parent_and_child_sites",he(re,re.__value),_.__value="child_sites_only",he(_,_.__value),c(B,"class","custom-select form-control form-select"),t[6]===void 0&&Ke(()=>t[28].call(B)),c(Z,"class","site-type-filter"),c(H,"type","text"),c(H,"placeholder",window.trans("Filter by site name")),c(b,"class","site-name-filter"),c(ae,"class","site-filter-actions"),c(ye,"type","button"),c(ye,"class","close"),c(ye,"data-dismiss","modal"),c(ye,"aria-label","Close"),c(Qe,"class","d-none d-md-block"),c(I,"class","site-list-actions"),c(i,"class","site-list-header"),c(ze,"class","table-header-col site-list-header-name"),c(Xe,"class","table-header-col site-list-header-parent"),c(Le,"class","site-list-table-header"),c(Ge,"class","site-list-table-wrapper"),c(o,"class","site-list-container"),c(s,"class","modal-body"),c(l,"class","modal site-list-button-modal")},m(F,le){E(F,e,le),E(F,n,le),E(F,l,le),r(l,s),r(s,o),r(o,i),r(i,a),r(a,d),r(d,f),r(d,g),r(d,p),r(a,v),r(a,y),r(a,h),r(a,m),r(m,R),r(i,A),r(i,I),r(I,M),r(M,D),r(D,W),r(M,U),r(M,N),r(N,q),r(M,$),r(M,j),r(j,ee),r(ee,te),r(j,V),r(j,S),r(M,Q),r(M,P),r(P,ce),r(M,K),r(M,oe),r(oe,be),r(I,Se),r(I,ae),r(ae,Z),r(Z,B),r(B,fe),r(B,re),r(B,_),Tt(B,t[6],!0),r(ae,w),r(ae,b),r(b,H),he(H,t[7]),r(b,ne),r(b,x),Ne(se,x,null),r(I,pt),r(I,Qe),r(Qe,ye),r(o,mt),r(o,Le),r(Le,ze),r(Le,ht),r(Le,Xe),r(o,bt),r(o,Ge),r(Ge,Ze),r(Ze,He),we[de].m(He,null),t[35](He),t[36](l),pe=!0,xe||(gt=[J(e,"click",t[11]),Ee(Oe.call(null,e,"body")),J(R,"click",t[11]),J(D,"click",t[15]),J(D,"keydown",t[24]),J(N,"click",t[14]),J(N,"keydown",t[25]),J(P,"click",t[12]),J(P,"keydown",t[26]),J(oe,"click",t[13]),J(oe,"keydown",t[27]),J(B,"change",t[28]),J(B,"change",t[16]),J(H,"input",t[29]),J(H,"keydown",t[30]),J(x,"click",t[16]),J(ye,"click",t[11]),Ee(Oe.call(null,l,"body"))],xe=!0)},p(F,le){(!pe||le[0]&8)&&k!==(k=window.trans("[_1]Site",F[3].toString())+"")&&ke(g,k),(!pe||le[0]&16&&C!==(C=F[4]<=1))&&(D.disabled=C),(!pe||le[0]&16&&O!==(O=F[4]<=1))&&(N.disabled=O),(!pe||le[0]&16)&&ke(te,F[4]),(!pe||le[0]&32)&&ke(S,F[5]),(!pe||le[0]&48&&ue!==(ue=F[4]===F[5]))&&(P.disabled=ue),(!pe||le[0]&48&&Y!==(Y=F[4]===F[5]))&&(oe.disabled=Y),le[0]&64&&Tt(B,F[6]),le[0]&128&&H.value!==F[7]&&he(H,F[7]);let $e=de;de=wt(F),de===$e?we[de].p(F,le):(De(),ie(we[$e],1,1,()=>{we[$e]=null}),We(),_e=we[de],_e?_e.p(F,le):(_e=we[de]=yt[de](F),_e.c()),G(_e,1),_e.m(He,null))},i(F){pe||(G(se.$$.fragment,F),G(_e),pe=!0)},o(F){ie(se.$$.fragment,F),ie(_e),pe=!1},d(F){F&&(L(e),L(n),L(l)),Ce(se),we[de].d(),t[35](null),t[36](null),xe=!1,me(gt)}}}function Mn(t){let e=[],n=new Map,l,s,o=ve(t[1]);const i=a=>a[45].id;for(let a=0;a<o.length;a+=1){let d=Dt(t,o,a),f=i(d);n.set(f,e[a]=Qt(f,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Be()},m(a,d){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,d);E(a,l,d),s=!0},p(a,d){d[0]&393222&&(o=ve(a[1]),De(),e=sn(e,d,i,1,a,o,n,l.parentNode,ln,Qt,l,Dt),We())},i(a){if(!s){for(let d=0;d<o.length;d+=1)G(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)ie(e[d]);s=!1},d(a){a&&L(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function jn(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,c(n,"colspan","2"),c(n,"class","loading")},m(l,s){E(l,e,s),r(e,n)},p:z,i:z,o:z,d(l){l&&L(e)}}}function Un(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,c(e,"class","badge badge-child-site")},m(n,l){E(n,e,l)},p:z,d(n){n&&L(e)}}}function qn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,c(e,"class","badge badge-site")},m(n,l){E(n,e,l)},p:z,d(n){n&&L(e)}}}function An(t){let e,n,l,s;function o(...i){return t[32](t[45],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){E(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Pn(t){let e,n,l,s;function o(...i){return t[31](t[45],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){E(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Vt(t){let e,n=t[45].parentSiteName+"";return{c(){e=u("span"),c(e,"class","d-block d-md-none parent-site")},m(l,s){E(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[45].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&L(e)}}}function On(t){let e,n,l,s;function o(...i){return t[34](t[45],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){E(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Hn(t){let e,n,l,s;function o(...i){return t[33](t[45],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){E(i,e,a),r(e,n),l||(s=J(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Qt(t,e){let n,l,s,o,i,a,d,f,k,g,p,v,y=e[45].name+"",h,m,R,A,I,M,D,W,C,U,N,q=e[45].parentSiteName+"",O,$,j,ee,te,V,S,Q,P,ce,ue,K;function oe(w,b){return w[45].parentSiteName==="-"?qn:Un}let be=oe(e),Y=be(e);function Se(w,b){return b[0]&6&&(a=null),a==null&&(a=!!w[2].includes(Number(w[45].id))),a?Pn:An}let ae=Se(e,[-1,-1]),Z=ae(e);k=new Ve({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let B=e[45].parentSiteName!=="-"&&Vt(e);W=new Ve({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function fe(w,b){return b[0]&6&&(ee=null),ee==null&&(ee=!!w[2].includes(Number(w[45].id))),ee?Hn:On}let re=fe(e,[-1,-1]),_=re(e);return S=new Ve({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),s=u("span"),Y.c(),o=T(),i=u("span"),Z.c(),d=T(),f=u("span"),qe(k.$$.fragment),p=T(),v=u("a"),h=X(y),R=T(),B&&B.c(),A=T(),I=u("a"),M=u("span"),M.textContent=`${window.trans("View your site.")}`,D=T(),qe(W.$$.fragment),U=T(),N=u("td"),O=T(),$=u("td"),j=u("span"),_.c(),te=T(),V=u("span"),qe(S.$$.fragment),P=T(),c(f,"class","site-list-table-sortable-handle"),c(f,"style",g=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"),c(i,"class","site-list-table-action-buttons-mobile"),c(s,"class","site-list-table-bagde-container"),c(v,"href",m=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[45].id}`),c(v,"class","dashboard-link"),c(M,"class","d-inline-block d-md-none"),c(I,"href",C=e[45].siteUrl),c(I,"class","site-link"),c(I,"target","_blank"),c(N,"class","site-list-table-parent-site"),c(V,"class","site-list-table-sortable-handle"),c(V,"style",Q=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"),c(j,"class","site-list-table-action-buttons"),c($,"class","site-list-table-action"),c(n,"data-site-id",ce=e[45].id),c(n,"data-is-starred",ue=e[2].includes(Number(e[45].id))||void 0),this.first=n},m(w,b){E(w,n,b),r(n,l),r(l,s),Y.m(s,null),r(s,o),r(s,i),Z.m(i,null),r(i,d),r(i,f),Ne(k,f,null),r(l,p),r(l,v),r(v,h),r(l,R),B&&B.m(l,null),r(l,A),r(l,I),r(I,M),r(I,D),Ne(W,I,null),r(n,U),r(n,N),N.innerHTML=q,r(n,O),r(n,$),r($,j),_.m(j,null),r(j,te),r(j,V),Ne(S,V,null),r(n,P),K=!0},p(w,b){e=w,be===(be=oe(e))&&Y?Y.p(e,b):(Y.d(1),Y=be(e),Y&&(Y.c(),Y.m(s,o))),ae===(ae=Se(e,b))&&Z?Z.p(e,b):(Z.d(1),Z=ae(e),Z&&(Z.c(),Z.m(i,d))),(!K||b[0]&6&&g!==(g=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"))&&c(f,"style",g),(!K||b[0]&2)&&y!==(y=e[45].name+"")&&ke(h,y),(!K||b[0]&2&&m!==(m=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[45].id}`))&&c(v,"href",m),e[45].parentSiteName!=="-"?B?B.p(e,b):(B=Vt(e),B.c(),B.m(l,A)):B&&(B.d(1),B=null),(!K||b[0]&2&&C!==(C=e[45].siteUrl))&&c(I,"href",C),(!K||b[0]&2)&&q!==(q=e[45].parentSiteName+"")&&(N.innerHTML=q),re===(re=fe(e,b))&&_?_.p(e,b):(_.d(1),_=re(e),_&&(_.c(),_.m(j,te))),(!K||b[0]&6&&Q!==(Q=e[2].includes(Number(e[45].id))?"cursor: move":"visibility: hidden;"))&&c(V,"style",Q),(!K||b[0]&2&&ce!==(ce=e[45].id))&&c(n,"data-site-id",ce),(!K||b[0]&6&&ue!==(ue=e[2].includes(Number(e[45].id))||void 0))&&c(n,"data-is-starred",ue)},i(w){K||(G(k.$$.fragment,w),G(W.$$.fragment,w),G(S.$$.fragment,w),K=!0)},o(w){ie(k.$$.fragment,w),ie(W.$$.fragment,w),ie(S.$$.fragment,w),K=!1},d(w){w&&L(n),Y.d(),Z.d(),Ce(k),B&&B.d(),Ce(W),_.d(),Ce(S)}}}function Bn(t){let e,n,l,s,o,i=t[0]&&Wt(t);return{c(){e=T(),i&&i.c(),n=Be()},m(a,d){E(a,e,d),i&&i.m(a,d),E(a,n,d),l=!0,s||(o=J(En.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&G(i,1)):(i=Wt(a),i.c(),G(i,1),i.m(n.parentNode,n)):i&&(De(),ie(i,1,1,()=>{i=null}),We())},i(a){l||(G(i),l=!0)},o(a){ie(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Fn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{anchorRef:i}=e,{initialStarredSites:a}=e;const d=()=>{n(0,o=!1)};let f={},k=[],g=[],p=[],v=a,y=0,h=1,m=1,R="parent_and_child_sites",A="",I=[],M=!1,D=null;const W=()=>{n(4,h++,h),O()},C=()=>{n(4,h=m),O()},U=()=>{n(4,h--,h),O()},N=()=>{n(4,h=1),O()},q=()=>{k=[],g=v,I=[],R==="child_sites_only"?I=[{type:"parent_website",args:{value:""}}]:R==="parent_sites"&&(I=[{type:"parent_website",args:{value:"1"}}]),n(7,A=A.trim()),A!==""&&I.push({type:"name",args:{string:A,option:"contains"}}),n(4,h=1),O()},O=async()=>{if(n(8,M=!0),n(1,p=[]),k.length===0){const _=await at({magicToken:l,items:I,page:h,limit:s});n(3,y=_.count),n(5,m=_.pageMax),n(4,h=m!==0?_.page:0);const w=[];if(g.forEach(b=>{const H=_.sites.findIndex(ne=>Number(ne.id)===b);if(H!==-1)f[b]=_.sites[H],_.sites.splice(H,1);else{const ne=f[b];if(!ne)w.push(b);else{const x=ne.parentSiteName.match(/^<a/);(R==="child_sites_only"&&!x||R==="parent_sites"&&x)&&(g=g.filter(se=>se!==b))}}}),k=[..._.sites],w.length>0){const b=await at({magicToken:l,items:[...I,{type:"pack",args:{op:"or",items:w.map(H=>({type:"id",args:{value:H,option:"equal"}}))}}],page:0,limit:200});w.forEach(H=>{const ne=b.sites.findIndex(x=>Number(x.id)===H);ne!==-1?f[H]=b.sites[ne]:(g=g.filter(x=>x!==H),n(2,v=v.filter(x=>x!==H)))})}for(let b=0;b<s&&b<g.length;b++)p.push(f[g[b]]);for(let b=0;b<k.length&&p.length<s;b++)p.push(k[b])}else{const _=g.length,w=(h-1)*s;for(let b=w;b<_&&p.length<s;b++)p.push(f[g[b]]);for(let b=Math.max(w-_,0);b<y-_&&p.length<s;b++){if(!k[b]){const H=Math.floor(b/s),ne=await at({magicToken:l,items:[...I,...g.map(se=>({type:"id",args:{value:se,option:"not_equal"}}))],page:H+1,limit:s}),x=H*s;for(let se=0;se<ne.sites.length;se++)k[x+se]=ne.sites[se]}p.push(k[b])}}n(8,M=!1)},$=async _=>{const w=new FormData;return w.append("__mode","save_starred_sites"),w.append("magic_token",l),_.forEach(b=>{w.append("id",String(b))}),fetch(window.ScriptURI,{method:"POST",body:w,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(b=>b.json()).then(b=>{if(b.error)throw new Error(b.error)})},j=_=>{const w=[...v];n(2,v=_),$(v).catch(b=>{alert(b.message),n(2,v=w)})},ee=(_,w)=>{_.stopPropagation(),j([...new Set([...v,Number(w.id)])])},te=(_,w)=>{_.stopPropagation();const b=Number(w.id);j(v.filter(H=>H!==b))},V=_=>{const w=_.target;o&&ot([i,D],w)&&d()};lt(async()=>{q()});let S=null;const Q=async()=>{await It(),S&&jQuery(S).sortable({delay:100,distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,w){if(!S)return;const b=document.createElement("tr");b.classList.add("site-list-table-placeholder"),b.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",S.insertBefore(b,S.firstChild),w.placeholder.height(w.item.height())},stop(){var _;(_=S?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(!S)return;const _=[],w=[];S.querySelectorAll("tr[data-site-id]").forEach(H=>{const ne=Number(H.dataset.siteId);H.dataset.isStarred&&w.push(Number(ne)),_.push(p.find(x=>Number(x.id)===ne))}),n(1,p=_);const b=v.findIndex(H=>w.includes(H));n(2,v=[...v]),v.splice(b,w.length,...w),j(v)}})},P=_=>_.key==="Enter"&&N(),ce=_=>_.key==="Enter"&&U(),ue=_=>_.key==="Enter"&&W(),K=_=>_.key==="Enter"&&C();function oe(){R=$t(this),n(6,R)}function be(){A=this.value,n(7,A)}const Y=_=>_.key==="Enter"&&q(),Se=(_,w)=>te(w,_),ae=(_,w)=>ee(w,_),Z=(_,w)=>te(w,_),B=(_,w)=>ee(w,_);function fe(_){Te[_?"unshift":"push"](()=>{S=_,n(10,S)})}function re(_){Te[_?"unshift":"push"](()=>{D=_,n(9,D)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,s=_.limit),"open"in _&&n(0,o=_.open),"anchorRef"in _&&n(22,i=_.anchorRef),"initialStarredSites"in _&&n(23,a=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&4194305&&i&&(o?i.classList.add("open"):i.classList.remove("open")),t.$$.dirty[0]&3&&p&&p.length>0&&o&&Q()},[o,p,v,y,h,m,R,A,M,D,S,d,W,C,U,N,q,ee,te,V,l,s,i,a,P,ce,ue,K,oe,be,Y,Se,ae,Z,B,fe,re]}class Jn extends Pe{constructor(e){super(),Ae(this,e,Fn,Bn,Ie,{magicToken:20,limit:21,open:0,anchorRef:22,initialStarredSites:23},null,[-1,-1])}}function Dn(t,e){const n=new Jn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Wn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}new Ft({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var rt,ct;const dt=document.querySelector('[data-is="primary-navigation-toggle"]');if(dt!==null){const t="collapsed",e=sessionStorage.getItem(t);bn(dt,{collapsed:e==="true",buttonRef:dt.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const ut=document.querySelector('[data-script="admin-ui"]');ut===null&&console.error("data-script='admin-ui' is not set");const ft=(rt=ut?.getAttribute("data-blog-id"))!==null&&rt!==void 0?rt:"",ge=(ct=ut?.getAttribute("data-magic-token"))!==null&&ct!==void 0?ct:"";ge===""&&console.error("data-magic-token is not set");const Vn="50",zt=document.querySelectorAll('[data-is="site-list-button"]');zt.length>0&&ge!==""&&zt.forEach(t=>{var e;Dn(t,{magicToken:ge,limit:Number.parseInt(Vn),open:!1,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const Xt=document.querySelectorAll('[data-is="create-button"]'),_t=document.querySelector('[data-is="search-button"]'),Qn=document.querySelector("div.mt-modal");Xt.length>0&&ge!==""&&Xt.forEach(t=>{_n({target:t,props:{blog_id:ft,magicToken:ge,contentTypes:[],open:!1,anchorRef:t,containerRef:Qn}})}),_t!==null&&ge!==""&&In(_t,{blogId:ft,magicToken:ge,contentTypes:[],open:!1,anchorRef:_t});const Gt=document.querySelector('[data-is="search-form"]');Gt!==null&&ge!==""&&Wn(Gt,{blogId:ft,magicToken:ge,contentTypes:[]});
