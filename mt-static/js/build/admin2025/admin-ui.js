const zt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function D(){}function vt(t){return t()}function kt(){return Object.create(null)}function ee(t){t.forEach(vt)}function Ze(t){return typeof t=="function"}function he(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function be(t){return t&&Ze(t.destroy)?t.destroy:D}function a(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function xe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A(t){return document.createTextNode(t)}function y(){return A(" ")}function Ce(){return A("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Kt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Xt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yt(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Le;function Ne(t){Le=t}function Zt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function $e(t){Zt().$$.on_mount.push(t)}const ge=[],ye=[];let we=[];const Ct=[],Lt=Promise.resolve();let et=!1;function Nt(){et||(et=!0,Lt.then(Et))}function xt(){return Nt(),Lt}function De(t){we.push(t)}const tt=new Set;let ve=0;function Et(){if(ve!==0)return;const t=Le;do{try{for(;ve<ge.length;){const e=ge[ve];ve++,Ne(e),$t(e.$$)}}catch(e){throw ge.length=0,ve=0,e}for(Ne(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];tt.has(n)||(tt.add(n),n())}we.length=0}while(ge.length);for(;Ct.length;)Ct.pop()();et=!1,tt.clear(),Ne(t)}function $t(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(De)}}function en(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Fe=new Set;let ae;function Ve(){ae={r:0,c:[],p:ae}}function We(){ae.r||ee(ae.c),ae=ae.p}function F(t,e){t&&t.i&&(Fe.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Fe.has(t))return;Fe.add(t),ae.c.push(()=>{Fe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function se(t){return t?.length!==void 0?t:Array.from(t)}function Qe(t){t&&t.c()}function Ee(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),De(()=>{const s=t.$$.on_mount.map(vt).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...s):ee(s),t.$$.on_mount=[]}),o.forEach(De)}function Ie(t,e){const n=t.$$;n.fragment!==null&&(en(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(ge.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,n,l,o,s,i=null,r=[-1]){const c=Le;Ne(t);const p=t.$$={fragment:null,ctx:[],props:s,update:D,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:kt(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};i&&i(p.root);let m=!1;if(p.ctx=n?n(t,e.props||{},(h,f,...b)=>{const _=b.length?b[0]:f;return p.ctx&&o(p.ctx[h],p.ctx[h]=_)&&(!p.skip_bound&&p.bound[h]&&p.bound[h](_),m&&tn(t,h)),f}):[],p.update(),m=!0,ee(p.before_update),p.fragment=l?l(p.ctx):!1,e.target){if(e.hydrate){const h=Xt(e.target);p.fragment&&p.fragment.l(h),h.forEach(S)}else p.fragment&&p.fragment.c();e.intro&&F(t.$$.fragment),Ee(t,e.target,e.anchor),Et()}Ne(c)}class Te{$$=void 0;$$set=void 0;$destroy(){Ie(this,1),this.$destroy=D}$on(e,n){if(!Ze(n))return D;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function Se(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await xt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function nt(t,e){return!t.some(n=>n&&n.contains(e))}function It(t,e,n){const l=t.slice();return l[9]=e[n],l}function Mt(t){let e,n,l,o,s,i,r,c,p,m,h,f=window.trans("New [_1] creation",window.trans("Entry"))+"",b,_,T,q,j,H=window.trans("New [_1] creation",window.trans("Page"))+"",N,C,U,I,g=t[1].length>0&&jt(t);return{c(){e=d("div"),n=d("div"),l=d("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=y(),s=d("div"),g&&g.c(),i=y(),r=d("p"),r.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,c=y(),p=d("ul"),m=d("li"),h=d("a"),b=A(f),T=y(),q=d("li"),j=d("a"),N=A(H),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(r,"class","block-title"),u(h,"href",_=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(j,"href",C=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(p,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(w,L){R(w,e,L),a(e,n),a(n,l),a(e,o),a(e,s),g&&g.m(s,null),a(s,i),a(s,r),a(s,c),a(s,p),a(p,m),a(m,h),a(h,b),a(p,T),a(p,q),a(q,j),a(j,N),t[8](e),U||(I=[P(l,"click",t[4]),be(Se.call(null,e,"body"))],U=!0)},p(w,L){w[1].length>0?g?g.p(w,L):(g=jt(w),g.c(),g.m(s,i)):g&&(g.d(1),g=null),L&4&&_!==(_=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${w[2]}`)&&u(h,"href",_),L&4&&C!==(C=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${w[2]}`)&&u(j,"href",C)},d(w){w&&S(e),g&&g.d(),t[8](null),U=!1,ee(I)}}}function jt(t){let e,n,l,o=se(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ut(It(t,o,i));return{c(){e=d("p"),e.textContent=`${window.trans("Content Data")}`,n=y(),l=d("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,r){R(i,e,r),R(i,n,r),R(i,l,r);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(l,null)},p(i,r){if(r&6){o=se(i[1]);let c;for(c=0;c<o.length;c+=1){const p=It(i,o,c);s[c]?s[c].p(p,r):(s[c]=Ut(p),s[c].c(),s[c].m(l,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=o.length}},d(i){i&&(S(e),S(n),S(l)),Je(s,i)}}}function Ut(t){let e,n,l=window.trans("New [_1] creation",t[9].name)+"",o,s,i;return{c(){e=d("li"),n=d("a"),o=A(l),i=y(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[9].id}&type=content_data_${t[9].id}&blog_id=${t[2]}`)},m(r,c){R(r,e,c),a(e,n),a(n,o),a(e,i)},p(r,c){c&2&&l!==(l=window.trans("New [_1] creation",r[9].name)+"")&&oe(o,l),c&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${r[9].id}&type=content_data_${r[9].id}&blog_id=${r[2]}`)&&u(n,"href",s)},d(r){r&&S(e)}}}function ln(t){let e,n,l,o,s=t[0]&&Mt(t);return{c(){e=y(),s&&s.c(),n=Ce()},m(i,r){R(i,e,r),s&&s.m(i,r),R(i,n,r),l||(o=P(document.body,"click",t[5]),l=!0)},p(i,[r]){i[0]?s?s.p(i,r):(s=Mt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:D,o:D,d(i){i&&(S(e),S(n)),s&&s.d(i),l=!1,o()}}}function on(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{anchorRef:i=null}=e,{containerRef:r=null}=e,c=null;const p=()=>{n(0,s=!1)},m=f=>{if(r&&r.classList.contains("show"))return;const b=f.target;s&&nt([i,c],b)&&p()};function h(f){ye[f?"unshift":"push"](()=>{c=f,n(3,c),n(6,i),n(0,s)})}return t.$$set=f=>{"contentTypes"in f&&n(1,l=f.contentTypes),"blog_id"in f&&n(2,o=f.blog_id),"open"in f&&n(0,s=f.open),"anchorRef"in f&&n(6,i=f.anchorRef),"containerRef"in f&&n(7,r=f.containerRef)},t.$$.update=()=>{if(t.$$.dirty&73&&i){if(c){const f=i.getBoundingClientRect(),b=`calc(${f.bottom}px + 10px)`;n(3,c.style.top=b,c);const _=`calc(100vh - ${f.bottom}px - 10px - 20px)`;n(3,c.style.maxHeight=_,c)}s?i.classList.add("open"):i.classList.remove("open")}},[s,l,o,c,p,m,i,r,h]}class sn extends Te{constructor(e){super(),ke(this,e,on,ln,he,{contentTypes:1,blog_id:2,open:0,anchorRef:6,containerRef:7})}}const an=({target:t,props:e})=>{const n=new sn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function cn(t){let e,n,l,o;return{c(){e=d("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){R(s,e,i),l||(o=[be(Se.call(null,e,"body")),P(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(e,"style",n)},i:D,o:D,d(s){s&&S(e),l=!1,ee(o)}}}function rn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const r=(f,b)=>{const _=document.querySelector('[data-is="content-wrapper"]');b?_.classList.add(f):_.classList.remove(f)},c=()=>{r("collapsed",o)},p=()=>{r("mouseover",i)},m=()=>{var f;o&&(i=!0,p(),(f=document.querySelector('[data-is="primary-navigation"]'))===null||f===void 0||f.addEventListener("mouseleave",h,{once:!0}))},h=()=>{i=!1,p()};return $e(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),c()}),t.$$set=f=>{"buttonRef"in f&&n(2,l=f.buttonRef),"collapsed"in f&&n(0,o=f.collapsed),"isStored"in f&&n(3,s=f.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(c(),i=!1,p(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,m,l,s]}class un extends Te{constructor(e){super(),ke(this,e,rn,cn,he,{buttonRef:2,collapsed:0,isStored:3})}}function fn(t,e){const n=new un({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Ot(t){let e,n;return{c(){e=xe("title"),n=A(t[2])},m(l,o){R(l,e,o),a(e,n)},p(l,o){o&4&&oe(n,l[2])},d(l){l&&S(e)}}}function dn(t){let e,n,l=t[2]&&Ot(t);return{c(){e=xe("svg"),l&&l.c(),n=xe("use"),Tt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){R(o,e,s),l&&l.m(e,null),a(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Ot(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Tt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:D,o:D,d(o){o&&S(e),l&&l.d()}}}function _n(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class lt extends Te{constructor(e){super(),ke(this,e,_n,dn,he,{class:0,href:1,title:2})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function qt(t,e,n){const l=t.slice();return l[12]=e[n],l}function At(t){let e,n,l,o=!1,s,i,r,c=t[12].label+"",p,m,h,f,b;return h=Kt(t[7][0]),{c(){e=d("label"),n=d("input"),r=y(),p=A(c),m=y(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[12].key,Z(n,n.__value),u(n,"id",s=t[12].key),n.checked=i=t[0]===t[12].key,h.p(n)},m(_,T){R(_,e,T),a(e,n),n.checked=n.__value===t[0],a(e,r),a(e,p),a(e,m),f||(b=P(n,"change",t[6]),f=!0)},p(_,T){T&16&&l!==(l=_[12].key)&&(n.__value=l,Z(n,n.__value),o=!0),T&16&&s!==(s=_[12].key)&&u(n,"id",s),T&17&&i!==(i=_[0]===_[12].key)&&(n.checked=i),(o||T&17)&&(n.checked=n.__value===_[0]),T&16&&c!==(c=_[12].label+"")&&oe(p,c)},d(_){_&&S(e),h.r(),f=!1,b()}}}function pn(t){let e;return{c(){e=d("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Z(e,e.__value)},m(n,l){R(n,e,l)},p:D,d(n){n&&S(e)}}}function mn(t){let e,n=se(t[3]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ht(Pt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);R(o,e,s)},p(o,s){if(s&8){n=se(o[3]);let i;for(i=0;i<n.length;i+=1){const r=Pt(o,n,i);l[i]?l[i].p(r,s):(l[i]=Ht(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&S(e),Je(l,o)}}}function Ht(t){let e,n=t[9].name+"",l,o;return{c(){e=d("option"),l=A(n),e.__value=o=t[9].id,Z(e,e.__value)},m(s,i){R(s,e,i),a(e,l)},p(s,i){i&8&&n!==(n=s[9].name+"")&&oe(l,n),i&8&&o!==(o=s[9].id)&&(e.__value=o,Z(e,e.__value))},d(s){s&&S(e)}}}function hn(t){let e,n,l,o,s,i,r,c,p,m,h,f,b,_,T,q,j,H,N,C,U,I,g,w,L,te,B,z=se(t[4]),O=[];for(let k=0;k<z.length;k+=1)O[k]=At(qt(t,z,k));function x(k,V){return k[3].length>0?mn:pn}let Y=x(t),v=Y(t);return w=new lt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=d("form"),n=d("input"),l=y(),o=d("input"),s=y(),i=d("input"),r=y(),c=d("input"),p=y(),m=d("input"),h=y(),f=d("div");for(let k=0;k<O.length;k+=1)O[k].c();b=y(),_=d("div"),T=d("select"),v.c(),j=y(),H=d("div"),N=d("div"),C=d("input"),U=y(),I=d("div"),g=d("button"),Qe(w.$$.fragment),L=y(),te=d("span"),te.textContent=`${window.trans("Search")}`,u(n,"type","hidden"),u(n,"name","__mode"),n.value="search_replace",u(o,"type","hidden"),u(o,"name","blog_id"),o.value=t[1],u(i,"type","hidden"),u(i,"name","_type"),i.value=t[0],u(c,"type","hidden"),u(c,"name","do_search"),c.value="1",u(m,"type","hidden"),u(m,"name","magic_token"),m.value=t[2],u(f,"class","search-type"),u(T,"class","custom-select form-control form-select"),u(T,"name","content_type_id"),T.disabled=q=t[0]!=="content_data"||t[3].length===0,Rt(T,"disabled",t[0]!=="content_data"),u(_,"class","search-content-type"),u(C,"type","text"),u(C,"placeholder",window.trans("Select target and search text...")),u(C,"name","search"),u(N,"class","search-text-box"),u(g,"type","submit"),u(g,"class","btn btn-primary"),u(I,"class","submit-button"),u(H,"class","search-input-group"),u(e,"class","mt-search-form"),u(e,"method","post"),u(e,"action",window.ScriptURI)},m(k,V){R(k,e,V),a(e,n),a(e,l),a(e,o),a(e,s),a(e,i),a(e,r),a(e,c),a(e,p),a(e,m),a(e,h),a(e,f);for(let M=0;M<O.length;M+=1)O[M]&&O[M].m(f,null);a(e,b),a(e,_),a(_,T),v.m(T,null),a(e,j),a(e,H),a(H,N),a(N,C),t[8](C),a(H,U),a(H,I),a(I,g),Ee(w,g,null),a(g,L),a(g,te),B=!0},p(k,[V]){if((!B||V&2)&&(o.value=k[1]),(!B||V&1)&&(i.value=k[0]),(!B||V&4)&&(m.value=k[2]),V&17){z=se(k[4]);let M;for(M=0;M<z.length;M+=1){const Re=qt(k,z,M);O[M]?O[M].p(Re,V):(O[M]=At(Re),O[M].c(),O[M].m(f,null))}for(;M<O.length;M+=1)O[M].d(1);O.length=z.length}Y===(Y=x(k))&&v?v.p(k,V):(v.d(1),v=Y(k),v&&(v.c(),v.m(T,null))),(!B||V&9&&q!==(q=k[0]!=="content_data"||k[3].length===0))&&(T.disabled=q),(!B||V&1)&&Rt(T,"disabled",k[0]!=="content_data")},i(k){B||(F(w.$$.fragment,k),B=!0)},o(k){Q(w.$$.fragment,k),B=!1},d(k){k&&S(e),Je(O,k),v.d(),t[8](null),Ie(w)}}}function bn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:r}=e,c=null;const p=[[]];function m(){r=this.__value,n(0,r)}function h(f){ye[f?"unshift":"push"](()=>{c=f,n(5,c)})}return t.$$set=f=>{"blogId"in f&&n(1,l=f.blogId),"magicToken"in f&&n(2,o=f.magicToken),"contentTypes"in f&&n(3,s=f.contentTypes),"searchTabs"in f&&n(4,i=f.searchTabs),"objectType"in f&&n(0,r=f.objectType)},t.$$.update=()=>{t.$$.dirty&32&&c&&c.focus()},[r,l,o,s,i,c,m,p,h]}class Bt extends Te{constructor(e){super(),ke(this,e,bn,hn,he,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,o,s,i,r,c,p,m,h;return c=new Bt({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=d("div"),n=y(),l=d("div"),o=d("div"),s=d("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=y(),r=d("div"),Qe(c.$$.fragment),u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(r,"class","modal-body"),u(l,"class","modal search-button-modal")},m(f,b){R(f,e,b),R(f,n,b),R(f,l,b),a(l,o),a(o,s),a(l,i),a(l,r),Ee(c,r,null),t[10](l),p=!0,m||(h=[P(e,"click",t[7]),be(Se.call(null,e,"body")),P(s,"click",t[7]),be(Se.call(null,l,"body"))],m=!0)},p(f,b){const _={};b&4&&(_.blogId=f[2]),b&8&&(_.magicToken=f[3]),b&16&&(_.contentTypes=f[4]),b&2&&(_.objectType=f[1]),b&32&&(_.searchTabs=f[5]),c.$set(_)},i(f){p||(F(c.$$.fragment,f),p=!0)},o(f){Q(c.$$.fragment,f),p=!1},d(f){f&&(S(e),S(n),S(l)),Ie(c),t[10](null),m=!1,ee(h)}}}function gn(t){let e,n,l,o,s,i=t[0]&&Jt(t);return{c(){e=y(),i&&i.c(),n=Ce()},m(r,c){R(r,e,c),i&&i.m(r,c),R(r,n,c),l=!0,o||(s=P(document.body,"click",t[8]),o=!0)},p(r,[c]){r[0]?i?(i.p(r,c),c&1&&F(i,1)):(i=Jt(r),i.c(),F(i,1),i.m(n.parentNode,n)):i&&(Ve(),Q(i,1,1,()=>{i=null}),We())},i(r){l||(F(i),l=!0)},o(r){Q(i),l=!1},d(r){r&&(S(e),S(n)),i&&i.d(r),o=!1,s()}}}function yn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{anchorRef:r}=e,{searchTabs:c}=e,{objectType:p}=e;const m=()=>{n(0,i=!1)};let h=null;const f=_=>{const T=_.target;i&&nt([r,h],T)&&m()};$e(async()=>{p&&c.find(_=>_.key===p)||n(1,p=c[0].key)});function b(_){ye[_?"unshift":"push"](()=>{h=_,n(6,h)})}return t.$$set=_=>{"blogId"in _&&n(2,l=_.blogId),"magicToken"in _&&n(3,o=_.magicToken),"contentTypes"in _&&n(4,s=_.contentTypes),"open"in _&&n(0,i=_.open),"anchorRef"in _&&n(9,r=_.anchorRef),"searchTabs"in _&&n(5,c=_.searchTabs),"objectType"in _&&n(1,p=_.objectType)},t.$$.update=()=>{t.$$.dirty&513&&r&&(i?r.classList.add("open"):r.classList.remove("open")),t.$$.dirty&1},[i,p,l,o,s,c,h,m,f,r,b]}class wn extends Te{constructor(e){super(),ke(this,e,yn,gn,he,{blogId:2,magicToken:3,contentTypes:4,open:0,anchorRef:9,searchTabs:5,objectType:1})}}function vn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new wn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const kn=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Dt(t,e,n){const l=t.slice();return l[29]=e[n],l}function Ft(t){let e,n,l,o,s,i,r,c,p,m=window.trans("[_1]Site",t[2].toString())+"",h,f,b,_,T,q,j,H,N,C,U,I,g,w,L,te,B,z,O,x,Y,v,k,V,M,Re,Me,rt,ne,ut,je,ft,re,Ue,G,ue,fe,de,dt,_e,$,_t,Oe,pe,pt,Pe,le,mt,me,qe,ht,Ae,bt,He,Ke,Be,W,K,X,Xe,gt;pe=new lt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[Sn,Tn],ie=[];function wt(E,J){return E[7]?0:1}return W=wt(t),K=ie[W]=yt[W](t),{c(){e=d("div"),n=y(),l=d("div"),o=d("div"),s=d("div"),i=d("div"),r=d("div"),c=d("span"),p=A("("),h=A(m),f=A(")"),b=y(),_=d("p"),_.textContent=`${window.trans("Site List")}`,T=y(),q=d("div"),j=d("button"),j.innerHTML='<span aria-hidden="true">\xD7</span>',H=y(),N=d("div"),C=d("div"),U=d("button"),I=A("<<"),w=y(),L=d("button"),te=A("<"),z=y(),O=d("span"),x=d("span"),Y=A(t[3]),v=A("/"),k=A(t[4]),V=y(),M=d("button"),Re=A(">"),rt=y(),ne=d("button"),ut=A(">>"),ft=y(),re=d("div"),Ue=d("div"),G=d("select"),ue=d("option"),ue.textContent=`${window.trans("Parent Sites")}`,fe=d("option"),fe.textContent=`${window.trans("Parent and child sites")}`,de=d("option"),de.textContent=`${window.trans("Only child sites")}`,dt=y(),_e=d("div"),$=d("input"),_t=y(),Oe=d("button"),Qe(pe.$$.fragment),pt=y(),Pe=d("div"),le=d("button"),le.innerHTML='<span aria-hidden="true">\xD7</span>',mt=y(),me=d("div"),qe=d("span"),qe.textContent=`${window.trans("Site Name")}`,ht=y(),Ae=d("span"),Ae.textContent=`${window.trans("Parent Site")}`,bt=y(),He=d("div"),Ke=d("table"),Be=d("tbody"),K.c(),u(e,"class","site-list-button-modal-overlay"),u(j,"type","button"),u(j,"class","close"),u(j,"data-dismiss","modal"),u(j,"aria-label","Close"),u(q,"class","d-block d-md-none"),u(r,"class","site-list-title"),u(U,"type","button"),U.disabled=g=t[3]<=1,u(L,"type","button"),L.disabled=B=t[3]<=1,u(x,"class","current"),u(O,"class","page-num"),u(M,"type","button"),M.disabled=Me=t[3]===t[4],u(ne,"type","button"),ne.disabled=je=t[3]===t[4],u(C,"class","prev-next"),ue.__value="parent_sites",Z(ue,ue.__value),fe.__value="parent_and_child_sites",Z(fe,fe.__value),de.__value="child_sites_only",Z(de,de.__value),u(G,"class","custom-select form-control form-select"),t[5]===void 0&&De(()=>t[23].call(G)),u(Ue,"class","site-type-filter"),u($,"type","text"),u($,"placeholder",window.trans("Filter by site name")),u(_e,"class","site-name-filter"),u(re,"class","site-filter-actions"),u(le,"type","button"),u(le,"class","close"),u(le,"data-dismiss","modal"),u(le,"aria-label","Close"),u(Pe,"class","d-none d-md-block"),u(N,"class","site-list-actions"),u(i,"class","site-list-header"),u(qe,"class","table-header-col site-list-header-name"),u(Ae,"class","table-header-col site-list-header-parent"),u(me,"class","site-list-table-header"),u(He,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(E,J){R(E,e,J),R(E,n,J),R(E,l,J),a(l,o),a(o,s),a(s,i),a(i,r),a(r,c),a(c,p),a(c,h),a(c,f),a(r,b),a(r,_),a(r,T),a(r,q),a(q,j),a(i,H),a(i,N),a(N,C),a(C,U),a(U,I),a(C,w),a(C,L),a(L,te),a(C,z),a(C,O),a(O,x),a(x,Y),a(O,v),a(O,k),a(C,V),a(C,M),a(M,Re),a(C,rt),a(C,ne),a(ne,ut),a(N,ft),a(N,re),a(re,Ue),a(Ue,G),a(G,ue),a(G,fe),a(G,de),St(G,t[5],!0),a(re,dt),a(re,_e),a(_e,$),Z($,t[6]),a(_e,_t),a(_e,Oe),Ee(pe,Oe,null),a(N,pt),a(N,Pe),a(Pe,le),a(s,mt),a(s,me),a(me,qe),a(me,ht),a(me,Ae),a(s,bt),a(s,He),a(He,Ke),a(Ke,Be),ie[W].m(Be,null),t[26](l),X=!0,Xe||(gt=[P(e,"click",t[9]),be(Se.call(null,e,"body")),P(j,"click",t[9]),P(U,"click",t[13]),P(U,"keydown",t[19]),P(L,"click",t[12]),P(L,"keydown",t[20]),P(M,"click",t[10]),P(M,"keydown",t[21]),P(ne,"click",t[11]),P(ne,"keydown",t[22]),P(G,"change",t[23]),P(G,"change",t[14]),P($,"input",t[24]),P($,"keydown",t[25]),P(Oe,"click",t[14]),P(le,"click",t[9]),be(Se.call(null,l,"body"))],Xe=!0)},p(E,J){(!X||J[0]&4)&&m!==(m=window.trans("[_1]Site",E[2].toString())+"")&&oe(h,m),(!X||J[0]&8&&g!==(g=E[3]<=1))&&(U.disabled=g),(!X||J[0]&8&&B!==(B=E[3]<=1))&&(L.disabled=B),(!X||J[0]&8)&&oe(Y,E[3]),(!X||J[0]&16)&&oe(k,E[4]),(!X||J[0]&24&&Me!==(Me=E[3]===E[4]))&&(M.disabled=Me),(!X||J[0]&24&&je!==(je=E[3]===E[4]))&&(ne.disabled=je),J[0]&32&&St(G,E[5]),J[0]&64&&$.value!==E[6]&&Z($,E[6]);let Ye=W;W=wt(E),W===Ye?ie[W].p(E,J):(Ve(),Q(ie[Ye],1,1,()=>{ie[Ye]=null}),We(),K=ie[W],K?K.p(E,J):(K=ie[W]=yt[W](E),K.c()),F(K,1),K.m(Be,null))},i(E){X||(F(pe.$$.fragment,E),F(K),X=!0)},o(E){Q(pe.$$.fragment,E),Q(K),X=!1},d(E){E&&(S(e),S(n),S(l)),Ie(pe),ie[W].d(),t[26](null),Xe=!1,ee(gt)}}}function Tn(t){let e,n,l=se(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Wt(Dt(t,l,i));const s=i=>Q(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,r){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,r);R(i,e,r),n=!0},p(i,r){if(r[0]&2){l=se(i[1]);let c;for(c=0;c<l.length;c+=1){const p=Dt(i,l,c);o[c]?(o[c].p(p,r),F(o[c],1)):(o[c]=Wt(p),o[c].c(),F(o[c],1),o[c].m(e.parentNode,e))}for(Ve(),c=l.length;c<o.length;c+=1)s(c);We()}},i(i){if(!n){for(let r=0;r<l.length;r+=1)F(o[r]);n=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Q(o[r]);n=!1},d(i){i&&S(e),Je(o,i)}}}function Sn(t){let e,n;return{c(){e=d("tr"),n=d("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){R(l,e,o),a(e,n)},p:D,i:D,o:D,d(l){l&&S(e)}}}function Rn(t){let e;return{c(){e=d("span"),e.textContent=`${window.trans("Child Site")}`,u(e,"class","badge badge-child-site")},m(n,l){R(n,e,l)},p:D,d(n){n&&S(e)}}}function Cn(t){let e;return{c(){e=d("span"),e.textContent=`${window.trans("Site")}`,u(e,"class","badge badge-site")},m(n,l){R(n,e,l)},p:D,d(n){n&&S(e)}}}function Vt(t){let e,n=t[29].parentSiteName+"";return{c(){e=d("span"),u(e,"class","d-block d-md-none parent-site")},m(l,o){R(l,e,o),e.innerHTML=n},p(l,o){o[0]&2&&n!==(n=l[29].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&S(e)}}}function Wt(t){let e,n,l,o,s=t[29].name+"",i,r,c,p,m,h,f,b,_,T,q,j=t[29].parentSiteName+"",H,N;function C(w,L){return w[29].parentSiteName==="-"?Cn:Rn}let U=C(t),I=U(t),g=t[29].parentSiteName!=="-"&&Vt(t);return b=new lt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=d("tr"),n=d("td"),I.c(),l=y(),o=d("a"),i=A(s),c=y(),g&&g.c(),p=y(),m=d("a"),h=d("span"),h.textContent=`${window.trans("View your site.")}`,f=y(),Qe(b.$$.fragment),T=y(),q=d("td"),H=y(),u(o,"href",r=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[29].id}`),u(o,"class","dashboard-link"),u(h,"class","d-inline-block d-md-none"),u(m,"href",_=t[29].siteUrl),u(m,"class","site-link"),u(m,"target","_blank")},m(w,L){R(w,e,L),a(e,n),I.m(n,null),a(n,l),a(n,o),a(o,i),a(n,c),g&&g.m(n,null),a(n,p),a(n,m),a(m,h),a(m,f),Ee(b,m,null),a(e,T),a(e,q),q.innerHTML=j,a(e,H),N=!0},p(w,L){U===(U=C(w))&&I?I.p(w,L):(I.d(1),I=U(w),I&&(I.c(),I.m(n,l))),(!N||L[0]&2)&&s!==(s=w[29].name+"")&&oe(i,s),(!N||L[0]&2&&r!==(r=`${window.ScriptURI}?__mode=dashboard&blog_id=${w[29].id}`))&&u(o,"href",r),w[29].parentSiteName!=="-"?g?g.p(w,L):(g=Vt(w),g.c(),g.m(n,p)):g&&(g.d(1),g=null),(!N||L[0]&2&&_!==(_=w[29].siteUrl))&&u(m,"href",_),(!N||L[0]&2)&&j!==(j=w[29].parentSiteName+"")&&(q.innerHTML=j)},i(w){N||(F(b.$$.fragment,w),N=!0)},o(w){Q(b.$$.fragment,w),N=!1},d(w){w&&S(e),I.d(),g&&g.d(),Ie(b)}}}function Ln(t){let e,n,l,o,s,i=t[0]&&Ft(t);return{c(){e=y(),i&&i.c(),n=Ce()},m(r,c){R(r,e,c),i&&i.m(r,c),R(r,n,c),l=!0,o||(s=P(document.body,"click",t[15]),o=!0)},p(r,c){r[0]?i?(i.p(r,c),c[0]&1&&F(i,1)):(i=Ft(r),i.c(),F(i,1),i.m(n.parentNode,n)):i&&(Ve(),Q(i,1,1,()=>{i=null}),We())},i(r){l||(F(i),l=!0)},o(r){Q(i),l=!1},d(r){r&&(S(e),S(n)),i&&i.d(r),o=!1,s()}}}function Nn(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{anchorRef:i}=e;const r=()=>{n(0,s=!1)};let c=[],p=0,m=1,h=1,f="parent_sites",b="",_=[],T=!1,q=null;const j=()=>{n(3,m++,m),I()},H=()=>{n(3,m=h),I()},N=()=>{n(3,m--,m),I()},C=()=>{n(3,m=1),I()},U=()=>{_=[],f==="child_sites_only"?_=[{type:"parent_website",args:{value:""}}]:f==="parent_sites"&&(_=[{type:"parent_website",args:{value:"1"}}]),n(6,b=b.trim()),b!==""&&_.push({type:"name",args:{string:b,option:"contains"}}),n(3,m=1),I()},I=async()=>{n(7,T=!0);const v=await kn({magicToken:l,items:_,page:m,limit:o});n(2,p=v.count),n(4,h=v.pageMax),n(3,m=h!==0?v.page:0),n(1,c=v.sites),n(7,T=!1)},g=v=>{const k=v.target;s&&nt([i,q],k)&&r()};$e(async()=>{U()});const w=v=>v.key==="Enter"&&C(),L=v=>v.key==="Enter"&&N(),te=v=>v.key==="Enter"&&j(),B=v=>v.key==="Enter"&&H();function z(){f=Yt(this),n(5,f)}function O(){b=this.value,n(6,b)}const x=v=>v.key==="Enter"&&U();function Y(v){ye[v?"unshift":"push"](()=>{q=v,n(8,q)})}return t.$$set=v=>{"magicToken"in v&&n(16,l=v.magicToken),"limit"in v&&n(17,o=v.limit),"open"in v&&n(0,s=v.open),"anchorRef"in v&&n(18,i=v.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&262145&&i&&(s?i.classList.add("open"):i.classList.remove("open"))},[s,c,p,m,h,f,b,T,q,r,j,H,N,C,U,g,l,o,i,w,L,te,B,z,O,x,Y]}class En extends Te{constructor(e){super(),ke(this,e,Nn,Ln,he,{magicToken:16,limit:17,open:0,anchorRef:18},null,[-1,-1])}}function In(t,e){const n=new En({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Mn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}new Bt({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var it,ot;const st=document.querySelector('[data-is="primary-navigation-toggle"]');if(st!==null){const t="collapsed",e=sessionStorage.getItem(t);fn(st,{collapsed:e==="true",buttonRef:st.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const at=document.querySelector('[data-script="admin-ui"]');at===null&&console.error("data-script='admin-ui' is not set");const ze=(it=at?.getAttribute("data-blog-id"))!==null&&it!==void 0?it:"",ce=(ot=at?.getAttribute("data-magic-token"))!==null&&ot!==void 0?ot:"";ce===""&&console.error("data-magic-token is not set");const jn="50",Qt=document.querySelectorAll('[data-is="site-list-button"]');Qt.length>0&&ce!==""&&Qt.forEach(t=>{In(t,{magicToken:ce,limit:Number.parseInt(jn),open:!1,anchorRef:t})});const ct=document.querySelectorAll('[data-is="create-button"]'),Ge=document.querySelector('[data-is="search-button"]'),Un=document.querySelector("div.mt-modal");(ct.length>0||Ge!==null)&&ce!==""&&zt({blogId:ze,magicToken:ce}).then(t=>{ct.length>0&&ct.forEach(n=>{an({target:n,props:{blog_id:ze,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,anchorRef:n,containerRef:Un}})}),Ge!==null&&vn(Ge,{blogId:ze,magicToken:ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1),open:!1,anchorRef:Ge});const e=document.querySelector('[data-is="search-form"]');e!==null&&Mn(e,{blogId:ze,magicToken:ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
