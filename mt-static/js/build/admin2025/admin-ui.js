function ee(){}function vt(t){return t()}function St(){return Object.create(null)}function pe(t){t.forEach(vt)}function tt(t){return typeof t=="function"}function Me(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function en(t){return Object.keys(t).length===0}function ve(t){return t&&tt(t.destroy)?t.destroy:ee}const tn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(t,e){t.appendChild(e)}function N(t,e,n){t.insertBefore(e,n||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function lt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function te(t){return document.createTextNode(t)}function S(){return te(" ")}function Fe(){return te("")}function F(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function nn(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function ln(t){return Array.from(t.childNodes)}function Le(t,e){e=""+e,t.data!==e&&(t.data=e)}function me(t,e){t.value=e??""}function Lt(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function sn(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let De;function Je(t){De=t}function on(){if(!De)throw new Error("Function called outside component initialization");return De}function Ct(t){on().$$.on_mount.push(t)}const je=[],Re=[];let Ue=[];const Nt=[],Et=Promise.resolve();let it=!1;function It(){it||(it=!0,Et.then(jt))}function Mt(){return It(),Et}function Xe(t){Ue.push(t)}const st=new Set;let qe=0;function jt(){if(qe!==0)return;const t=De;do{try{for(;qe<je.length;){const e=je[qe];qe++,Je(e),an(e.$$)}}catch(e){throw je.length=0,qe=0,e}for(Je(null),je.length=0,qe=0;Re.length;)Re.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];st.has(n)||(st.add(n),n())}Ue.length=0}while(je.length);for(;Nt.length;)Nt.pop()();it=!1,st.clear(),Je(t)}function an(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xe)}}function rn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const Ke=new Set;let Ce;function Ye(){Ce={r:0,c:[],p:Ce}}function Ze(){Ce.r||pe(Ce.c),Ce=Ce.p}function ne(t,e){t&&t.i&&(Ke.delete(t),t.i(e))}function re(t,e,n,l){if(t&&t.o){if(Ke.has(t))return;Ke.add(t),Ce.c.push(()=>{Ke.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Se(t){return t?.length!==void 0?t:Array.from(t)}function cn(t,e){re(t,1,1,()=>{e.delete(t.key)})}function dn(t,e,n,l,s,o,i,a,d,_,g,y){let p=t.length,m=o.length,h=p;const w={};for(;h--;)w[t[h].key]=h;const b=[],C=new Map,U=new Map,P=[];for(h=m;h--;){const j=y(s,o,h),q=n(j);let v=i.get(q);v?P.push(()=>v.p(j,e)):(v=_(q,j),v.c()),C.set(q,b[h]=v),q in w&&U.set(q,Math.abs(h-w[q]))}const E=new Set,M=new Set;function D(j){ne(j,1),j.m(a,g),i.set(j.key,j),g=j.first,m--}for(;p&&m;){const j=b[m-1],q=t[p-1],v=j.key,A=q.key;j===q?(g=j.first,p--,m--):C.has(A)?!i.has(v)||E.has(v)?D(j):M.has(A)?p--:U.get(v)>U.get(A)?(M.add(v),D(j)):(E.add(A),p--):(d(q,i),p--)}for(;p--;){const j=t[p];C.has(j.key)||d(j,i)}for(;m;)D(b[m-1]);return pe(P),b}function Ae(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Xe(()=>{const o=t.$$.on_mount.map(vt).filter(tt);t.$$.on_destroy?t.$$.on_destroy.push(...o):pe(o),t.$$.on_mount=[]}),s.forEach(Xe)}function Ee(t,e){const n=t.$$;n.fragment!==null&&(rn(n.after_update),pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function un(t,e){t.$$.dirty[0]===-1&&(je.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,l,s,o,i=null,a=[-1]){const d=De;Je(t);const _=t.$$={fragment:null,ctx:[],props:o,update:ee,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(_.root);let g=!1;if(_.ctx=n?n(t,e.props||{},(y,p,...m)=>{const h=m.length?m[0]:p;return _.ctx&&s(_.ctx[y],_.ctx[y]=h)&&(!_.skip_bound&&_.bound[y]&&_.bound[y](h),g&&un(t,y)),p}):[],_.update(),g=!0,pe(_.before_update),_.fragment=l?l(_.ctx):!1,e.target){if(e.hydrate){const y=ln(e.target);_.fragment&&_.fragment.l(y),y.forEach(R)}else _.fragment&&_.fragment.c();e.intro&&ne(t.$$.fragment),Ne(t,e.target,e.anchor),jt()}Je(d)}class Oe{$$=void 0;$$set=void 0;$destroy(){Ee(this,1),this.$destroy=ee}$on(e,n){if(!tt(n))return ee;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!en(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fn);function He(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Mt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function ot(t,e){return!t.some(n=>n&&n.contains(e))}const at=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function Ut(t,e,n){const l=t.slice();return l[12]=e[n],l}function qt(t){let e,n,l,s,o,i,a,d,_,g,y,p=window.trans("New [_1] creation",window.trans("Entry"))+"",m,h,w,b,C,U=window.trans("New [_1] creation",window.trans("Page"))+"",P,E,M,D;function j(A,I){if(A[3])return pn;if(A[4].length>0)return _n}let q=j(t),v=q&&q(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=u("div"),v&&v.c(),i=S(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=S(),_=u("ul"),g=u("li"),y=u("a"),m=te(p),w=S(),b=u("li"),C=u("a"),P=te(U),r(l,"type","button"),r(l,"class","close"),r(l,"data-dismiss","modal"),r(l,"aria-label","Close"),r(n,"class","modal-header"),r(a,"class","block-title"),r(y,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[1]}`),r(C,"href",E=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[1]}`),r(_,"class","create-button-list"),r(o,"class","modal-body"),r(e,"class","modal create-button-modal")},m(A,I){N(A,e,I),c(e,n),c(n,l),c(e,s),c(e,o),v&&v.m(o,null),c(o,i),c(o,a),c(o,d),c(o,_),c(_,g),c(g,y),c(y,m),c(_,w),c(_,b),c(b,C),c(C,P),t[11](e),M||(D=[F(l,"click",t[5]),ve(He.call(null,e,"body"))],M=!0)},p(A,I){q===(q=j(A))&&v?v.p(A,I):(v&&v.d(1),v=q&&q(A),v&&(v.c(),v.m(o,i))),I&2&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${A[1]}`)&&r(y,"href",h),I&2&&E!==(E=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${A[1]}`)&&r(C,"href",E)},d(A){A&&R(e),v&&v.d(),t[11](null),M=!1,pe(D)}}}function _n(t){let e,n,l,s=Se(t[4]),o=[];for(let i=0;i<s.length;i+=1)o[i]=At(Ut(t,s,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=S(),l=u("ul");for(let i=0;i<o.length;i+=1)o[i].c();r(e,"class","block-title"),r(l,"class","create-button-list")},m(i,a){N(i,e,a),N(i,n,a),N(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&18){s=Se(i[4]);let d;for(d=0;d<s.length;d+=1){const _=Ut(i,s,d);o[d]?o[d].p(_,a):(o[d]=At(_),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(R(e),R(n),R(l)),nt(o,i)}}}function pn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){N(n,e,l)},p:ee,d(n){n&&R(e)}}}function At(t){let e,n,l=window.trans("New [_1] creation",t[12].name)+"",s,o,i;return{c(){e=u("li"),n=u("a"),s=te(l),i=S(),r(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[12].id}&type=content_data_${t[12].id}&blog_id=${t[1]}`)},m(a,d){N(a,e,d),c(e,n),c(n,s),c(e,i)},p(a,d){d&16&&l!==(l=window.trans("New [_1] creation",a[12].name)+"")&&Le(s,l),d&18&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[12].id}&type=content_data_${a[12].id}&blog_id=${a[1]}`)&&r(n,"href",o)},d(a){a&&R(e)}}}function mn(t){let e,n,l,s,o=t[0]&&qt(t);return{c(){e=S(),o&&o.c(),n=Fe()},m(i,a){N(i,e,a),o&&o.m(i,a),N(i,n,a),l||(s=F(document.body,"click",t[6]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=qt(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:ee,o:ee,d(i){i&&(R(e),R(n)),o&&o.d(i),l=!1,s()}}}function hn(t,e,n){let{blog_id:l}=e,{magicToken:s}=e,{open:o=!1}=e,{anchorRef:i=null}=e,{containerRef:a=null}=e,d=null,_=!1,g=!1,y=[];const p=()=>{n(0,o=!1)},m=w=>{if(a&&a.classList.contains("show"))return;const b=w.target;o&&ot([i,d],b)&&p()};function h(w){Re[w?"unshift":"push"](()=>{d=w,n(2,d),n(8,i),n(0,o),n(10,_),n(3,g),n(1,l),n(7,s)})}return t.$$set=w=>{"blog_id"in w&&n(1,l=w.blog_id),"magicToken"in w&&n(7,s=w.magicToken),"open"in w&&n(0,o=w.open),"anchorRef"in w&&n(8,i=w.anchorRef),"containerRef"in w&&n(9,a=w.containerRef)},t.$$.update=()=>{if(t.$$.dirty&1423&&i){if(d){const w=i.getBoundingClientRect(),b=`calc(${w.bottom}px + 10px)`;n(2,d.style.top=b,d);const C=`calc(100vh - ${w.bottom}px - 10px - 20px)`;n(2,d.style.maxHeight=C,d)}o?(i.classList.add("open"),!_&&!g&&(n(3,g=!0),at({blogId:l,magicToken:s}).then(w=>{n(4,y=w.contentTypes.filter(b=>b.can_create===1)),n(10,_=!0),n(3,g=!1)}).catch(w=>{console.error("Failed to fetch content types:",w),n(3,g=!1)}))):i.classList.remove("open")}},[o,l,d,g,y,p,m,s,i,a,_,h]}class bn extends Oe{constructor(e){super(),Pe(this,e,hn,mn,Me,{blog_id:1,magicToken:7,open:0,anchorRef:8,containerRef:9})}}const gn=({target:t,props:e})=>{const n=new bn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})},Pt="collapsed",Ot=()=>{const t=sessionStorage.getItem(Pt);return t==="true"?!0:t==="false"?!1:null},yn=t=>{sessionStorage.setItem(Pt,t.toString())},Ht=t=>{t?document.documentElement.classList.add("mt-has-primary-navigation-collapsed"):document.documentElement.classList.remove("mt-has-primary-navigation-collapsed")};function wn(t){let e,n,l,s;return{c(){e=u("div"),r(e,"class","mt-primaryNavigation-overlay"),r(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){N(o,e,i),l||(s=[ve(He.call(null,e,"body")),F(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&r(e,"style",n)},i:ee,o:ee,d(o){o&&R(e),l=!1,pe(s)}}}function kn(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(p,m)=>{const h=document.querySelector('[data-is="content-wrapper"]');m?h.classList.add(p):h.classList.remove(p)},d=()=>{a("collapsed",s)},_=()=>{a("mouseover",i)},g=()=>{var p;s&&(i=!0,_(),(p=document.querySelector('[data-is="primary-navigation"]'))===null||p===void 0||p.addEventListener("mouseleave",y,{once:!0}))},y=()=>{i=!1,_()};return Ct(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=p=>{"buttonRef"in p&&n(2,l=p.buttonRef),"collapsed"in p&&n(0,s=p.collapsed),"isStored"in p&&n(3,o=p.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,_(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed"),Ht(!0)):(l.classList.remove("collapsed"),l.classList.add("expanded"),Ht(!1))))},[s,g,l,o]}class vn extends Oe{constructor(e){super(),Pe(this,e,kn,wn,Me,{buttonRef:2,collapsed:0,isStored:3})}}function Sn(t,e){const n=new vn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:Ot()!==null}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),yn(e.collapsed)})}const Bt=t=>{const e=window.innerWidth-document.documentElement.clientWidth;e>0&&document.documentElement.style.setProperty("--scrollbar-width",`${e}px`),t.classList.add("mt-modal-overlay")};function Ft(t){let e,n;return{c(){e=lt("title"),n=te(t[2])},m(l,s){N(l,e,s),c(e,n)},p(l,s){s&4&&Le(n,l[2])},d(l){l&&R(e)}}}function Tn(t){let e,n,l=t[2]&&Ft(t);return{c(){e=lt("svg"),l&&l.c(),n=lt("use"),Tt(n,"xlink:href",t[1]),r(e,"role","img"),r(e,"class",t[0]),r(e,"style",t[3])},m(s,o){N(s,e,o),l&&l.m(e,null),c(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=Ft(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&Tt(n,"xlink:href",s[1]),o&1&&r(e,"class",s[0]),o&8&&r(e,"style",s[3])},i:ee,o:ee,d(s){s&&R(e),l&&l.d()}}}function Ln(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class We extends Oe{constructor(e){super(),Pe(this,e,Ln,Tn,Me,{class:0,href:1,title:2,style:3})}}function Dt(t,e,n){const l=t.slice();return l[10]=e[n],l}function Jt(t,e,n){const l=t.slice();return l[13]=e[n],l}function Wt(t){let e,n,l,s=!1,o,i,a,d=t[13].label+"",_,g,y,p,m;return y=nn(t[8][0]),{c(){e=u("label"),n=u("input"),a=S(),_=te(d),g=S(),r(n,"type","radio"),r(n,"name","type"),n.__value=l=t[13].key,me(n,n.__value),r(n,"id",o=t[13].key),n.checked=i=t[0]===t[13].key,y.p(n)},m(h,w){N(h,e,w),c(e,n),n.checked=n.__value===t[0],c(e,a),c(e,_),c(e,g),p||(m=F(n,"change",t[7]),p=!0)},p(h,w){w&16&&l!==(l=h[13].key)&&(n.__value=l,me(n,n.__value),s=!0),w&16&&o!==(o=h[13].key)&&r(n,"id",o),w&17&&i!==(i=h[0]===h[13].key)&&(n.checked=i),(s||w&17)&&(n.checked=n.__value===h[0]),w&16&&d!==(d=h[13].label+"")&&Le(_,d)},d(h){h&&R(e),y.r(),p=!1,m()}}}function Rn(t){let e,n;function l(i,a){return i[3].length>0?En:Nn}let s=l(t),o=s(t);return{c(){e=u("select"),o.c(),r(e,"class","custom-select form-control form-select"),r(e,"name","content_type_id"),e.disabled=n=t[0]!=="content_data"||t[3].length===0,Rt(e,"disabled",t[0]!=="content_data")},m(i,a){N(i,e,a),o.m(e,null)},p(i,a){s===(s=l(i))&&o?o.p(i,a):(o.d(1),o=s(i),o&&(o.c(),o.m(e,null))),a&9&&n!==(n=i[0]!=="content_data"||i[3].length===0)&&(e.disabled=n),a&1&&Rt(e,"disabled",i[0]!=="content_data")},d(i){i&&R(e),o.d()}}}function Cn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){N(n,e,l)},p:ee,d(n){n&&R(e)}}}function Nn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",me(e,e.__value)},m(n,l){N(n,e,l)},p:ee,d(n){n&&R(e)}}}function En(t){let e,n=Se(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Vt(Dt(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Fe()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);N(s,e,o)},p(s,o){if(o&8){n=Se(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Dt(s,n,i);l[i]?l[i].p(a,o):(l[i]=Vt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&R(e),nt(l,s)}}}function Vt(t){let e,n=t[10].name+"",l,s;return{c(){e=u("option"),l=te(n),e.__value=s=t[10].id,me(e,e.__value)},m(o,i){N(o,e,i),c(e,l)},p(o,i){i&8&&n!==(n=o[10].name+"")&&Le(l,n),i&8&&s!==(s=o[10].id)&&(e.__value=s,me(e,e.__value))},d(o){o&&R(e)}}}function In(t){let e,n,l,s,o,i,a,d,_,g,y,p,m,h,w,b,C,U,P,E,M,D,j,q,v,A=Se(t[4]),I=[];for(let T=0;T<A.length;T+=1)I[T]=Wt(Jt(t,A,T));function G(T,W){return T[5]?Cn:Rn}let x=G(t),J=x(t);return D=new We({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("form"),n=u("input"),l=S(),s=u("input"),o=S(),i=u("input"),a=S(),d=u("input"),_=S(),g=u("input"),y=S(),p=u("div");for(let T=0;T<I.length;T+=1)I[T].c();m=S(),h=u("div"),J.c(),w=S(),b=u("div"),C=u("div"),U=u("input"),P=S(),E=u("div"),M=u("button"),Ae(D.$$.fragment),j=S(),q=u("span"),q.textContent=`${window.trans("Search")}`,r(n,"type","hidden"),r(n,"name","__mode"),n.value="search_replace",r(s,"type","hidden"),r(s,"name","blog_id"),s.value=t[1],r(i,"type","hidden"),r(i,"name","_type"),i.value=t[0],r(d,"type","hidden"),r(d,"name","do_search"),d.value="1",r(g,"type","hidden"),r(g,"name","magic_token"),g.value=t[2],r(p,"class","search-type"),r(h,"class","search-content-type"),r(U,"type","text"),r(U,"placeholder",window.trans("Select target and search text...")),r(U,"name","search"),r(C,"class","search-text-box"),r(M,"type","submit"),r(M,"class","btn btn-primary"),r(E,"class","submit-button"),r(b,"class","search-input-group"),r(e,"class","mt-search-form"),r(e,"method","post"),r(e,"action",window.ScriptURI)},m(T,W){N(T,e,W),c(e,n),c(e,l),c(e,s),c(e,o),c(e,i),c(e,a),c(e,d),c(e,_),c(e,g),c(e,y),c(e,p);for(let H=0;H<I.length;H+=1)I[H]&&I[H].m(p,null);c(e,m),c(e,h),J.m(h,null),c(e,w),c(e,b),c(b,C),c(C,U),t[9](U),c(b,P),c(b,E),c(E,M),Ne(D,M,null),c(M,j),c(M,q),v=!0},p(T,[W]){if((!v||W&2)&&(s.value=T[1]),(!v||W&1)&&(i.value=T[0]),(!v||W&4)&&(g.value=T[2]),W&17){A=Se(T[4]);let H;for(H=0;H<A.length;H+=1){const Q=Jt(T,A,H);I[H]?I[H].p(Q,W):(I[H]=Wt(Q),I[H].c(),I[H].m(p,null))}for(;H<I.length;H+=1)I[H].d(1);I.length=A.length}x===(x=G(T))&&J?J.p(T,W):(J.d(1),J=x(T),J&&(J.c(),J.m(h,null)))},i(T){v||(ne(D.$$.fragment,T),v=!0)},o(T){re(D.$$.fragment,T),v=!1},d(T){T&&R(e),nt(I,T),J.d(),t[9](null),Ee(D)}}}function Mn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,{isLoading:d=!1}=e,_=null;const g=[[]];function y(){a=this.__value,n(0,a)}function p(m){Re[m?"unshift":"push"](()=>{_=m,n(6,_)})}return t.$$set=m=>{"blogId"in m&&n(1,l=m.blogId),"magicToken"in m&&n(2,s=m.magicToken),"contentTypes"in m&&n(3,o=m.contentTypes),"searchTabs"in m&&n(4,i=m.searchTabs),"objectType"in m&&n(0,a=m.objectType),"isLoading"in m&&n(5,d=m.isLoading)},t.$$.update=()=>{t.$$.dirty&64&&_&&_.focus()},[a,l,s,o,i,d,_,y,g,p]}class Qt extends Oe{constructor(e){super(),Pe(this,e,Mn,In,Me,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0,isLoading:5})}}function zt(t){let e,n,l,s,o,i,a,d,_,g,y;return d=new Qt({props:{blogId:t[2],magicToken:t[3],contentTypes:t[6],objectType:t[1],searchTabs:t[4],isLoading:t[5]}}),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=S(),a=u("div"),Ae(d.$$.fragment),r(e,"class","search-button-modal-overlay"),r(o,"type","button"),r(o,"class","close"),r(o,"data-dismiss","modal"),r(o,"aria-label","Close"),r(s,"class","modal-header"),r(a,"class","modal-body"),r(l,"class","modal search-button-modal")},m(p,m){N(p,e,m),N(p,n,m),N(p,l,m),c(l,s),c(s,o),c(l,i),c(l,a),Ne(d,a,null),t[12](l),_=!0,g||(y=[F(e,"click",t[8]),ve(He.call(null,e,"body")),ve(Bt.call(null,e)),F(o,"click",t[8]),ve(He.call(null,l,"body"))],g=!0)},p(p,m){const h={};m&4&&(h.blogId=p[2]),m&8&&(h.magicToken=p[3]),m&64&&(h.contentTypes=p[6]),m&2&&(h.objectType=p[1]),m&16&&(h.searchTabs=p[4]),m&32&&(h.isLoading=p[5]),d.$set(h)},i(p){_||(ne(d.$$.fragment,p),_=!0)},o(p){re(d.$$.fragment,p),_=!1},d(p){p&&(R(e),R(n),R(l)),Ee(d),t[12](null),g=!1,pe(y)}}}function jn(t){let e,n,l,s,o,i=t[0]&&zt(t);return{c(){e=S(),i&&i.c(),n=Fe()},m(a,d){N(a,e,d),i&&i.m(a,d),N(a,n,d),l=!0,s||(o=F(document.body,"click",t[9]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&ne(i,1)):(i=zt(a),i.c(),ne(i,1),i.m(n.parentNode,n)):i&&(Ye(),re(i,1,1,()=>{i=null}),Ze())},i(a){l||(ne(i),l=!0)},o(a){re(i),l=!1},d(a){a&&(R(e),R(n)),i&&i.d(a),s=!1,o()}}}function Un(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{open:o=!1}=e,{anchorRef:i}=e,{searchTabs:a}=e,{objectType:d}=e,_=[],g=!1,y=!1;const p=()=>{n(0,o=!1)};let m=null;const h=b=>{const C=b.target;o&&ot([i,m],C)&&p()};Ct(async()=>{d&&a.find(b=>b.key===d)||n(1,d=a[0].key)});function w(b){Re[b?"unshift":"push"](()=>{m=b,n(7,m)})}return t.$$set=b=>{"blogId"in b&&n(2,l=b.blogId),"magicToken"in b&&n(3,s=b.magicToken),"open"in b&&n(0,o=b.open),"anchorRef"in b&&n(10,i=b.anchorRef),"searchTabs"in b&&n(4,a=b.searchTabs),"objectType"in b&&n(1,d=b.objectType)},t.$$.update=()=>{t.$$.dirty&3117&&i&&(o?(i.classList.add("open"),!g&&!y&&(n(5,y=!0),at({blogId:l,magicToken:s}).then(b=>{n(6,_=b.contentTypes.filter(C=>C.can_search===1)),n(11,g=!0),n(5,y=!1)}).catch(b=>{console.error("Failed to fetch content types:",b),n(5,y=!1)}))):i.classList.remove("open")),t.$$.dirty&1},[o,d,l,s,a,y,_,m,p,h,i,g,w]}class qn extends Oe{constructor(e){super(),Pe(this,e,Un,jn,Me,{blogId:2,magicToken:3,open:0,anchorRef:10,searchTabs:4,objectType:1})}}function An(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new qn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const rt=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:Pn}=tn;function Gt(t,e,n){const l=t.slice();return l[46]=e[n],l}function Xt(t){let e,n,l,s,o,i,a,d,_,g=window.trans("[_1]Site",t[4].toString())+"",y,p,m,h,w,b,C,U,P,E,M,D,j,q,v,A,I,G,x,J,T,W,H,Q,se,he,X,Te,oe,ae,be,ge,K,z,le,ce,Y,O,f,L,k,V,$,Z,ue,Ve,we,ht,Ie,Qe,bt,ze,gt,Ge,xe,Be,de,fe,_e,$e,yt;Z=new We({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const wt=[Hn,On],ke=[];function kt(B,ie){return B[2]?0:1}return de=kt(t),fe=ke[de]=wt[de](t),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("div"),i=u("div"),a=u("div"),d=u("span"),_=te("("),y=te(g),p=te(")"),m=S(),h=u("p"),h.textContent=`${window.trans("Site List")}`,w=S(),b=u("div"),C=u("button"),C.innerHTML='<span aria-hidden="true">\xD7</span>',U=S(),P=u("div"),E=u("div"),M=u("button"),D=te("<<"),q=S(),v=u("button"),A=te("<"),G=S(),x=u("span"),J=u("span"),T=te(t[5]),W=te("/"),H=te(t[6]),Q=S(),se=u("button"),he=te(">"),Te=S(),oe=u("button"),ae=te(">>"),ge=S(),K=u("div"),z=u("div"),le=u("select"),ce=u("option"),ce.textContent=`${window.trans("Parent Sites")}`,Y=u("option"),Y.textContent=`${window.trans("Parent and child sites")}`,O=u("option"),O.textContent=`${window.trans("Only child sites")}`,f=S(),L=u("div"),k=u("input"),V=S(),$=u("button"),Ae(Z.$$.fragment),ue=S(),Ve=u("div"),we=u("button"),we.innerHTML='<span aria-hidden="true">\xD7</span>',ht=S(),Ie=u("div"),Qe=u("span"),Qe.textContent=`${window.trans("Site Name")}`,bt=S(),ze=u("span"),ze.textContent=`${window.trans("Parent Site")}`,gt=S(),Ge=u("div"),xe=u("table"),Be=u("tbody"),fe.c(),r(e,"class","site-list-button-modal-overlay"),r(C,"type","button"),r(C,"class","close"),r(C,"data-dismiss","modal"),r(C,"aria-label","Close"),r(b,"class","d-block d-md-none"),r(a,"class","site-list-title"),r(M,"type","button"),M.disabled=j=t[5]<=1,r(v,"type","button"),v.disabled=I=t[5]<=1,r(J,"class","current"),r(x,"class","page-num"),r(se,"type","button"),se.disabled=X=t[5]===t[6],r(oe,"type","button"),oe.disabled=be=t[5]===t[6],r(E,"class","prev-next"),ce.__value="parent_sites",me(ce,ce.__value),Y.__value="parent_and_child_sites",me(Y,Y.__value),O.__value="child_sites_only",me(O,O.__value),r(le,"class","custom-select form-control form-select"),t[7]===void 0&&Xe(()=>t[29].call(le)),r(z,"class","site-type-filter"),r(k,"type","text"),r(k,"placeholder",window.trans("Filter by site name")),r(L,"class","site-name-filter"),r(K,"class","site-filter-actions"),r(we,"type","button"),r(we,"class","close"),r(we,"data-dismiss","modal"),r(we,"aria-label","Close"),r(Ve,"class","d-none d-md-block"),r(P,"class","site-list-actions"),r(i,"class","site-list-header"),r(Qe,"class","table-header-col site-list-header-name"),r(ze,"class","table-header-col site-list-header-parent"),r(Ie,"class","site-list-table-header"),r(Ge,"class","site-list-table-wrapper"),r(o,"class","site-list-container"),r(s,"class","modal-body"),r(l,"class","modal site-list-button-modal")},m(B,ie){N(B,e,ie),N(B,n,ie),N(B,l,ie),c(l,s),c(s,o),c(o,i),c(i,a),c(a,d),c(d,_),c(d,y),c(d,p),c(a,m),c(a,h),c(a,w),c(a,b),c(b,C),c(i,U),c(i,P),c(P,E),c(E,M),c(M,D),c(E,q),c(E,v),c(v,A),c(E,G),c(E,x),c(x,J),c(J,T),c(x,W),c(x,H),c(E,Q),c(E,se),c(se,he),c(E,Te),c(E,oe),c(oe,ae),c(P,ge),c(P,K),c(K,z),c(z,le),c(le,ce),c(le,Y),c(le,O),Lt(le,t[7],!0),c(K,f),c(K,L),c(L,k),me(k,t[8]),c(L,V),c(L,$),Ne(Z,$,null),c(P,ue),c(P,Ve),c(Ve,we),c(o,ht),c(o,Ie),c(Ie,Qe),c(Ie,bt),c(Ie,ze),c(o,gt),c(o,Ge),c(Ge,xe),c(xe,Be),ke[de].m(Be,null),t[36](Be),t[37](l),_e=!0,$e||(yt=[F(e,"click",t[11]),ve(He.call(null,e,"body")),ve(Bt.call(null,e)),F(C,"click",t[11]),F(M,"click",t[15]),F(M,"keydown",t[25]),F(v,"click",t[14]),F(v,"keydown",t[26]),F(se,"click",t[12]),F(se,"keydown",t[27]),F(oe,"click",t[13]),F(oe,"keydown",t[28]),F(le,"change",t[29]),F(le,"change",t[16]),F(k,"input",t[30]),F(k,"keydown",t[31]),F($,"click",t[16]),F(we,"click",t[11]),ve(He.call(null,l,"body"))],$e=!0)},p(B,ie){(!_e||ie[0]&16)&&g!==(g=window.trans("[_1]Site",B[4].toString())+"")&&Le(y,g),(!_e||ie[0]&32&&j!==(j=B[5]<=1))&&(M.disabled=j),(!_e||ie[0]&32&&I!==(I=B[5]<=1))&&(v.disabled=I),(!_e||ie[0]&32)&&Le(T,B[5]),(!_e||ie[0]&64)&&Le(H,B[6]),(!_e||ie[0]&96&&X!==(X=B[5]===B[6]))&&(se.disabled=X),(!_e||ie[0]&96&&be!==(be=B[5]===B[6]))&&(oe.disabled=be),ie[0]&128&&Lt(le,B[7]),ie[0]&256&&k.value!==B[8]&&me(k,B[8]);let et=de;de=kt(B),de===et?ke[de].p(B,ie):(Ye(),re(ke[et],1,1,()=>{ke[et]=null}),Ze(),fe=ke[de],fe?fe.p(B,ie):(fe=ke[de]=wt[de](B),fe.c()),ne(fe,1),fe.m(Be,null))},i(B){_e||(ne(Z.$$.fragment,B),ne(fe),_e=!0)},o(B){re(Z.$$.fragment,B),re(fe),_e=!1},d(B){B&&(R(e),R(n),R(l)),Ee(Z),ke[de].d(),t[36](null),t[37](null),$e=!1,pe(yt)}}}function On(t){let e=[],n=new Map,l,s,o=Se(t[1]);const i=a=>a[46].id;for(let a=0;a<o.length;a+=1){let d=Gt(t,o,a),_=i(d);n.set(_,e[a]=Yt(_,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Fe()},m(a,d){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(a,d);N(a,l,d),s=!0},p(a,d){d[0]&393226&&(o=Se(a[1]),Ye(),e=dn(e,d,i,1,a,o,n,l.parentNode,cn,Yt,l,Gt),Ze())},i(a){if(!s){for(let d=0;d<o.length;d+=1)ne(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)re(e[d]);s=!1},d(a){a&&R(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function Hn(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,r(n,"colspan","2"),r(n,"class","loading")},m(l,s){N(l,e,s),c(e,n)},p:ee,i:ee,o:ee,d(l){l&&R(e)}}}function Bn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,r(e,"class","badge badge-child-site")},m(n,l){N(n,e,l)},p:ee,d(n){n&&R(e)}}}function Fn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,r(e,"class","badge badge-site")},m(n,l){N(n,e,l)},p:ee,d(n){n&&R(e)}}}function Dn(t){let e,n,l,s;function o(...i){return t[33](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",r(e,"aria-label",window.trans("Add to starred sites")),r(e,"aria-pressed","false"),r(e,"title",window.trans("Add to starred sites"))},m(i,a){N(i,e,a),c(e,n),l||(s=F(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&R(e),l=!1,s()}}}function Jn(t){let e,n,l,s;function o(...i){return t[32](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",r(e,"aria-label",window.trans("Remove from starred sites")),r(e,"aria-pressed","true"),r(e,"title",window.trans("Remove from starred sites"))},m(i,a){N(i,e,a),c(e,n),l||(s=F(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&R(e),l=!1,s()}}}function Kt(t){let e,n=t[46].parentSiteName+"";return{c(){e=u("span"),r(e,"class","d-block d-md-none parent-site")},m(l,s){N(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[46].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&R(e)}}}function Wn(t){let e,n,l,s;function o(...i){return t[35](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",r(e,"aria-label",window.trans("Add to starred sites")),r(e,"aria-pressed","false"),r(e,"title",window.trans("Add to starred sites"))},m(i,a){N(i,e,a),c(e,n),l||(s=F(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&R(e),l=!1,s()}}}function Vn(t){let e,n,l,s;function o(...i){return t[34](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",r(e,"aria-label",window.trans("Remove from starred sites")),r(e,"aria-pressed","true"),r(e,"title",window.trans("Remove from starred sites"))},m(i,a){N(i,e,a),c(e,n),l||(s=F(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&R(e),l=!1,s()}}}function Yt(t,e){let n,l,s,o,i,a,d,_,g,y,p,m,h=e[46].name+"",w,b,C,U,P,E,M,D,j,q,v=e[46].parentSiteName+"",A,I,G,x,J,T,W,H,Q,se,he,X;function Te(O,f){return O[46].parentSiteName==="-"?Fn:Bn}let oe=Te(e),ae=oe(e);function be(O,f){return f[0]&10&&(a=null),a==null&&(a=!!O[3].includes(Number(O[46].id))),a?Jn:Dn}let ge=be(e,[-1,-1]),K=ge(e);g=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let z=e[46].parentSiteName!=="-"&&Kt(e);M=new We({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function le(O,f){return f[0]&10&&(x=null),x==null&&(x=!!O[3].includes(Number(O[46].id))),x?Vn:Wn}let ce=le(e,[-1,-1]),Y=ce(e);return W=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),s=u("span"),ae.c(),o=S(),i=u("span"),K.c(),d=S(),_=u("span"),Ae(g.$$.fragment),p=S(),m=u("a"),b=S(),z&&z.c(),C=S(),U=u("a"),P=u("span"),P.textContent=`${window.trans("View your site.")}`,E=S(),Ae(M.$$.fragment),j=S(),q=u("td"),A=S(),I=u("td"),G=u("span"),Y.c(),J=S(),T=u("span"),Ae(W.$$.fragment),Q=S(),r(_,"class","site-list-table-sortable-handle"),r(_,"style",y=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),r(i,"class","site-list-table-action-buttons-mobile"),r(s,"class","site-list-table-bagde-container"),r(m,"href",w=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`),r(m,"class","dashboard-link"),r(P,"class","d-inline-block d-md-none"),r(U,"href",D=e[46].siteUrl),r(U,"class","site-link"),r(U,"target","_blank"),r(q,"class","site-list-table-parent-site"),r(T,"class","site-list-table-sortable-handle"),r(T,"style",H=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),r(G,"class","site-list-table-action-buttons"),r(I,"class","site-list-table-action"),r(n,"data-site-id",se=e[46].id),r(n,"data-is-starred",he=e[3].includes(Number(e[46].id))||void 0),this.first=n},m(O,f){N(O,n,f),c(n,l),c(l,s),ae.m(s,null),c(s,o),c(s,i),K.m(i,null),c(i,d),c(i,_),Ne(g,_,null),c(l,p),c(l,m),m.innerHTML=h,c(l,b),z&&z.m(l,null),c(l,C),c(l,U),c(U,P),c(U,E),Ne(M,U,null),c(n,j),c(n,q),q.innerHTML=v,c(n,A),c(n,I),c(I,G),Y.m(G,null),c(G,J),c(G,T),Ne(W,T,null),c(n,Q),X=!0},p(O,f){e=O,oe===(oe=Te(e))&&ae?ae.p(e,f):(ae.d(1),ae=oe(e),ae&&(ae.c(),ae.m(s,o))),ge===(ge=be(e,f))&&K?K.p(e,f):(K.d(1),K=ge(e),K&&(K.c(),K.m(i,d))),(!X||f[0]&10&&y!==(y=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&r(_,"style",y),(!X||f[0]&2)&&h!==(h=e[46].name+"")&&(m.innerHTML=h),(!X||f[0]&2&&w!==(w=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`))&&r(m,"href",w),e[46].parentSiteName!=="-"?z?z.p(e,f):(z=Kt(e),z.c(),z.m(l,C)):z&&(z.d(1),z=null),(!X||f[0]&2&&D!==(D=e[46].siteUrl))&&r(U,"href",D),(!X||f[0]&2)&&v!==(v=e[46].parentSiteName+"")&&(q.innerHTML=v),ce===(ce=le(e,f))&&Y?Y.p(e,f):(Y.d(1),Y=ce(e),Y&&(Y.c(),Y.m(G,J))),(!X||f[0]&10&&H!==(H=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&r(T,"style",H),(!X||f[0]&2&&se!==(se=e[46].id))&&r(n,"data-site-id",se),(!X||f[0]&10&&he!==(he=e[3].includes(Number(e[46].id))||void 0))&&r(n,"data-is-starred",he)},i(O){X||(ne(g.$$.fragment,O),ne(M.$$.fragment,O),ne(W.$$.fragment,O),X=!0)},o(O){re(g.$$.fragment,O),re(M.$$.fragment,O),re(W.$$.fragment,O),X=!1},d(O){O&&R(n),ae.d(),K.d(),Ee(g),z&&z.d(),Ee(M),Y.d(),Ee(W)}}}function Qn(t){let e,n,l,s,o,i=t[0]&&Xt(t);return{c(){e=S(),i&&i.c(),n=Fe()},m(a,d){N(a,e,d),i&&i.m(a,d),N(a,n,d),l=!0,s||(o=F(Pn.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&ne(i,1)):(i=Xt(a),i.c(),ne(i,1),i.m(n.parentNode,n)):i&&(Ye(),re(i,1,1,()=>{i=null}),Ze())},i(a){l||(ne(i),l=!0)},o(a){re(i),l=!1},d(a){a&&(R(e),R(n)),i&&i.d(a),s=!1,o()}}}function zn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{anchorRef:i}=e,{initialStarredSites:a}=e,d=!1;const _=()=>{n(0,o=!1)};let g={},y=[],p=[],m=[],h=a,w=0,b=1,C=1,U="parent_and_child_sites",P="",E=[],M=!1,D=null;const j=()=>{n(5,b++,b),G()},q=()=>{n(5,b=C),G()},v=()=>{n(5,b--,b),G()},A=()=>{n(5,b=1),G()},I=()=>{y=[],p=h,E=[],U==="child_sites_only"?E=[{type:"parent_website",args:{value:""}}]:U==="parent_sites"&&(E=[{type:"parent_website",args:{value:"1"}}]),n(8,P=P.trim()),P!==""&&E.push({type:"name",args:{string:P,option:"contains"}}),n(5,b=1),G()},G=async()=>{if(n(2,M=!0),n(1,m=[]),y.length===0){const f=await rt({magicToken:l,items:E,page:b,limit:s});n(4,w=f.count),n(6,C=f.pageMax),n(5,b=C!==0?f.page:0);const L=[];if(p.forEach(k=>{const V=f.sites.findIndex($=>Number($.id)===k);if(V!==-1)g[k]=f.sites[V],f.sites.splice(V,1);else{const $=g[k];if(!$)L.push(k);else{const Z=$.parentSiteName.match(/^<a/);(U==="child_sites_only"&&!Z||U==="parent_sites"&&Z)&&(p=p.filter(ue=>ue!==k))}}}),y=[...f.sites],L.length>0){const k=await rt({magicToken:l,items:[...E,{type:"pack",args:{op:"or",items:L.map(V=>({type:"id",args:{value:V,option:"equal"}}))}}],page:0,limit:200});L.forEach(V=>{const $=k.sites.findIndex(Z=>Number(Z.id)===V);$!==-1?g[V]=k.sites[$]:(p=p.filter(Z=>Z!==V),n(3,h=h.filter(Z=>Z!==V)))})}for(let k=0;k<s&&k<p.length;k++)m.push(g[p[k]]);for(let k=0;k<y.length&&m.length<s;k++)m.push(y[k])}else{const f=p.length,L=(b-1)*s;for(let k=L;k<f&&m.length<s;k++)m.push(g[p[k]]);for(let k=Math.max(L-f,0);k<w-f&&m.length<s;k++){if(!y[k]){const V=Math.floor(k/s),$=await rt({magicToken:l,items:[...E,...p.map(ue=>({type:"id",args:{value:ue,option:"not_equal"}}))],page:V+1,limit:s}),Z=V*s;for(let ue=0;ue<$.sites.length;ue++)y[Z+ue]=$.sites[ue]}m.push(y[k])}}n(2,M=!1)},x=async f=>{const L=new FormData;return L.append("__mode","save_starred_sites"),L.append("magic_token",l),f.forEach(k=>{L.append("id",String(k))}),fetch(window.ScriptURI,{method:"POST",body:L,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(k=>k.json()).then(k=>{if(k.error)throw new Error(k.error)})},J=f=>{const L=[...h];n(3,h=f),x(h).catch(k=>{alert(k.message),n(3,h=L)})},T=(f,L)=>{f.stopPropagation(),J([...new Set([...h,Number(L.id)])])},W=(f,L)=>{f.stopPropagation();const k=Number(L.id);J(h.filter(V=>V!==k))},H=f=>{const L=f.target;o&&ot([i,D],L)&&_()};let Q=null;const se=async()=>{await Mt(),Q&&jQuery(Q).sortable({delay:100,distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(f,L){if(!Q)return;const k=document.createElement("tr");k.classList.add("site-list-table-placeholder"),k.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",Q.insertBefore(k,Q.firstChild),L.placeholder.height(L.item.height())},stop(){var f;(f=Q?.querySelector(".site-list-table-placeholder"))===null||f===void 0||f.remove()},update:()=>{if(!Q)return;const f=[],L=[];Q.querySelectorAll("tr[data-site-id]").forEach(V=>{const $=Number(V.dataset.siteId);V.dataset.isStarred&&L.push(Number($)),f.push(m.find(Z=>Number(Z.id)===$))}),n(1,m=f);const k=h.findIndex(V=>L.includes(V));n(3,h=[...h]),h.splice(k,L.length,...L),J(h)}})},he=f=>f.key==="Enter"&&A(),X=f=>f.key==="Enter"&&v(),Te=f=>f.key==="Enter"&&j(),oe=f=>f.key==="Enter"&&q();function ae(){U=sn(this),n(7,U)}function be(){P=this.value,n(8,P)}const ge=f=>f.key==="Enter"&&I(),K=(f,L)=>W(L,f),z=(f,L)=>T(L,f),le=(f,L)=>W(L,f),ce=(f,L)=>T(L,f);function Y(f){Re[f?"unshift":"push"](()=>{Q=f,n(10,Q)})}function O(f){Re[f?"unshift":"push"](()=>{D=f,n(9,D)})}return t.$$set=f=>{"magicToken"in f&&n(20,l=f.magicToken),"limit"in f&&n(21,s=f.limit),"open"in f&&n(0,o=f.open),"anchorRef"in f&&n(22,i=f.anchorRef),"initialStarredSites"in f&&n(23,a=f.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&20971521&&i&&(o?(i.classList.add("open"),d||(n(24,d=!0),I())):i.classList.remove("open")),t.$$.dirty[0]&7&&m&&m.length>0&&o&&!M&&se()},[o,m,M,h,w,b,C,U,P,D,Q,_,j,q,v,A,I,T,W,H,l,s,i,a,d,he,X,Te,oe,ae,be,ge,K,z,le,ce,Y,O]}class Gn extends Oe{constructor(e){super(),Pe(this,e,zn,Qn,Me,{magicToken:20,limit:21,open:0,anchorRef:22,initialStarredSites:23},null,[-1,-1])}}function Xn(t,e){const n=new Gn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Kn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const i=JSON.parse(t.dataset.searchTabsJson);i.success&&(l=i.data)}const s={searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",contentTypes:e.contentTypes||[],isLoading:!1,...e},o=new Qt({target:t,props:s});t.closest("li[data-is='search-form-button']").addEventListener("click",i=>{i.preventDefault(),s.isLoading=!0,o.$set(s),at({blogId:e.blogId,magicToken:e.magicToken}).then(a=>{const d=a.contentTypes.filter(_=>_.can_search===1);s.contentTypes=d,s.contentTypes.length>0&&s.objectType===""&&(s.objectType="content_data"),s.isLoading=!1,o.$set(s)}).catch(a=>{console.error("Failed to fetch content types:",a),s.isLoading=!1,o.$set(s)})},{once:!0})}var ct,dt,ut;const ft=document.querySelector('[data-is="primary-navigation-toggle"]');ft!==null&&Sn(ft,{collapsed:(ct=Ot())!==null&&ct!==void 0?ct:!1,buttonRef:ft.getElementsByTagName("button")[0]});const _t=document.querySelector('[data-script="admin-ui"]');_t===null&&console.error("data-script='admin-ui' is not set");const pt=(dt=_t?.getAttribute("data-blog-id"))!==null&&dt!==void 0?dt:"",ye=(ut=_t?.getAttribute("data-magic-token"))!==null&&ut!==void 0?ut:"";ye===""&&console.error("data-magic-token is not set");const Yn="50",Zt=document.querySelectorAll('[data-is="site-list-button"]');Zt.length>0&&ye!==""&&Zt.forEach(t=>{var e;Xn(t,{magicToken:ye,limit:Number.parseInt(Yn),open:!1,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const xt=document.querySelectorAll('[data-is="create-button"]'),mt=document.querySelector('[data-is="search-button"]'),Zn=document.querySelector("div.mt-modal");xt.length>0&&ye!==""&&xt.forEach(t=>{gn({target:t,props:{blog_id:pt,magicToken:ye,open:!1,anchorRef:t,containerRef:Zn}})}),mt!==null&&ye!==""&&An(mt,{blogId:pt,magicToken:ye,open:!1,anchorRef:mt});const $t=document.querySelector('[data-is="search-form"]');$t!==null&&ye!==""&&Kn($t,{blogId:pt,magicToken:ye});
