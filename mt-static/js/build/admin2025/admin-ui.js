const Gt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function ie(){}function kt(t){return t()}function St(){return Object.create(null)}function pe(t){t.forEach(kt)}function lt(t){return typeof t=="function"}function Le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function Me(t){return t&&lt(t.destroy)?t.destroy:ie}const Yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function it(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function st(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t){return document.createTextNode(t)}function k(){return K(" ")}function Je(){return K("")}function H(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Zt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xt(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function he(t,e){t.value=e??""}function Rt(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function $t(t){const e=t.querySelector(":checked");return e&&e.__value}function Nt(t,e,n){t.classList.toggle(e,!!n)}let Fe;function De(t){Fe=t}function en(){if(!Fe)throw new Error("Function called outside component initialization");return Fe}function ot(t){en().$$.on_mount.push(t)}const je=[],Te=[];let Ue=[];const Ct=[],It=Promise.resolve();let at=!1;function Et(){at||(at=!0,It.then(Mt))}function Lt(){return Et(),It}function Ke(t){Ue.push(t)}const rt=new Set;let qe=0;function Mt(){if(qe!==0)return;const t=Fe;do{try{for(;qe<je.length;){const e=je[qe];qe++,De(e),tn(e.$$)}}catch(e){throw je.length=0,qe=0,e}for(De(null),je.length=0,qe=0;Te.length;)Te.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];rt.has(n)||(rt.add(n),n())}Ue.length=0}while(je.length);for(;Ct.length;)Ct.pop()();at=!1,rt.clear(),De(t)}function tn(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}function nn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const Ye=new Set;let Re;function Ze(){Re={r:0,c:[],p:Re}}function xe(){Re.r||pe(Re.c),Re=Re.p}function $(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function re(t,e,n,l){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),Re.c.push(()=>{Ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ke(t){return t?.length!==void 0?t:Array.from(t)}function ln(t,e){re(t,1,1,()=>{e.delete(t.key)})}function sn(t,e,n,l,s,o,i,a,d,m,g,v){let f=t.length,p=o.length,h=f;const b={};for(;h--;)b[t[h].key]=h;const N=[],P=new Map,B=new Map,C=[];for(h=p;h--;){const w=v(s,o,h),E=n(w);let I=i.get(E);I?C.push(()=>I.p(w,e)):(I=m(E,w),I.c()),P.set(E,N[h]=I),E in b&&B.set(E,Math.abs(h-b[E]))}const R=new Set,F=new Set;function J(w){$(w,1),w.m(a,g),i.set(w.key,w),g=w.first,p--}for(;f&&p;){const w=N[p-1],E=t[f-1],I=w.key,z=E.key;w===E?(g=w.first,f--,p--):P.has(z)?!i.has(I)||R.has(I)?J(w):F.has(z)?f--:B.get(I)>B.get(z)?(F.add(I),J(w)):(R.add(z),f--):(d(E,i),f--)}for(;f--;){const w=t[f];P.has(w.key)||d(w,i)}for(;p;)J(N[p-1]);return pe(C),N}function Ae(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Ke(()=>{const o=t.$$.on_mount.map(kt).filter(lt);t.$$.on_destroy?t.$$.on_destroy.push(...o):pe(o),t.$$.on_mount=[]}),s.forEach(Ke)}function Ce(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function on(t,e){t.$$.dirty[0]===-1&&(je.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,l,s,o,i=null,a=[-1]){const d=Fe;De(t);const m=t.$$={fragment:null,ctx:[],props:o,update:ie,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(m.root);let g=!1;if(m.ctx=n?n(t,e.props||{},(v,f,...p)=>{const h=p.length?p[0]:f;return m.ctx&&s(m.ctx[v],m.ctx[v]=h)&&(!m.skip_bound&&m.bound[v]&&m.bound[v](h),g&&on(t,v)),f}):[],m.update(),g=!0,pe(m.before_update),m.fragment=l?l(m.ctx):!1,e.target){if(e.hydrate){const v=xt(e.target);m.fragment&&m.fragment.l(v),v.forEach(L)}else m.fragment&&m.fragment.c();e.intro&&$(t.$$.fragment),Ne(t,e.target,e.anchor),Mt()}De(d)}class Oe{$$=void 0;$$set=void 0;$destroy(){Ce(this,1),this.$destroy=ie}$on(e,n){if(!lt(n))return ie;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);function He(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Lt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function ct(t,e){return!t.some(n=>n&&n.contains(e))}function jt(t,e,n){const l=t.slice();return l[10]=e[n],l}function Ut(t){let e,n,l,s,o,i,a,d,m,g,v,f=window.trans("New [_1] creation",window.trans("Entry"))+"",p,h,b,N,P,B=window.trans("New [_1] creation",window.trans("Page"))+"",C,R,F,J,w=t[1].length>0&&qt(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=k(),o=u("div"),w&&w.c(),i=k(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=k(),m=u("ul"),g=u("li"),v=u("a"),p=K(f),b=k(),N=u("li"),P=u("a"),C=K(B),c(l,"type","button"),c(l,"class","close"),c(l,"data-dismiss","modal"),c(l,"aria-label","Close"),c(n,"class","modal-header"),c(a,"class","block-title"),c(v,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),c(P,"href",R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),c(m,"class","create-button-list"),c(o,"class","modal-body"),c(e,"class","modal create-button-modal")},m(E,I){M(E,e,I),r(e,n),r(n,l),r(e,s),r(e,o),w&&w.m(o,null),r(o,i),r(o,a),r(o,d),r(o,m),r(m,g),r(g,v),r(v,p),r(m,b),r(m,N),r(N,P),r(P,C),t[9](e),F||(J=[H(l,"click",t[4]),Me(He.call(null,e,"body"))],F=!0)},p(E,I){E[1].length>0?w?w.p(E,I):(w=qt(E),w.c(),w.m(o,i)):w&&(w.d(1),w=null),I&4&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${E[2]}`)&&c(v,"href",h),I&4&&R!==(R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${E[2]}`)&&c(P,"href",R)},d(E){E&&L(e),w&&w.d(),t[9](null),F=!1,pe(J)}}}function qt(t){let e,n,l,s=ke(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=At(jt(t,s,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=k(),l=u("ul");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","block-title"),c(l,"class","create-button-list")},m(i,a){M(i,e,a),M(i,n,a),M(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&6){s=ke(i[1]);let d;for(d=0;d<s.length;d+=1){const m=jt(i,s,d);o[d]?o[d].p(m,a):(o[d]=At(m),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(L(e),L(n),L(l)),it(o,i)}}}function At(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",s,o,i;return{c(){e=u("li"),n=u("a"),s=K(l),i=k(),c(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(a,d){M(a,e,d),r(e,n),r(n,s),r(e,i)},p(a,d){d&2&&l!==(l=window.trans("New [_1] creation",a[10].name)+"")&&ve(s,l),d&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[10].id}&type=content_data_${a[10].id}&blog_id=${a[2]}`)&&c(n,"href",o)},d(a){a&&L(e)}}}function rn(t){let e,n,l,s,o=t[0]&&Ut(t);return{c(){e=k(),o&&o.c(),n=Je()},m(i,a){M(i,e,a),o&&o.m(i,a),M(i,n,a),l||(s=H(document.body,"click",t[5]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=Ut(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:ie,o:ie,d(i){i&&(L(e),L(n)),o&&o.d(i),l=!1,s()}}}function cn(t,e,n){let{contentTypes:l=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{buttonRef:i=null}=e,{anchorRef:a=null}=e,{containerRef:d=null}=e,m=null;const g=()=>{n(0,o=!1)},v=p=>{if(d&&d.classList.contains("show"))return;const h=p.target;o&&ct([i,m],h)&&g()};function f(p){Te[p?"unshift":"push"](()=>{m=p,n(3,m),n(7,a),n(0,o)})}return t.$$set=p=>{"contentTypes"in p&&n(1,l=p.contentTypes),"blog_id"in p&&n(2,s=p.blog_id),"open"in p&&n(0,o=p.open),"buttonRef"in p&&n(6,i=p.buttonRef),"anchorRef"in p&&n(7,a=p.anchorRef),"containerRef"in p&&n(8,d=p.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&a){if(m){const p=a.getBoundingClientRect(),h=`calc(${p.bottom}px + 10px)`;n(3,m.style.top=h,m);const b=`calc(100vh - ${p.bottom}px - 10px - 20px)`;n(3,m.style.maxHeight=b,m)}o?a.classList.add("open"):a.classList.remove("open")}},[o,l,s,m,g,v,i,a,d,f]}class dn extends Oe{constructor(e){super(),Pe(this,e,cn,rn,Le,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const un=({target:t,props:e})=>{const n=new dn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function fn(t){let e,n,l,s;return{c(){e=u("div"),c(e,"class","mt-primaryNavigation-overlay"),c(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){M(o,e,i),l||(s=[Me(He.call(null,e,"body")),H(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&c(e,"style",n)},i:ie,o:ie,d(o){o&&L(e),l=!1,pe(s)}}}function _n(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(f,p)=>{const h=document.querySelector('[data-is="content-wrapper"]');p?h.classList.add(f):h.classList.remove(f)},d=()=>{a("collapsed",s)},m=()=>{a("mouseover",i)},g=()=>{var f;s&&(i=!0,m(),(f=document.querySelector('[data-is="primary-navigation"]'))===null||f===void 0||f.addEventListener("mouseleave",v,{once:!0}))},v=()=>{i=!1,m()};return ot(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=f=>{"buttonRef"in f&&n(2,l=f.buttonRef),"collapsed"in f&&n(0,s=f.collapsed),"isStored"in f&&n(3,o=f.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,m(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[s,g,l,o]}class mn extends Oe{constructor(e){super(),Pe(this,e,_n,fn,Le,{buttonRef:2,collapsed:0,isStored:3})}}function pn(t,e){const n=new mn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Pt(t){let e,n;return{c(){e=st("title"),n=K(t[2])},m(l,s){M(l,e,s),r(e,n)},p(l,s){s&4&&ve(n,l[2])},d(l){l&&L(e)}}}function hn(t){let e,n,l=t[2]&&Pt(t);return{c(){e=st("svg"),l&&l.c(),n=st("use"),Tt(n,"xlink:href",t[1]),c(e,"role","img"),c(e,"class",t[0]),c(e,"style",t[3])},m(s,o){M(s,e,o),l&&l.m(e,null),r(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=Pt(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&Tt(n,"xlink:href",s[1]),o&1&&c(e,"class",s[0]),o&8&&c(e,"style",s[3])},i:ie,o:ie,d(s){s&&L(e),l&&l.d()}}}function bn(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class We extends Oe{constructor(e){super(),Pe(this,e,bn,hn,Le,{class:0,href:1,title:2,style:3})}}function Ot(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ht(t,e,n){const l=t.slice();return l[12]=e[n],l}function Bt(t){let e,n,l,s=!1,o,i,a,d=t[12].label+"",m,g,v,f,p;return v=Zt(t[7][0]),{c(){e=u("label"),n=u("input"),a=k(),m=K(d),g=k(),c(n,"type","radio"),c(n,"name","type"),n.__value=l=t[12].key,he(n,n.__value),c(n,"id",o=t[12].key),n.checked=i=t[0]===t[12].key,v.p(n)},m(h,b){M(h,e,b),r(e,n),n.checked=n.__value===t[0],r(e,a),r(e,m),r(e,g),f||(p=H(n,"change",t[6]),f=!0)},p(h,b){b&16&&l!==(l=h[12].key)&&(n.__value=l,he(n,n.__value),s=!0),b&16&&o!==(o=h[12].key)&&c(n,"id",o),b&17&&i!==(i=h[0]===h[12].key)&&(n.checked=i),(s||b&17)&&(n.checked=n.__value===h[0]),b&16&&d!==(d=h[12].label+"")&&ve(m,d)},d(h){h&&L(e),v.r(),f=!1,p()}}}function gn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",he(e,e.__value)},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function yn(t){let e,n=ke(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Jt(Ot(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Je()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);M(s,e,o)},p(s,o){if(o&8){n=ke(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Ot(s,n,i);l[i]?l[i].p(a,o):(l[i]=Jt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&L(e),it(l,s)}}}function Jt(t){let e,n=t[9].name+"",l,s;return{c(){e=u("option"),l=K(n),e.__value=s=t[9].id,he(e,e.__value)},m(o,i){M(o,e,i),r(e,l)},p(o,i){i&8&&n!==(n=o[9].name+"")&&ve(l,n),i&8&&s!==(s=o[9].id)&&(e.__value=s,he(e,e.__value))},d(o){o&&L(e)}}}function wn(t){let e,n,l,s,o,i,a,d,m,g,v,f,p,h,b,N,P,B,C,R,F,J,w,E,I,z,W,Q=ke(t[4]),U=[];for(let S=0;S<Q.length;S+=1)U[S]=Bt(Ht(t,Q,S));function ee(S,j){return S[3].length>0?yn:gn}let te=ee(t),D=te(t);return E=new We({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("form"),n=u("input"),l=k(),s=u("input"),o=k(),i=u("input"),a=k(),d=u("input"),m=k(),g=u("input"),v=k(),f=u("div");for(let S=0;S<U.length;S+=1)U[S].c();p=k(),h=u("div"),b=u("select"),D.c(),P=k(),B=u("div"),C=u("div"),R=u("input"),F=k(),J=u("div"),w=u("button"),Ae(E.$$.fragment),I=k(),z=u("span"),z.textContent=`${window.trans("Search")}`,c(n,"type","hidden"),c(n,"name","__mode"),n.value="search_replace",c(s,"type","hidden"),c(s,"name","blog_id"),s.value=t[1],c(i,"type","hidden"),c(i,"name","_type"),i.value=t[0],c(d,"type","hidden"),c(d,"name","do_search"),d.value="1",c(g,"type","hidden"),c(g,"name","magic_token"),g.value=t[2],c(f,"class","search-type"),c(b,"class","custom-select form-control form-select"),c(b,"name","content_type_id"),b.disabled=N=t[0]!=="content_data"||t[3].length===0,Nt(b,"disabled",t[0]!=="content_data"),c(h,"class","search-content-type"),c(R,"type","text"),c(R,"placeholder",window.trans("Select target and search text...")),c(R,"name","search"),c(C,"class","search-text-box"),c(w,"type","submit"),c(w,"class","btn btn-primary"),c(J,"class","submit-button"),c(B,"class","search-input-group"),c(e,"class","mt-search-form"),c(e,"method","post"),c(e,"action",window.ScriptURI)},m(S,j){M(S,e,j),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(e,a),r(e,d),r(e,m),r(e,g),r(e,v),r(e,f);for(let q=0;q<U.length;q+=1)U[q]&&U[q].m(f,null);r(e,p),r(e,h),r(h,b),D.m(b,null),r(e,P),r(e,B),r(B,C),r(C,R),t[8](R),r(B,F),r(B,J),r(J,w),Ne(E,w,null),r(w,I),r(w,z),W=!0},p(S,[j]){if((!W||j&2)&&(s.value=S[1]),(!W||j&1)&&(i.value=S[0]),(!W||j&4)&&(g.value=S[2]),j&17){Q=ke(S[4]);let q;for(q=0;q<Q.length;q+=1){const de=Ht(S,Q,q);U[q]?U[q].p(de,j):(U[q]=Bt(de),U[q].c(),U[q].m(f,null))}for(;q<U.length;q+=1)U[q].d(1);U.length=Q.length}te===(te=ee(S))&&D?D.p(S,j):(D.d(1),D=te(S),D&&(D.c(),D.m(b,null))),(!W||j&9&&N!==(N=S[0]!=="content_data"||S[3].length===0))&&(b.disabled=N),(!W||j&1)&&Nt(b,"disabled",S[0]!=="content_data")},i(S){W||($(E.$$.fragment,S),W=!0)},o(S){re(E.$$.fragment,S),W=!1},d(S){S&&L(e),it(U,S),D.d(),t[8](null),Ce(E)}}}function vn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,d=null;const m=[[]];function g(){a=this.__value,n(0,a)}function v(f){Te[f?"unshift":"push"](()=>{d=f,n(5,d)})}return t.$$set=f=>{"blogId"in f&&n(1,l=f.blogId),"magicToken"in f&&n(2,s=f.magicToken),"contentTypes"in f&&n(3,o=f.contentTypes),"searchTabs"in f&&n(4,i=f.searchTabs),"objectType"in f&&n(0,a=f.objectType)},t.$$.update=()=>{t.$$.dirty&32&&d&&d.focus()},[a,l,s,o,i,d,g,m,v]}class Ft extends Oe{constructor(e){super(),Pe(this,e,vn,wn,Le,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Dt(t){let e,n,l,s,o,i,a,d,m,g,v;return d=new Ft({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=u("div"),n=k(),l=u("div"),s=u("div"),o=u("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=k(),a=u("div"),Ae(d.$$.fragment),c(e,"class","search-button-modal-overlay"),c(o,"type","button"),c(o,"class","close"),c(o,"data-dismiss","modal"),c(o,"aria-label","Close"),c(s,"class","modal-header"),c(a,"class","modal-body"),c(l,"class","modal search-button-modal")},m(f,p){M(f,e,p),M(f,n,p),M(f,l,p),r(l,s),r(s,o),r(l,i),r(l,a),Ne(d,a,null),t[11](l),m=!0,g||(v=[H(e,"click",t[7]),Me(He.call(null,e,"body")),H(o,"click",t[7]),Me(He.call(null,l,"body"))],g=!0)},p(f,p){const h={};p&4&&(h.blogId=f[2]),p&8&&(h.magicToken=f[3]),p&16&&(h.contentTypes=f[4]),p&2&&(h.objectType=f[1]),p&32&&(h.searchTabs=f[5]),d.$set(h)},i(f){m||($(d.$$.fragment,f),m=!0)},o(f){re(d.$$.fragment,f),m=!1},d(f){f&&(L(e),L(n),L(l)),Ce(d),t[11](null),g=!1,pe(v)}}}function kn(t){let e,n,l,s,o,i=t[0]&&Dt(t);return{c(){e=k(),i&&i.c(),n=Je()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=H(document.body,"click",t[8]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&$(i,1)):(i=Dt(a),i.c(),$(i,1),i.m(n.parentNode,n)):i&&(Ze(),re(i,1,1,()=>{i=null}),xe())},i(a){l||($(i),l=!0)},o(a){re(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Sn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:i=!1}=e,{buttonRef:a}=e,{anchorRef:d}=e,{searchTabs:m}=e,{objectType:g}=e;const v=()=>{n(0,i=!1)};let f=null;const p=b=>{const N=b.target;i&&ct([a,f],N)&&v()};ot(async()=>{g&&m.find(b=>b.key===g)||n(1,g=m[0].key)});function h(b){Te[b?"unshift":"push"](()=>{f=b,n(6,f)})}return t.$$set=b=>{"blogId"in b&&n(2,l=b.blogId),"magicToken"in b&&n(3,s=b.magicToken),"contentTypes"in b&&n(4,o=b.contentTypes),"open"in b&&n(0,i=b.open),"buttonRef"in b&&n(9,a=b.buttonRef),"anchorRef"in b&&n(10,d=b.anchorRef),"searchTabs"in b&&n(5,m=b.searchTabs),"objectType"in b&&n(1,g=b.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&d&&(i?d.classList.add("open"):d.classList.remove("open")),t.$$.dirty&1},[i,g,l,s,o,m,f,v,p,a,d,h]}class Tn extends Oe{constructor(e){super(),Pe(this,e,Sn,kn,Le,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function Rn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new Tn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const dt=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:Nn}=Yt;function Wt(t,e,n){const l=t.slice();return l[46]=e[n],l}function Vt(t){let e,n,l,s,o,i,a,d,m,g=window.trans("[_1]Site",t[3].toString())+"",v,f,p,h,b,N,P,B,C,R,F,J,w,E,I,z,W,Q,U,ee,te,D,S,j,q,de,Y,Se,se,oe,be,ge,X,V,ne,ce,G,A,_,T,y,Z,ae,x,fe,Qe,ye,ht,Ee,ze,bt,Xe,gt,Ge,et,Be,ue,_e,me,tt,yt;x=new We({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const wt=[In,Cn],we=[];function vt(O,le){return O[8]?0:1}return ue=vt(t),_e=we[ue]=wt[ue](t),{c(){e=u("div"),n=k(),l=u("div"),s=u("div"),o=u("div"),i=u("div"),a=u("div"),d=u("span"),m=K("("),v=K(g),f=K(")"),p=k(),h=u("p"),h.textContent=`${window.trans("Site List")}`,b=k(),N=u("div"),P=u("button"),P.innerHTML='<span aria-hidden="true">\xD7</span>',B=k(),C=u("div"),R=u("div"),F=u("button"),J=K("<<"),E=k(),I=u("button"),z=K("<"),Q=k(),U=u("span"),ee=u("span"),te=K(t[4]),D=K("/"),S=K(t[5]),j=k(),q=u("button"),de=K(">"),Se=k(),se=u("button"),oe=K(">>"),ge=k(),X=u("div"),V=u("div"),ne=u("select"),ce=u("option"),ce.textContent=`${window.trans("Parent Sites")}`,G=u("option"),G.textContent=`${window.trans("Parent and child sites")}`,A=u("option"),A.textContent=`${window.trans("Only child sites")}`,_=k(),T=u("div"),y=u("input"),Z=k(),ae=u("button"),Ae(x.$$.fragment),fe=k(),Qe=u("div"),ye=u("button"),ye.innerHTML='<span aria-hidden="true">\xD7</span>',ht=k(),Ee=u("div"),ze=u("span"),ze.textContent=`${window.trans("Site Name")}`,bt=k(),Xe=u("span"),Xe.textContent=`${window.trans("Parent Site")}`,gt=k(),Ge=u("div"),et=u("table"),Be=u("tbody"),_e.c(),c(e,"class","site-list-button-modal-overlay"),c(P,"type","button"),c(P,"class","close"),c(P,"data-dismiss","modal"),c(P,"aria-label","Close"),c(N,"class","d-block d-md-none"),c(a,"class","site-list-title"),c(F,"type","button"),F.disabled=w=t[4]<=1,c(I,"type","button"),I.disabled=W=t[4]<=1,c(ee,"class","current"),c(U,"class","page-num"),c(q,"type","button"),q.disabled=Y=t[4]===t[5],c(se,"type","button"),se.disabled=be=t[4]===t[5],c(R,"class","prev-next"),ce.__value="parent_sites",he(ce,ce.__value),G.__value="parent_and_child_sites",he(G,G.__value),A.__value="child_sites_only",he(A,A.__value),c(ne,"class","custom-select form-control form-select"),t[6]===void 0&&Ke(()=>t[29].call(ne)),c(V,"class","site-type-filter"),c(y,"type","text"),c(y,"placeholder",window.trans("Filter by site name")),c(T,"class","site-name-filter"),c(X,"class","site-filter-actions"),c(ye,"type","button"),c(ye,"class","close"),c(ye,"data-dismiss","modal"),c(ye,"aria-label","Close"),c(Qe,"class","d-none d-md-block"),c(C,"class","site-list-actions"),c(i,"class","site-list-header"),c(ze,"class","table-header-col site-list-header-name"),c(Xe,"class","table-header-col site-list-header-parent"),c(Ee,"class","site-list-table-header"),c(Ge,"class","site-list-table-wrapper"),c(o,"class","site-list-container"),c(s,"class","modal-body"),c(l,"class","modal site-list-button-modal")},m(O,le){M(O,e,le),M(O,n,le),M(O,l,le),r(l,s),r(s,o),r(o,i),r(i,a),r(a,d),r(d,m),r(d,v),r(d,f),r(a,p),r(a,h),r(a,b),r(a,N),r(N,P),r(i,B),r(i,C),r(C,R),r(R,F),r(F,J),r(R,E),r(R,I),r(I,z),r(R,Q),r(R,U),r(U,ee),r(ee,te),r(U,D),r(U,S),r(R,j),r(R,q),r(q,de),r(R,Se),r(R,se),r(se,oe),r(C,ge),r(C,X),r(X,V),r(V,ne),r(ne,ce),r(ne,G),r(ne,A),Rt(ne,t[6],!0),r(X,_),r(X,T),r(T,y),he(y,t[7]),r(T,Z),r(T,ae),Ne(x,ae,null),r(C,fe),r(C,Qe),r(Qe,ye),r(o,ht),r(o,Ee),r(Ee,ze),r(Ee,bt),r(Ee,Xe),r(o,gt),r(o,Ge),r(Ge,et),r(et,Be),we[ue].m(Be,null),t[36](Be),t[37](l),me=!0,tt||(yt=[H(e,"click",t[11]),Me(He.call(null,e,"body")),H(P,"click",t[11]),H(F,"click",t[15]),H(F,"keydown",t[25]),H(I,"click",t[14]),H(I,"keydown",t[26]),H(q,"click",t[12]),H(q,"keydown",t[27]),H(se,"click",t[13]),H(se,"keydown",t[28]),H(ne,"change",t[29]),H(ne,"change",t[16]),H(y,"input",t[30]),H(y,"keydown",t[31]),H(ae,"click",t[16]),H(ye,"click",t[11]),Me(He.call(null,l,"body"))],tt=!0)},p(O,le){(!me||le[0]&8)&&g!==(g=window.trans("[_1]Site",O[3].toString())+"")&&ve(v,g),(!me||le[0]&16&&w!==(w=O[4]<=1))&&(F.disabled=w),(!me||le[0]&16&&W!==(W=O[4]<=1))&&(I.disabled=W),(!me||le[0]&16)&&ve(te,O[4]),(!me||le[0]&32)&&ve(S,O[5]),(!me||le[0]&48&&Y!==(Y=O[4]===O[5]))&&(q.disabled=Y),(!me||le[0]&48&&be!==(be=O[4]===O[5]))&&(se.disabled=be),le[0]&64&&Rt(ne,O[6]),le[0]&128&&y.value!==O[7]&&he(y,O[7]);let nt=ue;ue=vt(O),ue===nt?we[ue].p(O,le):(Ze(),re(we[nt],1,1,()=>{we[nt]=null}),xe(),_e=we[ue],_e?_e.p(O,le):(_e=we[ue]=wt[ue](O),_e.c()),$(_e,1),_e.m(Be,null))},i(O){me||($(x.$$.fragment,O),$(_e),me=!0)},o(O){re(x.$$.fragment,O),re(_e),me=!1},d(O){O&&(L(e),L(n),L(l)),Ce(x),we[ue].d(),t[36](null),t[37](null),tt=!1,pe(yt)}}}function Cn(t){let e=[],n=new Map,l,s,o=ke(t[1]);const i=a=>a[46].id;for(let a=0;a<o.length;a+=1){let d=Wt(t,o,a),m=i(d);n.set(m,e[a]=zt(m,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Je()},m(a,d){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(a,d);M(a,l,d),s=!0},p(a,d){d[0]&393222&&(o=ke(a[1]),Ze(),e=sn(e,d,i,1,a,o,n,l.parentNode,ln,zt,l,Wt),xe())},i(a){if(!s){for(let d=0;d<o.length;d+=1)$(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)re(e[d]);s=!1},d(a){a&&L(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function In(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,c(n,"colspan","2"),c(n,"class","loading")},m(l,s){M(l,e,s),r(e,n)},p:ie,i:ie,o:ie,d(l){l&&L(e)}}}function En(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,c(e,"class","badge badge-child-site")},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function Ln(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,c(e,"class","badge badge-site")},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function Mn(t){let e,n,l,s;function o(...i){return t[33](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function jn(t){let e,n,l,s;function o(...i){return t[32](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Qt(t){let e,n=t[46].parentSiteName+"";return{c(){e=u("span"),c(e,"class","d-block d-md-none parent-site")},m(l,s){M(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[46].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&L(e)}}}function Un(t){let e,n,l,s;function o(...i){return t[35](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function qn(t){let e,n,l,s;function o(...i){return t[34](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function zt(t,e){let n,l,s,o,i,a,d,m,g,v,f,p,h=e[46].name+"",b,N,P,B,C,R,F,J,w,E,I,z=e[46].parentSiteName+"",W,Q,U,ee,te,D,S,j,q,de,Y;function Se(A,_){return A[46].parentSiteName==="-"?Ln:En}let se=Se(e),oe=se(e);function be(A,_){return _[0]&6&&(a=null),a==null&&(a=!!A[2].includes(Number(A[46].id))),a?jn:Mn}let ge=be(e,[-1,-1]),X=ge(e);g=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let V=e[46].parentSiteName!=="-"&&Qt(e);J=new We({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function ne(A,_){return _[0]&6&&(ee=null),ee==null&&(ee=!!A[2].includes(Number(A[46].id))),ee?qn:Un}let ce=ne(e,[-1,-1]),G=ce(e);return S=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),s=u("span"),oe.c(),o=k(),i=u("span"),X.c(),d=k(),m=u("span"),Ae(g.$$.fragment),f=k(),p=u("a"),b=K(h),P=k(),V&&V.c(),B=k(),C=u("a"),R=u("span"),R.textContent=`${window.trans("View your site.")}`,F=k(),Ae(J.$$.fragment),E=k(),I=u("td"),W=k(),Q=u("td"),U=u("span"),G.c(),te=k(),D=u("span"),Ae(S.$$.fragment),q=k(),c(m,"class","site-list-table-sortable-handle"),c(m,"style",v=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(i,"class","site-list-table-action-buttons-mobile"),c(s,"class","site-list-table-bagde-container"),c(p,"href",N=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`),c(p,"class","dashboard-link"),c(R,"class","d-inline-block d-md-none"),c(C,"href",w=e[46].siteUrl),c(C,"class","site-link"),c(C,"target","_blank"),c(I,"class","site-list-table-parent-site"),c(D,"class","site-list-table-sortable-handle"),c(D,"style",j=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(U,"class","site-list-table-action-buttons"),c(Q,"class","site-list-table-action"),c(n,"data-starred-site-id",de=e[2].includes(Number(e[46].id))?e[46].id:void 0),this.first=n},m(A,_){M(A,n,_),r(n,l),r(l,s),oe.m(s,null),r(s,o),r(s,i),X.m(i,null),r(i,d),r(i,m),Ne(g,m,null),r(l,f),r(l,p),r(p,b),r(l,P),V&&V.m(l,null),r(l,B),r(l,C),r(C,R),r(C,F),Ne(J,C,null),r(n,E),r(n,I),I.innerHTML=z,r(n,W),r(n,Q),r(Q,U),G.m(U,null),r(U,te),r(U,D),Ne(S,D,null),r(n,q),Y=!0},p(A,_){e=A,se===(se=Se(e))&&oe?oe.p(e,_):(oe.d(1),oe=se(e),oe&&(oe.c(),oe.m(s,o))),ge===(ge=be(e,_))&&X?X.p(e,_):(X.d(1),X=ge(e),X&&(X.c(),X.m(i,d))),(!Y||_[0]&6&&v!==(v=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(m,"style",v),(!Y||_[0]&2)&&h!==(h=e[46].name+"")&&ve(b,h),(!Y||_[0]&2&&N!==(N=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`))&&c(p,"href",N),e[46].parentSiteName!=="-"?V?V.p(e,_):(V=Qt(e),V.c(),V.m(l,B)):V&&(V.d(1),V=null),(!Y||_[0]&2&&w!==(w=e[46].siteUrl))&&c(C,"href",w),(!Y||_[0]&2)&&z!==(z=e[46].parentSiteName+"")&&(I.innerHTML=z),ce===(ce=ne(e,_))&&G?G.p(e,_):(G.d(1),G=ce(e),G&&(G.c(),G.m(U,te))),(!Y||_[0]&6&&j!==(j=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(D,"style",j),(!Y||_[0]&6&&de!==(de=e[2].includes(Number(e[46].id))?e[46].id:void 0))&&c(n,"data-starred-site-id",de)},i(A){Y||($(g.$$.fragment,A),$(J.$$.fragment,A),$(S.$$.fragment,A),Y=!0)},o(A){re(g.$$.fragment,A),re(J.$$.fragment,A),re(S.$$.fragment,A),Y=!1},d(A){A&&L(n),oe.d(),X.d(),Ce(g),V&&V.d(),Ce(J),G.d(),Ce(S)}}}function An(t){let e,n,l,s,o,i=t[0]&&Vt(t);return{c(){e=k(),i&&i.c(),n=Je()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=H(Nn.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&$(i,1)):(i=Vt(a),i.c(),$(i,1),i.m(n.parentNode,n)):i&&(Ze(),re(i,1,1,()=>{i=null}),xe())},i(a){l||($(i),l=!0)},o(a){re(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Pn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{buttonRef:i}=e,{anchorRef:a}=e,{initialStarredSites:d}=e;const m=()=>{n(0,o=!1)};let g={},v=[],f=[],p=[],h=d,b=0,N=1,P=1,B="parent_and_child_sites",C="",R=[],F=!1,J=null;const w=()=>{n(4,N++,N),Q()},E=()=>{n(4,N=P),Q()},I=()=>{n(4,N--,N),Q()},z=()=>{n(4,N=1),Q()},W=()=>{v=[],f=h,R=[],B==="child_sites_only"?R=[{type:"parent_website",args:{value:""}}]:B==="parent_sites"&&(R=[{type:"parent_website",args:{value:"1"}}]),n(7,C=C.trim()),C!==""&&R.push({type:"name",args:{string:C,option:"contains"}}),n(4,N=1),Q()},Q=async()=>{if(n(8,F=!0),n(1,p=[]),v.length===0){const _=await dt({magicToken:l,items:R,page:N,limit:s});n(3,b=_.count),n(5,P=_.pageMax),n(4,N=P!==0?_.page:0);const T=[];if(f.forEach(y=>{const Z=_.sites.findIndex(ae=>Number(ae.id)===y);if(Z!==-1)g[y]=_.sites[Z],_.sites.splice(Z,1);else{const ae=g[y];if(!ae)T.push(y);else{const x=ae.parentSiteName.match(/^<a/);(B==="child_sites_only"&&!x||B==="parent_sites"&&x)&&(f=f.filter(fe=>fe!==y))}}}),v=[..._.sites],T.length>0){const y=await dt({magicToken:l,items:[...R,{type:"pack",args:{op:"or",items:T.map(Z=>({type:"id",args:{value:Z,option:"equal"}}))}}],page:0,limit:200});T.forEach(Z=>{const ae=y.sites.findIndex(x=>Number(x.id)===Z);ae!==-1?g[Z]=y.sites[ae]:(f=f.filter(x=>x!==Z),n(2,h=h.filter(x=>x!==Z)))})}for(let y=0;y<s&&y<f.length;y++)p.push(g[f[y]]);for(let y=0;y<v.length&&p.length<s;y++)p.push(v[y])}else{const _=f.length,T=(N-1)*s;for(let y=T;y<_&&p.length<s;y++)p.push(g[f[y]]);for(let y=T-_;y<b-_&&p.length<s;y++){if(!v[y]){const Z=Math.floor(y/s),ae=await dt({magicToken:l,items:[...R,...f.map(fe=>({type:"id",args:{value:fe,option:"not_equal"}}))],page:Z,limit:s}),x=Z*s;for(let fe=0;fe<ae.sites.length;fe++)v[x+fe]=ae.sites[fe]}p.push(v[y])}}n(8,F=!1)},U=async _=>{const T=new FormData;return T.append("__mode","save_starred_sites"),T.append("magic_token",l),_.forEach(y=>{T.append("id",String(y))}),fetch(window.ScriptURI,{method:"POST",body:T,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(y=>y.json()).then(y=>{if(y.error)throw new Error(y.error)})},ee=_=>{const T=[...h];n(2,h=_),U(h).catch(y=>{alert(y.message),n(2,h=T)})},te=(_,T)=>{_.stopPropagation(),ee([...new Set([...h,Number(T.id)])])},D=(_,T)=>{_.stopPropagation();const y=Number(T.id);ee(h.filter(Z=>Z!==y))},S=_=>{const T=_.target;o&&ct([i,J],T)&&m()};ot(async()=>{W()});let j=null;const q=async()=>{await Lt(),j&&jQuery(j).sortable({delay:100,distance:3,items:"tr[data-starred-site-id]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,T){if(!j)return;const y=document.createElement("tr");y.classList.add("site-list-table-placeholder"),y.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",j.insertBefore(y,j.firstChild),T.placeholder.height(T.item.height())},stop(){var _;(_=j?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(j){n(2,h=[]),j.querySelectorAll("tr").forEach(_=>{const T=_.dataset.starredSiteId;T&&h.push(Number(T))});for(let _=h.length-1;_>=0;_--){const T=p.findIndex(y=>Number(y.id)===h[_]);if(T!==-1){const[y]=p.splice(T,1);p.unshift(y)}}ee(h)}}})},de=_=>_.key==="Enter"&&z(),Y=_=>_.key==="Enter"&&I(),Se=_=>_.key==="Enter"&&w(),se=_=>_.key==="Enter"&&E();function oe(){B=$t(this),n(6,B)}function be(){C=this.value,n(7,C)}const ge=_=>_.key==="Enter"&&W(),X=(_,T)=>D(T,_),V=(_,T)=>te(T,_),ne=(_,T)=>D(T,_),ce=(_,T)=>te(T,_);function G(_){Te[_?"unshift":"push"](()=>{j=_,n(10,j)})}function A(_){Te[_?"unshift":"push"](()=>{J=_,n(9,J)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,s=_.limit),"open"in _&&n(0,o=_.open),"buttonRef"in _&&n(22,i=_.buttonRef),"anchorRef"in _&&n(23,a=_.anchorRef),"initialStarredSites"in _&&n(24,d=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&8388609&&a&&(o?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty[0]&3&&p&&p.length>0&&o&&q()},[o,p,h,b,N,P,B,C,F,J,j,m,w,E,I,z,W,te,D,S,l,s,i,a,d,de,Y,Se,se,oe,be,ge,X,V,ne,ce,G,A]}class On extends Oe{constructor(e){super(),Pe(this,e,Pn,An,Le,{magicToken:20,limit:21,open:0,buttonRef:22,anchorRef:23,initialStarredSites:24},null,[-1,-1])}}function Hn(t,e){const n=new On({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Bn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}new Ft({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var ut,ft;const _t=document.querySelector('[data-is="primary-navigation-toggle"]');if(_t!==null){const t="collapsed",e=sessionStorage.getItem(t);pn(_t,{collapsed:e==="true",buttonRef:_t.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const mt=document.querySelector('[data-script="admin-ui"]');mt===null&&console.error("data-script='admin-ui' is not set");const $e=(ut=mt?.getAttribute("data-blog-id"))!==null&&ut!==void 0?ut:"",Ie=(ft=mt?.getAttribute("data-magic-token"))!==null&&ft!==void 0?ft:"";Ie===""&&console.error("data-magic-token is not set");const Jn="50",Xt=document.querySelectorAll('[data-is="site-list-button"]');Xt.length>0&&Ie!==""&&Xt.forEach(t=>{var e;Hn(t,{magicToken:Ie,limit:Number.parseInt(Jn),open:!1,buttonRef:t,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const pt=document.querySelectorAll('[data-is="create-button"]'),Ve=document.querySelector('[data-is="search-button"]'),Fn=document.querySelector("div.mt-modal");(pt.length>0||Ve!==null)&&Ie!==""&&Gt({blogId:$e,magicToken:Ie}).then(t=>{if(pt.length>0&&pt.forEach(n=>{un({target:n,props:{blog_id:$e,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,buttonRef:n,anchorRef:n,containerRef:Fn}})}),Ve!==null){const n=Ve.getElementsByTagName("a")[0];Rn(Ve,{blogId:$e,magicToken:Ie,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:Ve,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&Bn(e,{blogId:$e,magicToken:Ie,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
