const Gt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function ie(){}function kt(t){return t()}function St(){return Object.create(null)}function he(t){t.forEach(kt)}function lt(t){return typeof t=="function"}function Le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function Me(t){return t&&lt(t.destroy)?t.destroy:ie}const Yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function it(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function st(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t){return document.createTextNode(t)}function S(){return K(" ")}function Je(){return K("")}function H(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Zt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function xt(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e){t.value=e??""}function Rt(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function $t(t){const e=t.querySelector(":checked");return e&&e.__value}function Nt(t,e,n){t.classList.toggle(e,!!n)}let Fe;function De(t){Fe=t}function en(){if(!Fe)throw new Error("Function called outside component initialization");return Fe}function ot(t){en().$$.on_mount.push(t)}const je=[],Te=[];let Ue=[];const Ct=[],It=Promise.resolve();let at=!1;function Et(){at||(at=!0,It.then(Mt))}function Lt(){return Et(),It}function Ke(t){Ue.push(t)}const rt=new Set;let qe=0;function Mt(){if(qe!==0)return;const t=Fe;do{try{for(;qe<je.length;){const e=je[qe];qe++,De(e),tn(e.$$)}}catch(e){throw je.length=0,qe=0,e}for(De(null),je.length=0,qe=0;Te.length;)Te.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];rt.has(n)||(rt.add(n),n())}Ue.length=0}while(je.length);for(;Ct.length;)Ct.pop()();at=!1,rt.clear(),De(t)}function tn(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}function nn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const Ye=new Set;let Re;function Ze(){Re={r:0,c:[],p:Re}}function xe(){Re.r||he(Re.c),Re=Re.p}function ee(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function se(t,e,n,l){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),Re.c.push(()=>{Ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ke(t){return t?.length!==void 0?t:Array.from(t)}function ln(t,e){se(t,1,1,()=>{e.delete(t.key)})}function sn(t,e,n,l,s,o,i,a,d,p,y,k){let f=t.length,m=o.length,h=f;const g={};for(;h--;)g[t[h].key]=h;const N=[],A=new Map,B=new Map,C=[];for(h=m;h--;){const w=k(s,o,h),E=n(w);let I=i.get(E);I?C.push(()=>I.p(w,e)):(I=p(E,w),I.c()),A.set(E,N[h]=I),E in g&&B.set(E,Math.abs(h-g[E]))}const R=new Set,F=new Set;function J(w){ee(w,1),w.m(a,y),i.set(w.key,w),y=w.first,m--}for(;f&&m;){const w=N[m-1],E=t[f-1],I=w.key,z=E.key;w===E?(y=w.first,f--,m--):A.has(z)?!i.has(I)||R.has(I)?J(w):F.has(z)?f--:B.get(I)>B.get(z)?(F.add(I),J(w)):(R.add(z),f--):(d(E,i),f--)}for(;f--;){const w=t[f];A.has(w.key)||d(w,i)}for(;m;)J(N[m-1]);return he(C),N}function Ae(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Ke(()=>{const o=t.$$.on_mount.map(kt).filter(lt);t.$$.on_destroy?t.$$.on_destroy.push(...o):he(o),t.$$.on_mount=[]}),s.forEach(Ke)}function Ce(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function on(t,e){t.$$.dirty[0]===-1&&(je.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,l,s,o,i=null,a=[-1]){const d=Fe;De(t);const p=t.$$={fragment:null,ctx:[],props:o,update:ie,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};i&&i(p.root);let y=!1;if(p.ctx=n?n(t,e.props||{},(k,f,...m)=>{const h=m.length?m[0]:f;return p.ctx&&s(p.ctx[k],p.ctx[k]=h)&&(!p.skip_bound&&p.bound[k]&&p.bound[k](h),y&&on(t,k)),f}):[],p.update(),y=!0,he(p.before_update),p.fragment=l?l(p.ctx):!1,e.target){if(e.hydrate){const k=xt(e.target);p.fragment&&p.fragment.l(k),k.forEach(L)}else p.fragment&&p.fragment.c();e.intro&&ee(t.$$.fragment),Ne(t,e.target,e.anchor),Mt()}De(d)}class Oe{$$=void 0;$$set=void 0;$destroy(){Ce(this,1),this.$destroy=ie}$on(e,n){if(!lt(n))return ie;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const an="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(an);function He(t,e="body"){let n;async function l(o){if(e=o,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Lt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function s(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:s}}function ct(t,e){return!t.some(n=>n&&n.contains(e))}function jt(t,e,n){const l=t.slice();return l[10]=e[n],l}function Ut(t){let e,n,l,s,o,i,a,d,p,y,k,f=window.trans("New [_1] creation",window.trans("Entry"))+"",m,h,g,N,A,B=window.trans("New [_1] creation",window.trans("Page"))+"",C,R,F,J,w=t[1].length>0&&qt(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=u("div"),w&&w.c(),i=S(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,d=S(),p=u("ul"),y=u("li"),k=u("a"),m=K(f),g=S(),N=u("li"),A=u("a"),C=K(B),c(l,"type","button"),c(l,"class","close"),c(l,"data-dismiss","modal"),c(l,"aria-label","Close"),c(n,"class","modal-header"),c(a,"class","block-title"),c(k,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),c(A,"href",R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),c(p,"class","create-button-list"),c(o,"class","modal-body"),c(e,"class","modal create-button-modal")},m(E,I){M(E,e,I),r(e,n),r(n,l),r(e,s),r(e,o),w&&w.m(o,null),r(o,i),r(o,a),r(o,d),r(o,p),r(p,y),r(y,k),r(k,m),r(p,g),r(p,N),r(N,A),r(A,C),t[9](e),F||(J=[H(l,"click",t[4]),Me(He.call(null,e,"body"))],F=!0)},p(E,I){E[1].length>0?w?w.p(E,I):(w=qt(E),w.c(),w.m(o,i)):w&&(w.d(1),w=null),I&4&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${E[2]}`)&&c(k,"href",h),I&4&&R!==(R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${E[2]}`)&&c(A,"href",R)},d(E){E&&L(e),w&&w.d(),t[9](null),F=!1,he(J)}}}function qt(t){let e,n,l,s=ke(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=At(jt(t,s,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=S(),l=u("ul");for(let i=0;i<o.length;i+=1)o[i].c();c(e,"class","block-title"),c(l,"class","create-button-list")},m(i,a){M(i,e,a),M(i,n,a),M(i,l,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(l,null)},p(i,a){if(a&6){s=ke(i[1]);let d;for(d=0;d<s.length;d+=1){const p=jt(i,s,d);o[d]?o[d].p(p,a):(o[d]=At(p),o[d].c(),o[d].m(l,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=s.length}},d(i){i&&(L(e),L(n),L(l)),it(o,i)}}}function At(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",s,o,i;return{c(){e=u("li"),n=u("a"),s=K(l),i=S(),c(n,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(a,d){M(a,e,d),r(e,n),r(n,s),r(e,i)},p(a,d){d&2&&l!==(l=window.trans("New [_1] creation",a[10].name)+"")&&ve(s,l),d&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[10].id}&type=content_data_${a[10].id}&blog_id=${a[2]}`)&&c(n,"href",o)},d(a){a&&L(e)}}}function rn(t){let e,n,l,s,o=t[0]&&Ut(t);return{c(){e=S(),o&&o.c(),n=Je()},m(i,a){M(i,e,a),o&&o.m(i,a),M(i,n,a),l||(s=H(document.body,"click",t[5]),l=!0)},p(i,[a]){i[0]?o?o.p(i,a):(o=Ut(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:ie,o:ie,d(i){i&&(L(e),L(n)),o&&o.d(i),l=!1,s()}}}function cn(t,e,n){let{contentTypes:l=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{buttonRef:i=null}=e,{anchorRef:a=null}=e,{containerRef:d=null}=e,p=null;const y=()=>{n(0,o=!1)},k=m=>{if(d&&d.classList.contains("show"))return;const h=m.target;o&&ct([i,p],h)&&y()};function f(m){Te[m?"unshift":"push"](()=>{p=m,n(3,p),n(7,a),n(0,o)})}return t.$$set=m=>{"contentTypes"in m&&n(1,l=m.contentTypes),"blog_id"in m&&n(2,s=m.blog_id),"open"in m&&n(0,o=m.open),"buttonRef"in m&&n(6,i=m.buttonRef),"anchorRef"in m&&n(7,a=m.anchorRef),"containerRef"in m&&n(8,d=m.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&a){if(p){const m=a.getBoundingClientRect(),h=`calc(${m.bottom}px + 10px)`;n(3,p.style.top=h,p);const g=`calc(100vh - ${m.bottom}px - 10px - 20px)`;n(3,p.style.maxHeight=g,p)}o?a.classList.add("open"):a.classList.remove("open")}},[o,l,s,p,y,k,i,a,d,f]}class dn extends Oe{constructor(e){super(),Pe(this,e,cn,rn,Le,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const un=({target:t,props:e})=>{const n=new dn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function fn(t){let e,n,l,s;return{c(){e=u("div"),c(e,"class","mt-primaryNavigation-overlay"),c(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(o,i){M(o,e,i),l||(s=[Me(He.call(null,e,"body")),H(e,"mouseenter",t[1])],l=!0)},p(o,[i]){i&1&&n!==(n=`display: ${o[0]?"block":"none"}`)&&c(e,"style",n)},i:ie,o:ie,d(o){o&&L(e),l=!1,he(s)}}}function _n(t,e,n){let{buttonRef:l}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,i=!1;const a=(f,m)=>{const h=document.querySelector('[data-is="content-wrapper"]');m?h.classList.add(f):h.classList.remove(f)},d=()=>{a("collapsed",s)},p=()=>{a("mouseover",i)},y=()=>{var f;s&&(i=!0,p(),(f=document.querySelector('[data-is="primary-navigation"]'))===null||f===void 0||f.addEventListener("mouseleave",k,{once:!0}))},k=()=>{i=!1,p()};return ot(()=>{o||window.innerWidth<1e3&&n(0,s=!0),window.innerWidth<800&&n(0,s=!0),d()}),t.$$set=f=>{"buttonRef"in f&&n(2,l=f.buttonRef),"collapsed"in f&&n(0,s=f.collapsed),"isStored"in f&&n(3,o=f.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(d(),i=!1,p(),l&&(s?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[s,y,l,o]}class pn extends Oe{constructor(e){super(),Pe(this,e,_n,fn,Le,{buttonRef:2,collapsed:0,isStored:3})}}function mn(t,e){const n=new pn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Pt(t){let e,n;return{c(){e=st("title"),n=K(t[2])},m(l,s){M(l,e,s),r(e,n)},p(l,s){s&4&&ve(n,l[2])},d(l){l&&L(e)}}}function hn(t){let e,n,l=t[2]&&Pt(t);return{c(){e=st("svg"),l&&l.c(),n=st("use"),Tt(n,"xlink:href",t[1]),c(e,"role","img"),c(e,"class",t[0]),c(e,"style",t[3])},m(s,o){M(s,e,o),l&&l.m(e,null),r(e,n)},p(s,[o]){s[2]?l?l.p(s,o):(l=Pt(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),o&2&&Tt(n,"xlink:href",s[1]),o&1&&c(e,"class",s[0]),o&8&&c(e,"style",s[3])},i:ie,o:ie,d(s){s&&L(e),l&&l.d()}}}function bn(t,e,n){let{class:l}=e,{href:s}=e,{title:o}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,s=a.href),"title"in a&&n(2,o=a.title),"style"in a&&n(3,i=a.style)},[l,s,o,i]}class We extends Oe{constructor(e){super(),Pe(this,e,bn,hn,Le,{class:0,href:1,title:2,style:3})}}function Ot(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ht(t,e,n){const l=t.slice();return l[12]=e[n],l}function Bt(t){let e,n,l,s=!1,o,i,a,d=t[12].label+"",p,y,k,f,m;return k=Zt(t[7][0]),{c(){e=u("label"),n=u("input"),a=S(),p=K(d),y=S(),c(n,"type","radio"),c(n,"name","type"),n.__value=l=t[12].key,be(n,n.__value),c(n,"id",o=t[12].key),n.checked=i=t[0]===t[12].key,k.p(n)},m(h,g){M(h,e,g),r(e,n),n.checked=n.__value===t[0],r(e,a),r(e,p),r(e,y),f||(m=H(n,"change",t[6]),f=!0)},p(h,g){g&16&&l!==(l=h[12].key)&&(n.__value=l,be(n,n.__value),s=!0),g&16&&o!==(o=h[12].key)&&c(n,"id",o),g&17&&i!==(i=h[0]===h[12].key)&&(n.checked=i),(s||g&17)&&(n.checked=n.__value===h[0]),g&16&&d!==(d=h[12].label+"")&&ve(p,d)},d(h){h&&L(e),k.r(),f=!1,m()}}}function gn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",be(e,e.__value)},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function yn(t){let e,n=ke(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Jt(Ot(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Je()},m(s,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,o);M(s,e,o)},p(s,o){if(o&8){n=ke(s[3]);let i;for(i=0;i<n.length;i+=1){const a=Ot(s,n,i);l[i]?l[i].p(a,o):(l[i]=Jt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&L(e),it(l,s)}}}function Jt(t){let e,n=t[9].name+"",l,s;return{c(){e=u("option"),l=K(n),e.__value=s=t[9].id,be(e,e.__value)},m(o,i){M(o,e,i),r(e,l)},p(o,i){i&8&&n!==(n=o[9].name+"")&&ve(l,n),i&8&&s!==(s=o[9].id)&&(e.__value=s,be(e,e.__value))},d(o){o&&L(e)}}}function wn(t){let e,n,l,s,o,i,a,d,p,y,k,f,m,h,g,N,A,B,C,R,F,J,w,E,I,z,V,Q=ke(t[4]),U=[];for(let T=0;T<Q.length;T+=1)U[T]=Bt(Ht(t,Q,T));function te(T,j){return T[3].length>0?yn:gn}let ne=te(t),D=ne(t);return E=new We({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("form"),n=u("input"),l=S(),s=u("input"),o=S(),i=u("input"),a=S(),d=u("input"),p=S(),y=u("input"),k=S(),f=u("div");for(let T=0;T<U.length;T+=1)U[T].c();m=S(),h=u("div"),g=u("select"),D.c(),A=S(),B=u("div"),C=u("div"),R=u("input"),F=S(),J=u("div"),w=u("button"),Ae(E.$$.fragment),I=S(),z=u("span"),z.textContent=`${window.trans("Search")}`,c(n,"type","hidden"),c(n,"name","__mode"),n.value="search_replace",c(s,"type","hidden"),c(s,"name","blog_id"),s.value=t[1],c(i,"type","hidden"),c(i,"name","_type"),i.value=t[0],c(d,"type","hidden"),c(d,"name","do_search"),d.value="1",c(y,"type","hidden"),c(y,"name","magic_token"),y.value=t[2],c(f,"class","search-type"),c(g,"class","custom-select form-control form-select"),c(g,"name","content_type_id"),g.disabled=N=t[0]!=="content_data"||t[3].length===0,Nt(g,"disabled",t[0]!=="content_data"),c(h,"class","search-content-type"),c(R,"type","text"),c(R,"placeholder",window.trans("Select target and search text...")),c(R,"name","search"),c(C,"class","search-text-box"),c(w,"type","submit"),c(w,"class","btn btn-primary"),c(J,"class","submit-button"),c(B,"class","search-input-group"),c(e,"class","mt-search-form"),c(e,"method","post"),c(e,"action",window.ScriptURI)},m(T,j){M(T,e,j),r(e,n),r(e,l),r(e,s),r(e,o),r(e,i),r(e,a),r(e,d),r(e,p),r(e,y),r(e,k),r(e,f);for(let q=0;q<U.length;q+=1)U[q]&&U[q].m(f,null);r(e,m),r(e,h),r(h,g),D.m(g,null),r(e,A),r(e,B),r(B,C),r(C,R),t[8](R),r(B,F),r(B,J),r(J,w),Ne(E,w,null),r(w,I),r(w,z),V=!0},p(T,[j]){if((!V||j&2)&&(s.value=T[1]),(!V||j&1)&&(i.value=T[0]),(!V||j&4)&&(y.value=T[2]),j&17){Q=ke(T[4]);let q;for(q=0;q<Q.length;q+=1){const ce=Ht(T,Q,q);U[q]?U[q].p(ce,j):(U[q]=Bt(ce),U[q].c(),U[q].m(f,null))}for(;q<U.length;q+=1)U[q].d(1);U.length=Q.length}ne===(ne=te(T))&&D?D.p(T,j):(D.d(1),D=ne(T),D&&(D.c(),D.m(g,null))),(!V||j&9&&N!==(N=T[0]!=="content_data"||T[3].length===0))&&(g.disabled=N),(!V||j&1)&&Nt(g,"disabled",T[0]!=="content_data")},i(T){V||(ee(E.$$.fragment,T),V=!0)},o(T){se(E.$$.fragment,T),V=!1},d(T){T&&L(e),it(U,T),D.d(),t[8](null),Ce(E)}}}function vn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,d=null;const p=[[]];function y(){a=this.__value,n(0,a)}function k(f){Te[f?"unshift":"push"](()=>{d=f,n(5,d)})}return t.$$set=f=>{"blogId"in f&&n(1,l=f.blogId),"magicToken"in f&&n(2,s=f.magicToken),"contentTypes"in f&&n(3,o=f.contentTypes),"searchTabs"in f&&n(4,i=f.searchTabs),"objectType"in f&&n(0,a=f.objectType)},t.$$.update=()=>{t.$$.dirty&32&&d&&d.focus()},[a,l,s,o,i,d,y,p,k]}class Ft extends Oe{constructor(e){super(),Pe(this,e,vn,wn,Le,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Dt(t){let e,n,l,s,o,i,a,d,p,y,k;return d=new Ft({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',i=S(),a=u("div"),Ae(d.$$.fragment),c(e,"class","search-button-modal-overlay"),c(o,"type","button"),c(o,"class","close"),c(o,"data-dismiss","modal"),c(o,"aria-label","Close"),c(s,"class","modal-header"),c(a,"class","modal-body"),c(l,"class","modal search-button-modal")},m(f,m){M(f,e,m),M(f,n,m),M(f,l,m),r(l,s),r(s,o),r(l,i),r(l,a),Ne(d,a,null),t[11](l),p=!0,y||(k=[H(e,"click",t[7]),Me(He.call(null,e,"body")),H(o,"click",t[7]),Me(He.call(null,l,"body"))],y=!0)},p(f,m){const h={};m&4&&(h.blogId=f[2]),m&8&&(h.magicToken=f[3]),m&16&&(h.contentTypes=f[4]),m&2&&(h.objectType=f[1]),m&32&&(h.searchTabs=f[5]),d.$set(h)},i(f){p||(ee(d.$$.fragment,f),p=!0)},o(f){se(d.$$.fragment,f),p=!1},d(f){f&&(L(e),L(n),L(l)),Ce(d),t[11](null),y=!1,he(k)}}}function kn(t){let e,n,l,s,o,i=t[0]&&Dt(t);return{c(){e=S(),i&&i.c(),n=Je()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=H(document.body,"click",t[8]),s=!0)},p(a,[d]){a[0]?i?(i.p(a,d),d&1&&ee(i,1)):(i=Dt(a),i.c(),ee(i,1),i.m(n.parentNode,n)):i&&(Ze(),se(i,1,1,()=>{i=null}),xe())},i(a){l||(ee(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Sn(t,e,n){let{blogId:l}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:i=!1}=e,{buttonRef:a}=e,{anchorRef:d}=e,{searchTabs:p}=e,{objectType:y}=e;const k=()=>{n(0,i=!1)};let f=null;const m=g=>{const N=g.target;i&&ct([a,f],N)&&k()};ot(async()=>{y&&p.find(g=>g.key===y)||n(1,y=p[0].key)});function h(g){Te[g?"unshift":"push"](()=>{f=g,n(6,f)})}return t.$$set=g=>{"blogId"in g&&n(2,l=g.blogId),"magicToken"in g&&n(3,s=g.magicToken),"contentTypes"in g&&n(4,o=g.contentTypes),"open"in g&&n(0,i=g.open),"buttonRef"in g&&n(9,a=g.buttonRef),"anchorRef"in g&&n(10,d=g.anchorRef),"searchTabs"in g&&n(5,p=g.searchTabs),"objectType"in g&&n(1,y=g.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&d&&(i?d.classList.add("open"):d.classList.remove("open")),t.$$.dirty&1},[i,y,l,s,o,p,f,k,m,a,d,h]}class Tn extends Oe{constructor(e){super(),Pe(this,e,Sn,kn,Le,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function Rn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}const s=new Tn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const dt=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const s=l.result.objects.map(o=>{const i=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:i,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:Nn}=Yt;function Wt(t,e,n){const l=t.slice();return l[46]=e[n],l}function Vt(t){let e,n,l,s,o,i,a,d,p,y=window.trans("[_1]Site",t[3].toString())+"",k,f,m,h,g,N,A,B,C,R,F,J,w,E,I,z,V,Q,U,te,ne,D,T,j,q,ce,ue,Z,oe,ge,x,Se,ae,$,P,fe,re,X,_,b,v,W,Y,G,_e,Qe,ye,ht,Ee,ze,bt,Xe,gt,Ge,et,Be,de,pe,me,tt,yt;G=new We({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const wt=[In,Cn],we=[];function vt(O,le){return O[8]?0:1}return de=vt(t),pe=we[de]=wt[de](t),{c(){e=u("div"),n=S(),l=u("div"),s=u("div"),o=u("div"),i=u("div"),a=u("div"),d=u("span"),p=K("("),k=K(y),f=K(")"),m=S(),h=u("p"),h.textContent=`${window.trans("Site List")}`,g=S(),N=u("div"),A=u("button"),A.innerHTML='<span aria-hidden="true">\xD7</span>',B=S(),C=u("div"),R=u("div"),F=u("button"),J=K("<<"),E=S(),I=u("button"),z=K("<"),Q=S(),U=u("span"),te=u("span"),ne=K(t[4]),D=K("/"),T=K(t[5]),j=S(),q=u("button"),ce=K(">"),Z=S(),oe=u("button"),ge=K(">>"),Se=S(),ae=u("div"),$=u("div"),P=u("select"),fe=u("option"),fe.textContent=`${window.trans("Parent Sites")}`,re=u("option"),re.textContent=`${window.trans("Parent and child sites")}`,X=u("option"),X.textContent=`${window.trans("Only child sites")}`,_=S(),b=u("div"),v=u("input"),W=S(),Y=u("button"),Ae(G.$$.fragment),_e=S(),Qe=u("div"),ye=u("button"),ye.innerHTML='<span aria-hidden="true">\xD7</span>',ht=S(),Ee=u("div"),ze=u("span"),ze.textContent=`${window.trans("Site Name")}`,bt=S(),Xe=u("span"),Xe.textContent=`${window.trans("Parent Site")}`,gt=S(),Ge=u("div"),et=u("table"),Be=u("tbody"),pe.c(),c(e,"class","site-list-button-modal-overlay"),c(A,"type","button"),c(A,"class","close"),c(A,"data-dismiss","modal"),c(A,"aria-label","Close"),c(N,"class","d-block d-md-none"),c(a,"class","site-list-title"),c(F,"type","button"),F.disabled=w=t[4]<=1,c(I,"type","button"),I.disabled=V=t[4]<=1,c(te,"class","current"),c(U,"class","page-num"),c(q,"type","button"),q.disabled=ue=t[4]===t[5],c(oe,"type","button"),oe.disabled=x=t[4]===t[5],c(R,"class","prev-next"),fe.__value="parent_sites",be(fe,fe.__value),re.__value="parent_and_child_sites",be(re,re.__value),X.__value="child_sites_only",be(X,X.__value),c(P,"class","custom-select form-control form-select"),t[6]===void 0&&Ke(()=>t[29].call(P)),c($,"class","site-type-filter"),c(v,"type","text"),c(v,"placeholder",window.trans("Filter by site name")),c(b,"class","site-name-filter"),c(ae,"class","site-filter-actions"),c(ye,"type","button"),c(ye,"class","close"),c(ye,"data-dismiss","modal"),c(ye,"aria-label","Close"),c(Qe,"class","d-none d-md-block"),c(C,"class","site-list-actions"),c(i,"class","site-list-header"),c(ze,"class","table-header-col site-list-header-name"),c(Xe,"class","table-header-col site-list-header-parent"),c(Ee,"class","site-list-table-header"),c(Ge,"class","site-list-table-wrapper"),c(o,"class","site-list-container"),c(s,"class","modal-body"),c(l,"class","modal site-list-button-modal")},m(O,le){M(O,e,le),M(O,n,le),M(O,l,le),r(l,s),r(s,o),r(o,i),r(i,a),r(a,d),r(d,p),r(d,k),r(d,f),r(a,m),r(a,h),r(a,g),r(a,N),r(N,A),r(i,B),r(i,C),r(C,R),r(R,F),r(F,J),r(R,E),r(R,I),r(I,z),r(R,Q),r(R,U),r(U,te),r(te,ne),r(U,D),r(U,T),r(R,j),r(R,q),r(q,ce),r(R,Z),r(R,oe),r(oe,ge),r(C,Se),r(C,ae),r(ae,$),r($,P),r(P,fe),r(P,re),r(P,X),Rt(P,t[6],!0),r(ae,_),r(ae,b),r(b,v),be(v,t[7]),r(b,W),r(b,Y),Ne(G,Y,null),r(C,_e),r(C,Qe),r(Qe,ye),r(o,ht),r(o,Ee),r(Ee,ze),r(Ee,bt),r(Ee,Xe),r(o,gt),r(o,Ge),r(Ge,et),r(et,Be),we[de].m(Be,null),t[36](Be),t[37](l),me=!0,tt||(yt=[H(e,"click",t[11]),Me(He.call(null,e,"body")),H(A,"click",t[11]),H(F,"click",t[15]),H(F,"keydown",t[25]),H(I,"click",t[14]),H(I,"keydown",t[26]),H(q,"click",t[12]),H(q,"keydown",t[27]),H(oe,"click",t[13]),H(oe,"keydown",t[28]),H(P,"change",t[29]),H(P,"change",t[16]),H(v,"input",t[30]),H(v,"keydown",t[31]),H(Y,"click",t[16]),H(ye,"click",t[11]),Me(He.call(null,l,"body"))],tt=!0)},p(O,le){(!me||le[0]&8)&&y!==(y=window.trans("[_1]Site",O[3].toString())+"")&&ve(k,y),(!me||le[0]&16&&w!==(w=O[4]<=1))&&(F.disabled=w),(!me||le[0]&16&&V!==(V=O[4]<=1))&&(I.disabled=V),(!me||le[0]&16)&&ve(ne,O[4]),(!me||le[0]&32)&&ve(T,O[5]),(!me||le[0]&48&&ue!==(ue=O[4]===O[5]))&&(q.disabled=ue),(!me||le[0]&48&&x!==(x=O[4]===O[5]))&&(oe.disabled=x),le[0]&64&&Rt(P,O[6]),le[0]&128&&v.value!==O[7]&&be(v,O[7]);let nt=de;de=vt(O),de===nt?we[de].p(O,le):(Ze(),se(we[nt],1,1,()=>{we[nt]=null}),xe(),pe=we[de],pe?pe.p(O,le):(pe=we[de]=wt[de](O),pe.c()),ee(pe,1),pe.m(Be,null))},i(O){me||(ee(G.$$.fragment,O),ee(pe),me=!0)},o(O){se(G.$$.fragment,O),se(pe),me=!1},d(O){O&&(L(e),L(n),L(l)),Ce(G),we[de].d(),t[36](null),t[37](null),tt=!1,he(yt)}}}function Cn(t){let e=[],n=new Map,l,s,o=ke(t[1]);const i=a=>a[46].id;for(let a=0;a<o.length;a+=1){let d=Wt(t,o,a),p=i(d);n.set(p,e[a]=zt(p,d))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Je()},m(a,d){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(a,d);M(a,l,d),s=!0},p(a,d){d[0]&393222&&(o=ke(a[1]),Ze(),e=sn(e,d,i,1,a,o,n,l.parentNode,ln,zt,l,Wt),xe())},i(a){if(!s){for(let d=0;d<o.length;d+=1)ee(e[d]);s=!0}},o(a){for(let d=0;d<e.length;d+=1)se(e[d]);s=!1},d(a){a&&L(l);for(let d=0;d<e.length;d+=1)e[d].d(a)}}}function In(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,c(n,"colspan","2"),c(n,"class","loading")},m(l,s){M(l,e,s),r(e,n)},p:ie,i:ie,o:ie,d(l){l&&L(e)}}}function En(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,c(e,"class","badge badge-child-site")},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function Ln(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,c(e,"class","badge badge-site")},m(n,l){M(n,e,l)},p:ie,d(n){n&&L(e)}}}function Mn(t){let e,n,l,s;function o(...i){return t[33](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function jn(t){let e,n,l,s;function o(...i){return t[32](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function Qt(t){let e,n=t[46].parentSiteName+"";return{c(){e=u("span"),c(e,"class","d-block d-md-none parent-site")},m(l,s){M(l,e,s),e.innerHTML=n},p(l,s){s[0]&2&&n!==(n=l[46].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&L(e)}}}function Un(t){let e,n,l,s;function o(...i){return t[35](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",c(e,"aria-label",window.trans("Add to starred sites")),c(e,"aria-pressed","false"),c(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function qn(t){let e,n,l,s;function o(...i){return t[34](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",c(e,"aria-label",window.trans("Remove from starred sites")),c(e,"aria-pressed","true"),c(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),r(e,n),l||(s=H(e,"click",o),l=!0)},p(i,a){t=i},d(i){i&&L(e),l=!1,s()}}}function zt(t,e){let n,l,s,o,i,a,d,p,y,k,f,m,h=e[46].name+"",g,N,A,B,C,R,F,J,w,E,I,z=e[46].parentSiteName+"",V,Q,U,te,ne,D,T,j,q,ce,ue,Z;function oe(_,b){return _[46].parentSiteName==="-"?Ln:En}let ge=oe(e),x=ge(e);function Se(_,b){return b[0]&6&&(a=null),a==null&&(a=!!_[2].includes(Number(_[46].id))),a?jn:Mn}let ae=Se(e,[-1,-1]),$=ae(e);y=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let P=e[46].parentSiteName!=="-"&&Qt(e);J=new We({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function fe(_,b){return b[0]&6&&(te=null),te==null&&(te=!!_[2].includes(Number(_[46].id))),te?qn:Un}let re=fe(e,[-1,-1]),X=re(e);return T=new We({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),s=u("span"),x.c(),o=S(),i=u("span"),$.c(),d=S(),p=u("span"),Ae(y.$$.fragment),f=S(),m=u("a"),g=K(h),A=S(),P&&P.c(),B=S(),C=u("a"),R=u("span"),R.textContent=`${window.trans("View your site.")}`,F=S(),Ae(J.$$.fragment),E=S(),I=u("td"),V=S(),Q=u("td"),U=u("span"),X.c(),ne=S(),D=u("span"),Ae(T.$$.fragment),q=S(),c(p,"class","site-list-table-sortable-handle"),c(p,"style",k=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(i,"class","site-list-table-action-buttons-mobile"),c(s,"class","site-list-table-bagde-container"),c(m,"href",N=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`),c(m,"class","dashboard-link"),c(R,"class","d-inline-block d-md-none"),c(C,"href",w=e[46].siteUrl),c(C,"class","site-link"),c(C,"target","_blank"),c(I,"class","site-list-table-parent-site"),c(D,"class","site-list-table-sortable-handle"),c(D,"style",j=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),c(U,"class","site-list-table-action-buttons"),c(Q,"class","site-list-table-action"),c(n,"data-site-id",ce=e[46].id),c(n,"data-is-starred",ue=e[2].includes(Number(e[46].id))||void 0),this.first=n},m(_,b){M(_,n,b),r(n,l),r(l,s),x.m(s,null),r(s,o),r(s,i),$.m(i,null),r(i,d),r(i,p),Ne(y,p,null),r(l,f),r(l,m),r(m,g),r(l,A),P&&P.m(l,null),r(l,B),r(l,C),r(C,R),r(C,F),Ne(J,C,null),r(n,E),r(n,I),I.innerHTML=z,r(n,V),r(n,Q),r(Q,U),X.m(U,null),r(U,ne),r(U,D),Ne(T,D,null),r(n,q),Z=!0},p(_,b){e=_,ge===(ge=oe(e))&&x?x.p(e,b):(x.d(1),x=ge(e),x&&(x.c(),x.m(s,o))),ae===(ae=Se(e,b))&&$?$.p(e,b):($.d(1),$=ae(e),$&&($.c(),$.m(i,d))),(!Z||b[0]&6&&k!==(k=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(p,"style",k),(!Z||b[0]&2)&&h!==(h=e[46].name+"")&&ve(g,h),(!Z||b[0]&2&&N!==(N=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`))&&c(m,"href",N),e[46].parentSiteName!=="-"?P?P.p(e,b):(P=Qt(e),P.c(),P.m(l,B)):P&&(P.d(1),P=null),(!Z||b[0]&2&&w!==(w=e[46].siteUrl))&&c(C,"href",w),(!Z||b[0]&2)&&z!==(z=e[46].parentSiteName+"")&&(I.innerHTML=z),re===(re=fe(e,b))&&X?X.p(e,b):(X.d(1),X=re(e),X&&(X.c(),X.m(U,ne))),(!Z||b[0]&6&&j!==(j=e[2].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&c(D,"style",j),(!Z||b[0]&2&&ce!==(ce=e[46].id))&&c(n,"data-site-id",ce),(!Z||b[0]&6&&ue!==(ue=e[2].includes(Number(e[46].id))||void 0))&&c(n,"data-is-starred",ue)},i(_){Z||(ee(y.$$.fragment,_),ee(J.$$.fragment,_),ee(T.$$.fragment,_),Z=!0)},o(_){se(y.$$.fragment,_),se(J.$$.fragment,_),se(T.$$.fragment,_),Z=!1},d(_){_&&L(n),x.d(),$.d(),Ce(y),P&&P.d(),Ce(J),X.d(),Ce(T)}}}function An(t){let e,n,l,s,o,i=t[0]&&Vt(t);return{c(){e=S(),i&&i.c(),n=Je()},m(a,d){M(a,e,d),i&&i.m(a,d),M(a,n,d),l=!0,s||(o=H(Nn.body,"click",t[19]),s=!0)},p(a,d){a[0]?i?(i.p(a,d),d[0]&1&&ee(i,1)):(i=Vt(a),i.c(),ee(i,1),i.m(n.parentNode,n)):i&&(Ze(),se(i,1,1,()=>{i=null}),xe())},i(a){l||(ee(i),l=!0)},o(a){se(i),l=!1},d(a){a&&(L(e),L(n)),i&&i.d(a),s=!1,o()}}}function Pn(t,e,n){let{magicToken:l}=e,{limit:s=50}=e,{open:o=!1}=e,{buttonRef:i}=e,{anchorRef:a}=e,{initialStarredSites:d}=e;const p=()=>{n(0,o=!1)};let y={},k=[],f=[],m=[],h=d,g=0,N=1,A=1,B="parent_and_child_sites",C="",R=[],F=!1,J=null;const w=()=>{n(4,N++,N),Q()},E=()=>{n(4,N=A),Q()},I=()=>{n(4,N--,N),Q()},z=()=>{n(4,N=1),Q()},V=()=>{k=[],f=h,R=[],B==="child_sites_only"?R=[{type:"parent_website",args:{value:""}}]:B==="parent_sites"&&(R=[{type:"parent_website",args:{value:"1"}}]),n(7,C=C.trim()),C!==""&&R.push({type:"name",args:{string:C,option:"contains"}}),n(4,N=1),Q()},Q=async()=>{if(n(8,F=!0),n(1,m=[]),k.length===0){const _=await dt({magicToken:l,items:R,page:N,limit:s});n(3,g=_.count),n(5,A=_.pageMax),n(4,N=A!==0?_.page:0);const b=[];if(f.forEach(v=>{const W=_.sites.findIndex(Y=>Number(Y.id)===v);if(W!==-1)y[v]=_.sites[W],_.sites.splice(W,1);else{const Y=y[v];if(!Y)b.push(v);else{const G=Y.parentSiteName.match(/^<a/);(B==="child_sites_only"&&!G||B==="parent_sites"&&G)&&(f=f.filter(_e=>_e!==v))}}}),k=[..._.sites],b.length>0){const v=await dt({magicToken:l,items:[...R,{type:"pack",args:{op:"or",items:b.map(W=>({type:"id",args:{value:W,option:"equal"}}))}}],page:0,limit:200});b.forEach(W=>{const Y=v.sites.findIndex(G=>Number(G.id)===W);Y!==-1?y[W]=v.sites[Y]:(f=f.filter(G=>G!==W),n(2,h=h.filter(G=>G!==W)))})}for(let v=0;v<s&&v<f.length;v++)m.push(y[f[v]]);for(let v=0;v<k.length&&m.length<s;v++)m.push(k[v])}else{const _=f.length,b=(N-1)*s;for(let v=b;v<_&&m.length<s;v++)m.push(y[f[v]]);for(let v=Math.max(b-_,0);v<g-_&&m.length<s;v++){if(!k[v]){const W=Math.floor(v/s),Y=await dt({magicToken:l,items:[...R,...f.map(_e=>({type:"id",args:{value:_e,option:"not_equal"}}))],page:W+1,limit:s}),G=W*s;for(let _e=0;_e<Y.sites.length;_e++)k[G+_e]=Y.sites[_e]}m.push(k[v])}}n(8,F=!1)},U=async _=>{const b=new FormData;return b.append("__mode","save_starred_sites"),b.append("magic_token",l),_.forEach(v=>{b.append("id",String(v))}),fetch(window.ScriptURI,{method:"POST",body:b,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(v=>v.json()).then(v=>{if(v.error)throw new Error(v.error)})},te=_=>{const b=[...h];n(2,h=_),U(h).catch(v=>{alert(v.message),n(2,h=b)})},ne=(_,b)=>{_.stopPropagation(),te([...new Set([...h,Number(b.id)])])},D=(_,b)=>{_.stopPropagation();const v=Number(b.id);te(h.filter(W=>W!==v))},T=_=>{const b=_.target;o&&ct([i,J],b)&&p()};ot(async()=>{V()});let j=null;const q=async()=>{await Lt(),j&&jQuery(j).sortable({delay:100,distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,b){if(!j)return;const v=document.createElement("tr");v.classList.add("site-list-table-placeholder"),v.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",j.insertBefore(v,j.firstChild),b.placeholder.height(b.item.height())},stop(){var _;(_=j?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(!j)return;const _=[],b=[];j.querySelectorAll("tr[data-site-id]").forEach(W=>{const Y=Number(W.dataset.siteId);W.dataset.isStarred&&b.push(Number(Y)),_.push(m.find(G=>Number(G.id)===Y))}),n(1,m=_);const v=h.findIndex(W=>b.includes(W));n(2,h=[...h]),h.splice(v,b.length,...b),te(h)}})},ce=_=>_.key==="Enter"&&z(),ue=_=>_.key==="Enter"&&I(),Z=_=>_.key==="Enter"&&w(),oe=_=>_.key==="Enter"&&E();function ge(){B=$t(this),n(6,B)}function x(){C=this.value,n(7,C)}const Se=_=>_.key==="Enter"&&V(),ae=(_,b)=>D(b,_),$=(_,b)=>ne(b,_),P=(_,b)=>D(b,_),fe=(_,b)=>ne(b,_);function re(_){Te[_?"unshift":"push"](()=>{j=_,n(10,j)})}function X(_){Te[_?"unshift":"push"](()=>{J=_,n(9,J)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,s=_.limit),"open"in _&&n(0,o=_.open),"buttonRef"in _&&n(22,i=_.buttonRef),"anchorRef"in _&&n(23,a=_.anchorRef),"initialStarredSites"in _&&n(24,d=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&8388609&&a&&(o?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty[0]&3&&m&&m.length>0&&o&&q()},[o,m,h,g,N,A,B,C,F,J,j,p,w,E,I,z,V,ne,D,T,l,s,i,a,d,ce,ue,Z,oe,ge,x,Se,ae,$,P,fe,re,X]}class On extends Oe{constructor(e){super(),Pe(this,e,Pn,An,Le,{magicToken:20,limit:21,open:0,buttonRef:22,anchorRef:23,initialStarredSites:24},null,[-1,-1])}}function Hn(t,e){const n=new On({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Bn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}new Ft({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var ut,ft;const _t=document.querySelector('[data-is="primary-navigation-toggle"]');if(_t!==null){const t="collapsed",e=sessionStorage.getItem(t);mn(_t,{collapsed:e==="true",buttonRef:_t.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const pt=document.querySelector('[data-script="admin-ui"]');pt===null&&console.error("data-script='admin-ui' is not set");const $e=(ut=pt?.getAttribute("data-blog-id"))!==null&&ut!==void 0?ut:"",Ie=(ft=pt?.getAttribute("data-magic-token"))!==null&&ft!==void 0?ft:"";Ie===""&&console.error("data-magic-token is not set");const Jn="50",Xt=document.querySelectorAll('[data-is="site-list-button"]');Xt.length>0&&Ie!==""&&Xt.forEach(t=>{var e;Hn(t,{magicToken:Ie,limit:Number.parseInt(Jn),open:!1,buttonRef:t,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const mt=document.querySelectorAll('[data-is="create-button"]'),Ve=document.querySelector('[data-is="search-button"]'),Fn=document.querySelector("div.mt-modal");(mt.length>0||Ve!==null)&&Ie!==""&&Gt({blogId:$e,magicToken:Ie}).then(t=>{if(mt.length>0&&mt.forEach(n=>{un({target:n,props:{blog_id:$e,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,buttonRef:n,anchorRef:n,containerRef:Fn}})}),Ve!==null){const n=Ve.getElementsByTagName("a")[0];Rn(Ve,{blogId:$e,magicToken:Ie,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:Ve,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&Bn(e,{blogId:$e,magicToken:Ie,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
