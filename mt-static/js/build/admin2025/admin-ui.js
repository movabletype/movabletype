function z(){}function St(t){return t()}function Tt(){return Object.create(null)}function me(t){t.forEach(St)}function nt(t){return typeof t=="function"}function Me(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function tn(t){return Object.keys(t).length===0}function ve(t){return t&&nt(t.destroy)?t.destroy:z}const nn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function lt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function it(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function W(t){return document.createTextNode(t)}function L(){return W(" ")}function Be(){return W("")}function q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ct(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function ln(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function sn(t){return Array.from(t.childNodes)}function Se(t,e){e=""+e,t.data!==e&&(t.data=e)}function he(t,e){t.value=e??""}function Ke(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Rt(t){const e=t.querySelector(":checked");return e&&e.__value}function Lt(t,e,n){t.classList.toggle(e,!!n)}let De;function Je(t){De=t}function on(){if(!De)throw new Error("Function called outside component initialization");return De}function Nt(t){on().$$.on_mount.push(t)}const je=[],Re=[];let Ue=[];const Et=[],It=Promise.resolve();let st=!1;function Mt(){st||(st=!0,It.then(Ut))}function jt(){return Mt(),It}function We(t){Ue.push(t)}const ot=new Set;let Pe=0;function Ut(){if(Pe!==0)return;const t=De;do{try{for(;Pe<je.length;){const e=je[Pe];Pe++,Je(e),an(e.$$)}}catch(e){throw je.length=0,Pe=0,e}for(Je(null),je.length=0,Pe=0;Re.length;)Re.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];ot.has(n)||(ot.add(n),n())}Ue.length=0}while(je.length);for(;Et.length;)Et.pop()();st=!1,ot.clear(),Je(t)}function an(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(We)}}function rn(t){const e=[],n=[];Ue.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ue=e}const Ye=new Set;let Le;function Ze(){Le={r:0,c:[],p:Le}}function xe(){Le.r||me(Le.c),Le=Le.p}function Y(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function $(t,e,n,l){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),Le.c.push(()=>{Ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Te(t){return t?.length!==void 0?t:Array.from(t)}function cn(t,e){$(t,1,1,()=>{e.delete(t.key)})}function dn(t,e,n,l,o,s,i,a,r,f,b,k){let p=t.length,m=s.length,h=p;const R={};for(;h--;)R[t[h].key]=h;const g=[],S=new Map,N=new Map,T=[];for(h=m;h--;){const y=k(o,s,h),U=n(y);let v=i.get(U);v?T.push(()=>v.p(y,e)):(v=f(U,y),v.c()),S.set(U,g[h]=v),U in R&&N.set(U,Math.abs(h-R[U]))}const I=new Set,O=new Set;function j(y){Y(y,1),y.m(a,b),i.set(y.key,y),b=y.first,m--}for(;p&&m;){const y=g[m-1],U=t[p-1],v=y.key,P=U.key;y===U?(b=y.first,p--,m--):S.has(P)?!i.has(v)||I.has(v)?j(y):O.has(P)?p--:N.get(v)>N.get(P)?(O.add(v),j(y)):(I.add(P),p--):(r(U,i),p--)}for(;p--;){const y=t[p];S.has(y.key)||r(y,i)}for(;m;)j(g[m-1]);return me(T),g}function qe(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),We(()=>{const s=t.$$.on_mount.map(St).filter(nt);t.$$.on_destroy?t.$$.on_destroy.push(...s):me(s),t.$$.on_mount=[]}),o.forEach(We)}function Ee(t,e){const n=t.$$;n.fragment!==null&&(rn(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function un(t,e){t.$$.dirty[0]===-1&&(je.push(t),Mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Oe(t,e,n,l,o,s,i=null,a=[-1]){const r=De;Je(t);const f=t.$$={fragment:null,ctx:[],props:s,update:z,not_equal:o,bound:Tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Tt(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};i&&i(f.root);let b=!1;if(f.ctx=n?n(t,e.props||{},(k,p,...m)=>{const h=m.length?m[0]:p;return f.ctx&&o(f.ctx[k],f.ctx[k]=h)&&(!f.skip_bound&&f.bound[k]&&f.bound[k](h),b&&un(t,k)),p}):[],f.update(),b=!0,me(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const k=sn(e.target);f.fragment&&f.fragment.l(k),k.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&Y(t.$$.fragment),Ne(t,e.target,e.anchor),Ut()}Je(r)}class Ae{$$=void 0;$$set=void 0;$destroy(){Ee(this,1),this.$destroy=z}$on(e,n){if(!nt(n))return z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fn);function He(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await jt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function at(t,e){return!t.some(n=>n&&n.contains(e))}const rt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function Pt(t,e,n){const l=t.slice();return l[12]=e[n],l}function qt(t){let e,n,l,o,s,i,a,r,f,b,k,p=window.trans("New [_1] creation",window.trans("Entry"))+"",m,h,R,g,S,N=window.trans("New [_1] creation",window.trans("Page"))+"",T,I,O,j;function y(P,V){if(P[3])return pn;if(P[4].length>0)return _n}let U=y(t),v=U&&U(t);return{c(){e=u("div"),n=u("div"),l=u("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=L(),s=u("div"),v&&v.c(),i=L(),a=u("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=L(),f=u("ul"),b=u("li"),k=u("a"),m=W(p),R=L(),g=u("li"),S=u("a"),T=W(N),d(l,"type","button"),d(l,"class","close"),d(l,"data-dismiss","modal"),d(l,"aria-label","Close"),d(n,"class","modal-header"),d(a,"class","block-title"),d(k,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[1]}`),d(S,"href",I=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[1]}`),d(f,"class","create-button-list"),d(s,"class","modal-body"),d(e,"class","modal create-button-modal")},m(P,V){M(P,e,V),c(e,n),c(n,l),c(e,o),c(e,s),v&&v.m(s,null),c(s,i),c(s,a),c(s,r),c(s,f),c(f,b),c(b,k),c(k,m),c(f,R),c(f,g),c(g,S),c(S,T),t[11](e),O||(j=[q(l,"click",t[5]),ve(He.call(null,e,"body"))],O=!0)},p(P,V){U===(U=y(P))&&v?v.p(P,V):(v&&v.d(1),v=U&&U(P),v&&(v.c(),v.m(s,i))),V&2&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${P[1]}`)&&d(k,"href",h),V&2&&I!==(I=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${P[1]}`)&&d(S,"href",I)},d(P){P&&E(e),v&&v.d(),t[11](null),O=!1,me(j)}}}function _n(t){let e,n,l,o=Te(t[4]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ot(Pt(t,o,i));return{c(){e=u("p"),e.textContent=`${window.trans("Content Data")}`,n=L(),l=u("ul");for(let i=0;i<s.length;i+=1)s[i].c();d(e,"class","block-title"),d(l,"class","create-button-list")},m(i,a){M(i,e,a),M(i,n,a),M(i,l,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(i,a){if(a&18){o=Te(i[4]);let r;for(r=0;r<o.length;r+=1){const f=Pt(i,o,r);s[r]?s[r].p(f,a):(s[r]=Ot(f),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(i){i&&(E(e),E(n),E(l)),lt(s,i)}}}function pn(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){M(n,e,l)},p:z,d(n){n&&E(e)}}}function Ot(t){let e,n,l=window.trans("New [_1] creation",t[12].name)+"",o,s,i;return{c(){e=u("li"),n=u("a"),o=W(l),i=L(),d(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[12].id}&type=content_data_${t[12].id}&blog_id=${t[1]}`)},m(a,r){M(a,e,r),c(e,n),c(n,o),c(e,i)},p(a,r){r&16&&l!==(l=window.trans("New [_1] creation",a[12].name)+"")&&Se(o,l),r&18&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[12].id}&type=content_data_${a[12].id}&blog_id=${a[1]}`)&&d(n,"href",s)},d(a){a&&E(e)}}}function mn(t){let e,n,l,o,s=t[0]&&qt(t);return{c(){e=L(),s&&s.c(),n=Be()},m(i,a){M(i,e,a),s&&s.m(i,a),M(i,n,a),l||(o=q(document.body,"click",t[6]),l=!0)},p(i,[a]){i[0]?s?s.p(i,a):(s=qt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:z,o:z,d(i){i&&(E(e),E(n)),s&&s.d(i),l=!1,o()}}}function hn(t,e,n){let{blog_id:l}=e,{magicToken:o}=e,{open:s=!1}=e,{anchorRef:i=null}=e,{containerRef:a=null}=e,r=null,f=!1,b=!1,k=[];const p=()=>{n(0,s=!1)},m=R=>{if(a&&a.classList.contains("show"))return;const g=R.target;s&&at([i,r],g)&&p()};function h(R){Re[R?"unshift":"push"](()=>{r=R,n(2,r),n(8,i),n(0,s),n(10,f),n(3,b),n(1,l),n(7,o)})}return t.$$set=R=>{"blog_id"in R&&n(1,l=R.blog_id),"magicToken"in R&&n(7,o=R.magicToken),"open"in R&&n(0,s=R.open),"anchorRef"in R&&n(8,i=R.anchorRef),"containerRef"in R&&n(9,a=R.containerRef)},t.$$.update=()=>{if(t.$$.dirty&1423&&i){if(r){const R=i.getBoundingClientRect(),g=`calc(${R.bottom}px + 10px)`;n(2,r.style.top=g,r);const S=`calc(100vh - ${R.bottom}px - 10px - 20px)`;n(2,r.style.maxHeight=S,r)}s?(i.classList.add("open"),!f&&!b&&(n(3,b=!0),rt({blogId:l,magicToken:o}).then(R=>{n(4,k=R.contentTypes.filter(g=>g.can_create===1)),n(10,f=!0),n(3,b=!1)}).catch(R=>{console.error("Failed to fetch content types:",R),n(3,b=!1)}))):i.classList.remove("open")}},[s,l,r,b,k,p,m,o,i,a,f,h]}class bn extends Ae{constructor(e){super(),Oe(this,e,hn,mn,Me,{blog_id:1,magicToken:7,open:0,anchorRef:8,containerRef:9})}}const gn=({target:t,props:e})=>{const n=new bn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})},At="collapsed",Ht=()=>{const t=sessionStorage.getItem(At);return t==="true"?!0:t==="false"?!1:null},yn=t=>{sessionStorage.setItem(At,t.toString())},Ft=t=>{t?document.documentElement.classList.add("mt-has-primary-navigation-collapsed"):document.documentElement.classList.remove("mt-has-primary-navigation-collapsed")};function wn(t){let e,n,l,o;return{c(){e=u("div"),d(e,"class","mt-primaryNavigation-overlay"),d(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){M(s,e,i),l||(o=[ve(He.call(null,e,"body")),q(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&d(e,"style",n)},i:z,o:z,d(s){s&&E(e),l=!1,me(o)}}}function kn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const a=(p,m)=>{const h=document.querySelector('[data-is="content-wrapper"]');m?h.classList.add(p):h.classList.remove(p)},r=()=>{a("collapsed",o)},f=()=>{a("mouseover",i)},b=()=>{var p;o&&(i=!0,f(),(p=document.querySelector('[data-is="primary-navigation"]'))===null||p===void 0||p.addEventListener("mouseleave",k,{once:!0}))},k=()=>{i=!1,f()};return Nt(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),r()}),t.$$set=p=>{"buttonRef"in p&&n(2,l=p.buttonRef),"collapsed"in p&&n(0,o=p.collapsed),"isStored"in p&&n(3,s=p.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(r(),i=!1,f(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed"),Ft(!0)):(l.classList.remove("collapsed"),l.classList.add("expanded"),Ft(!1))))},[o,b,l,s]}class vn extends Ae{constructor(e){super(),Oe(this,e,kn,wn,Me,{buttonRef:2,collapsed:0,isStored:3})}}function Sn(t,e){const n=new vn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:Ht()!==null}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),yn(e.collapsed)})}const Bt=t=>{const e=window.innerWidth-document.documentElement.clientWidth;e>0&&document.documentElement.style.setProperty("--scrollbar-width",`${e}px`),t.classList.add("mt-modal-overlay")};function Dt(t){let e,n;return{c(){e=it("title"),n=W(t[2])},m(l,o){M(l,e,o),c(e,n)},p(l,o){o&4&&Se(n,l[2])},d(l){l&&E(e)}}}function Tn(t){let e,n,l=t[2]&&Dt(t);return{c(){e=it("svg"),l&&l.c(),n=it("use"),Ct(n,"xlink:href",t[1]),d(e,"role","img"),d(e,"class",t[0]),d(e,"style",t[3])},m(o,s){M(o,e,s),l&&l.m(e,null),c(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Dt(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Ct(n,"xlink:href",o[1]),s&1&&d(e,"class",o[0]),s&8&&d(e,"style",o[3])},i:z,o:z,d(o){o&&E(e),l&&l.d()}}}function Cn(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e,{style:i=void 0}=e;return t.$$set=a=>{"class"in a&&n(0,l=a.class),"href"in a&&n(1,o=a.href),"title"in a&&n(2,s=a.title),"style"in a&&n(3,i=a.style)},[l,o,s,i]}class Ve extends Ae{constructor(e){super(),Oe(this,e,Cn,Tn,Me,{class:0,href:1,title:2,style:3})}}function Jt(t,e,n){const l=t.slice();return l[14]=e[n],l}function Wt(t,e,n){const l=t.slice();return l[17]=e[n],l}function Vt(t){let e,n,l,o=!1,s,i,a=t[17].label+"",r,f,b,k,p;return b=ln(t[10][0]),{c(){e=u("label"),n=u("input"),i=L(),r=W(a),f=L(),d(n,"type","radio"),n.__value=l=t[17].key,he(n,n.__value),n.checked=s=t[0]===t[17].key,b.p(n)},m(m,h){M(m,e,h),c(e,n),n.checked=n.__value===t[0],c(e,i),c(e,r),c(e,f),k||(p=q(n,"change",t[9]),k=!0)},p(m,h){h&4&&l!==(l=m[17].key)&&(n.__value=l,he(n,n.__value),o=!0),h&5&&s!==(s=m[0]===m[17].key)&&(n.checked=s),(o||h&5)&&(n.checked=n.__value===m[0]),h&4&&a!==(a=m[17].label+"")&&Se(r,a)},d(m){m&&E(e),b.r(),k=!1,p()}}}function Rn(t){let e,n,l,o;function s(r,f){return r[1].length>0?En:Nn}let i=s(t),a=i(t);return{c(){e=u("select"),a.c(),d(e,"class","custom-select form-control form-select"),e.disabled=n=t[0]!=="content_data"||t[1].length===0,t[4]===void 0&&We(()=>t[11].call(e)),Lt(e,"disabled",t[0]!=="content_data")},m(r,f){M(r,e,f),a.m(e,null),Ke(e,t[4],!0),l||(o=q(e,"change",t[11]),l=!0)},p(r,f){i===(i=s(r))&&a?a.p(r,f):(a.d(1),a=i(r),a&&(a.c(),a.m(e,null))),f&3&&n!==(n=r[0]!=="content_data"||r[1].length===0)&&(e.disabled=n),f&18&&Ke(e,r[4]),f&1&&Lt(e,"disabled",r[0]!=="content_data")},d(r){r&&E(e),a.d(),l=!1,o()}}}function Ln(t){let e;return{c(){e=u("p"),e.textContent=`${window.trans("Loading...")}`},m(n,l){M(n,e,l)},p:z,d(n){n&&E(e)}}}function Nn(t){let e;return{c(){e=u("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",he(e,e.__value)},m(n,l){M(n,e,l)},p:z,d(n){n&&E(e)}}}function En(t){let e,n=Te(t[1]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Qt(Jt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Be()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);M(o,e,s)},p(o,s){if(s&2){n=Te(o[1]);let i;for(i=0;i<n.length;i+=1){const a=Jt(o,n,i);l[i]?l[i].p(a,s):(l[i]=Qt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&E(e),lt(l,o)}}}function Qt(t){let e,n=t[14].name+"",l,o;return{c(){e=u("option"),l=W(n),e.__value=o=t[14].id,he(e,e.__value)},m(s,i){M(s,e,i),c(e,l)},p(s,i){i&2&&n!==(n=s[14].name+"")&&Se(l,n),i&2&&o!==(o=s[14].id)&&(e.__value=o,he(e,e.__value))},d(s){s&&E(e)}}}function In(t){let e,n,l,o,s,i,a,r,f,b,k,p,m,h,R,g,S,N=Te(t[2]),T=[];for(let y=0;y<N.length;y+=1)T[y]=Vt(Wt(t,N,y));function I(y,U){return y[3]?Ln:Rn}let O=I(t),j=O(t);return p=new Ve({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=u("div"),n=u("div");for(let y=0;y<T.length;y+=1)T[y].c();l=L(),o=u("div"),j.c(),s=L(),i=u("div"),a=u("div"),r=u("input"),f=L(),b=u("div"),k=u("button"),qe(p.$$.fragment),m=L(),h=u("span"),h.textContent=`${window.trans("Search")}`,d(n,"class","search-type"),d(o,"class","search-content-type"),d(r,"type","text"),d(r,"placeholder",window.trans("Select target and search text...")),d(a,"class","search-text-box"),d(k,"type","button"),d(k,"class","btn btn-primary"),d(b,"class","submit-button"),d(i,"class","search-input-group"),d(e,"class","mt-search-form")},m(y,U){M(y,e,U),c(e,n);for(let v=0;v<T.length;v+=1)T[v]&&T[v].m(n,null);c(e,l),c(e,o),j.m(o,null),c(e,s),c(e,i),c(i,a),c(a,r),t[12](r),c(i,f),c(i,b),c(b,k),Ne(p,k,null),c(k,m),c(k,h),R=!0,g||(S=[q(r,"keydown",t[13]),q(k,"click",t[6])],g=!0)},p(y,[U]){if(U&5){N=Te(y[2]);let v;for(v=0;v<N.length;v+=1){const P=Wt(y,N,v);T[v]?T[v].p(P,U):(T[v]=Vt(P),T[v].c(),T[v].m(n,null))}for(;v<T.length;v+=1)T[v].d(1);T.length=N.length}O===(O=I(y))&&j?j.p(y,U):(j.d(1),j=O(y),j&&(j.c(),j.m(o,null)))},i(y){R||(Y(p.$$.fragment,y),R=!0)},o(y){$(p.$$.fragment,y),R=!1},d(y){y&&E(e),lt(T,y),j.d(),t[12](null),Ee(p),g=!1,me(S)}}}function Mn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,{isLoading:r=!1}=e,f="",b=null;const k=S=>{S.preventDefault();const N=document.createElement("form");N.method="POST",N.action=window.ScriptURI;const T=(O,j)=>{const y=document.createElement("input");return y.type="hidden",y.name=O,y.value=j,y},I=b?.value.trim()||"";N.appendChild(T("__mode","search_replace")),N.appendChild(T("blog_id",l)),N.appendChild(T("_type",a)),N.appendChild(T("do_search","1")),N.appendChild(T("magic_token",o)),N.appendChild(T("search",I)),N.appendChild(T("content_type_id",f||"")),N.appendChild(T("object_type",a)),document.body.appendChild(N),N.submit()},p=[[]];function m(){a=this.__value,n(0,a)}function h(){f=Rt(this),n(4,f),n(5,b),n(1,s),n(1,s)}function R(S){Re[S?"unshift":"push"](()=>{b=S,n(5,b)})}const g=S=>{S.key==="Enter"&&!S.isComposing&&k(S)};return t.$$set=S=>{"blogId"in S&&n(7,l=S.blogId),"magicToken"in S&&n(8,o=S.magicToken),"contentTypes"in S&&n(1,s=S.contentTypes),"searchTabs"in S&&n(2,i=S.searchTabs),"objectType"in S&&n(0,a=S.objectType),"isLoading"in S&&n(3,r=S.isLoading)},t.$$.update=()=>{t.$$.dirty&50&&(b&&b.focus(),!f&&s.length>0&&n(4,f=s[0].id))},[a,s,i,r,f,b,k,l,o,m,p,h,R,g]}class zt extends Ae{constructor(e){super(),Oe(this,e,Mn,In,Me,{blogId:7,magicToken:8,contentTypes:1,searchTabs:2,objectType:0,isLoading:3})}}function Gt(t){let e,n,l,o,s,i,a,r,f,b,k;return r=new zt({props:{blogId:t[2],magicToken:t[3],contentTypes:t[6],objectType:t[1],searchTabs:t[4],isLoading:t[5]}}),{c(){e=u("div"),n=L(),l=u("div"),o=u("div"),s=u("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=L(),a=u("div"),qe(r.$$.fragment),d(e,"class","search-button-modal-overlay"),d(s,"type","button"),d(s,"class","close"),d(s,"data-dismiss","modal"),d(s,"aria-label","Close"),d(o,"class","modal-header"),d(a,"class","modal-body"),d(l,"class","modal search-button-modal")},m(p,m){M(p,e,m),M(p,n,m),M(p,l,m),c(l,o),c(o,s),c(l,i),c(l,a),Ne(r,a,null),t[12](l),f=!0,b||(k=[q(e,"click",t[8]),ve(He.call(null,e,"body")),ve(Bt.call(null,e)),q(s,"click",t[8]),ve(He.call(null,l,"body"))],b=!0)},p(p,m){const h={};m&4&&(h.blogId=p[2]),m&8&&(h.magicToken=p[3]),m&64&&(h.contentTypes=p[6]),m&2&&(h.objectType=p[1]),m&16&&(h.searchTabs=p[4]),m&32&&(h.isLoading=p[5]),r.$set(h)},i(p){f||(Y(r.$$.fragment,p),f=!0)},o(p){$(r.$$.fragment,p),f=!1},d(p){p&&(E(e),E(n),E(l)),Ee(r),t[12](null),b=!1,me(k)}}}function jn(t){let e,n,l,o,s,i=t[0]&&Gt(t);return{c(){e=L(),i&&i.c(),n=Be()},m(a,r){M(a,e,r),i&&i.m(a,r),M(a,n,r),l=!0,o||(s=q(document.body,"click",t[9]),o=!0)},p(a,[r]){a[0]?i?(i.p(a,r),r&1&&Y(i,1)):(i=Gt(a),i.c(),Y(i,1),i.m(n.parentNode,n)):i&&(Ze(),$(i,1,1,()=>{i=null}),xe())},i(a){l||(Y(i),l=!0)},o(a){$(i),l=!1},d(a){a&&(E(e),E(n)),i&&i.d(a),o=!1,s()}}}function Un(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{open:s=!1}=e,{anchorRef:i}=e,{searchTabs:a}=e,{objectType:r}=e,f=[],b=!1,k=!1;const p=()=>{n(0,s=!1)};let m=null;const h=g=>{const S=g.target;s&&at([i,m],S)&&p()};Nt(async()=>{r&&a.find(g=>g.key===r)||n(1,r=a[0].key)});function R(g){Re[g?"unshift":"push"](()=>{m=g,n(7,m)})}return t.$$set=g=>{"blogId"in g&&n(2,l=g.blogId),"magicToken"in g&&n(3,o=g.magicToken),"open"in g&&n(0,s=g.open),"anchorRef"in g&&n(10,i=g.anchorRef),"searchTabs"in g&&n(4,a=g.searchTabs),"objectType"in g&&n(1,r=g.objectType)},t.$$.update=()=>{t.$$.dirty&3117&&i&&(s?(i.classList.add("open"),!b&&!k&&(n(5,k=!0),rt({blogId:l,magicToken:o}).then(g=>{n(6,f=g.contentTypes.filter(S=>S.can_search===1)),n(11,b=!0),n(5,k=!1)}).catch(g=>{console.error("Failed to fetch content types:",g),n(5,k=!1)}))):i.classList.remove("open"))},[s,r,l,o,a,k,f,m,p,h,i,b,R]}class Pn extends Ae{constructor(e){super(),Oe(this,e,Un,jn,Me,{blogId:2,magicToken:3,open:0,anchorRef:10,searchTabs:4,objectType:1})}}function qn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);if(s.error){t.remove();return}s.success&&(l=s.data)}const o=new Pn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const ct=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:i=>{(i.readyState===0||i.status===0)&&(n="possibly unloaded")}})}catch(i){n??(n=i)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=new DOMParser,s=l.result.objects.map(i=>{var a,r,f;const b=(f=(r=(a=o.parseFromString(i[1],"text/html").querySelector("a"))===null||a===void 0?void 0:a.textContent)===null||r===void 0?void 0:r.trim())!==null&&f!==void 0?f:"";return{id:i[0],name:b,siteUrl:i[2],parentSiteName:i[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:s}},{document:On}=nn;function Xt(t,e,n){const l=t.slice();return l[46]=e[n],l}function Kt(t){let e,n,l,o,s,i,a,r,f,b=window.trans("[_1]Site",t[4].toString())+"",k,p,m,h,R,g,S,N,T,I,O,j,y,U,v,P,V,ee,Z,te,ce,ne,ae,B,le,be,de,G,ie,ge,X,Ce,se,K,A,ue,oe,D,_,w,C,F,Q,J,fe,Qe,we,bt,Ie,ze,gt,Ge,yt,Xe,$e,Fe,re,_e,pe,et,wt;J=new Ve({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const kt=[Hn,An],ke=[];function vt(H,x){return H[2]?0:1}return re=vt(t),_e=ke[re]=kt[re](t),{c(){e=u("div"),n=L(),l=u("div"),o=u("div"),s=u("div"),i=u("div"),a=u("div"),r=u("span"),f=W("("),k=W(b),p=W(")"),m=L(),h=u("p"),h.textContent=`${window.trans("Site List")}`,R=L(),g=u("div"),S=u("button"),S.innerHTML='<span aria-hidden="true">\xD7</span>',N=L(),T=u("div"),I=u("div"),O=u("button"),j=W("<<"),U=L(),v=u("button"),P=W("<"),ee=L(),Z=u("span"),te=u("span"),ce=W(t[5]),ne=W("/"),ae=W(t[6]),B=L(),le=u("button"),be=W(">"),G=L(),ie=u("button"),ge=W(">>"),Ce=L(),se=u("div"),K=u("div"),A=u("select"),ue=u("option"),ue.textContent=`${window.trans("Parent Sites")}`,oe=u("option"),oe.textContent=`${window.trans("Parent and child sites")}`,D=u("option"),D.textContent=`${window.trans("Only child sites")}`,_=L(),w=u("div"),C=u("input"),F=L(),Q=u("button"),qe(J.$$.fragment),fe=L(),Qe=u("div"),we=u("button"),we.innerHTML='<span aria-hidden="true">\xD7</span>',bt=L(),Ie=u("div"),ze=u("span"),ze.textContent=`${window.trans("Site Name")}`,gt=L(),Ge=u("span"),Ge.textContent=`${window.trans("Parent Site")}`,yt=L(),Xe=u("div"),$e=u("table"),Fe=u("tbody"),_e.c(),d(e,"class","site-list-button-modal-overlay"),d(S,"type","button"),d(S,"class","close"),d(S,"data-dismiss","modal"),d(S,"aria-label","Close"),d(g,"class","d-block d-md-none"),d(a,"class","site-list-title"),d(O,"type","button"),O.disabled=y=t[5]<=1,d(v,"type","button"),v.disabled=V=t[5]<=1,d(te,"class","current"),d(Z,"class","page-num"),d(le,"type","button"),le.disabled=de=t[5]===t[6],d(ie,"type","button"),ie.disabled=X=t[5]===t[6],d(I,"class","prev-next"),ue.__value="parent_sites",he(ue,ue.__value),oe.__value="parent_and_child_sites",he(oe,oe.__value),D.__value="child_sites_only",he(D,D.__value),d(A,"class","custom-select form-control form-select"),t[7]===void 0&&We(()=>t[29].call(A)),d(K,"class","site-type-filter"),d(C,"type","text"),d(C,"placeholder",window.trans("Filter by site name")),d(w,"class","site-name-filter"),d(se,"class","site-filter-actions"),d(we,"type","button"),d(we,"class","close"),d(we,"data-dismiss","modal"),d(we,"aria-label","Close"),d(Qe,"class","d-none d-md-block"),d(T,"class","site-list-actions"),d(i,"class","site-list-header"),d(ze,"class","table-header-col site-list-header-name"),d(Ge,"class","table-header-col site-list-header-parent"),d(Ie,"class","site-list-table-header"),d(Xe,"class","site-list-table-wrapper"),d(s,"class","site-list-container"),d(o,"class","modal-body"),d(l,"class","modal site-list-button-modal")},m(H,x){M(H,e,x),M(H,n,x),M(H,l,x),c(l,o),c(o,s),c(s,i),c(i,a),c(a,r),c(r,f),c(r,k),c(r,p),c(a,m),c(a,h),c(a,R),c(a,g),c(g,S),c(i,N),c(i,T),c(T,I),c(I,O),c(O,j),c(I,U),c(I,v),c(v,P),c(I,ee),c(I,Z),c(Z,te),c(te,ce),c(Z,ne),c(Z,ae),c(I,B),c(I,le),c(le,be),c(I,G),c(I,ie),c(ie,ge),c(T,Ce),c(T,se),c(se,K),c(K,A),c(A,ue),c(A,oe),c(A,D),Ke(A,t[7],!0),c(se,_),c(se,w),c(w,C),he(C,t[8]),c(w,F),c(w,Q),Ne(J,Q,null),c(T,fe),c(T,Qe),c(Qe,we),c(s,bt),c(s,Ie),c(Ie,ze),c(Ie,gt),c(Ie,Ge),c(s,yt),c(s,Xe),c(Xe,$e),c($e,Fe),ke[re].m(Fe,null),t[36](Fe),t[37](l),pe=!0,et||(wt=[q(e,"click",t[11]),ve(He.call(null,e,"body")),ve(Bt.call(null,e)),q(S,"click",t[11]),q(O,"click",t[15]),q(O,"keydown",t[25]),q(v,"click",t[14]),q(v,"keydown",t[26]),q(le,"click",t[12]),q(le,"keydown",t[27]),q(ie,"click",t[13]),q(ie,"keydown",t[28]),q(A,"change",t[29]),q(A,"change",t[16]),q(C,"input",t[30]),q(C,"keydown",t[31]),q(Q,"click",t[16]),q(we,"click",t[11]),ve(He.call(null,l,"body"))],et=!0)},p(H,x){(!pe||x[0]&16)&&b!==(b=window.trans("[_1]Site",H[4].toString())+"")&&Se(k,b),(!pe||x[0]&32&&y!==(y=H[5]<=1))&&(O.disabled=y),(!pe||x[0]&32&&V!==(V=H[5]<=1))&&(v.disabled=V),(!pe||x[0]&32)&&Se(ce,H[5]),(!pe||x[0]&64)&&Se(ae,H[6]),(!pe||x[0]&96&&de!==(de=H[5]===H[6]))&&(le.disabled=de),(!pe||x[0]&96&&X!==(X=H[5]===H[6]))&&(ie.disabled=X),x[0]&128&&Ke(A,H[7]),x[0]&256&&C.value!==H[8]&&he(C,H[8]);let tt=re;re=vt(H),re===tt?ke[re].p(H,x):(Ze(),$(ke[tt],1,1,()=>{ke[tt]=null}),xe(),_e=ke[re],_e?_e.p(H,x):(_e=ke[re]=kt[re](H),_e.c()),Y(_e,1),_e.m(Fe,null))},i(H){pe||(Y(J.$$.fragment,H),Y(_e),pe=!0)},o(H){$(J.$$.fragment,H),$(_e),pe=!1},d(H){H&&(E(e),E(n),E(l)),Ee(J),ke[re].d(),t[36](null),t[37](null),et=!1,me(wt)}}}function An(t){let e=[],n=new Map,l,o,s=Te(t[1]);const i=a=>a[46].id;for(let a=0;a<s.length;a+=1){let r=Xt(t,s,a),f=i(r);n.set(f,e[a]=Zt(f,r))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();l=Be()},m(a,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,r);M(a,l,r),o=!0},p(a,r){r[0]&393226&&(s=Te(a[1]),Ze(),e=dn(e,r,i,1,a,s,n,l.parentNode,cn,Zt,l,Xt),xe())},i(a){if(!o){for(let r=0;r<s.length;r+=1)Y(e[r]);o=!0}},o(a){for(let r=0;r<e.length;r+=1)$(e[r]);o=!1},d(a){a&&E(l);for(let r=0;r<e.length;r+=1)e[r].d(a)}}}function Hn(t){let e,n;return{c(){e=u("tr"),n=u("td"),n.textContent=`${window.trans("Loading...")}`,d(n,"colspan","2"),d(n,"class","loading")},m(l,o){M(l,e,o),c(e,n)},p:z,i:z,o:z,d(l){l&&E(e)}}}function Fn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Child Site")}`,d(e,"class","badge badge-child-site")},m(n,l){M(n,e,l)},p:z,d(n){n&&E(e)}}}function Bn(t){let e;return{c(){e=u("span"),e.textContent=`${window.trans("Site")}`,d(e,"class","badge badge-site")},m(n,l){M(n,e,l)},p:z,d(n){n&&E(e)}}}function Dn(t){let e,n,l,o;function s(...i){return t[33](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",d(e,"aria-label",window.trans("Add to starred sites")),d(e,"aria-pressed","false"),d(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),c(e,n),l||(o=q(e,"click",s),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,o()}}}function Jn(t){let e,n,l,o;function s(...i){return t[32](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",d(e,"aria-label",window.trans("Remove from starred sites")),d(e,"aria-pressed","true"),d(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),c(e,n),l||(o=q(e,"click",s),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,o()}}}function Yt(t){let e,n=t[46].parentSiteName+"";return{c(){e=u("span"),d(e,"class","d-block d-md-none parent-site")},m(l,o){M(l,e,o),e.innerHTML=n},p(l,o){o[0]&2&&n!==(n=l[46].parentSiteName+"")&&(e.innerHTML=n)},d(l){l&&E(e)}}}function Wn(t){let e,n,l,o;function s(...i){return t[35](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2606",d(e,"aria-label",window.trans("Add to starred sites")),d(e,"aria-pressed","false"),d(e,"title",window.trans("Add to starred sites"))},m(i,a){M(i,e,a),c(e,n),l||(o=q(e,"click",s),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,o()}}}function Vn(t){let e,n,l,o;function s(...i){return t[34](t[46],...i)}return{c(){e=u("button"),n=u("span"),n.textContent="\u2605",d(e,"aria-label",window.trans("Remove from starred sites")),d(e,"aria-pressed","true"),d(e,"title",window.trans("Remove from starred sites"))},m(i,a){M(i,e,a),c(e,n),l||(o=q(e,"click",s),l=!0)},p(i,a){t=i},d(i){i&&E(e),l=!1,o()}}}function Zt(t,e){let n,l,o,s,i,a,r,f,b,k,p,m,h=e[46].name+"",R,g,S,N,T,I,O,j,y,U,v,P=e[46].parentSiteName+"",V,ee,Z,te,ce,ne,ae,B,le,be,de,G;function ie(_,w){return _[46].parentSiteName==="-"?Bn:Fn}let ge=ie(e),X=ge(e);function Ce(_,w){return w[0]&10&&(a=null),a==null&&(a=!!_[3].includes(Number(_[46].id))),a?Jn:Dn}let se=Ce(e,[-1,-1]),K=se(e);b=new Ve({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}});let A=e[46].parentSiteName!=="-"&&Yt(e);j=new Ve({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}});function ue(_,w){return w[0]&10&&(te=null),te==null&&(te=!!_[3].includes(Number(_[46].id))),te?Vn:Wn}let oe=ue(e,[-1,-1]),D=oe(e);return ae=new Ve({props:{title:window.trans("Move"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_move`,style:"height: 15px;"}}),{key:t,first:null,c(){n=u("tr"),l=u("td"),o=u("span"),X.c(),s=L(),i=u("span"),K.c(),r=L(),f=u("span"),qe(b.$$.fragment),p=L(),m=u("a"),R=W(h),S=L(),A&&A.c(),N=L(),T=u("a"),I=u("span"),I.textContent=`${window.trans("View your site.")}`,O=L(),qe(j.$$.fragment),U=L(),v=u("td"),V=L(),ee=u("td"),Z=u("span"),D.c(),ce=L(),ne=u("span"),qe(ae.$$.fragment),le=L(),d(f,"class","site-list-table-sortable-handle"),d(f,"style",k=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),d(i,"class","site-list-table-action-buttons-mobile"),d(o,"class","site-list-table-bagde-container"),d(m,"href",g=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`),d(m,"class","dashboard-link"),d(I,"class","d-inline-block d-md-none"),d(T,"href",y=e[46].siteUrl),d(T,"class","site-link"),d(T,"target","_blank"),d(v,"class","site-list-table-parent-site"),d(ne,"class","site-list-table-sortable-handle"),d(ne,"style",B=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"),d(Z,"class","site-list-table-action-buttons"),d(ee,"class","site-list-table-action"),d(n,"data-site-id",be=e[46].id),d(n,"data-is-starred",de=e[3].includes(Number(e[46].id))||void 0),this.first=n},m(_,w){M(_,n,w),c(n,l),c(l,o),X.m(o,null),c(o,s),c(o,i),K.m(i,null),c(i,r),c(i,f),Ne(b,f,null),c(l,p),c(l,m),c(m,R),c(l,S),A&&A.m(l,null),c(l,N),c(l,T),c(T,I),c(T,O),Ne(j,T,null),c(n,U),c(n,v),v.innerHTML=P,c(n,V),c(n,ee),c(ee,Z),D.m(Z,null),c(Z,ce),c(Z,ne),Ne(ae,ne,null),c(n,le),G=!0},p(_,w){e=_,ge===(ge=ie(e))&&X?X.p(e,w):(X.d(1),X=ge(e),X&&(X.c(),X.m(o,s))),se===(se=Ce(e,w))&&K?K.p(e,w):(K.d(1),K=se(e),K&&(K.c(),K.m(i,r))),(!G||w[0]&10&&k!==(k=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&d(f,"style",k),(!G||w[0]&2)&&h!==(h=e[46].name+"")&&Se(R,h),(!G||w[0]&2&&g!==(g=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[46].id}`))&&d(m,"href",g),e[46].parentSiteName!=="-"?A?A.p(e,w):(A=Yt(e),A.c(),A.m(l,N)):A&&(A.d(1),A=null),(!G||w[0]&2&&y!==(y=e[46].siteUrl))&&d(T,"href",y),(!G||w[0]&2)&&P!==(P=e[46].parentSiteName+"")&&(v.innerHTML=P),oe===(oe=ue(e,w))&&D?D.p(e,w):(D.d(1),D=oe(e),D&&(D.c(),D.m(Z,ce))),(!G||w[0]&10&&B!==(B=e[3].includes(Number(e[46].id))?"cursor: move":"visibility: hidden;"))&&d(ne,"style",B),(!G||w[0]&2&&be!==(be=e[46].id))&&d(n,"data-site-id",be),(!G||w[0]&10&&de!==(de=e[3].includes(Number(e[46].id))||void 0))&&d(n,"data-is-starred",de)},i(_){G||(Y(b.$$.fragment,_),Y(j.$$.fragment,_),Y(ae.$$.fragment,_),G=!0)},o(_){$(b.$$.fragment,_),$(j.$$.fragment,_),$(ae.$$.fragment,_),G=!1},d(_){_&&E(n),X.d(),K.d(),Ee(b),A&&A.d(),Ee(j),D.d(),Ee(ae)}}}function Qn(t){let e,n,l,o,s,i=t[0]&&Kt(t);return{c(){e=L(),i&&i.c(),n=Be()},m(a,r){M(a,e,r),i&&i.m(a,r),M(a,n,r),l=!0,o||(s=q(On.body,"click",t[19]),o=!0)},p(a,r){a[0]?i?(i.p(a,r),r[0]&1&&Y(i,1)):(i=Kt(a),i.c(),Y(i,1),i.m(n.parentNode,n)):i&&(Ze(),$(i,1,1,()=>{i=null}),xe())},i(a){l||(Y(i),l=!0)},o(a){$(i),l=!1},d(a){a&&(E(e),E(n)),i&&i.d(a),o=!1,s()}}}function zn(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{anchorRef:i}=e,{initialStarredSites:a}=e,r=!1;const f=()=>{n(0,s=!1)};let b={},k=[],p=[],m=[],h=a,R=0,g=1,S=1,N="parent_and_child_sites",T="",I=[],O=!1,j=null;const y=()=>{n(5,g++,g),ee()},U=()=>{n(5,g=S),ee()},v=()=>{n(5,g--,g),ee()},P=()=>{n(5,g=1),ee()},V=()=>{k=[],p=h,I=[],N==="child_sites_only"?I=[{type:"parent_website",args:{value:""}}]:N==="parent_sites"&&(I=[{type:"parent_website",args:{value:"1"}}]),n(8,T=T.trim()),T!==""&&I.push({type:"name",args:{string:T,option:"contains"}}),n(5,g=1),ee()},ee=async()=>{if(n(2,O=!0),n(1,m=[]),k.length===0){const _=await ct({magicToken:l,items:I,page:g,limit:o});n(4,R=_.count),n(6,S=_.pageMax),n(5,g=S!==0?_.page:0);const w=[];if(p.forEach(C=>{const F=_.sites.findIndex(Q=>Number(Q.id)===C);if(F!==-1)b[C]=_.sites[F],_.sites.splice(F,1);else{const Q=b[C];if(!Q)w.push(C);else{const J=Q.parentSiteName.match(/^<a/);(N==="child_sites_only"&&!J||N==="parent_sites"&&J)&&(p=p.filter(fe=>fe!==C))}}}),k=[..._.sites],w.length>0){const C=await ct({magicToken:l,items:[...I,{type:"pack",args:{op:"or",items:w.map(F=>({type:"id",args:{value:F,option:"equal"}}))}}],page:0,limit:200});w.forEach(F=>{const Q=C.sites.findIndex(J=>Number(J.id)===F);Q!==-1?b[F]=C.sites[Q]:(p=p.filter(J=>J!==F),n(3,h=h.filter(J=>J!==F)))})}for(let C=0;C<o&&C<p.length;C++)m.push(b[p[C]]);for(let C=0;C<k.length&&m.length<o;C++)m.push(k[C])}else{const _=p.length,w=(g-1)*o;for(let C=w;C<_&&m.length<o;C++)m.push(b[p[C]]);for(let C=Math.max(w-_,0);C<R-_&&m.length<o;C++){if(!k[C]){const F=Math.floor(C/o),Q=await ct({magicToken:l,items:[...I,...p.map(fe=>({type:"id",args:{value:fe,option:"not_equal"}}))],page:F+1,limit:o}),J=F*o;for(let fe=0;fe<Q.sites.length;fe++)k[J+fe]=Q.sites[fe]}m.push(k[C])}}n(2,O=!1)},Z=async _=>{const w=new FormData;return w.append("__mode","save_starred_sites"),w.append("magic_token",l),_.forEach(C=>{w.append("id",String(C))}),fetch(window.ScriptURI,{method:"POST",body:w,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(C=>C.json()).then(C=>{if(C.error)throw new Error(C.error)})},te=_=>{const w=[...h];n(3,h=_),Z(h).catch(C=>{alert(C.message),n(3,h=w)})},ce=(_,w)=>{_.stopPropagation(),te([...new Set([...h,Number(w.id)])])},ne=(_,w)=>{_.stopPropagation();const C=Number(w.id);te(h.filter(F=>F!==C))},ae=_=>{const w=_.target;s&&at([i,j],w)&&f()};let B=null;const le=async()=>{await jt(),B&&jQuery(B).sortable({delay:100,placeholder:"placeholder",distance:3,items:"tr[data-is-starred]",handle:".site-list-table-sortable-handle",opacity:.8,start(_,w){if(!B)return;const C=document.createElement("tr");C.classList.add("site-list-table-placeholder"),C.innerHTML="<td></td><td class='site-list-table-parent-site'></td><td class='site-list-table-action'></td>",B.insertBefore(C,B.firstChild),w.placeholder.height(w.item.height())},stop(){var _;(_=B?.querySelector(".site-list-table-placeholder"))===null||_===void 0||_.remove()},update:()=>{if(!B)return;const _=[],w=[];B.querySelectorAll("tr[data-site-id]").forEach(F=>{const Q=Number(F.dataset.siteId);F.dataset.isStarred&&w.push(Number(Q)),_.push(m.find(J=>Number(J.id)===Q))}),n(1,m=_);const C=h.findIndex(F=>w.includes(F));n(3,h=[...h]),h.splice(C,w.length,...w),te(h)}})},be=_=>_.key==="Enter"&&P(),de=_=>_.key==="Enter"&&v(),G=_=>_.key==="Enter"&&y(),ie=_=>_.key==="Enter"&&U();function ge(){N=Rt(this),n(7,N)}function X(){T=this.value,n(8,T)}const Ce=_=>_.key==="Enter"&&V(),se=(_,w)=>ne(w,_),K=(_,w)=>ce(w,_),A=(_,w)=>ne(w,_),ue=(_,w)=>ce(w,_);function oe(_){Re[_?"unshift":"push"](()=>{B=_,n(10,B)})}function D(_){Re[_?"unshift":"push"](()=>{j=_,n(9,j)})}return t.$$set=_=>{"magicToken"in _&&n(20,l=_.magicToken),"limit"in _&&n(21,o=_.limit),"open"in _&&n(0,s=_.open),"anchorRef"in _&&n(22,i=_.anchorRef),"initialStarredSites"in _&&n(23,a=_.initialStarredSites)},t.$$.update=()=>{t.$$.dirty[0]&20971521&&i&&(s?(i.classList.add("open"),r||(n(24,r=!0),V())):i.classList.remove("open")),t.$$.dirty[0]&7&&m&&m.length>0&&s&&!O&&le()},[s,m,O,h,R,g,S,N,T,j,B,f,y,U,v,P,V,ce,ne,ae,l,o,i,a,r,be,de,G,ie,ge,X,Ce,se,K,A,ue,oe,D]}class Gn extends Ae{constructor(e){super(),Oe(this,e,zn,Qn,Me,{magicToken:20,limit:21,open:0,anchorRef:22,initialStarredSites:23},null,[-1,-1])}}function Xn(t,e){const n=new Gn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Kn(t,e){var n,l;let o=[];if(t.dataset.searchTabsJson){const a=JSON.parse(t.dataset.searchTabsJson);if(a.error){(n=t.closest("li[data-is='search-form-button']"))===null||n===void 0||n.remove(),t.remove();return}a.success&&(o=a.data)}const s={searchTabs:o,objectType:(l=t.dataset.objectType)!==null&&l!==void 0?l:"",contentTypes:e.contentTypes||[],isLoading:!1,...e},i=new zt({target:t,props:s});t.closest("li[data-is='search-form-button']").addEventListener("click",a=>{a.preventDefault(),s.isLoading=!0,i.$set(s),rt({blogId:e.blogId,magicToken:e.magicToken}).then(r=>{const f=r.contentTypes.filter(b=>b.can_search===1);s.contentTypes=f,s.contentTypes.length>0&&s.objectType===""&&(s.objectType="content_data"),s.isLoading=!1,i.$set(s)}).catch(r=>{console.error("Failed to fetch content types:",r),s.isLoading=!1,i.$set(s)})},{once:!0})}var dt,ut,ft;const _t=document.querySelector('[data-is="primary-navigation-toggle"]');_t!==null&&Sn(_t,{collapsed:(dt=Ht())!==null&&dt!==void 0?dt:!1,buttonRef:_t.getElementsByTagName("button")[0]});const pt=document.querySelector('[data-script="admin-ui"]');pt===null&&console.error("data-script='admin-ui' is not set");const mt=(ut=pt?.getAttribute("data-blog-id"))!==null&&ut!==void 0?ut:"",ye=(ft=pt?.getAttribute("data-magic-token"))!==null&&ft!==void 0?ft:"";ye===""&&console.error("data-magic-token is not set");const Yn="50",xt=document.querySelectorAll('[data-is="site-list-button"]');xt.length>0&&ye!==""&&xt.forEach(t=>{var e;Xn(t,{magicToken:ye,limit:Number.parseInt(Yn),open:!1,anchorRef:t,initialStarredSites:((e=t.dataset.starredSites)===null||e===void 0?void 0:e.split(",").map(Number).filter(Number.isInteger))||[]})});const $t=document.querySelectorAll('[data-is="create-button"]'),ht=document.querySelector('[data-is="search-button"]'),Zn=document.querySelector("div.mt-modal");$t.length>0&&ye!==""&&$t.forEach(t=>{gn({target:t,props:{blog_id:mt,magicToken:ye,open:!1,anchorRef:t,containerRef:Zn}})}),ht!==null&&ye!==""&&qn(ht,{blogId:mt,magicToken:ye,open:!1,anchorRef:ht});const en=document.querySelector('[data-is="search-form"]');en!==null&&ye!==""&&Kn(en,{blogId:mt,magicToken:ye});
