const zt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function J(){}function vt(t){return t()}function kt(){return Object.create(null)}function ee(t){t.forEach(vt)}function xe(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function ae(t){return t&&xe(t.destroy)?t.destroy:J}function r(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Fe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function $e(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function v(){return q(" ")}function Ce(){return q("")}function M(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Kt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Xt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yt(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Le;function Ee(t){Le=t}function Zt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function et(t){Zt().$$.on_mount.push(t)}const ye=[],we=[];let ve=[];const Ct=[],Lt=Promise.resolve();let tt=!1;function Et(){tt||(tt=!0,Lt.then(Nt))}function xt(){return Et(),Lt}function We(t){ve.push(t)}const nt=new Set;let ke=0;function Nt(){if(ke!==0)return;const t=Le;do{try{for(;ke<ye.length;){const e=ye[ke];ke++,Ee(e),$t(e.$$)}}catch(e){throw ye.length=0,ke=0,e}for(Ee(null),ye.length=0,ke=0;we.length;)we.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];nt.has(n)||(nt.add(n),n())}ve.length=0}while(ye.length);for(;Ct.length;)Ct.pop()();tt=!1,nt.clear(),Ee(t)}function $t(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(We)}}function en(t){const e=[],n=[];ve.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ve=e}const Ve=new Set;let ce;function Qe(){ce={r:0,c:[],p:ce}}function ze(){ce.r||ee(ce.c),ce=ce.p}function D(t,e){t&&t.i&&(Ve.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(Ve.has(t))return;Ve.add(t),ce.c.push(()=>{Ve.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function se(t){return t?.length!==void 0?t:Array.from(t)}function Ge(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),We(()=>{const s=t.$$.on_mount.map(vt).filter(xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):ee(s),t.$$.on_mount=[]}),o.forEach(We)}function Ie(t,e){const n=t.$$;n.fragment!==null&&(en(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(ye.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Te(t,e,n,l,o,s,i=null,c=[-1]){const a=Le;Ee(t);const f=t.$$={fragment:null,ctx:[],props:s,update:J,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:kt(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(f.root);let y=!1;if(f.ctx=n?n(t,e.props||{},(g,p,..._)=>{const b=_.length?_[0]:p;return f.ctx&&o(f.ctx[g],f.ctx[g]=b)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](b),y&&tn(t,g)),p}):[],f.update(),y=!0,ee(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const g=Xt(e.target);f.fragment&&f.fragment.l(g),g.forEach(T)}else f.fragment&&f.fragment.c();e.intro&&D(t.$$.fragment),Ne(t,e.target,e.anchor),Nt()}Ee(a)}class Se{$$=void 0;$$set=void 0;$destroy(){Ie(this,1),this.$destroy=J}$on(e,n){if(!xe(n))return J;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function re(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await xt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function lt(t,e){return!t.some(n=>n&&n.contains(e))}function It(t,e,n){const l=t.slice();return l[10]=e[n],l}function Mt(t){let e,n,l,o,s,i,c,a,f,y,g,p=window.trans("New [_1] creation",window.trans("Entry"))+"",_,b,h,C,I,O=window.trans("New [_1] creation",window.trans("Page"))+"",R,w,E,W,k=t[1].length>0&&jt(t);return{c(){e=d("div"),n=d("div"),l=d("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=v(),s=d("div"),k&&k.c(),i=v(),c=d("p"),c.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,a=v(),f=d("ul"),y=d("li"),g=d("a"),_=q(p),h=v(),C=d("li"),I=d("a"),R=q(O),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(c,"class","block-title"),u(g,"href",b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(I,"href",w=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(f,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(U,P){S(U,e,P),r(e,n),r(n,l),r(e,o),r(e,s),k&&k.m(s,null),r(s,i),r(s,c),r(s,a),r(s,f),r(f,y),r(y,g),r(g,_),r(f,h),r(f,C),r(C,I),r(I,R),t[9](e),E||(W=[M(l,"click",t[4]),ae(re.call(null,e,"body"))],E=!0)},p(U,P){U[1].length>0?k?k.p(U,P):(k=jt(U),k.c(),k.m(s,i)):k&&(k.d(1),k=null),P&4&&b!==(b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${U[2]}`)&&u(g,"href",b),P&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${U[2]}`)&&u(I,"href",w)},d(U){U&&T(e),k&&k.d(),t[9](null),E=!1,ee(W)}}}function jt(t){let e,n,l,o=se(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ut(It(t,o,i));return{c(){e=d("p"),e.textContent=`${window.trans("Content Data")}`,n=v(),l=d("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,c){S(i,e,c),S(i,n,c),S(i,l,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(i,c){if(c&6){o=se(i[1]);let a;for(a=0;a<o.length;a+=1){const f=It(i,o,a);s[a]?s[a].p(f,c):(s[a]=Ut(f),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(i){i&&(T(e),T(n),T(l)),Fe(s,i)}}}function Ut(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=d("li"),n=d("a"),o=q(l),i=v(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(c,a){S(c,e,a),r(e,n),r(n,o),r(e,i)},p(c,a){a&2&&l!==(l=window.trans("New [_1] creation",c[10].name)+"")&&oe(o,l),a&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${c[10].id}&type=content_data_${c[10].id}&blog_id=${c[2]}`)&&u(n,"href",s)},d(c){c&&T(e)}}}function ln(t){let e,n,l,o,s=t[0]&&Mt(t);return{c(){e=v(),s&&s.c(),n=Ce()},m(i,c){S(i,e,c),s&&s.m(i,c),S(i,n,c),l||(o=M(document.body,"click",t[5]),l=!0)},p(i,[c]){i[0]?s?s.p(i,c):(s=Mt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:J,o:J,d(i){i&&(T(e),T(n)),s&&s.d(i),l=!1,o()}}}function on(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:c=null}=e,{containerRef:a=null}=e,f=null;const y=()=>{n(0,s=!1)},g=_=>{if(a&&a.classList.contains("show"))return;const b=_.target;s&&lt([i,f],b)&&y()};function p(_){we[_?"unshift":"push"](()=>{f=_,n(3,f),n(7,c),n(0,s)})}return t.$$set=_=>{"contentTypes"in _&&n(1,l=_.contentTypes),"blog_id"in _&&n(2,o=_.blog_id),"open"in _&&n(0,s=_.open),"buttonRef"in _&&n(6,i=_.buttonRef),"anchorRef"in _&&n(7,c=_.anchorRef),"containerRef"in _&&n(8,a=_.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&c){if(f){const _=c.getBoundingClientRect(),b=`calc(${_.bottom}px + 10px)`;n(3,f.style.top=b,f);const h=`calc(100vh - ${_.bottom}px - 10px - 20px)`;n(3,f.style.maxHeight=h,f)}s?c.classList.add("open"):c.classList.remove("open")}},[s,l,o,f,y,g,i,c,a,p]}class sn extends Se{constructor(e){super(),Te(this,e,on,ln,ge,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const an=({target:t,props:e})=>{const n=new sn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function cn(t){let e,n,l,o,s,i,c;return{c(){e=d("div"),l=v(),o=d("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`),u(o,"class","mt-primaryNavigation-overlay-sp"),u(o,"style",s=`display: ${t[0]?"none":"block"}`)},m(a,f){S(a,e,f),S(a,l,f),S(a,o,f),i||(c=[ae(re.call(null,e,"body")),M(e,"mouseenter",t[2]),ae(re.call(null,o,"body")),M(o,"click",t[5])],i=!0)},p(a,[f]){f&1&&n!==(n=`display: ${a[0]?"block":"none"}`)&&u(e,"style",n),f&1&&s!==(s=`display: ${a[0]?"none":"block"}`)&&u(o,"style",s)},i:J,o:J,d(a){a&&(T(e),T(l),T(o)),i=!1,ee(c)}}}function rn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const c=(_,b)=>{const h=document.querySelector('[data-is="content-wrapper"]');b?h.classList.add(_):h.classList.remove(_)},a=()=>{c("collapsed",o)},f=()=>{c("mouseover",i)},y=()=>{var _;o&&(i=!0,f(),(_=document.querySelector('[data-is="primary-navigation"]'))===null||_===void 0||_.addEventListener("mouseleave",g,{once:!0}))},g=()=>{i=!1,f()};et(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),a()});const p=()=>{n(0,o=!0),a()};return t.$$set=_=>{"buttonRef"in _&&n(3,l=_.buttonRef),"collapsed"in _&&n(0,o=_.collapsed),"isStored"in _&&n(4,s=_.isStored)},t.$$.update=()=>{t.$$.dirty&9&&(a(),i=!1,f(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,a,y,l,s,p]}class un extends Se{constructor(e){super(),Te(this,e,rn,cn,ge,{buttonRef:3,collapsed:0,isStored:4})}}function fn(t,e){const n=new un({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Ot(t){let e,n;return{c(){e=$e("title"),n=q(t[2])},m(l,o){S(l,e,o),r(e,n)},p(l,o){o&4&&oe(n,l[2])},d(l){l&&T(e)}}}function dn(t){let e,n,l=t[2]&&Ot(t);return{c(){e=$e("svg"),l&&l.c(),n=$e("use"),Tt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){S(o,e,s),l&&l.m(e,null),r(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Ot(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Tt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:J,o:J,d(o){o&&T(e),l&&l.d()}}}function _n(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class it extends Se{constructor(e){super(),Te(this,e,_n,dn,ge,{class:0,href:1,title:2})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function qt(t,e,n){const l=t.slice();return l[12]=e[n],l}function Bt(t){let e,n,l,o=!1,s,i,c,a=t[12].label+"",f,y,g,p,_;return g=Kt(t[7][0]),{c(){e=d("label"),n=d("input"),c=v(),f=q(a),y=v(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[12].key,Z(n,n.__value),u(n,"id",s=t[12].key),n.checked=i=t[0]===t[12].key,g.p(n)},m(b,h){S(b,e,h),r(e,n),n.checked=n.__value===t[0],r(e,c),r(e,f),r(e,y),p||(_=M(n,"change",t[6]),p=!0)},p(b,h){h&16&&l!==(l=b[12].key)&&(n.__value=l,Z(n,n.__value),o=!0),h&16&&s!==(s=b[12].key)&&u(n,"id",s),h&17&&i!==(i=b[0]===b[12].key)&&(n.checked=i),(o||h&17)&&(n.checked=n.__value===b[0]),h&16&&a!==(a=b[12].label+"")&&oe(f,a)},d(b){b&&T(e),g.r(),p=!1,_()}}}function mn(t){let e;return{c(){e=d("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Z(e,e.__value)},m(n,l){S(n,e,l)},p:J,d(n){n&&T(e)}}}function pn(t){let e,n=se(t[3]),l=[];for(let o=0;o<n.length;o+=1)l[o]=At(Pt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);S(o,e,s)},p(o,s){if(s&8){n=se(o[3]);let i;for(i=0;i<n.length;i+=1){const c=Pt(o,n,i);l[i]?l[i].p(c,s):(l[i]=At(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&T(e),Fe(l,o)}}}function At(t){let e,n=t[9].name+"",l,o;return{c(){e=d("option"),l=q(n),e.__value=o=t[9].id,Z(e,e.__value)},m(s,i){S(s,e,i),r(e,l)},p(s,i){i&8&&n!==(n=s[9].name+"")&&oe(l,n),i&8&&o!==(o=s[9].id)&&(e.__value=o,Z(e,e.__value))},d(s){s&&T(e)}}}function hn(t){let e,n,l,o,s,i,c,a,f,y,g,p,_,b,h,C,I,O,R,w,E,W,k,U,P,te,B,z=se(t[4]),j=[];for(let m=0;m<z.length;m+=1)j[m]=Bt(qt(t,z,m));function x(m,A){return m[3].length>0?pn:mn}let Y=x(t),F=Y(t);return U=new it({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=d("form"),n=d("input"),l=v(),o=d("input"),s=v(),i=d("input"),c=v(),a=d("input"),f=v(),y=d("input"),g=v(),p=d("div");for(let m=0;m<j.length;m+=1)j[m].c();_=v(),b=d("div"),h=d("select"),F.c(),I=v(),O=d("div"),R=d("div"),w=d("input"),E=v(),W=d("div"),k=d("button"),Ge(U.$$.fragment),P=v(),te=d("span"),te.textContent=`${window.trans("Search")}`,u(n,"type","hidden"),u(n,"name","__mode"),n.value="search_replace",u(o,"type","hidden"),u(o,"name","blog_id"),o.value=t[1],u(i,"type","hidden"),u(i,"name","_type"),i.value=t[0],u(a,"type","hidden"),u(a,"name","do_search"),a.value="1",u(y,"type","hidden"),u(y,"name","magic_token"),y.value=t[2],u(p,"class","search-type"),u(h,"class","custom-select form-control form-select"),u(h,"name","content_type_id"),h.disabled=C=t[0]!=="content_data"||t[3].length===0,Rt(h,"disabled",t[0]!=="content_data"),u(b,"class","search-content-type"),u(w,"type","text"),u(w,"placeholder",window.trans("Select target and search text...")),u(w,"name","search"),u(R,"class","search-text-box"),u(k,"type","submit"),u(k,"class","btn btn-primary"),u(W,"class","submit-button"),u(O,"class","search-input-group"),u(e,"class","mt-search-form"),u(e,"method","post"),u(e,"action",window.ScriptURI)},m(m,A){S(m,e,A),r(e,n),r(e,l),r(e,o),r(e,s),r(e,i),r(e,c),r(e,a),r(e,f),r(e,y),r(e,g),r(e,p);for(let N=0;N<j.length;N+=1)j[N]&&j[N].m(p,null);r(e,_),r(e,b),r(b,h),F.m(h,null),r(e,I),r(e,O),r(O,R),r(R,w),t[8](w),r(O,E),r(O,W),r(W,k),Ne(U,k,null),r(k,P),r(k,te),B=!0},p(m,[A]){if((!B||A&2)&&(o.value=m[1]),(!B||A&1)&&(i.value=m[0]),(!B||A&4)&&(y.value=m[2]),A&17){z=se(m[4]);let N;for(N=0;N<z.length;N+=1){const Re=qt(m,z,N);j[N]?j[N].p(Re,A):(j[N]=Bt(Re),j[N].c(),j[N].m(p,null))}for(;N<j.length;N+=1)j[N].d(1);j.length=z.length}Y===(Y=x(m))&&F?F.p(m,A):(F.d(1),F=Y(m),F&&(F.c(),F.m(h,null))),(!B||A&9&&C!==(C=m[0]!=="content_data"||m[3].length===0))&&(h.disabled=C),(!B||A&1)&&Rt(h,"disabled",m[0]!=="content_data")},i(m){B||(D(U.$$.fragment,m),B=!0)},o(m){Q(U.$$.fragment,m),B=!1},d(m){m&&T(e),Fe(j,m),F.d(),t[8](null),Ie(U)}}}function bn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:c}=e,a=null;const f=[[]];function y(){c=this.__value,n(0,c)}function g(p){we[p?"unshift":"push"](()=>{a=p,n(5,a)})}return t.$$set=p=>{"blogId"in p&&n(1,l=p.blogId),"magicToken"in p&&n(2,o=p.magicToken),"contentTypes"in p&&n(3,s=p.contentTypes),"searchTabs"in p&&n(4,i=p.searchTabs),"objectType"in p&&n(0,c=p.objectType)},t.$$.update=()=>{t.$$.dirty&32&&a&&a.focus()},[c,l,o,s,i,a,y,f,g]}class Ht extends Se{constructor(e){super(),Te(this,e,bn,hn,ge,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,o,s,i,c,a,f,y,g;return a=new Ht({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=d("div"),n=v(),l=d("div"),o=d("div"),s=d("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=v(),c=d("div"),Ge(a.$$.fragment),u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(c,"class","modal-body"),u(l,"class","modal search-button-modal")},m(p,_){S(p,e,_),S(p,n,_),S(p,l,_),r(l,o),r(o,s),r(l,i),r(l,c),Ne(a,c,null),t[11](l),f=!0,y||(g=[M(e,"click",t[7]),ae(re.call(null,e,"body")),M(s,"click",t[7]),ae(re.call(null,l,"body"))],y=!0)},p(p,_){const b={};_&4&&(b.blogId=p[2]),_&8&&(b.magicToken=p[3]),_&16&&(b.contentTypes=p[4]),_&2&&(b.objectType=p[1]),_&32&&(b.searchTabs=p[5]),a.$set(b)},i(p){f||(D(a.$$.fragment,p),f=!0)},o(p){Q(a.$$.fragment,p),f=!1},d(p){p&&(T(e),T(n),T(l)),Ie(a),t[11](null),y=!1,ee(g)}}}function gn(t){let e,n,l,o,s,i=t[0]&&Jt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(c,a){S(c,e,a),i&&i.m(c,a),S(c,n,a),l=!0,o||(s=M(document.body,"click",t[8]),o=!0)},p(c,[a]){c[0]?i?(i.p(c,a),a&1&&D(i,1)):(i=Jt(c),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(Qe(),Q(i,1,1,()=>{i=null}),ze())},i(c){l||(D(i),l=!0)},o(c){Q(i),l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),o=!1,s()}}}let Dt=null;function yn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:c}=e,{anchorRef:a}=e,{searchTabs:f}=e,{objectType:y}=e;const g=()=>{n(0,i=!1)};let p=null;const _=h=>{const C=h.target;i&&lt([c,p],C)&&g()};et(async()=>{y&&f.find(h=>h.key===y)||n(1,y=f[0].key)});function b(h){we[h?"unshift":"push"](()=>{p=h,n(6,p)})}return t.$$set=h=>{"blogId"in h&&n(2,l=h.blogId),"magicToken"in h&&n(3,o=h.magicToken),"contentTypes"in h&&n(4,s=h.contentTypes),"open"in h&&n(0,i=h.open),"buttonRef"in h&&n(9,c=h.buttonRef),"anchorRef"in h&&n(10,a=h.anchorRef),"searchTabs"in h&&n(5,f=h.searchTabs),"objectType"in h&&n(1,y=h.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&a&&(i?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty&1&&i&&Dt&&Dt.focus()},[i,y,l,o,s,f,p,g,_,c,a,b]}class wn extends Se{constructor(e){super(),Te(this,e,yn,gn,ge,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function vn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new wn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const kn=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Ft(t,e,n){const l=t.slice();return l[30]=e[n],l}function Wt(t){let e,n,l,o,s,i,c,a,f,y=window.trans("[_1]Site",t[2].toString())+"",g,p,_,b,h,C,I,O,R,w,E,W,k,U,P,te,B,z,j,x,Y,F,m,A,N,Re,Ue,rt,ne,ut,Oe,ft,fe,Pe,G,de,_e,me,dt,pe,$,_t,qe,he,mt,Be,le,pt,be,Ae,ht,He,bt,Je,Xe,De,V,K,X,Ye,gt;he=new it({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[Sn,Tn],ie=[];function wt(L,H){return L[7]?0:1}return V=wt(t),K=ie[V]=yt[V](t),{c(){e=d("div"),n=v(),l=d("div"),o=d("div"),s=d("div"),i=d("div"),c=d("div"),a=d("span"),f=q("("),g=q(y),p=q(")"),_=v(),b=d("p"),b.textContent=`${window.trans("Site List")}`,h=v(),C=d("div"),I=d("button"),I.innerHTML='<span aria-hidden="true">\xD7</span>',O=v(),R=d("div"),w=d("div"),E=d("button"),W=q("<<"),U=v(),P=d("button"),te=q("<"),z=v(),j=d("span"),x=d("span"),Y=q(t[3]),F=q("/"),m=q(t[4]),A=v(),N=d("button"),Re=q(">"),rt=v(),ne=d("button"),ut=q(">>"),ft=v(),fe=d("div"),Pe=d("div"),G=d("select"),de=d("option"),de.textContent=`${window.trans("Parent Sites")}`,_e=d("option"),_e.textContent=`${window.trans("Parent and child sites")}`,me=d("option"),me.textContent=`${window.trans("Only child sites")}`,dt=v(),pe=d("div"),$=d("input"),_t=v(),qe=d("button"),Ge(he.$$.fragment),mt=v(),Be=d("div"),le=d("button"),le.innerHTML='<span aria-hidden="true">\xD7</span>',pt=v(),be=d("div"),Ae=d("span"),Ae.textContent=`${window.trans("Site Name")}`,ht=v(),He=d("span"),He.textContent=`${window.trans("Parent Site")}`,bt=v(),Je=d("div"),Xe=d("table"),De=d("tbody"),K.c(),u(e,"class","site-list-button-modal-overlay"),u(I,"type","button"),u(I,"class","close"),u(I,"data-dismiss","modal"),u(I,"aria-label","Close"),u(C,"class","d-block d-md-none"),u(c,"class","site-list-title"),u(E,"type","button"),E.disabled=k=t[3]<=1,u(P,"type","button"),P.disabled=B=t[3]<=1,u(x,"class","current"),u(j,"class","page-num"),u(N,"type","button"),N.disabled=Ue=t[3]===t[4],u(ne,"type","button"),ne.disabled=Oe=t[3]===t[4],u(w,"class","prev-next"),de.__value="parent_sites",Z(de,de.__value),_e.__value="parent_and_child_sites",Z(_e,_e.__value),me.__value="child_sites_only",Z(me,me.__value),u(G,"class","custom-select form-control form-select"),t[5]===void 0&&We(()=>t[24].call(G)),u(Pe,"class","site-type-filter"),u($,"type","text"),u($,"placeholder",window.trans("Filter by site name")),u(pe,"class","site-name-filter"),u(fe,"class","site-filter-actions"),u(le,"type","button"),u(le,"class","close"),u(le,"data-dismiss","modal"),u(le,"aria-label","Close"),u(Be,"class","d-none d-md-block"),u(R,"class","site-list-actions"),u(i,"class","site-list-header"),u(Ae,"class","table-header-col site-list-header-name"),u(He,"class","table-header-col site-list-header-parent"),u(be,"class","site-list-table-header"),u(Je,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(L,H){S(L,e,H),S(L,n,H),S(L,l,H),r(l,o),r(o,s),r(s,i),r(i,c),r(c,a),r(a,f),r(a,g),r(a,p),r(c,_),r(c,b),r(c,h),r(c,C),r(C,I),r(i,O),r(i,R),r(R,w),r(w,E),r(E,W),r(w,U),r(w,P),r(P,te),r(w,z),r(w,j),r(j,x),r(x,Y),r(j,F),r(j,m),r(w,A),r(w,N),r(N,Re),r(w,rt),r(w,ne),r(ne,ut),r(R,ft),r(R,fe),r(fe,Pe),r(Pe,G),r(G,de),r(G,_e),r(G,me),St(G,t[5],!0),r(fe,dt),r(fe,pe),r(pe,$),Z($,t[6]),r(pe,_t),r(pe,qe),Ne(he,qe,null),r(R,mt),r(R,Be),r(Be,le),r(s,pt),r(s,be),r(be,Ae),r(be,ht),r(be,He),r(s,bt),r(s,Je),r(Je,Xe),r(Xe,De),ie[V].m(De,null),t[27](l),X=!0,Ye||(gt=[M(e,"click",t[9]),ae(re.call(null,e,"body")),M(I,"click",t[9]),M(E,"click",t[13]),M(E,"keydown",t[20]),M(P,"click",t[12]),M(P,"keydown",t[21]),M(N,"click",t[10]),M(N,"keydown",t[22]),M(ne,"click",t[11]),M(ne,"keydown",t[23]),M(G,"change",t[24]),M(G,"change",t[14]),M($,"input",t[25]),M($,"keydown",t[26]),M(qe,"click",t[14]),M(le,"click",t[9]),ae(re.call(null,l,"body"))],Ye=!0)},p(L,H){(!X||H[0]&4)&&y!==(y=window.trans("[_1]Site",L[2].toString())+"")&&oe(g,y),(!X||H[0]&8&&k!==(k=L[3]<=1))&&(E.disabled=k),(!X||H[0]&8&&B!==(B=L[3]<=1))&&(P.disabled=B),(!X||H[0]&8)&&oe(Y,L[3]),(!X||H[0]&16)&&oe(m,L[4]),(!X||H[0]&24&&Ue!==(Ue=L[3]===L[4]))&&(N.disabled=Ue),(!X||H[0]&24&&Oe!==(Oe=L[3]===L[4]))&&(ne.disabled=Oe),H[0]&32&&St(G,L[5]),H[0]&64&&$.value!==L[6]&&Z($,L[6]);let Ze=V;V=wt(L),V===Ze?ie[V].p(L,H):(Qe(),Q(ie[Ze],1,1,()=>{ie[Ze]=null}),ze(),K=ie[V],K?K.p(L,H):(K=ie[V]=yt[V](L),K.c()),D(K,1),K.m(De,null))},i(L){X||(D(he.$$.fragment,L),D(K),X=!0)},o(L){Q(he.$$.fragment,L),Q(K),X=!1},d(L){L&&(T(e),T(n),T(l)),Ie(he),ie[V].d(),t[27](null),Ye=!1,ee(gt)}}}function Tn(t){let e,n,l=se(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Vt(Ft(t,l,i));const s=i=>Q(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);S(i,e,c),n=!0},p(i,c){if(c[0]&2){l=se(i[1]);let a;for(a=0;a<l.length;a+=1){const f=Ft(i,l,a);o[a]?(o[a].p(f,c),D(o[a],1)):(o[a]=Vt(f),o[a].c(),D(o[a],1),o[a].m(e.parentNode,e))}for(Qe(),a=l.length;a<o.length;a+=1)s(a);ze()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)D(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)Q(o[c]);n=!1},d(i){i&&T(e),Fe(o,i)}}}function Sn(t){let e,n;return{c(){e=d("tr"),n=d("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){S(l,e,o),r(e,n)},p:J,i:J,o:J,d(l){l&&T(e)}}}function Rn(t){let e;return{c(){e=d("span"),e.textContent=`${window.trans("Child Site")}`,u(e,"class","badge badge-child-site")},m(n,l){S(n,e,l)},p:J,d(n){n&&T(e)}}}function Cn(t){let e;return{c(){e=d("span"),e.textContent=`${window.trans("Site")}`,u(e,"class","badge badge-site")},m(n,l){S(n,e,l)},p:J,d(n){n&&T(e)}}}function Vt(t){let e,n,l,o,s=t[30].name+"",i,c,a,f,y,g,p,_,b=t[30].parentSiteName+"",h,C;function I(w,E){return w[30].parentSiteName==="-"?Cn:Rn}let O=I(t),R=O(t);return y=new it({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=d("tr"),n=d("td"),R.c(),l=v(),o=d("a"),i=q(s),a=v(),f=d("a"),Ge(y.$$.fragment),p=v(),_=d("td"),h=v(),u(o,"href",c=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(o,"class","dashboard-link"),u(f,"href",g=t[30].siteUrl),u(f,"class","site-link"),u(f,"target","_blank")},m(w,E){S(w,e,E),r(e,n),R.m(n,null),r(n,l),r(n,o),r(o,i),r(n,a),r(n,f),Ne(y,f,null),r(e,p),r(e,_),_.innerHTML=b,r(e,h),C=!0},p(w,E){O===(O=I(w))&&R?R.p(w,E):(R.d(1),R=O(w),R&&(R.c(),R.m(n,l))),(!C||E[0]&2)&&s!==(s=w[30].name+"")&&oe(i,s),(!C||E[0]&2&&c!==(c=`${window.ScriptURI}?__mode=dashboard&blog_id=${w[30].id}`))&&u(o,"href",c),(!C||E[0]&2&&g!==(g=w[30].siteUrl))&&u(f,"href",g),(!C||E[0]&2)&&b!==(b=w[30].parentSiteName+"")&&(_.innerHTML=b)},i(w){C||(D(y.$$.fragment,w),C=!0)},o(w){Q(y.$$.fragment,w),C=!1},d(w){w&&T(e),R.d(),Ie(y)}}}function Ln(t){let e,n,l,o,s,i=t[0]&&Wt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(c,a){S(c,e,a),i&&i.m(c,a),S(c,n,a),l=!0,o||(s=M(document.body,"click",t[15]),o=!0)},p(c,a){c[0]?i?(i.p(c,a),a[0]&1&&D(i,1)):(i=Wt(c),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(Qe(),Q(i,1,1,()=>{i=null}),ze())},i(c){l||(D(i),l=!0)},o(c){Q(i),l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),o=!1,s()}}}function En(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:c}=e;const a=()=>{n(0,s=!1)};let f=[],y=0,g=1,p=1,_="parent_sites",b="",h=[],C=!1,I=null;const O=()=>{n(3,g++,g),k()},R=()=>{n(3,g=p),k()},w=()=>{n(3,g--,g),k()},E=()=>{n(3,g=1),k()},W=()=>{h=[],_==="child_sites_only"?h=[{type:"parent_website",args:{value:""}}]:_==="parent_sites"&&(h=[{type:"parent_website",args:{value:"1"}}]),n(6,b=b.trim()),b!==""&&h.push({type:"name",args:{string:b,option:"contains"}}),n(3,g=1),k()},k=async()=>{n(7,C=!0);const m=await kn({magicToken:l,items:h,page:g,limit:o});n(2,y=m.count),n(4,p=m.pageMax),n(3,g=p!==0?m.page:0),n(1,f=m.sites),n(7,C=!1)},U=m=>{const A=m.target;s&&lt([i,I],A)&&a()};et(async()=>{W()});const P=m=>m.key==="Enter"&&E(),te=m=>m.key==="Enter"&&w(),B=m=>m.key==="Enter"&&O(),z=m=>m.key==="Enter"&&R();function j(){_=Yt(this),n(5,_)}function x(){b=this.value,n(6,b)}const Y=m=>m.key==="Enter"&&W();function F(m){we[m?"unshift":"push"](()=>{I=m,n(8,I)})}return t.$$set=m=>{"magicToken"in m&&n(16,l=m.magicToken),"limit"in m&&n(17,o=m.limit),"open"in m&&n(0,s=m.open),"buttonRef"in m&&n(18,i=m.buttonRef),"anchorRef"in m&&n(19,c=m.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&c&&(s?c.classList.add("open"):c.classList.remove("open"))},[s,f,y,g,p,_,b,C,I,a,O,R,w,E,W,U,l,o,i,c,P,te,B,z,j,x,Y,F]}class Nn extends Se{constructor(e){super(),Te(this,e,En,Ln,ge,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function In(t,e){const n=new Nn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Mn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}new Ht({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var ot,st;const at=document.querySelector('[data-is="primary-navigation-toggle"]');if(at!==null){const t="collapsed",e=sessionStorage.getItem(t);fn(at,{collapsed:e==="true",buttonRef:at.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const ct=document.querySelector('[data-script="admin-header"]');ct===null&&console.error("data-script='admin-header' is not set");const Ke=(ot=ct?.getAttribute("data-blog-id"))!==null&&ot!==void 0?ot:"",ue=(st=ct?.getAttribute("data-magic-token"))!==null&&st!==void 0?st:"";ue===""&&console.error("data-magic-token is not set");const jn="50",Qt=document.querySelectorAll('[data-is="site-list-button"]');Qt.length>0&&ue!==""&&Qt.forEach(t=>{In(t,{magicToken:ue,limit:Number.parseInt(jn),open:!1,buttonRef:t,anchorRef:t})});const Me=document.querySelector('[data-is="create-button"]'),je=document.querySelector('[data-is="search-button"]'),Un=document.querySelector("div.mt-modal");(Me!==null||je!==null)&&ue!==""&&zt({blogId:Ke,magicToken:ue}).then(t=>{if(Me!==null&&an({target:Me,props:{blog_id:Ke,contentTypes:t.contentTypes.filter(n=>n.can_create===1),open:!1,buttonRef:Me,anchorRef:Me,containerRef:Un}}),je!==null){const n=je.getElementsByTagName("a")[0];vn(je,{blogId:Ke,magicToken:ue,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:je,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&Mn(e,{blogId:Ke,magicToken:ue,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
