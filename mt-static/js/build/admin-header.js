const zt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function W(){}function vt(t){return t()}function kt(){return Object.create(null)}function ee(t){t.forEach(vt)}function $e(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function ae(t){return t&&$e(t.destroy)?t.destroy:W}function r(t,e){t.appendChild(e)}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function We(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function et(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function w(){return P(" ")}function Ne(){return P("")}function I(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Kt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Xt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yt(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Ee;function Ie(t){Ee=t}function Zt(){if(!Ee)throw new Error("Function called outside component initialization");return Ee}function tt(t){Zt().$$.on_mount.push(t)}const ye=[],we=[];let ve=[];const Ct=[],Lt=Promise.resolve();let nt=!1;function Nt(){nt||(nt=!0,Lt.then(Et))}function xt(){return Nt(),Lt}function Ve(t){ve.push(t)}const lt=new Set;let ke=0;function Et(){if(ke!==0)return;const t=Ee;do{try{for(;ke<ye.length;){const e=ye[ke];ke++,Ie(e),$t(e.$$)}}catch(e){throw ye.length=0,ke=0,e}for(Ie(null),ye.length=0,ke=0;we.length;)we.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];lt.has(n)||(lt.add(n),n())}ve.length=0}while(ye.length);for(;Ct.length;)Ct.pop()();nt=!1,lt.clear(),Ie(t)}function $t(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ve)}}function en(t){const e=[],n=[];ve.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ve=e}const Qe=new Set;let ce;function ze(){ce={r:0,c:[],p:ce}}function Ge(){ce.r||ee(ce.c),ce=ce.p}function B(t,e){t&&t.i&&(Qe.delete(t),t.i(e))}function V(t,e,n,l){if(t&&t.o){if(Qe.has(t))return;Qe.add(t),ce.c.push(()=>{Qe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function se(t){return t?.length!==void 0?t:Array.from(t)}function Me(t){t&&t.c()}function Te(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),Ve(()=>{const s=t.$$.on_mount.map(vt).filter($e);t.$$.on_destroy?t.$$.on_destroy.push(...s):ee(s),t.$$.on_mount=[]}),o.forEach(Ve)}function Se(t,e){const n=t.$$;n.fragment!==null&&(en(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(ye.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Re(t,e,n,l,o,s,i=null,c=[-1]){const a=Ee;Ie(t);const d=t.$$={fragment:null,ctx:[],props:s,update:W,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:kt(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(d.root);let y=!1;if(d.ctx=n?n(t,e.props||{},(b,m,..._)=>{const g=_.length?_[0]:m;return d.ctx&&o(d.ctx[b],d.ctx[b]=g)&&(!d.skip_bound&&d.bound[b]&&d.bound[b](g),y&&tn(t,b)),m}):[],d.update(),y=!0,ee(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const b=Xt(e.target);d.fragment&&d.fragment.l(b),b.forEach(T)}else d.fragment&&d.fragment.c();e.intro&&B(t.$$.fragment),Te(t,e.target,e.anchor),Et()}Ie(a)}class Ce{$$=void 0;$$set=void 0;$destroy(){Se(this,1),this.$destroy=W}$on(e,n){if(!$e(n))return W;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function re(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await xt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function it(t,e){return!t.some(n=>n&&n.contains(e))}function It(t,e,n){const l=t.slice();return l[10]=e[n],l}function Mt(t){let e,n,l,o,s,i,c,a,d,y,b,m=window.trans("New [_1] creation",window.trans("Entry"))+"",_,g,p,j,k,S=window.trans("New [_1] creation",window.trans("Page"))+"",N,R,q,F,v=t[1].length>0&&jt(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=w(),s=f("div"),v&&v.c(),i=w(),c=f("p"),c.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,a=w(),d=f("ul"),y=f("li"),b=f("a"),_=P(m),p=w(),j=f("li"),k=f("a"),N=P(S),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(c,"class","block-title"),u(b,"href",g=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(k,"href",R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(d,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(U,O){C(U,e,O),r(e,n),r(n,l),r(e,o),r(e,s),v&&v.m(s,null),r(s,i),r(s,c),r(s,a),r(s,d),r(d,y),r(y,b),r(b,_),r(d,p),r(d,j),r(j,k),r(k,N),t[9](e),q||(F=[I(l,"click",t[4]),ae(re.call(null,e,"body"))],q=!0)},p(U,O){U[1].length>0?v?v.p(U,O):(v=jt(U),v.c(),v.m(s,i)):v&&(v.d(1),v=null),O&4&&g!==(g=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${U[2]}`)&&u(b,"href",g),O&4&&R!==(R=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${U[2]}`)&&u(k,"href",R)},d(U){U&&T(e),v&&v.d(),t[9](null),q=!1,ee(F)}}}function jt(t){let e,n,l,o=se(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ut(It(t,o,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=w(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,c){C(i,e,c),C(i,n,c),C(i,l,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(i,c){if(c&6){o=se(i[1]);let a;for(a=0;a<o.length;a+=1){const d=It(i,o,a);s[a]?s[a].p(d,c):(s[a]=Ut(d),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(i){i&&(T(e),T(n),T(l)),We(s,i)}}}function Ut(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=f("li"),n=f("a"),o=P(l),i=w(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(c,a){C(c,e,a),r(e,n),r(n,o),r(e,i)},p(c,a){a&2&&l!==(l=window.trans("New [_1] creation",c[10].name)+"")&&oe(o,l),a&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${c[10].id}&type=content_data_${c[10].id}&blog_id=${c[2]}`)&&u(n,"href",s)},d(c){c&&T(e)}}}function ln(t){let e,n,l,o,s=t[0]&&Mt(t);return{c(){e=w(),s&&s.c(),n=Ne()},m(i,c){C(i,e,c),s&&s.m(i,c),C(i,n,c),l||(o=I(document.body,"click",t[5]),l=!0)},p(i,[c]){i[0]?s?s.p(i,c):(s=Mt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:W,o:W,d(i){i&&(T(e),T(n)),s&&s.d(i),l=!1,o()}}}function on(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:c=null}=e,{containerRef:a=null}=e,d=null;const y=()=>{n(0,s=!1)},b=_=>{if(a&&a.classList.contains("show"))return;const g=_.target;s&&it([i,d],g)&&y()};function m(_){we[_?"unshift":"push"](()=>{d=_,n(3,d),n(7,c),n(0,s)})}return t.$$set=_=>{"contentTypes"in _&&n(1,l=_.contentTypes),"blog_id"in _&&n(2,o=_.blog_id),"open"in _&&n(0,s=_.open),"buttonRef"in _&&n(6,i=_.buttonRef),"anchorRef"in _&&n(7,c=_.anchorRef),"containerRef"in _&&n(8,a=_.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&c){if(d){const _=c.getBoundingClientRect(),g=`calc(${_.bottom}px + 10px)`;n(3,d.style.top=g,d);const p=`calc(100vh - ${_.bottom}px - 10px - 20px)`;n(3,d.style.maxHeight=p,d)}s?c.classList.add("open"):c.classList.remove("open")}},[s,l,o,d,y,b,i,c,a,m]}class sn extends Ce{constructor(e){super(),Re(this,e,on,ln,ge,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const an=({target:t,props:e})=>{const n=new sn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function cn(t){let e,n,l,o,s,i,c;return{c(){e=f("div"),l=w(),o=f("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`),u(o,"class","mt-primaryNavigation-overlay-sp"),u(o,"style",s=`display: ${t[0]?"none":"block"}`)},m(a,d){C(a,e,d),C(a,l,d),C(a,o,d),i||(c=[ae(re.call(null,e,"body")),I(e,"mouseenter",t[2]),ae(re.call(null,o,"body")),I(o,"click",t[5])],i=!0)},p(a,[d]){d&1&&n!==(n=`display: ${a[0]?"block":"none"}`)&&u(e,"style",n),d&1&&s!==(s=`display: ${a[0]?"none":"block"}`)&&u(o,"style",s)},i:W,o:W,d(a){a&&(T(e),T(l),T(o)),i=!1,ee(c)}}}function rn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const c=(_,g)=>{const p=document.querySelector('[data-is="content-wrapper"]');g?p.classList.add(_):p.classList.remove(_)},a=()=>{c("collapsed",o)},d=()=>{c("mouseover",i)},y=()=>{var _;o&&(i=!0,d(),(_=document.querySelector('[data-is="primary-navigation"]'))===null||_===void 0||_.addEventListener("mouseleave",b,{once:!0}))},b=()=>{i=!1,d()};tt(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),a()});const m=()=>{n(0,o=!0),a()};return t.$$set=_=>{"buttonRef"in _&&n(3,l=_.buttonRef),"collapsed"in _&&n(0,o=_.collapsed),"isStored"in _&&n(4,s=_.isStored)},t.$$.update=()=>{t.$$.dirty&9&&(a(),i=!1,d(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,a,y,l,s,m]}class un extends Ce{constructor(e){super(),Re(this,e,rn,cn,ge,{buttonRef:3,collapsed:0,isStored:4})}}function fn(t,e){const n=new un({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Ot(t){let e,n;return{c(){e=et("title"),n=P(t[2])},m(l,o){C(l,e,o),r(e,n)},p(l,o){o&4&&oe(n,l[2])},d(l){l&&T(e)}}}function dn(t){let e,n,l=t[2]&&Ot(t);return{c(){e=et("svg"),l&&l.c(),n=et("use"),Tt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){C(o,e,s),l&&l.m(e,null),r(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Ot(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Tt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:W,o:W,d(o){o&&T(e),l&&l.d()}}}function _n(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class Ke extends Ce{constructor(e){super(),Re(this,e,_n,dn,ge,{class:0,href:1,title:2})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function qt(t,e,n){const l=t.slice();return l[12]=e[n],l}function Bt(t){let e,n,l,o=!1,s,i,c,a=t[12].label+"",d,y,b,m,_;return b=Kt(t[7][0]),{c(){e=f("label"),n=f("input"),c=w(),d=P(a),y=w(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[12].key,Z(n,n.__value),u(n,"id",s=t[12].key),n.checked=i=t[0]===t[12].key,b.p(n)},m(g,p){C(g,e,p),r(e,n),n.checked=n.__value===t[0],r(e,c),r(e,d),r(e,y),m||(_=I(n,"change",t[6]),m=!0)},p(g,p){p&16&&l!==(l=g[12].key)&&(n.__value=l,Z(n,n.__value),o=!0),p&16&&s!==(s=g[12].key)&&u(n,"id",s),p&17&&i!==(i=g[0]===g[12].key)&&(n.checked=i),(o||p&17)&&(n.checked=n.__value===g[0]),p&16&&a!==(a=g[12].label+"")&&oe(d,a)},d(g){g&&T(e),b.r(),m=!1,_()}}}function mn(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Z(e,e.__value)},m(n,l){C(n,e,l)},p:W,d(n){n&&T(e)}}}function hn(t){let e,n=se(t[3]),l=[];for(let o=0;o<n.length;o+=1)l[o]=At(Pt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ne()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);C(o,e,s)},p(o,s){if(s&8){n=se(o[3]);let i;for(i=0;i<n.length;i+=1){const c=Pt(o,n,i);l[i]?l[i].p(c,s):(l[i]=At(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&T(e),We(l,o)}}}function At(t){let e,n=t[9].name+"",l,o;return{c(){e=f("option"),l=P(n),e.__value=o=t[9].id,Z(e,e.__value)},m(s,i){C(s,e,i),r(e,l)},p(s,i){i&8&&n!==(n=s[9].name+"")&&oe(l,n),i&8&&o!==(o=s[9].id)&&(e.__value=o,Z(e,e.__value))},d(s){s&&T(e)}}}function pn(t){let e,n,l,o,s,i,c,a,d,y,b,m,_,g,p,j,k,S,N,R,q,F,v,U,O,te,A,z=se(t[4]),M=[];for(let h=0;h<z.length;h+=1)M[h]=Bt(qt(t,z,h));function x(h,H){return h[3].length>0?hn:mn}let Y=x(t),D=Y(t);return U=new Ke({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("form"),n=f("input"),l=w(),o=f("input"),s=w(),i=f("input"),c=w(),a=f("input"),d=w(),y=f("input"),b=w(),m=f("div");for(let h=0;h<M.length;h+=1)M[h].c();_=w(),g=f("div"),p=f("select"),D.c(),k=w(),S=f("div"),N=f("div"),R=f("input"),q=w(),F=f("div"),v=f("button"),Me(U.$$.fragment),O=w(),te=f("span"),te.textContent=`${window.trans("Search")}`,u(n,"type","hidden"),u(n,"name","__mode"),n.value="search_replace",u(o,"type","hidden"),u(o,"name","blog_id"),o.value=t[1],u(i,"type","hidden"),u(i,"name","_type"),i.value=t[0],u(a,"type","hidden"),u(a,"name","do_search"),a.value="1",u(y,"type","hidden"),u(y,"name","magic_token"),y.value=t[2],u(m,"class","search-type"),u(p,"class","custom-select form-control form-select"),u(p,"name","content_type_id"),p.disabled=j=t[0]!=="content_data"||t[3].length===0,Rt(p,"disabled",t[0]!=="content_data"),u(g,"class","search-content-type"),u(R,"type","text"),u(R,"placeholder",window.trans("Select target and search text...")),u(R,"name","search"),u(N,"class","search-text-box"),u(v,"type","submit"),u(v,"class","btn btn-primary"),u(F,"class","submit-button"),u(S,"class","search-input-group"),u(e,"class","mt-search-form"),u(e,"method","post"),u(e,"action",window.ScriptURI)},m(h,H){C(h,e,H),r(e,n),r(e,l),r(e,o),r(e,s),r(e,i),r(e,c),r(e,a),r(e,d),r(e,y),r(e,b),r(e,m);for(let E=0;E<M.length;E+=1)M[E]&&M[E].m(m,null);r(e,_),r(e,g),r(g,p),D.m(p,null),r(e,k),r(e,S),r(S,N),r(N,R),t[8](R),r(S,q),r(S,F),r(F,v),Te(U,v,null),r(v,O),r(v,te),A=!0},p(h,[H]){if((!A||H&2)&&(o.value=h[1]),(!A||H&1)&&(i.value=h[0]),(!A||H&4)&&(y.value=h[2]),H&17){z=se(h[4]);let E;for(E=0;E<z.length;E+=1){const Le=qt(h,z,E);M[E]?M[E].p(Le,H):(M[E]=Bt(Le),M[E].c(),M[E].m(m,null))}for(;E<M.length;E+=1)M[E].d(1);M.length=z.length}Y===(Y=x(h))&&D?D.p(h,H):(D.d(1),D=Y(h),D&&(D.c(),D.m(p,null))),(!A||H&9&&j!==(j=h[0]!=="content_data"||h[3].length===0))&&(p.disabled=j),(!A||H&1)&&Rt(p,"disabled",h[0]!=="content_data")},i(h){A||(B(U.$$.fragment,h),A=!0)},o(h){V(U.$$.fragment,h),A=!1},d(h){h&&T(e),We(M,h),D.d(),t[8](null),Se(U)}}}function bn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:c}=e,a=null;const d=[[]];function y(){c=this.__value,n(0,c)}function b(m){we[m?"unshift":"push"](()=>{a=m,n(5,a)})}return t.$$set=m=>{"blogId"in m&&n(1,l=m.blogId),"magicToken"in m&&n(2,o=m.magicToken),"contentTypes"in m&&n(3,s=m.contentTypes),"searchTabs"in m&&n(4,i=m.searchTabs),"objectType"in m&&n(0,c=m.objectType)},t.$$.update=()=>{t.$$.dirty&32&&a&&a.focus()},[c,l,o,s,i,a,y,d,b]}class Ht extends Ce{constructor(e){super(),Re(this,e,bn,pn,ge,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,o,s,i,c,a,d,y,b;return a=new Ht({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=f("div"),n=w(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=w(),c=f("div"),Me(a.$$.fragment),u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(c,"class","modal-body"),u(l,"class","modal search-button-modal")},m(m,_){C(m,e,_),C(m,n,_),C(m,l,_),r(l,o),r(o,s),r(l,i),r(l,c),Te(a,c,null),t[11](l),d=!0,y||(b=[I(e,"click",t[7]),ae(re.call(null,e,"body")),I(s,"click",t[7]),ae(re.call(null,l,"body"))],y=!0)},p(m,_){const g={};_&4&&(g.blogId=m[2]),_&8&&(g.magicToken=m[3]),_&16&&(g.contentTypes=m[4]),_&2&&(g.objectType=m[1]),_&32&&(g.searchTabs=m[5]),a.$set(g)},i(m){d||(B(a.$$.fragment,m),d=!0)},o(m){V(a.$$.fragment,m),d=!1},d(m){m&&(T(e),T(n),T(l)),Se(a),t[11](null),y=!1,ee(b)}}}function gn(t){let e,n,l,o,s,i=t[0]&&Jt(t);return{c(){e=w(),i&&i.c(),n=Ne()},m(c,a){C(c,e,a),i&&i.m(c,a),C(c,n,a),l=!0,o||(s=I(document.body,"click",t[8]),o=!0)},p(c,[a]){c[0]?i?(i.p(c,a),a&1&&B(i,1)):(i=Jt(c),i.c(),B(i,1),i.m(n.parentNode,n)):i&&(ze(),V(i,1,1,()=>{i=null}),Ge())},i(c){l||(B(i),l=!0)},o(c){V(i),l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),o=!1,s()}}}let Dt=null;function yn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:c}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:y}=e;const b=()=>{n(0,i=!1)};let m=null;const _=p=>{const j=p.target;i&&it([c,m],j)&&b()};tt(async()=>{y&&d.find(p=>p.key===y)||n(1,y=d[0].key)});function g(p){we[p?"unshift":"push"](()=>{m=p,n(6,m)})}return t.$$set=p=>{"blogId"in p&&n(2,l=p.blogId),"magicToken"in p&&n(3,o=p.magicToken),"contentTypes"in p&&n(4,s=p.contentTypes),"open"in p&&n(0,i=p.open),"buttonRef"in p&&n(9,c=p.buttonRef),"anchorRef"in p&&n(10,a=p.anchorRef),"searchTabs"in p&&n(5,d=p.searchTabs),"objectType"in p&&n(1,y=p.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&a&&(i?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty&1&&i&&Dt&&Dt.focus()},[i,y,l,o,s,d,m,b,_,c,a,g]}class wn extends Ce{constructor(e){super(),Re(this,e,yn,gn,ge,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function vn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new wn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const kn=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Ft(t,e,n){const l=t.slice();return l[30]=e[n],l}function Wt(t){let e,n,l,o,s,i,c,a,d,y=window.trans("[_1]Site",t[2].toString())+"",b,m,_,g,p,j,k,S,N,R,q,F,v,U,O,te,A,z,M,x,Y,D,h,H,E,Le,Oe,rt,ne,ut,Pe,ft,fe,qe,G,de,_e,me,dt,he,$,_t,Be,pe,mt,Ae,le,ht,be,He,pt,Je,bt,De,Ye,Fe,Q,K,X,Ze,gt;pe=new Ke({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[Sn,Tn],ie=[];function wt(L,J){return L[7]?0:1}return Q=wt(t),K=ie[Q]=yt[Q](t),{c(){e=f("div"),n=w(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),c=f("div"),a=f("span"),d=P("("),b=P(y),m=P(")"),_=w(),g=f("p"),g.textContent=`${window.trans("Site List")}`,p=w(),j=f("div"),k=f("button"),k.innerHTML='<span aria-hidden="true">\xD7</span>',S=w(),N=f("div"),R=f("div"),q=f("button"),F=P("<<"),U=w(),O=f("button"),te=P("<"),z=w(),M=f("span"),x=f("span"),Y=P(t[3]),D=P("/"),h=P(t[4]),H=w(),E=f("button"),Le=P(">"),rt=w(),ne=f("button"),ut=P(">>"),ft=w(),fe=f("div"),qe=f("div"),G=f("select"),de=f("option"),de.textContent=`${window.trans("Parent Sites")}`,_e=f("option"),_e.textContent=`${window.trans("Parent and child sites")}`,me=f("option"),me.textContent=`${window.trans("Only child sites")}`,dt=w(),he=f("div"),$=f("input"),_t=w(),Be=f("button"),Me(pe.$$.fragment),mt=w(),Ae=f("div"),le=f("button"),le.innerHTML='<span aria-hidden="true">\xD7</span>',ht=w(),be=f("div"),He=f("span"),He.textContent=`${window.trans("Site Name")}`,pt=w(),Je=f("span"),Je.textContent=`${window.trans("Parent Site")}`,bt=w(),De=f("div"),Ye=f("table"),Fe=f("tbody"),K.c(),u(e,"class","site-list-button-modal-overlay"),u(k,"type","button"),u(k,"class","close"),u(k,"data-dismiss","modal"),u(k,"aria-label","Close"),u(j,"class","d-block d-md-none"),u(c,"class","site-list-title"),u(q,"type","button"),q.disabled=v=t[3]<=1,u(O,"type","button"),O.disabled=A=t[3]<=1,u(x,"class","current"),u(M,"class","page-num"),u(E,"type","button"),E.disabled=Oe=t[3]===t[4],u(ne,"type","button"),ne.disabled=Pe=t[3]===t[4],u(R,"class","prev-next"),de.__value="parent_sites",Z(de,de.__value),_e.__value="parent_and_child_sites",Z(_e,_e.__value),me.__value="child_sites_only",Z(me,me.__value),u(G,"class","custom-select form-control form-select"),t[5]===void 0&&Ve(()=>t[24].call(G)),u(qe,"class","site-type-filter"),u($,"type","text"),u($,"placeholder",window.trans("Filter by site name")),u(he,"class","site-name-filter"),u(fe,"class","site-filter-actions"),u(le,"type","button"),u(le,"class","close"),u(le,"data-dismiss","modal"),u(le,"aria-label","Close"),u(Ae,"class","d-none d-md-block"),u(N,"class","site-list-actions"),u(i,"class","site-list-header"),u(He,"class","table-header-col site-list-header-name"),u(Je,"class","table-header-col site-list-header-parent"),u(be,"class","site-list-table-header"),u(De,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(L,J){C(L,e,J),C(L,n,J),C(L,l,J),r(l,o),r(o,s),r(s,i),r(i,c),r(c,a),r(a,d),r(a,b),r(a,m),r(c,_),r(c,g),r(c,p),r(c,j),r(j,k),r(i,S),r(i,N),r(N,R),r(R,q),r(q,F),r(R,U),r(R,O),r(O,te),r(R,z),r(R,M),r(M,x),r(x,Y),r(M,D),r(M,h),r(R,H),r(R,E),r(E,Le),r(R,rt),r(R,ne),r(ne,ut),r(N,ft),r(N,fe),r(fe,qe),r(qe,G),r(G,de),r(G,_e),r(G,me),St(G,t[5],!0),r(fe,dt),r(fe,he),r(he,$),Z($,t[6]),r(he,_t),r(he,Be),Te(pe,Be,null),r(N,mt),r(N,Ae),r(Ae,le),r(s,ht),r(s,be),r(be,He),r(be,pt),r(be,Je),r(s,bt),r(s,De),r(De,Ye),r(Ye,Fe),ie[Q].m(Fe,null),t[27](l),X=!0,Ze||(gt=[I(e,"click",t[9]),ae(re.call(null,e,"body")),I(k,"click",t[9]),I(q,"click",t[13]),I(q,"keydown",t[20]),I(O,"click",t[12]),I(O,"keydown",t[21]),I(E,"click",t[10]),I(E,"keydown",t[22]),I(ne,"click",t[11]),I(ne,"keydown",t[23]),I(G,"change",t[24]),I(G,"change",t[14]),I($,"input",t[25]),I($,"keydown",t[26]),I(Be,"click",t[14]),I(le,"click",t[9]),ae(re.call(null,l,"body"))],Ze=!0)},p(L,J){(!X||J[0]&4)&&y!==(y=window.trans("[_1]Site",L[2].toString())+"")&&oe(b,y),(!X||J[0]&8&&v!==(v=L[3]<=1))&&(q.disabled=v),(!X||J[0]&8&&A!==(A=L[3]<=1))&&(O.disabled=A),(!X||J[0]&8)&&oe(Y,L[3]),(!X||J[0]&16)&&oe(h,L[4]),(!X||J[0]&24&&Oe!==(Oe=L[3]===L[4]))&&(E.disabled=Oe),(!X||J[0]&24&&Pe!==(Pe=L[3]===L[4]))&&(ne.disabled=Pe),J[0]&32&&St(G,L[5]),J[0]&64&&$.value!==L[6]&&Z($,L[6]);let xe=Q;Q=wt(L),Q===xe?ie[Q].p(L,J):(ze(),V(ie[xe],1,1,()=>{ie[xe]=null}),Ge(),K=ie[Q],K?K.p(L,J):(K=ie[Q]=yt[Q](L),K.c()),B(K,1),K.m(Fe,null))},i(L){X||(B(pe.$$.fragment,L),B(K),X=!0)},o(L){V(pe.$$.fragment,L),V(K),X=!1},d(L){L&&(T(e),T(n),T(l)),Se(pe),ie[Q].d(),t[27](null),Ze=!1,ee(gt)}}}function Tn(t){let e,n,l=se(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Vt(Ft(t,l,i));const s=i=>V(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ne()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);C(i,e,c),n=!0},p(i,c){if(c[0]&2){l=se(i[1]);let a;for(a=0;a<l.length;a+=1){const d=Ft(i,l,a);o[a]?(o[a].p(d,c),B(o[a],1)):(o[a]=Vt(d),o[a].c(),B(o[a],1),o[a].m(e.parentNode,e))}for(ze(),a=l.length;a<o.length;a+=1)s(a);Ge()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)V(o[c]);n=!1},d(i){i&&T(e),We(o,i)}}}function Sn(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){C(l,e,o),r(e,n)},p:W,i:W,o:W,d(l){l&&T(e)}}}function Vt(t){let e,n,l,o,s,i=t[30].name+"",c,a,d,y,b,m,_,g,p=t[30].parentSiteName+"",j,k;return o=new Ke({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${t[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),b=new Ke({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=f("tr"),n=f("td"),l=f("a"),Me(o.$$.fragment),s=w(),c=P(i),d=w(),y=f("a"),Me(b.$$.fragment),_=w(),g=f("td"),j=w(),u(l,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(l,"class","dashboard-link"),u(y,"href",m=t[30].siteUrl),u(y,"class","site-link"),u(y,"target","_blank")},m(S,N){C(S,e,N),r(e,n),r(n,l),Te(o,l,null),r(l,s),r(l,c),r(n,d),r(n,y),Te(b,y,null),r(e,_),r(e,g),g.innerHTML=p,r(e,j),k=!0},p(S,N){const R={};N[0]&2&&(R.href=`${window.StaticURI}images/admin2025/sprite.svg#${S[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),o.$set(R),(!k||N[0]&2)&&i!==(i=S[30].name+"")&&oe(c,i),(!k||N[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${S[30].id}`))&&u(l,"href",a),(!k||N[0]&2&&m!==(m=S[30].siteUrl))&&u(y,"href",m),(!k||N[0]&2)&&p!==(p=S[30].parentSiteName+"")&&(g.innerHTML=p)},i(S){k||(B(o.$$.fragment,S),B(b.$$.fragment,S),k=!0)},o(S){V(o.$$.fragment,S),V(b.$$.fragment,S),k=!1},d(S){S&&T(e),Se(o),Se(b)}}}function Rn(t){let e,n,l,o,s,i=t[0]&&Wt(t);return{c(){e=w(),i&&i.c(),n=Ne()},m(c,a){C(c,e,a),i&&i.m(c,a),C(c,n,a),l=!0,o||(s=I(document.body,"click",t[15]),o=!0)},p(c,a){c[0]?i?(i.p(c,a),a[0]&1&&B(i,1)):(i=Wt(c),i.c(),B(i,1),i.m(n.parentNode,n)):i&&(ze(),V(i,1,1,()=>{i=null}),Ge())},i(c){l||(B(i),l=!0)},o(c){V(i),l=!1},d(c){c&&(T(e),T(n)),i&&i.d(c),o=!1,s()}}}function Cn(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:c}=e;const a=()=>{n(0,s=!1)};let d=[],y=0,b=1,m=1,_="parent_sites",g="",p=[],j=!1,k=null;const S=()=>{n(3,b++,b),v()},N=()=>{n(3,b=m),v()},R=()=>{n(3,b--,b),v()},q=()=>{n(3,b=1),v()},F=()=>{p=[],_==="child_sites_only"?p=[{type:"parent_website",args:{value:""}}]:_==="parent_sites"&&(p=[{type:"parent_website",args:{value:"1"}}]),n(6,g=g.trim()),g!==""&&p.push({type:"name",args:{string:g,option:"contains"}}),n(3,b=1),v()},v=async()=>{n(7,j=!0);const h=await kn({magicToken:l,items:p,page:b,limit:o});n(2,y=h.count),n(4,m=h.pageMax),n(3,b=m!==0?h.page:0),n(1,d=h.sites),n(7,j=!1)},U=h=>{const H=h.target;s&&it([i,k],H)&&a()};tt(async()=>{F()});const O=h=>h.key==="Enter"&&q(),te=h=>h.key==="Enter"&&R(),A=h=>h.key==="Enter"&&S(),z=h=>h.key==="Enter"&&N();function M(){_=Yt(this),n(5,_)}function x(){g=this.value,n(6,g)}const Y=h=>h.key==="Enter"&&F();function D(h){we[h?"unshift":"push"](()=>{k=h,n(8,k)})}return t.$$set=h=>{"magicToken"in h&&n(16,l=h.magicToken),"limit"in h&&n(17,o=h.limit),"open"in h&&n(0,s=h.open),"buttonRef"in h&&n(18,i=h.buttonRef),"anchorRef"in h&&n(19,c=h.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&c&&(s?c.classList.add("open"):c.classList.remove("open"))},[s,d,y,b,m,_,g,j,k,a,S,N,R,q,F,U,l,o,i,c,O,te,A,z,M,x,Y,D]}class Ln extends Ce{constructor(e){super(),Re(this,e,Cn,Rn,ge,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function Nn(t,e){const n=new Ln({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function En(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}new Ht({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var ot,st;const at=document.querySelector('[data-is="primary-navigation-toggle"]');if(at!==null){const t="collapsed",e=sessionStorage.getItem(t);fn(at,{collapsed:e==="true",buttonRef:at.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const ct=document.querySelector('[data-script="admin-header"]');ct===null&&console.error("data-script='admin-header' is not set");const Xe=(ot=ct?.getAttribute("data-blog-id"))!==null&&ot!==void 0?ot:"",ue=(st=ct?.getAttribute("data-magic-token"))!==null&&st!==void 0?st:"";ue===""&&console.error("data-magic-token is not set");const In="50",Qt=document.querySelectorAll('[data-is="site-list-button"]');Qt.length>0&&ue!==""&&Qt.forEach(t=>{Nn(t,{magicToken:ue,limit:Number.parseInt(In),open:!1,buttonRef:t,anchorRef:t})});const je=document.querySelector('[data-is="create-button"]'),Ue=document.querySelector('[data-is="search-button"]'),Mn=document.querySelector("div.mt-modal");(je!==null||Ue!==null)&&ue!==""&&zt({blogId:Xe,magicToken:ue}).then(t=>{if(je!==null&&an({target:je,props:{blog_id:Xe,contentTypes:t.contentTypes.filter(n=>n.can_create===1),open:!1,buttonRef:je,anchorRef:je,containerRef:Mn}}),Ue!==null){const n=Ue.getElementsByTagName("a")[0];vn(Ue,{blogId:Xe,magicToken:ue,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:Ue,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&En(e,{blogId:Xe,magicToken:ue,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
