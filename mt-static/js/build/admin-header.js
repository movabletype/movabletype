class _e{constructor({cache:t}){this.cache=t}generateCacheKey({prefix:t,params:e}){const n=Object.keys(e).sort().reduce((s,o)=>(s[o]=e[o],s),{});return`${t}_${JSON.stringify(n)}`}async fetchWithCache({key:t,fetcher:e,ttl:n=1e3*60,noCache:s=!1}){return s?e():this.cache.get(t)||e().then(l=>(this.cache.set(t,l,n),l)).catch(l=>(console.log("Failed to fetch data:",l),l))}clearCache(t){this.cache.delete(t)}clearAllCache(){this.cache.clear()}}const mt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,pe=new Set,xt=typeof process=="object"&&process?process:{},ge=(i,t,e,n)=>{typeof xt.emitWarning=="function"?xt.emitWarning(i,t,e,n):console.error(`[${e}] ${t}: ${i}`)};let Pt=globalThis.AbortController,me=globalThis.AbortSignal;if(typeof Pt>"u"){me=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Pt=class{constructor(){t()}signal=new me;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let i=xt.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const t=()=>{i&&(i=!1,ge("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const qe=i=>!pe.has(i),at=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),be=i=>at(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Gt:null:null;class Gt extends Array{constructor(t){super(t),this.fill(0)}}class Tt{heap;length;static#a=!1;static create(t){const e=be(t);if(!e)return[];Tt.#a=!0;const n=new Tt(t,e);return Tt.#a=!1,n}constructor(t,e){if(!Tt.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class le{#a;#h;#p;#g;#L;#F;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#i;#n;#t;#c;#u;#r;#l;#b;#o;#w;#y;#d;#v;#E;#f;static unsafeExposeInternals(t){return{starts:t.#y,ttls:t.#d,sizes:t.#w,keyMap:t.#i,keyList:t.#n,valList:t.#t,next:t.#c,prev:t.#u,get head(){return t.#r},get tail(){return t.#l},free:t.#b,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,n,s,o)=>t.#I(e,n,s,o),moveToTail:e=>t.#O(e),indexes:e=>t.#S(e),rindexes:e=>t.#k(e),isStale:e=>t.#_(e)}}get max(){return this.#a}get maxSize(){return this.#h}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#L}get memoMethod(){return this.#F}get dispose(){return this.#p}get disposeAfter(){return this.#g}constructor(t){const{max:e=0,ttl:n,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:r,dispose:u,disposeAfter:m,noDisposeOnSet:h,noUpdateTTL:d,maxSize:b=0,maxEntrySize:w=0,sizeCalculation:v,fetchMethod:R,memoMethod:g,noDeleteOnFetchRejection:S,noDeleteOnStaleGet:k,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:A,ignoreFetchAbort:O}=t;if(e!==0&&!at(e))throw new TypeError("max option must be a nonnegative integer");const C=e?be(e):Array;if(!C)throw new Error("invalid max value: "+e);if(this.#a=e,this.#h=b,this.maxEntrySize=w||this.#h,this.sizeCalculation=v,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#F=g,R!==void 0&&typeof R!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=R,this.#E=!!R,this.#i=new Map,this.#n=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#c=new C(e),this.#u=new C(e),this.#r=0,this.#l=0,this.#b=Tt.create(e),this.#s=0,this.#m=0,typeof u=="function"&&(this.#p=u),typeof m=="function"?(this.#g=m,this.#o=[]):(this.#g=void 0,this.#o=void 0),this.#v=!!this.#p,this.#f=!!this.#g,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!S,this.allowStaleOnFetchRejection=!!p,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!O,this.maxEntrySize!==0){if(this.#h!==0&&!at(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!at(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#G()}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!k,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=at(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!at(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#a===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#h){const N="LRU_CACHE_UNBOUNDED";qe(N)&&(pe.add(N),ge("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,le))}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#M(){const t=new Gt(this.#a),e=new Gt(this.#a);this.#d=t,this.#y=e,this.#U=(o,l,a=mt.now())=>{if(e[o]=l!==0?a:0,t[o]=l,l!==0&&this.ttlAutopurge){const r=setTimeout(()=>{this.#_(o)&&this.#T(this.#n[o],"expire")},l+1);r.unref&&r.unref()}},this.#C=o=>{e[o]=t[o]!==0?mt.now():0},this.#R=(o,l)=>{if(t[l]){const a=t[l],r=e[l];if(!a||!r)return;o.ttl=a,o.start=r,o.now=n||s();const u=o.now-r;o.remainingTTL=a-u}};let n=0;const s=()=>{const o=mt.now();if(this.ttlResolution>0){n=o;const l=setTimeout(()=>n=0,this.ttlResolution);l.unref&&l.unref()}return o};this.getRemainingTTL=o=>{const l=this.#i.get(o);if(l===void 0)return 0;const a=t[l],r=e[l];if(!a||!r)return 1/0;const u=(n||s())-r;return a-u},this.#_=o=>{const l=e[o],a=t[o];return!!a&&!!l&&(n||s())-l>a}}#C=()=>{};#R=()=>{};#U=()=>{};#_=()=>!1;#G(){const t=new Gt(this.#a);this.#m=0,this.#w=t,this.#A=e=>{this.#m-=t[e],t[e]=0},this.#W=(e,n,s,o)=>{if(this.#e(n))return 0;if(!at(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(n,e),!at(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#z=(e,n,s)=>{if(t[e]=n,this.#h){const o=this.#h-t[e];for(;this.#m>o;)this.#N(!0)}this.#m+=t[e],s&&(s.entrySize=n,s.totalCalculatedSize=this.#m)}}#A=t=>{};#z=(t,e,n)=>{};#W=(t,e,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:t=this.allowStale}={}){if(this.#s)for(let e=this.#l;!(!this.#D(e)||((t||!this.#_(e))&&(yield e),e===this.#r));)e=this.#u[e]}*#k({allowStale:t=this.allowStale}={}){if(this.#s)for(let e=this.#r;!(!this.#D(e)||((t||!this.#_(e))&&(yield e),e===this.#l));)e=this.#c[e]}#D(t){return t!==void 0&&this.#i.get(this.#n[t])===t}*entries(){for(const t of this.#S())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*rentries(){for(const t of this.#k())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*keys(){for(const t of this.#S()){const e=this.#n[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(const t of this.#k()){const e=this.#n[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(const t of this.#S())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(const t of this.#k())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const n of this.#S()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;if(o!==void 0&&t(o,this.#n[n],this))return this.get(this.#n[n],e)}}forEach(t,e=this){for(const n of this.#S()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;o!==void 0&&t.call(e,o,this.#n[n],this)}}rforEach(t,e=this){for(const n of this.#k()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;o!==void 0&&t.call(e,o,this.#n[n],this)}}purgeStale(){let t=!1;for(const e of this.#k({allowStale:!0}))this.#_(e)&&(this.#T(this.#n[e],"expire"),t=!0);return t}info(t){const e=this.#i.get(t);if(e===void 0)return;const n=this.#t[e],s=this.#e(n)?n.__staleWhileFetching:n;if(s===void 0)return;const o={value:s};if(this.#d&&this.#y){const l=this.#d[e],a=this.#y[e];if(l&&a){const r=l-(mt.now()-a);o.ttl=r,o.start=Date.now()}}return this.#w&&(o.size=this.#w[e]),o}dump(){const t=[];for(const e of this.#S({allowStale:!0})){const n=this.#n[e],s=this.#t[e],o=this.#e(s)?s.__staleWhileFetching:s;if(o===void 0||n===void 0)continue;const l={value:o};if(this.#d&&this.#y){l.ttl=this.#d[e];const a=mt.now()-this.#y[e];l.start=Math.floor(Date.now()-a)}this.#w&&(l.size=this.#w[e]),t.unshift([n,l])}return t}load(t){this.clear();for(const[e,n]of t){if(n.start){const s=Date.now()-n.start;n.start=mt.now()-s}this.set(e,n.value,n)}}set(t,e,n={}){if(e===void 0)return this.delete(t),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:r}=n;let{noUpdateTTL:u=this.noUpdateTTL}=n;const m=this.#W(t,e,n.size||0,a);if(this.maxEntrySize&&m>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.#T(t,"set"),this;let h=this.#s===0?void 0:this.#i.get(t);if(h===void 0)h=this.#s===0?this.#l:this.#b.length!==0?this.#b.pop():this.#s===this.#a?this.#N(!1):this.#s,this.#n[h]=t,this.#t[h]=e,this.#i.set(t,h),this.#c[this.#l]=h,this.#u[h]=this.#l,this.#l=h,this.#s++,this.#z(h,m,r),r&&(r.set="add"),u=!1;else{this.#O(h);const d=this.#t[h];if(e!==d){if(this.#E&&this.#e(d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:b}=d;b!==void 0&&!l&&(this.#v&&this.#p?.(b,t,"set"),this.#f&&this.#o?.push([b,t,"set"]))}else l||(this.#v&&this.#p?.(d,t,"set"),this.#f&&this.#o?.push([d,t,"set"]));if(this.#A(h),this.#z(h,m,r),this.#t[h]=e,r){r.set="replace";const b=d&&this.#e(d)?d.__staleWhileFetching:d;b!==void 0&&(r.oldValue=b)}}else r&&(r.set="update")}if(s!==0&&!this.#d&&this.#M(),this.#d&&(u||this.#U(h,s,o),r&&this.#R(r,h)),!l&&this.#f&&this.#o){const d=this.#o;let b;for(;b=d?.shift();)this.#g?.(...b)}return this}pop(){try{for(;this.#s;){const t=this.#t[this.#r];if(this.#N(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#f&&this.#o){const t=this.#o;let e;for(;e=t?.shift();)this.#g?.(...e)}}}#N(t){const e=this.#r,n=this.#n[e],s=this.#t[e];return this.#E&&this.#e(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(s,n,"evict"),this.#f&&this.#o?.push([s,n,"evict"])),this.#A(e),t&&(this.#n[e]=void 0,this.#t[e]=void 0,this.#b.push(e)),this.#s===1?(this.#r=this.#l=0,this.#b.length=0):this.#r=this.#c[e],this.#i.delete(n),this.#s--,e}has(t,e={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=e,o=this.#i.get(t);if(o!==void 0){const l=this.#t[o];if(this.#e(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#_(o))s&&(s.has="stale",this.#R(s,o));else return n&&this.#C(o),s&&(s.has="hit",this.#R(s,o)),!0}else s&&(s.has="miss");return!1}peek(t,e={}){const{allowStale:n=this.allowStale}=e,s=this.#i.get(t);if(s===void 0||!n&&this.#_(s))return;const o=this.#t[s];return this.#e(o)?o.__staleWhileFetching:o}#I(t,e,n,s){const o=e===void 0?void 0:this.#t[e];if(this.#e(o))return o;const l=new Pt,{signal:a}=n;a?.addEventListener("abort",()=>l.abort(a.reason),{signal:l.signal});const r={signal:l.signal,options:n,context:s},u=(v,R=!1)=>{const{aborted:g}=l.signal,S=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(g&&!R?(n.status.fetchAborted=!0,n.status.fetchError=l.signal.reason,S&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),g&&!S&&!R)return h(l.signal.reason);const k=b;return this.#t[e]===b&&(v===void 0?k.__staleWhileFetching?this.#t[e]=k.__staleWhileFetching:this.#T(t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,v,r.options))),v},m=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),h(v)),h=v=>{const{aborted:R}=l.signal,g=R&&n.allowStaleOnFetchAbort,S=g||n.allowStaleOnFetchRejection,k=S||n.noDeleteOnFetchRejection,p=b;if(this.#t[e]===b&&(!k||p.__staleWhileFetching===void 0?this.#T(t,"fetch"):g||(this.#t[e]=p.__staleWhileFetching)),S)return n.status&&p.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw v},d=(v,R)=>{const g=this.#L?.(t,o,r);g&&g instanceof Promise&&g.then(S=>v(S===void 0?void 0:S),R),l.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=S=>u(S,!0)))})};n.status&&(n.status.fetchDispatched=!0);const b=new Promise(d).then(u,m),w=Object.assign(b,{__abortController:l,__staleWhileFetching:o,__returned:void 0});return e===void 0?(this.set(t,w,{...r.options,status:void 0}),e=this.#i.get(t)):this.#t[e]=w,w}#e(t){if(!this.#E)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Pt}async fetch(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:b=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:v,forceRefresh:R=!1,status:g,signal:S}=e;if(!this.#E)return g&&(g.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:g});const k={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:l,noDisposeOnSet:a,size:r,sizeCalculation:u,noUpdateTTL:m,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:w,ignoreFetchAbort:b,status:g,signal:S};let p=this.#i.get(t);if(p===void 0){g&&(g.fetch="miss");const A=this.#I(t,p,k,v);return A.__returned=A}else{const A=this.#t[p];if(this.#e(A)){const j=n&&A.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",j&&(g.returnedStale=!0)),j?A.__staleWhileFetching:A.__returned=A}const O=this.#_(p);if(!R&&!O)return g&&(g.fetch="hit"),this.#O(p),s&&this.#C(p),g&&this.#R(g,p),A;const C=this.#I(t,p,k,v),D=C.__staleWhileFetching!==void 0&&n;return g&&(g.fetch=O?"stale":"refresh",D&&O&&(g.returnedStale=!0)),D?C.__staleWhileFetching:C.__returned=C}}async forceFetch(t,e={}){const n=await this.fetch(t,e);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,e={}){const n=this.#F;if(!n)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...l}=e,a=this.get(t,l);if(!o&&a!==void 0)return a;const r=n(t,a,{options:l,context:s});return this.set(t,r,l),r}get(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:l}=e,a=this.#i.get(t);if(a!==void 0){const r=this.#t[a],u=this.#e(r);return l&&this.#R(l,a),this.#_(a)?(l&&(l.get="stale"),u?(l&&n&&r.__staleWhileFetching!==void 0&&(l.returnedStale=!0),n?r.__staleWhileFetching:void 0):(o||this.#T(t,"expire"),l&&n&&(l.returnedStale=!0),n?r:void 0)):(l&&(l.get="hit"),u?r.__staleWhileFetching:(this.#O(a),s&&this.#C(a),r))}else l&&(l.get="miss")}#j(t,e){this.#u[e]=t,this.#c[t]=e}#O(t){t!==this.#l&&(t===this.#r?this.#r=this.#c[t]:this.#j(this.#u[t],this.#c[t]),this.#j(this.#l,t),this.#l=t)}delete(t){return this.#T(t,"delete")}#T(t,e){let n=!1;if(this.#s!==0){const s=this.#i.get(t);if(s!==void 0)if(n=!0,this.#s===1)this.#P(e);else{this.#A(s);const o=this.#t[s];if(this.#e(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(o,t,e),this.#f&&this.#o?.push([o,t,e])),this.#i.delete(t),this.#n[s]=void 0,this.#t[s]=void 0,s===this.#l)this.#l=this.#u[s];else if(s===this.#r)this.#r=this.#c[s];else{const l=this.#u[s];this.#c[l]=this.#c[s];const a=this.#c[s];this.#u[a]=this.#u[s]}this.#s--,this.#b.push(s)}}if(this.#f&&this.#o?.length){const s=this.#o;let o;for(;o=s?.shift();)this.#g?.(...o)}return n}clear(){return this.#P("delete")}#P(t){for(const e of this.#k({allowStale:!0})){const n=this.#t[e];if(this.#e(n))n.__abortController.abort(new Error("deleted"));else{const s=this.#n[e];this.#v&&this.#p?.(n,s,t),this.#f&&this.#o?.push([n,s,t])}}if(this.#i.clear(),this.#t.fill(void 0),this.#n.fill(void 0),this.#d&&this.#y&&(this.#d.fill(0),this.#y.fill(0)),this.#w&&this.#w.fill(0),this.#r=0,this.#l=0,this.#b.length=0,this.#m=0,this.#s=0,this.#f&&this.#o){const e=this.#o;let n;for(;n=e?.shift();)this.#g?.(...n)}}}class we{constructor(t){var e;this.cache=new le({ttl:(e=t?.ttl)!==null&&e!==void 0?e:1e3*60,ttlAutopurge:!0,allowStale:!1})}get(t){const e=this.cache.get(t);if(e){if(e.expiry>Date.now())return e.data;this.delete(t)}return null}set(t,e,n){const s=Date.now()+n;this.cache.set(t,{data:e,expiry:s},{ttl:n})}delete(t){this.cache.delete(t)}clear(){this.cache.clear()}}const Ve=new we,ye=new _e({cache:Ve}),Je=async i=>{const t={__mode:"content_types_for_search_action",blog_id:i.blogId,magic_token:i.magicToken};return await ye.fetchWithCache({key:ye.generateCacheKey({prefix:"content_types",params:t}),fetcher:async()=>{let e,n;try{n=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(e="possibly unloaded")}})}catch(s){e??(e=s)}return e||n.result.success!==1?{contentTypes:[]}:{contentTypes:n.result.content_types}}})};function J(){}function ve(i){return i()}function Se(){return Object.create(null)}function st(i){i.forEach(ve)}function $t(i){return typeof i=="function"}function Ct(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function Ke(i){return Object.keys(i).length===0}function bt(i){return i&&$t(i.destroy)?i.destroy:J}function c(i,t){i.appendChild(t)}function z(i,t,e){i.insertBefore(t,e||null)}function F(i){i.parentNode&&i.parentNode.removeChild(i)}function Bt(i,t){for(let e=0;e<i.length;e+=1)i[e]&&i[e].d(t)}function _(i){return document.createElement(i)}function te(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function W(i){return document.createTextNode(i)}function E(){return W(" ")}function At(){return W("")}function M(i,t,e,n){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e,n)}function f(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function ke(i,t,e){i.setAttributeNS("http://www.w3.org/1999/xlink",t,e)}function Qe(i){let t;return{p(...e){t=e,t.forEach(n=>i.push(n))},r(){t.forEach(e=>i.splice(i.indexOf(e),1))}}}function Xe(i){return Array.from(i.childNodes)}function lt(i,t){t=""+t,i.data!==t&&(i.data=t)}function $(i,t){i.value=t??""}function Te(i,t,e){for(let n=0;n<i.options.length;n+=1){const s=i.options[n];if(s.__value===t){s.selected=!0;return}}(!e||t!==void 0)&&(i.selectedIndex=-1)}function Ye(i){const t=i.querySelector(":checked");return t&&t.__value}function Re(i,t,e){i.classList.toggle(t,!!e)}let Ot;function Lt(i){Ot=i}function Ze(){if(!Ot)throw new Error("Function called outside component initialization");return Ot}function ee(i){Ze().$$.on_mount.push(i)}const wt=[],yt=[];let vt=[];const Ee=[],Ce=Promise.resolve();let ne=!1;function Ae(){ne||(ne=!0,Ce.then(Oe))}function xe(){return Ae(),Ce}function Ht(i){vt.push(i)}const ie=new Set;let St=0;function Oe(){if(St!==0)return;const i=Ot;do{try{for(;St<wt.length;){const t=wt[St];St++,Lt(t),$e(t.$$)}}catch(t){throw wt.length=0,St=0,t}for(Lt(null),wt.length=0,St=0;yt.length;)yt.pop()();for(let t=0;t<vt.length;t+=1){const e=vt[t];ie.has(e)||(ie.add(e),e())}vt.length=0}while(wt.length);for(;Ee.length;)Ee.pop()();ne=!1,ie.clear(),Lt(i)}function $e(i){if(i.fragment!==null){i.update(),st(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(Ht)}}function tn(i){const t=[],e=[];vt.forEach(n=>i.indexOf(n)===-1?t.push(n):e.push(n)),e.forEach(n=>n()),vt=t}const qt=new Set;let dt;function Vt(){dt={r:0,c:[],p:dt}}function Jt(){dt.r||st(dt.c),dt=dt.p}function B(i,t){i&&i.i&&(qt.delete(i),i.i(t))}function Y(i,t,e,n){if(i&&i.o){if(qt.has(i))return;qt.add(i),dt.c.push(()=>{qt.delete(i),n&&(e&&i.d(1),n())}),i.o(t)}else n&&n()}function ct(i){return i?.length!==void 0?i:Array.from(i)}function Kt(i){i&&i.c()}function Ft(i,t,e){const{fragment:n,after_update:s}=i.$$;n&&n.m(t,e),Ht(()=>{const o=i.$$.on_mount.map(ve).filter($t);i.$$.on_destroy?i.$$.on_destroy.push(...o):st(o),i.$$.on_mount=[]}),s.forEach(Ht)}function zt(i,t){const e=i.$$;e.fragment!==null&&(tn(e.after_update),st(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function en(i,t){i.$$.dirty[0]===-1&&(wt.push(i),Ae(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function Nt(i,t,e,n,s,o,l=null,a=[-1]){const r=Ot;Lt(i);const u=i.$$={fragment:null,ctx:[],props:o,update:J,not_equal:s,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Se(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};l&&l(u.root);let m=!1;if(u.ctx=e?e(i,t.props||{},(h,d,...b)=>{const w=b.length?b[0]:d;return u.ctx&&s(u.ctx[h],u.ctx[h]=w)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](w),m&&en(i,h)),d}):[],u.update(),m=!0,st(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=Xe(t.target);u.fragment&&u.fragment.l(h),h.forEach(F)}else u.fragment&&u.fragment.c();t.intro&&B(i.$$.fragment),Ft(i,t.target,t.anchor),Oe()}Lt(r)}class It{$$=void 0;$$set=void 0;$destroy(){zt(this,1),this.$destroy=J}$on(t,e){if(!$t(e))return J;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!Ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function kt(i,t="body"){let e;async function n(o){if(t=o,typeof t=="string"){if(e=document.querySelector(t),e===null&&(await xe(),e=document.querySelector(t)),e===null)throw new Error(`No element found matching css selector: "${t}"`)}else if(t instanceof HTMLElement)e=t;else throw new TypeError(`Unknown portal target type: ${t===null?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);e.appendChild(i),i.hidden=!1}function s(){i.parentNode&&i.parentNode.removeChild(i)}return n(t),{update:n,destroy:s}}function se(i,t){return!i.some(e=>e&&e.contains(t))}function Le(i,t,e){const n=i.slice();return n[9]=t[e],n}function Fe(i){let t,e,n,s,o,l,a,r,u,m,h,d=window.trans("New [_1] creation",window.trans("Entry"))+"",b,w,v,R,g,S=window.trans("New [_1] creation",window.trans("Page"))+"",k,p,A,O,C=i[1].length>0&&ze(i);return{c(){t=_("div"),e=_("div"),n=_("button"),n.innerHTML='<span aria-hidden="true">\xD7</span>',s=E(),o=_("div"),C&&C.c(),l=E(),a=_("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=E(),u=_("ul"),m=_("li"),h=_("a"),b=W(d),v=E(),R=_("li"),g=_("a"),k=W(S),f(n,"type","button"),f(n,"class","close"),f(n,"data-dismiss","modal"),f(n,"aria-label","Close"),f(e,"class","modal-header"),f(a,"class","block-title"),f(h,"href",w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${i[2]}`),f(g,"href",p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${i[2]}`),f(u,"class","create-button-list"),f(o,"class","modal-body"),f(t,"class","modal create-button-modal")},m(N,D){z(N,t,D),c(t,e),c(e,n),c(t,s),c(t,o),C&&C.m(o,null),c(o,l),c(o,a),c(o,r),c(o,u),c(u,m),c(m,h),c(h,b),c(u,v),c(u,R),c(R,g),c(g,k),i[8](t),A||(O=[M(n,"click",i[4]),bt(kt.call(null,t,"body"))],A=!0)},p(N,D){N[1].length>0?C?C.p(N,D):(C=ze(N),C.c(),C.m(o,l)):C&&(C.d(1),C=null),D&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${N[2]}`)&&f(h,"href",w),D&4&&p!==(p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${N[2]}`)&&f(g,"href",p)},d(N){N&&F(t),C&&C.d(),i[8](null),A=!1,st(O)}}}function ze(i){let t,e,n,s=ct(i[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=Ne(Le(i,s,l));return{c(){t=_("p"),t.textContent=`${window.trans("Content Data")}`,e=E(),n=_("ul");for(let l=0;l<o.length;l+=1)o[l].c();f(t,"class","block-title"),f(n,"class","create-button-list")},m(l,a){z(l,t,a),z(l,e,a),z(l,n,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,null)},p(l,a){if(a&6){s=ct(l[1]);let r;for(r=0;r<s.length;r+=1){const u=Le(l,s,r);o[r]?o[r].p(u,a):(o[r]=Ne(u),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(l){l&&(F(t),F(e),F(n)),Bt(o,l)}}}function Ne(i){let t,e,n=window.trans("New [_1] creation",i[9].name)+"",s,o,l;return{c(){t=_("li"),e=_("a"),s=W(n),l=E(),f(e,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${i[9].id}&type=content_data_${i[9].id}&blog_id=${i[2]}`)},m(a,r){z(a,t,r),c(t,e),c(e,s),c(t,l)},p(a,r){r&2&&n!==(n=window.trans("New [_1] creation",a[9].name)+"")&&lt(s,n),r&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[9].id}&type=content_data_${a[9].id}&blog_id=${a[2]}`)&&f(e,"href",o)},d(a){a&&F(t)}}}function sn(i){let t,e,n,s,o=i[0]&&Fe(i);return{c(){t=E(),o&&o.c(),e=At()},m(l,a){z(l,t,a),o&&o.m(l,a),z(l,e,a),n||(s=M(document.body,"click",i[5]),n=!0)},p(l,[a]){l[0]?o?o.p(l,a):(o=Fe(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:J,o:J,d(l){l&&(F(t),F(e)),o&&o.d(l),n=!1,s()}}}function ln(i,t,e){let{contentTypes:n=[]}=t,{blog_id:s}=t,{open:o=!1}=t,{buttonRef:l=null}=t,{anchorRef:a=null}=t,r=null;const u=()=>{e(0,o=!1)},m=d=>{const b=d.target;o&&se([l,r],b)&&u()};function h(d){yt[d?"unshift":"push"](()=>{r=d,e(3,r),e(7,a),e(0,o)})}return i.$$set=d=>{"contentTypes"in d&&e(1,n=d.contentTypes),"blog_id"in d&&e(2,s=d.blog_id),"open"in d&&e(0,o=d.open),"buttonRef"in d&&e(6,l=d.buttonRef),"anchorRef"in d&&e(7,a=d.anchorRef)},i.$$.update=()=>{if(i.$$.dirty&137&&a){if(r){const b=`calc(${a.getBoundingClientRect().bottom}px + 10px)`;e(3,r.style.top=b,r)}o?a.classList.add("open"):a.classList.remove("open")}},[o,n,s,r,u,m,l,a,h]}class on extends It{constructor(t){super(),Nt(this,t,ln,sn,Ct,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7})}}const rn=({target:i,props:t})=>{const e=new on({target:i,props:t});i.addEventListener("click",n=>{n.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,e.$set(t)})};function an(i){let t,e,n,s;return{c(){t=_("div"),f(t,"class","mt-primaryNavigation-overlay"),f(t,"style",e=`display: ${i[0]?"block":"none"}`)},m(o,l){z(o,t,l),n||(s=[bt(kt.call(null,t,"body")),M(t,"mouseenter",i[1])],n=!0)},p(o,[l]){l&1&&e!==(e=`display: ${o[0]?"block":"none"}`)&&f(t,"style",e)},i:J,o:J,d(o){o&&F(t),n=!1,st(s)}}}function cn(i,t,e){let{buttonRef:n}=t,{collapsed:s=!1}=t,{isStored:o=!1}=t,l=!1;const a=(d,b)=>{const w=document.querySelector('[data-is="content-wrapper"]');b?w.classList.add(d):w.classList.remove(d)},r=()=>{a("collapsed",s)},u=()=>{a("mouseover",l)},m=()=>{var d;s&&(l=!0,u(),(d=document.querySelector('[data-is="primary-navigation"]'))===null||d===void 0||d.addEventListener("mouseleave",h,{once:!0}))},h=()=>{l=!1,u()};return ee(()=>{o||window.innerWidth<1e3&&e(0,s=!0),r()}),i.$$set=d=>{"buttonRef"in d&&e(2,n=d.buttonRef),"collapsed"in d&&e(0,s=d.collapsed),"isStored"in d&&e(3,o=d.isStored)},i.$$.update=()=>{i.$$.dirty&5&&(r(),l=!1,u(),n&&(s?(n.classList.remove("expanded"),n.classList.add("collapsed")):(n.classList.remove("collapsed"),n.classList.add("expanded"))))},[s,m,n,o]}class fn extends It{constructor(t){super(),Nt(this,t,cn,an,Ct,{buttonRef:2,collapsed:0,isStored:3})}}function hn(i,t){const e=new fn({target:i,props:{collapsed:t.collapsed,buttonRef:t.buttonRef,isStored:t.isStored}});t.buttonRef.addEventListener("click",()=>{t.buttonRef.classList.contains("collapsed")?t.collapsed=!1:t.collapsed=!0,e.$set(t),sessionStorage.setItem(t.sessionName,t.collapsed.toString())})}function Ie(i){let t,e;return{c(){t=te("title"),e=W(i[2])},m(n,s){z(n,t,s),c(t,e)},p(n,s){s&4&&lt(e,n[2])},d(n){n&&F(t)}}}function un(i){let t,e,n=i[2]&&Ie(i);return{c(){t=te("svg"),n&&n.c(),e=te("use"),ke(e,"xlink:href",i[1]),f(t,"role","img"),f(t,"class",i[0])},m(s,o){z(s,t,o),n&&n.m(t,null),c(t,e)},p(s,[o]){s[2]?n?n.p(s,o):(n=Ie(s),n.c(),n.m(t,e)):n&&(n.d(1),n=null),o&2&&ke(e,"xlink:href",s[1]),o&1&&f(t,"class",s[0])},i:J,o:J,d(s){s&&F(t),n&&n.d()}}}function dn(i,t,e){let{class:n}=t,{href:s}=t,{title:o}=t;return i.$$set=l=>{"class"in l&&e(0,n=l.class),"href"in l&&e(1,s=l.href),"title"in l&&e(2,o=l.title)},[n,s,o]}class Qt extends It{constructor(t){super(),Nt(this,t,dn,un,Ct,{class:0,href:1,title:2})}}function Me(i,t,e){const n=i.slice();return n[17]=t[e],n}function Ue(i,t,e){const n=i.slice();return n[20]=t[e],n}function We(i){let t,e,n,s,o,l,a,r,u,m,h,d,b,w,v,R,g,S,k,p,A,O,C,N,D,j,nt,tt,K,Q,ft,V,T,et,Rt,H=ct(i[5]),P=[];for(let y=0;y<H.length;y+=1)P[y]=De(Ue(i,H,y));function ht(y,U){return y[4].length>0?pn:_n}let ut=ht(i),q=ut(i);return Q=new Qt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){t=_("div"),e=E(),n=_("div"),s=_("div"),o=_("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',l=E(),a=_("div"),r=_("form"),u=_("input"),m=E(),h=_("input"),d=E(),b=_("input"),w=E(),v=_("input"),R=E(),g=_("input"),S=E(),k=_("div");for(let y=0;y<P.length;y+=1)P[y].c();p=E(),A=_("div"),O=_("select"),q.c(),N=E(),D=_("div"),j=_("input"),nt=E(),tt=_("div"),K=_("button"),Kt(Q.$$.fragment),ft=E(),V=_("span"),V.textContent=`${window.trans("Search")}`,f(t,"class","search-button-modal-overlay"),f(o,"type","button"),f(o,"class","close"),f(o,"data-dismiss","modal"),f(o,"aria-label","Close"),f(s,"class","modal-header"),f(u,"type","hidden"),f(u,"name","__mode"),u.value="search_replace",f(h,"type","hidden"),f(h,"name","blog_id"),h.value=i[2],f(b,"type","hidden"),f(b,"name","_type"),f(v,"type","hidden"),f(v,"name","do_search"),v.value="1",f(g,"type","hidden"),f(g,"name","magic_token"),g.value=i[3],f(k,"class","search-type"),f(O,"class","custom-select form-control form-select"),f(O,"name","content_type_id"),O.disabled=C=i[1]!=="content_data"||i[4].length===0,Re(O,"disabled",i[1]!=="content_data"),f(A,"class","search-content-type"),f(j,"type","text"),f(j,"placeholder",window.trans("Select target and search text...")),f(j,"name","search"),f(D,"class","search-text-box"),f(K,"type","submit"),f(K,"class","btn btn-primary"),f(tt,"class","submit-button"),f(r,"class","search-form"),f(r,"method","post"),f(r,"action",window.ScriptURI),f(a,"class","modal-body"),f(n,"class","modal search-button-modal")},m(y,U){z(y,t,U),z(y,e,U),z(y,n,U),c(n,s),c(s,o),c(n,l),c(n,a),c(a,r),c(r,u),c(r,m),c(r,h),c(r,d),c(r,b),$(b,i[1]),c(r,w),c(r,v),c(r,R),c(r,g),c(r,S),c(r,k);for(let I=0;I<P.length;I+=1)P[I]&&P[I].m(k,null);c(r,p),c(r,A),c(A,O),q.m(O,null),c(r,N),c(r,D),c(D,j),i[15](j),c(r,nt),c(r,tt),c(tt,K),Ft(Q,K,null),c(K,ft),c(K,V),i[16](n),T=!0,et||(Rt=[M(t,"click",i[8]),bt(kt.call(null,t,"body")),M(o,"click",i[8]),M(b,"input",i[12]),bt(kt.call(null,n,"body"))],et=!0)},p(y,U){if((!T||U&4)&&(h.value=y[2]),U&2&&$(b,y[1]),(!T||U&8)&&(g.value=y[3]),U&34){H=ct(y[5]);let I;for(I=0;I<H.length;I+=1){const Et=Ue(y,H,I);P[I]?P[I].p(Et,U):(P[I]=De(Et),P[I].c(),P[I].m(k,null))}for(;I<P.length;I+=1)P[I].d(1);P.length=H.length}ut===(ut=ht(y))&&q?q.p(y,U):(q.d(1),q=ut(y),q&&(q.c(),q.m(O,null))),(!T||U&18&&C!==(C=y[1]!=="content_data"||y[4].length===0))&&(O.disabled=C),(!T||U&2)&&Re(O,"disabled",y[1]!=="content_data")},i(y){T||(B(Q.$$.fragment,y),T=!0)},o(y){Y(Q.$$.fragment,y),T=!1},d(y){y&&(F(t),F(e),F(n)),Bt(P,y),q.d(),i[15](null),zt(Q),i[16](null),et=!1,st(Rt)}}}function De(i){let t,e,n,s=!1,o,l,a=i[20].label+"",r,u,m,h,d;return m=Qe(i[14][0]),{c(){t=_("label"),e=_("input"),l=E(),r=W(a),u=E(),f(e,"type","radio"),f(e,"name","type"),e.__value=n=i[20].key,$(e,e.__value),f(e,"id",o=i[20].key),m.p(e)},m(b,w){z(b,t,w),c(t,e),e.checked=e.__value===i[1],c(t,l),c(t,r),c(t,u),h||(d=M(e,"change",i[13]),h=!0)},p(b,w){w&32&&n!==(n=b[20].key)&&(e.__value=n,$(e,e.__value),s=!0),w&32&&o!==(o=b[20].key)&&f(e,"id",o),(s||w&34)&&(e.checked=e.__value===b[1]),w&32&&a!==(a=b[20].label+"")&&lt(r,a)},d(b){b&&F(t),m.r(),h=!1,d()}}}function _n(i){let t;return{c(){t=_("option"),t.textContent=`${window.trans("No Content Type could be found.")}`,t.__value="",$(t,t.__value)},m(e,n){z(e,t,n)},p:J,d(e){e&&F(t)}}}function pn(i){let t,e=ct(i[4]),n=[];for(let s=0;s<e.length;s+=1)n[s]=je(Me(i,e,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=At()},m(s,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,o);z(s,t,o)},p(s,o){if(o&16){e=ct(s[4]);let l;for(l=0;l<e.length;l+=1){const a=Me(s,e,l);n[l]?n[l].p(a,o):(n[l]=je(a),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=e.length}},d(s){s&&F(t),Bt(n,s)}}}function je(i){let t,e=i[17].name+"",n,s;return{c(){t=_("option"),n=W(e),t.__value=s=i[17].id,$(t,t.__value)},m(o,l){z(o,t,l),c(t,n)},p(o,l){l&16&&e!==(e=o[17].name+"")&&lt(n,e),l&16&&s!==(s=o[17].id)&&(t.__value=s,$(t,t.__value))},d(o){o&&F(t)}}}function gn(i){let t,e,n,s,o,l=i[0]&&We(i);return{c(){t=E(),l&&l.c(),e=At()},m(a,r){z(a,t,r),l&&l.m(a,r),z(a,e,r),n=!0,s||(o=M(document.body,"click",i[9]),s=!0)},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&B(l,1)):(l=We(a),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(Vt(),Y(l,1,1,()=>{l=null}),Jt())},i(a){n||(B(l),n=!0)},o(a){Y(l),n=!1},d(a){a&&(F(t),F(e)),l&&l.d(a),s=!1,o()}}}function mn(i,t,e){let{blogId:n}=t,{magicToken:s}=t,{contentTypes:o=[]}=t,{open:l=!1}=t,{buttonRef:a}=t,{anchorRef:r}=t,{searchTabs:u}=t,{objectType:m}=t;const h=()=>{e(0,l=!1)};let d=null;const b=p=>{const A=p.target;l&&se([a,d],A)&&h()};let w=null;ee(async()=>{m&&u.find(p=>p.key===m)||e(1,m=u[0].key)});const v=[[]];function R(){m=this.value,e(1,m)}function g(){m=this.__value,e(1,m)}function S(p){yt[p?"unshift":"push"](()=>{w=p,e(6,w)})}function k(p){yt[p?"unshift":"push"](()=>{d=p,e(7,d)})}return i.$$set=p=>{"blogId"in p&&e(2,n=p.blogId),"magicToken"in p&&e(3,s=p.magicToken),"contentTypes"in p&&e(4,o=p.contentTypes),"open"in p&&e(0,l=p.open),"buttonRef"in p&&e(10,a=p.buttonRef),"anchorRef"in p&&e(11,r=p.anchorRef),"searchTabs"in p&&e(5,u=p.searchTabs),"objectType"in p&&e(1,m=p.objectType)},i.$$.update=()=>{i.$$.dirty&2049&&r&&(l?r.classList.add("open"):r.classList.remove("open")),i.$$.dirty&65&&l&&w&&w.focus()},[l,m,n,s,o,u,w,d,h,b,a,r,R,g,v,S,k]}class bn extends It{constructor(t){super(),Nt(this,t,mn,gn,Ct,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function wn(i,t){var e;let n=[];if(i.dataset.searchTabsJson){const o=JSON.parse(i.dataset.searchTabsJson);o.success&&(n=o.data)}const s=new bn({target:i,props:{searchTabs:n,objectType:(e=i.dataset.objectType)!==null&&e!==void 0?e:"",...t}});t.anchorRef.addEventListener("click",o=>{o.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,s.$set(t)})}const yn=new we,Pe=new _e({cache:yn}),vn=async i=>{const t={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(i.items),limit:i.limit,magic_token:i.magicToken,page:i.page,sort_by:"id",sort_order:"descend"};return await Pe.fetchWithCache({key:Pe.generateCacheKey({prefix:"sites",params:t}),fetcher:async()=>{let e,n;try{n=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(e="possibly unloaded")}})}catch(o){e??(e=o)}if(e||n.error)return{count:0,page:0,pageMax:0,sites:[],error:e??n.error};const s=n.result.objects.map(o=>{const l=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:l,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(n.result.count),page:Number.parseInt(n.result.page),pageMax:Number.parseInt(n.result.page_max),sites:s}}})};function Ge(i,t,e){const n=i.slice();return n[30]=t[e],n}function Be(i){let t,e,n,s,o,l,a,r,u,m=window.trans("[_1]Site",i[2].toString())+"",h,d,b,w,v,R,g,S,k,p,A,O,C,N,D,j,nt,tt,K,Q,ft,V,T,et,Rt,H,P,ht,ut,q,y,U,I,Et,_t,it,oe,Mt,pt,re,ot,ae,gt,Ut,ce,Wt,fe,Dt,Xt,jt,X,Z,x,Yt,he;pt=new Qt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const ue=[kn,Sn],rt=[];function de(L,G){return L[7]?0:1}return X=de(i),Z=rt[X]=ue[X](i),{c(){t=_("div"),e=E(),n=_("div"),s=_("div"),o=_("div"),l=_("div"),a=_("div"),r=_("span"),u=W("("),h=W(m),d=W(")"),b=E(),w=_("p"),w.textContent=`${window.trans("Site List")}`,v=E(),R=_("div"),g=_("div"),S=_("button"),k=W("<<"),A=E(),O=_("button"),C=W("<"),D=E(),j=_("span"),nt=_("span"),tt=W(i[3]),K=W("/"),Q=W(i[4]),ft=E(),V=_("button"),T=W(">"),Rt=E(),H=_("button"),P=W(">>"),ut=E(),q=_("div"),y=_("select"),U=_("option"),U.textContent=`${window.trans("All Sites")}`,I=_("option"),I.textContent=`${window.trans("Only to child sites within this system")}`,Et=E(),_t=_("div"),it=_("input"),oe=E(),Mt=_("button"),Kt(pt.$$.fragment),re=E(),ot=_("button"),ot.innerHTML='<span aria-hidden="true">\xD7</span>',ae=E(),gt=_("div"),Ut=_("span"),Ut.textContent=`${window.trans("Site Name")}`,ce=E(),Wt=_("span"),Wt.textContent=`${window.trans("Parent Site")}`,fe=E(),Dt=_("div"),Xt=_("table"),jt=_("tbody"),Z.c(),f(t,"class","site-list-button-modal-overlay"),f(a,"class","site-list-title"),f(S,"type","button"),S.disabled=p=i[3]<=1,f(O,"type","button"),O.disabled=N=i[3]<=1,f(nt,"class","current"),f(j,"class","page-num"),f(V,"type","button"),V.disabled=et=i[3]===i[4],f(H,"type","button"),H.disabled=ht=i[3]===i[4],f(g,"class","prev-next"),U.__value="",$(U,U.__value),I.__value="blog",$(I,I.__value),f(y,"class","custom-select form-control form-select"),i[5]===void 0&&Ht(()=>i[24].call(y)),f(q,"class","site-type-filter"),f(it,"type","text"),f(it,"placeholder",window.trans("Filter by site name")),f(_t,"class","site-name-filter"),f(ot,"type","button"),f(ot,"class","close"),f(ot,"data-dismiss","modal"),f(ot,"aria-label","Close"),f(R,"class","site-list-actions"),f(l,"class","site-list-header"),f(Ut,"class","table-header-col site-list-header-name"),f(Wt,"class","table-header-col site-list-header-parent"),f(gt,"class","site-list-table-header"),f(Dt,"class","site-list-table-wrapper"),f(o,"class","site-list-container"),f(s,"class","modal-body"),f(n,"class","modal site-list-button-modal")},m(L,G){z(L,t,G),z(L,e,G),z(L,n,G),c(n,s),c(s,o),c(o,l),c(l,a),c(a,r),c(r,u),c(r,h),c(r,d),c(a,b),c(a,w),c(l,v),c(l,R),c(R,g),c(g,S),c(S,k),c(g,A),c(g,O),c(O,C),c(g,D),c(g,j),c(j,nt),c(nt,tt),c(j,K),c(j,Q),c(g,ft),c(g,V),c(V,T),c(g,Rt),c(g,H),c(H,P),c(R,ut),c(R,q),c(q,y),c(y,U),c(y,I),Te(y,i[5],!0),c(R,Et),c(R,_t),c(_t,it),$(it,i[6]),c(_t,oe),c(_t,Mt),Ft(pt,Mt,null),c(R,re),c(R,ot),c(o,ae),c(o,gt),c(gt,Ut),c(gt,ce),c(gt,Wt),c(o,fe),c(o,Dt),c(Dt,Xt),c(Xt,jt),rt[X].m(jt,null),i[27](n),x=!0,Yt||(he=[M(t,"click",i[9]),bt(kt.call(null,t,"body")),M(S,"click",i[13]),M(S,"keydown",i[20]),M(O,"click",i[12]),M(O,"keydown",i[21]),M(V,"click",i[10]),M(V,"keydown",i[22]),M(H,"click",i[11]),M(H,"keydown",i[23]),M(y,"change",i[24]),M(y,"change",i[14]),M(it,"input",i[25]),M(it,"keydown",i[26]),M(Mt,"click",i[14]),M(ot,"click",i[9]),bt(kt.call(null,n,"body"))],Yt=!0)},p(L,G){(!x||G[0]&4)&&m!==(m=window.trans("[_1]Site",L[2].toString())+"")&&lt(h,m),(!x||G[0]&8&&p!==(p=L[3]<=1))&&(S.disabled=p),(!x||G[0]&8&&N!==(N=L[3]<=1))&&(O.disabled=N),(!x||G[0]&8)&&lt(tt,L[3]),(!x||G[0]&16)&&lt(Q,L[4]),(!x||G[0]&24&&et!==(et=L[3]===L[4]))&&(V.disabled=et),(!x||G[0]&24&&ht!==(ht=L[3]===L[4]))&&(H.disabled=ht),G[0]&32&&Te(y,L[5]),G[0]&64&&it.value!==L[6]&&$(it,L[6]);let Zt=X;X=de(L),X===Zt?rt[X].p(L,G):(Vt(),Y(rt[Zt],1,1,()=>{rt[Zt]=null}),Jt(),Z=rt[X],Z?Z.p(L,G):(Z=rt[X]=ue[X](L),Z.c()),B(Z,1),Z.m(jt,null))},i(L){x||(B(pt.$$.fragment,L),B(Z),x=!0)},o(L){Y(pt.$$.fragment,L),Y(Z),x=!1},d(L){L&&(F(t),F(e),F(n)),zt(pt),rt[X].d(),i[27](null),Yt=!1,st(he)}}}function Sn(i){let t,e,n=ct(i[1]),s=[];for(let l=0;l<n.length;l+=1)s[l]=He(Ge(i,n,l));const o=l=>Y(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();t=At()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);z(l,t,a),e=!0},p(l,a){if(a[0]&2){n=ct(l[1]);let r;for(r=0;r<n.length;r+=1){const u=Ge(l,n,r);s[r]?(s[r].p(u,a),B(s[r],1)):(s[r]=He(u),s[r].c(),B(s[r],1),s[r].m(t.parentNode,t))}for(Vt(),r=n.length;r<s.length;r+=1)o(r);Jt()}},i(l){if(!e){for(let a=0;a<n.length;a+=1)B(s[a]);e=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Y(s[a]);e=!1},d(l){l&&F(t),Bt(s,l)}}}function kn(i){let t,e;return{c(){t=_("tr"),e=_("td"),e.textContent=`${window.trans("Loading...")}`,f(e,"colspan","2"),f(e,"class","loading")},m(n,s){z(n,t,s),c(t,e)},p:J,i:J,o:J,d(n){n&&F(t)}}}function He(i){let t,e,n,s,o,l=i[30].name+"",a,r,u,m,h,d,b,w,v=i[30].parentSiteName+"",R,g,S;return s=new Qt({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${i[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),h=new Qt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){t=_("tr"),e=_("td"),n=_("a"),Kt(s.$$.fragment),o=E(),a=W(l),u=E(),m=_("a"),Kt(h.$$.fragment),b=E(),w=_("td"),R=W(v),g=E(),f(n,"href",r=`${window.ScriptURI}?__mode=dashboard&blog_id=${i[30].id}`),f(n,"class","dashboard-link"),f(m,"href",d=i[30].siteUrl),f(m,"class","site-link"),f(m,"target","_blank")},m(k,p){z(k,t,p),c(t,e),c(e,n),Ft(s,n,null),c(n,o),c(n,a),c(e,u),c(e,m),Ft(h,m,null),c(t,b),c(t,w),c(w,R),c(t,g),S=!0},p(k,p){const A={};p[0]&2&&(A.href=`${window.StaticURI}images/admin2025/sprite.svg#${k[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),s.$set(A),(!S||p[0]&2)&&l!==(l=k[30].name+"")&&lt(a,l),(!S||p[0]&2&&r!==(r=`${window.ScriptURI}?__mode=dashboard&blog_id=${k[30].id}`))&&f(n,"href",r),(!S||p[0]&2&&d!==(d=k[30].siteUrl))&&f(m,"href",d),(!S||p[0]&2)&&v!==(v=k[30].parentSiteName+"")&&lt(R,v)},i(k){S||(B(s.$$.fragment,k),B(h.$$.fragment,k),S=!0)},o(k){Y(s.$$.fragment,k),Y(h.$$.fragment,k),S=!1},d(k){k&&F(t),zt(s),zt(h)}}}function Tn(i){let t,e,n,s,o,l=i[0]&&Be(i);return{c(){t=E(),l&&l.c(),e=At()},m(a,r){z(a,t,r),l&&l.m(a,r),z(a,e,r),n=!0,s||(o=M(document.body,"click",i[15]),s=!0)},p(a,r){a[0]?l?(l.p(a,r),r[0]&1&&B(l,1)):(l=Be(a),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(Vt(),Y(l,1,1,()=>{l=null}),Jt())},i(a){n||(B(l),n=!0)},o(a){Y(l),n=!1},d(a){a&&(F(t),F(e)),l&&l.d(a),s=!1,o()}}}function Rn(i,t,e){let{magicToken:n}=t,{limit:s=50}=t,{open:o=!1}=t,{buttonRef:l}=t,{anchorRef:a}=t;const r=()=>{e(0,o=!1)};let u=[],m=0,h=1,d=1,b="",w="",v=[],R=!1,g=null;const S=()=>{e(3,h++,h),C()},k=()=>{e(3,h=d),C()},p=()=>{e(3,h--,h),C()},A=()=>{e(3,h=1),C()},O=()=>{v=[],b==="blog"&&(v=[{type:"parent_website",args:{value:""}}]),e(6,w=w.trim()),w!==""&&v.push({type:"name",args:{string:w,option:"contains"}}),e(3,h=1),C()},C=async()=>{e(7,R=!0);const T=await vn({magicToken:n,items:v,page:h,limit:s});e(2,m=T.count),e(4,d=T.pageMax),e(3,h=d!==0?T.page:0),e(1,u=T.sites),e(7,R=!1)},N=T=>{const et=T.target;o&&se([l,g],et)&&r()};ee(async()=>{C()});const D=T=>T.key==="Enter"&&A(),j=T=>T.key==="Enter"&&p(),nt=T=>T.key==="Enter"&&S(),tt=T=>T.key==="Enter"&&k();function K(){b=Ye(this),e(5,b)}function Q(){w=this.value,e(6,w)}const ft=T=>T.key==="Enter"&&O();function V(T){yt[T?"unshift":"push"](()=>{g=T,e(8,g)})}return i.$$set=T=>{"magicToken"in T&&e(16,n=T.magicToken),"limit"in T&&e(17,s=T.limit),"open"in T&&e(0,o=T.open),"buttonRef"in T&&e(18,l=T.buttonRef),"anchorRef"in T&&e(19,a=T.anchorRef)},i.$$.update=()=>{i.$$.dirty[0]&524289&&a&&(o?a.classList.add("open"):a.classList.remove("open"))},[o,u,m,h,d,b,w,R,g,r,S,k,p,A,O,N,n,s,l,a,D,j,nt,tt,K,Q,ft,V]}class En extends It{constructor(t){super(),Nt(this,t,Rn,Tn,Ct,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function Cn(i,t){const e=new En({target:i,props:t});t.anchorRef.addEventListener("click",n=>{n.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,e.$set(t)})}document.addEventListener("DOMContentLoaded",()=>{var i,t;const e=document.querySelector('[data-is="primary-navigation-toggle"]');if(e!==null){const m="collapsed",h=sessionStorage.getItem(m);hn(e,{collapsed:h==="true",buttonRef:e.getElementsByTagName("button")[0],sessionName:m,isStored:h!==null})}const n=document.querySelector('[data-script="admin-header"]');if(n===null){console.error("data-script='admin-header' is not set");return}const s=(i=n.getAttribute("data-blog-id"))!==null&&i!==void 0?i:"",o=(t=n.getAttribute("data-magic-token"))!==null&&t!==void 0?t:"";if(o===""){console.error("data-magic-token is not set");return}const l="50",a=document.querySelector('[data-is="site-list-button"]');a!==null&&Cn(a,{magicToken:o,limit:Number.parseInt(l),open:!1,buttonRef:a,anchorRef:a});const r=document.querySelector('[data-is="create-button"]'),u=document.querySelector('[data-is="search-button"]');(r!==null||u!==null)&&Je({blogId:s,magicToken:o}).then(m=>{if(r!==null&&rn({target:r,props:{blog_id:s,contentTypes:m.contentTypes.filter(h=>h.can_create===1),open:!1,buttonRef:r,anchorRef:r}}),u!==null){const h=u.getElementsByTagName("a")[0];wn(u,{blogId:s,magicToken:o,contentTypes:m.contentTypes.filter(d=>d.can_search===1),open:!1,buttonRef:u,anchorRef:h})}})});
