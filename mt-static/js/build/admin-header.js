class _t{constructor({cache:e}){this.cache=e}generateCacheKey({prefix:e,params:t}){const i=Object.keys(t).sort().reduce((s,o)=>(s[o]=t[o],s),{});return`${e}_${JSON.stringify(i)}`}async fetchWithCache({key:e,fetcher:t,ttl:i=1e3*60,noCache:s=!1}){return s?t():this.cache.get(e)||t().then(l=>(this.cache.set(e,l,i),l)).catch(l=>(console.log("Failed to fetch data:",l),l))}clearCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear()}}const me=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,pt=new Set,xe=typeof process=="object"&&process?process:{},gt=(n,e,t,i)=>{typeof xe.emitWarning=="function"?xe.emitWarning(n,e,t,i):console.error(`[${t}] ${e}: ${n}`)};let Pe=globalThis.AbortController,mt=globalThis.AbortSignal;if(typeof Pe>"u"){mt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,s){this._onabort.push(s)}},Pe=class{constructor(){e()}signal=new mt;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const s of this.signal._onabort)s(i);this.signal.onabort?.(i)}}};let n=xe.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{n&&(n=!1,gt("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const qt=n=>!pt.has(n),ae=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),bt=n=>ae(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Ge:null:null;class Ge extends Array{constructor(e){super(e),this.fill(0)}}class Te{heap;length;static#a=!1;static create(e){const t=bt(e);if(!t)return[];Te.#a=!0;const i=new Te(e,t);return Te.#a=!1,i}constructor(e,t){if(!Te.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class lt{#a;#h;#p;#g;#L;#F;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#i;#n;#e;#c;#u;#r;#l;#b;#o;#w;#y;#d;#v;#E;#f;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#d,sizes:e.#w,keyMap:e.#i,keyList:e.#n,valList:e.#e,next:e.#c,prev:e.#u,get head(){return e.#r},get tail(){return e.#l},free:e.#b,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,i,s,o)=>e.#I(t,i,s,o),moveToTail:t=>e.#O(t),indexes:t=>e.#S(t),rindexes:t=>e.#k(t),isStale:t=>e.#_(t)}}get max(){return this.#a}get maxSize(){return this.#h}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#L}get memoMethod(){return this.#F}get dispose(){return this.#p}get disposeAfter(){return this.#g}constructor(e){const{max:t=0,ttl:i,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:r,dispose:u,disposeAfter:m,noDisposeOnSet:h,noUpdateTTL:d,maxSize:b=0,maxEntrySize:w=0,sizeCalculation:v,fetchMethod:R,memoMethod:g,noDeleteOnFetchRejection:S,noDeleteOnStaleGet:k,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:A,ignoreFetchAbort:O}=e;if(t!==0&&!ae(t))throw new TypeError("max option must be a nonnegative integer");const C=t?bt(t):Array;if(!C)throw new Error("invalid max value: "+t);if(this.#a=t,this.#h=b,this.maxEntrySize=w||this.#h,this.sizeCalculation=v,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#F=g,R!==void 0&&typeof R!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=R,this.#E=!!R,this.#i=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#c=new C(t),this.#u=new C(t),this.#r=0,this.#l=0,this.#b=Te.create(t),this.#s=0,this.#m=0,typeof u=="function"&&(this.#p=u),typeof m=="function"?(this.#g=m,this.#o=[]):(this.#g=void 0,this.#o=void 0),this.#v=!!this.#p,this.#f=!!this.#g,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!S,this.allowStaleOnFetchRejection=!!p,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!O,this.maxEntrySize!==0){if(this.#h!==0&&!ae(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!ae(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#G()}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!k,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=ae(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=i||0,this.ttl){if(!ae(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#a===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#h){const z="LRU_CACHE_UNBOUNDED";qt(z)&&(pt.add(z),gt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",z,lt))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#M(){const e=new Ge(this.#a),t=new Ge(this.#a);this.#d=e,this.#y=t,this.#U=(o,l,a=me.now())=>{if(t[o]=l!==0?a:0,e[o]=l,l!==0&&this.ttlAutopurge){const r=setTimeout(()=>{this.#_(o)&&this.#T(this.#n[o],"expire")},l+1);r.unref&&r.unref()}},this.#C=o=>{t[o]=e[o]!==0?me.now():0},this.#R=(o,l)=>{if(e[l]){const a=e[l],r=t[l];if(!a||!r)return;o.ttl=a,o.start=r,o.now=i||s();const u=o.now-r;o.remainingTTL=a-u}};let i=0;const s=()=>{const o=me.now();if(this.ttlResolution>0){i=o;const l=setTimeout(()=>i=0,this.ttlResolution);l.unref&&l.unref()}return o};this.getRemainingTTL=o=>{const l=this.#i.get(o);if(l===void 0)return 0;const a=e[l],r=t[l];if(!a||!r)return 1/0;const u=(i||s())-r;return a-u},this.#_=o=>{const l=t[o],a=e[o];return!!a&&!!l&&(i||s())-l>a}}#C=()=>{};#R=()=>{};#U=()=>{};#_=()=>!1;#G(){const e=new Ge(this.#a);this.#m=0,this.#w=e,this.#A=t=>{this.#m-=e[t],e[t]=0},this.#W=(t,i,s,o)=>{if(this.#t(i))return 0;if(!ae(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(i,t),!ae(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#N=(t,i,s)=>{if(e[t]=i,this.#h){const o=this.#h-e[t];for(;this.#m>o;)this.#z(!0)}this.#m+=e[t],s&&(s.entrySize=i,s.totalCalculatedSize=this.#m)}}#A=e=>{};#N=(e,t,i)=>{};#W=(e,t,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#l;!(!this.#D(t)||((e||!this.#_(t))&&(yield t),t===this.#r));)t=this.#u[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#r;!(!this.#D(t)||((e||!this.#_(t))&&(yield t),t===this.#l));)t=this.#c[t]}#D(e){return e!==void 0&&this.#i.get(this.#n[e])===e}*entries(){for(const e of this.#S())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(const e of this.#k())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(const e of this.#S()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(const e of this.#k()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(const e of this.#S())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#k())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const i of this.#S()){const s=this.#e[i],o=this.#t(s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,this.#n[i],this))return this.get(this.#n[i],t)}}forEach(e,t=this){for(const i of this.#S()){const s=this.#e[i],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[i],this)}}rforEach(e,t=this){for(const i of this.#k()){const s=this.#e[i],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[i],this)}}purgeStale(){let e=!1;for(const t of this.#k({allowStale:!0}))this.#_(t)&&(this.#T(this.#n[t],"expire"),e=!0);return e}info(e){const t=this.#i.get(e);if(t===void 0)return;const i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0)return;const o={value:s};if(this.#d&&this.#y){const l=this.#d[t],a=this.#y[t];if(l&&a){const r=l-(me.now()-a);o.ttl=r,o.start=Date.now()}}return this.#w&&(o.size=this.#w[t]),o}dump(){const e=[];for(const t of this.#S({allowStale:!0})){const i=this.#n[t],s=this.#e[t],o=this.#t(s)?s.__staleWhileFetching:s;if(o===void 0||i===void 0)continue;const l={value:o};if(this.#d&&this.#y){l.ttl=this.#d[t];const a=me.now()-this.#y[t];l.start=Math.floor(Date.now()-a)}this.#w&&(l.size=this.#w[t]),e.unshift([i,l])}return e}load(e){this.clear();for(const[t,i]of e){if(i.start){const s=Date.now()-i.start;i.start=me.now()-s}this.set(t,i.value,i)}}set(e,t,i={}){if(t===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:r}=i;let{noUpdateTTL:u=this.noUpdateTTL}=i;const m=this.#W(e,t,i.size||0,a);if(this.maxEntrySize&&m>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.#T(e,"set"),this;let h=this.#s===0?void 0:this.#i.get(e);if(h===void 0)h=this.#s===0?this.#l:this.#b.length!==0?this.#b.pop():this.#s===this.#a?this.#z(!1):this.#s,this.#n[h]=e,this.#e[h]=t,this.#i.set(e,h),this.#c[this.#l]=h,this.#u[h]=this.#l,this.#l=h,this.#s++,this.#N(h,m,r),r&&(r.set="add"),u=!1;else{this.#O(h);const d=this.#e[h];if(t!==d){if(this.#E&&this.#t(d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:b}=d;b!==void 0&&!l&&(this.#v&&this.#p?.(b,e,"set"),this.#f&&this.#o?.push([b,e,"set"]))}else l||(this.#v&&this.#p?.(d,e,"set"),this.#f&&this.#o?.push([d,e,"set"]));if(this.#A(h),this.#N(h,m,r),this.#e[h]=t,r){r.set="replace";const b=d&&this.#t(d)?d.__staleWhileFetching:d;b!==void 0&&(r.oldValue=b)}}else r&&(r.set="update")}if(s!==0&&!this.#d&&this.#M(),this.#d&&(u||this.#U(h,s,o),r&&this.#R(r,h)),!l&&this.#f&&this.#o){const d=this.#o;let b;for(;b=d?.shift();)this.#g?.(...b)}return this}pop(){try{for(;this.#s;){const e=this.#e[this.#r];if(this.#z(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#o){const e=this.#o;let t;for(;t=e?.shift();)this.#g?.(...t)}}}#z(e){const t=this.#r,i=this.#n[t],s=this.#e[t];return this.#E&&this.#t(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(s,i,"evict"),this.#f&&this.#o?.push([s,i,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#b.push(t)),this.#s===1?(this.#r=this.#l=0,this.#b.length=0):this.#r=this.#c[t],this.#i.delete(i),this.#s--,t}has(e,t={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=t,o=this.#i.get(e);if(o!==void 0){const l=this.#e[o];if(this.#t(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#_(o))s&&(s.has="stale",this.#R(s,o));else return i&&this.#C(o),s&&(s.has="hit",this.#R(s,o)),!0}else s&&(s.has="miss");return!1}peek(e,t={}){const{allowStale:i=this.allowStale}=t,s=this.#i.get(e);if(s===void 0||!i&&this.#_(s))return;const o=this.#e[s];return this.#t(o)?o.__staleWhileFetching:o}#I(e,t,i,s){const o=t===void 0?void 0:this.#e[t];if(this.#t(o))return o;const l=new Pe,{signal:a}=i;a?.addEventListener("abort",()=>l.abort(a.reason),{signal:l.signal});const r={signal:l.signal,options:i,context:s},u=(v,R=!1)=>{const{aborted:g}=l.signal,S=i.ignoreFetchAbort&&v!==void 0;if(i.status&&(g&&!R?(i.status.fetchAborted=!0,i.status.fetchError=l.signal.reason,S&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),g&&!S&&!R)return h(l.signal.reason);const k=b;return this.#e[t]===b&&(v===void 0?k.__staleWhileFetching?this.#e[t]=k.__staleWhileFetching:this.#T(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,v,r.options))),v},m=v=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=v),h(v)),h=v=>{const{aborted:R}=l.signal,g=R&&i.allowStaleOnFetchAbort,S=g||i.allowStaleOnFetchRejection,k=S||i.noDeleteOnFetchRejection,p=b;if(this.#e[t]===b&&(!k||p.__staleWhileFetching===void 0?this.#T(e,"fetch"):g||(this.#e[t]=p.__staleWhileFetching)),S)return i.status&&p.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw v},d=(v,R)=>{const g=this.#L?.(e,o,r);g&&g instanceof Promise&&g.then(S=>v(S===void 0?void 0:S),R),l.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(v(void 0),i.allowStaleOnFetchAbort&&(v=S=>u(S,!0)))})};i.status&&(i.status.fetchDispatched=!0);const b=new Promise(d).then(u,m),w=Object.assign(b,{__abortController:l,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,w,{...r.options,status:void 0}),t=this.#i.get(e)):this.#e[t]=w,w}#t(e){if(!this.#E)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Pe}async fetch(e,t={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:b=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:v,forceRefresh:R=!1,status:g,signal:S}=t;if(!this.#E)return g&&(g.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:g});const k={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:l,noDisposeOnSet:a,size:r,sizeCalculation:u,noUpdateTTL:m,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:w,ignoreFetchAbort:b,status:g,signal:S};let p=this.#i.get(e);if(p===void 0){g&&(g.fetch="miss");const A=this.#I(e,p,k,v);return A.__returned=A}else{const A=this.#e[p];if(this.#t(A)){const j=i&&A.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",j&&(g.returnedStale=!0)),j?A.__staleWhileFetching:A.__returned=A}const O=this.#_(p);if(!R&&!O)return g&&(g.fetch="hit"),this.#O(p),s&&this.#C(p),g&&this.#R(g,p),A;const C=this.#I(e,p,k,v),D=C.__staleWhileFetching!==void 0&&i;return g&&(g.fetch=O?"stale":"refresh",D&&O&&(g.returnedStale=!0)),D?C.__staleWhileFetching:C.__returned=C}}async forceFetch(e,t={}){const i=await this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,t={}){const i=this.#F;if(!i)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...l}=t,a=this.get(e,l);if(!o&&a!==void 0)return a;const r=i(e,a,{options:l,context:s});return this.set(e,r,l),r}get(e,t={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:l}=t,a=this.#i.get(e);if(a!==void 0){const r=this.#e[a],u=this.#t(r);return l&&this.#R(l,a),this.#_(a)?(l&&(l.get="stale"),u?(l&&i&&r.__staleWhileFetching!==void 0&&(l.returnedStale=!0),i?r.__staleWhileFetching:void 0):(o||this.#T(e,"expire"),l&&i&&(l.returnedStale=!0),i?r:void 0)):(l&&(l.get="hit"),u?r.__staleWhileFetching:(this.#O(a),s&&this.#C(a),r))}else l&&(l.get="miss")}#j(e,t){this.#u[t]=e,this.#c[e]=t}#O(e){e!==this.#l&&(e===this.#r?this.#r=this.#c[e]:this.#j(this.#u[e],this.#c[e]),this.#j(this.#l,e),this.#l=e)}delete(e){return this.#T(e,"delete")}#T(e,t){let i=!1;if(this.#s!==0){const s=this.#i.get(e);if(s!==void 0)if(i=!0,this.#s===1)this.#P(t);else{this.#A(s);const o=this.#e[s];if(this.#t(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(o,e,t),this.#f&&this.#o?.push([o,e,t])),this.#i.delete(e),this.#n[s]=void 0,this.#e[s]=void 0,s===this.#l)this.#l=this.#u[s];else if(s===this.#r)this.#r=this.#c[s];else{const l=this.#u[s];this.#c[l]=this.#c[s];const a=this.#c[s];this.#u[a]=this.#u[s]}this.#s--,this.#b.push(s)}}if(this.#f&&this.#o?.length){const s=this.#o;let o;for(;o=s?.shift();)this.#g?.(...o)}return i}clear(){return this.#P("delete")}#P(e){for(const t of this.#k({allowStale:!0})){const i=this.#e[t];if(this.#t(i))i.__abortController.abort(new Error("deleted"));else{const s=this.#n[t];this.#v&&this.#p?.(i,s,e),this.#f&&this.#o?.push([i,s,e])}}if(this.#i.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#d&&this.#y&&(this.#d.fill(0),this.#y.fill(0)),this.#w&&this.#w.fill(0),this.#r=0,this.#l=0,this.#b.length=0,this.#m=0,this.#s=0,this.#f&&this.#o){const t=this.#o;let i;for(;i=t?.shift();)this.#g?.(...i)}}}class wt{constructor(e){var t;this.cache=new lt({ttl:(t=e?.ttl)!==null&&t!==void 0?t:1e3*60,ttlAutopurge:!0,allowStale:!1})}get(e){const t=this.cache.get(e);if(t){if(t.expiry>Date.now())return t.data;this.delete(e)}return null}set(e,t,i){const s=Date.now()+i;this.cache.set(e,{data:t,expiry:s},{ttl:i})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const Vt=new wt,yt=new _t({cache:Vt}),Jt=async n=>{const e={__mode:"fetch_admin_header_content_types",blog_id:n.blogId,magic_token:n.magicToken};return await yt.fetchWithCache({key:yt.generateCacheKey({prefix:"content_types",params:e}),fetcher:async()=>{const t=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json"});return t.result.success!==1?{contentTypes:[]}:{contentTypes:t.result.content_types}}})};function J(){}function vt(n){return n()}function St(){return Object.create(null)}function se(n){n.forEach(vt)}function $e(n){return typeof n=="function"}function Ce(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Kt(n){return Object.keys(n).length===0}function be(n){return n&&$e(n.destroy)?n.destroy:J}function c(n,e){n.appendChild(e)}function N(n,e,t){n.insertBefore(e,t||null)}function F(n){n.parentNode&&n.parentNode.removeChild(n)}function Be(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function _(n){return document.createElement(n)}function et(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function W(n){return document.createTextNode(n)}function E(){return W(" ")}function Ae(){return W("")}function M(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function f(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function kt(n,e,t){n.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function Qt(n){let e;return{p(...t){e=t,e.forEach(i=>n.push(i))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function Xt(n){return Array.from(n.childNodes)}function le(n,e){e=""+e,n.data!==e&&(n.data=e)}function $(n,e){n.value=e??""}function Tt(n,e,t){for(let i=0;i<n.options.length;i+=1){const s=n.options[i];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Yt(n){const e=n.querySelector(":checked");return e&&e.__value}function Rt(n,e,t){n.classList.toggle(e,!!t)}let Oe;function Le(n){Oe=n}function Zt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function tt(n){Zt().$$.on_mount.push(n)}const we=[],ye=[];let ve=[];const Et=[],Ct=Promise.resolve();let nt=!1;function At(){nt||(nt=!0,Ct.then(Ot))}function xt(){return At(),Ct}function He(n){ve.push(n)}const it=new Set;let Se=0;function Ot(){if(Se!==0)return;const n=Oe;do{try{for(;Se<we.length;){const e=we[Se];Se++,Le(e),$t(e.$$)}}catch(e){throw we.length=0,Se=0,e}for(Le(null),we.length=0,Se=0;ye.length;)ye.pop()();for(let e=0;e<ve.length;e+=1){const t=ve[e];it.has(t)||(it.add(t),t())}ve.length=0}while(we.length);for(;Et.length;)Et.pop()();nt=!1,it.clear(),Le(n)}function $t(n){if(n.fragment!==null){n.update(),se(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(He)}}function en(n){const e=[],t=[];ve.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ve=e}const qe=new Set;let de;function Ve(){de={r:0,c:[],p:de}}function Je(){de.r||se(de.c),de=de.p}function B(n,e){n&&n.i&&(qe.delete(n),n.i(e))}function Y(n,e,t,i){if(n&&n.o){if(qe.has(n))return;qe.add(n),de.c.push(()=>{qe.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function ce(n){return n?.length!==void 0?n:Array.from(n)}function Ke(n){n&&n.c()}function Fe(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),He(()=>{const o=n.$$.on_mount.map(vt).filter($e);n.$$.on_destroy?n.$$.on_destroy.push(...o):se(o),n.$$.on_mount=[]}),s.forEach(He)}function Ne(n,e){const t=n.$$;t.fragment!==null&&(en(t.after_update),se(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function tn(n,e){n.$$.dirty[0]===-1&&(we.push(n),At(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ze(n,e,t,i,s,o,l=null,a=[-1]){const r=Oe;Le(n);const u=n.$$={fragment:null,ctx:[],props:o,update:J,not_equal:s,bound:St(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:St(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};l&&l(u.root);let m=!1;if(u.ctx=t?t(n,e.props||{},(h,d,...b)=>{const w=b.length?b[0]:d;return u.ctx&&s(u.ctx[h],u.ctx[h]=w)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](w),m&&tn(n,h)),d}):[],u.update(),m=!0,se(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const h=Xt(e.target);u.fragment&&u.fragment.l(h),h.forEach(F)}else u.fragment&&u.fragment.c();e.intro&&B(n.$$.fragment),Fe(n,e.target,e.anchor),Ot()}Le(r)}class Ie{$$=void 0;$$set=void 0;$destroy(){Ne(this,1),this.$destroy=J}$on(e,t){if(!$e(t))return J;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function ke(n,e="body"){let t;async function i(o){if(e=o,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await xt(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(n),n.hidden=!1}function s(){n.parentNode&&n.parentNode.removeChild(n)}return i(e),{update:i,destroy:s}}function st(n,e){return!n.some(t=>t&&t.contains(e))}function Lt(n,e,t){const i=n.slice();return i[9]=e[t],i}function Ft(n){let e,t,i,s,o,l,a,r,u,m,h,d=window.trans("New [_1] creation",window.trans("Entry"))+"",b,w,v,R,g,S=window.trans("New [_1] creation",window.trans("Page"))+"",k,p,A,O,C=n[1].length>0&&Nt(n);return{c(){e=_("div"),t=_("div"),i=_("button"),i.innerHTML='<span aria-hidden="true">\xD7</span>',s=E(),o=_("div"),C&&C.c(),l=E(),a=_("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=E(),u=_("ul"),m=_("li"),h=_("a"),b=W(d),v=E(),R=_("li"),g=_("a"),k=W(S),f(i,"type","button"),f(i,"class","close"),f(i,"data-dismiss","modal"),f(i,"aria-label","Close"),f(t,"class","modal-header"),f(a,"class","block-title"),f(h,"href",w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${n[2]}`),f(g,"href",p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${n[2]}`),f(u,"class","create-button-list"),f(o,"class","modal-body"),f(e,"class","modal create-button-modal")},m(z,D){N(z,e,D),c(e,t),c(t,i),c(e,s),c(e,o),C&&C.m(o,null),c(o,l),c(o,a),c(o,r),c(o,u),c(u,m),c(m,h),c(h,b),c(u,v),c(u,R),c(R,g),c(g,k),n[8](e),A||(O=[M(i,"click",n[4]),be(ke.call(null,e,"body"))],A=!0)},p(z,D){z[1].length>0?C?C.p(z,D):(C=Nt(z),C.c(),C.m(o,l)):C&&(C.d(1),C=null),D&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${z[2]}`)&&f(h,"href",w),D&4&&p!==(p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${z[2]}`)&&f(g,"href",p)},d(z){z&&F(e),C&&C.d(),n[8](null),A=!1,se(O)}}}function Nt(n){let e,t,i,s=ce(n[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=zt(Lt(n,s,l));return{c(){e=_("p"),e.textContent=`${window.trans("Content Data")}`,t=E(),i=_("ul");for(let l=0;l<o.length;l+=1)o[l].c();f(e,"class","block-title"),f(i,"class","create-button-list")},m(l,a){N(l,e,a),N(l,t,a),N(l,i,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(i,null)},p(l,a){if(a&6){s=ce(l[1]);let r;for(r=0;r<s.length;r+=1){const u=Lt(l,s,r);o[r]?o[r].p(u,a):(o[r]=zt(u),o[r].c(),o[r].m(i,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(l){l&&(F(e),F(t),F(i)),Be(o,l)}}}function zt(n){let e,t,i=window.trans("New [_1] creation",n[9].name)+"",s,o,l;return{c(){e=_("li"),t=_("a"),s=W(i),l=E(),f(t,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${n[9].id}&type=content_data_${n[9].id}&blog_id=${n[2]}`)},m(a,r){N(a,e,r),c(e,t),c(t,s),c(e,l)},p(a,r){r&2&&i!==(i=window.trans("New [_1] creation",a[9].name)+"")&&le(s,i),r&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[9].id}&type=content_data_${a[9].id}&blog_id=${a[2]}`)&&f(t,"href",o)},d(a){a&&F(e)}}}function sn(n){let e,t,i,s,o=n[0]&&Ft(n);return{c(){e=E(),o&&o.c(),t=Ae()},m(l,a){N(l,e,a),o&&o.m(l,a),N(l,t,a),i||(s=M(document.body,"click",n[5]),i=!0)},p(l,[a]){l[0]?o?o.p(l,a):(o=Ft(l),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:J,o:J,d(l){l&&(F(e),F(t)),o&&o.d(l),i=!1,s()}}}function ln(n,e,t){let{contentTypes:i=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{buttonRef:l=null}=e,{anchorRef:a=null}=e,r=null;const u=()=>{t(0,o=!1)},m=d=>{const b=d.target;o&&st([l,r],b)&&u()};function h(d){ye[d?"unshift":"push"](()=>{r=d,t(3,r),t(7,a),t(0,o)})}return n.$$set=d=>{"contentTypes"in d&&t(1,i=d.contentTypes),"blog_id"in d&&t(2,s=d.blog_id),"open"in d&&t(0,o=d.open),"buttonRef"in d&&t(6,l=d.buttonRef),"anchorRef"in d&&t(7,a=d.anchorRef)},n.$$.update=()=>{if(n.$$.dirty&137&&a){if(r){const b=`calc(${a.getBoundingClientRect().bottom}px + 10px)`;t(3,r.style.top=b,r)}o?a.classList.add("open"):a.classList.remove("open")}},[o,i,s,r,u,m,l,a,h]}class on extends Ie{constructor(e){super(),ze(this,e,ln,sn,Ce,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7})}}const rn=({target:n,props:e})=>{const t=new on({target:n,props:e});n.getElementsByTagName("a")[0].addEventListener("click",i=>{i.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})};function an(n){let e,t,i,s;return{c(){e=_("div"),f(e,"class","mt-primaryNavigation-overlay"),f(e,"style",t=`display: ${n[0]?"block":"none"}`)},m(o,l){N(o,e,l),i||(s=[be(ke.call(null,e,"body")),M(e,"mouseenter",n[1])],i=!0)},p(o,[l]){l&1&&t!==(t=`display: ${o[0]?"block":"none"}`)&&f(e,"style",t)},i:J,o:J,d(o){o&&F(e),i=!1,se(s)}}}function cn(n,e,t){let{buttonRef:i}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,l=!1;const a=(d,b)=>{const w=document.querySelector('[data-is="content-wrapper"]');b?w.classList.add(d):w.classList.remove(d)},r=()=>{a("collapsed",s)},u=()=>{a("mouseover",l)},m=()=>{var d;s&&(l=!0,u(),(d=document.querySelector('[data-is="primary-navigation"]'))===null||d===void 0||d.addEventListener("mouseleave",h,{once:!0}))},h=()=>{l=!1,u()};return tt(()=>{o||window.innerWidth<1e3&&t(0,s=!0),r()}),n.$$set=d=>{"buttonRef"in d&&t(2,i=d.buttonRef),"collapsed"in d&&t(0,s=d.collapsed),"isStored"in d&&t(3,o=d.isStored)},n.$$.update=()=>{n.$$.dirty&5&&(r(),l=!1,u(),i&&(s?(i.classList.remove("expanded"),i.classList.add("collapsed")):(i.classList.remove("collapsed"),i.classList.add("expanded"))))},[s,m,i,o]}class fn extends Ie{constructor(e){super(),ze(this,e,cn,an,Ce,{buttonRef:2,collapsed:0,isStored:3})}}function hn(n,e){const t=new fn({target:n,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,t.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function It(n){let e,t;return{c(){e=et("title"),t=W(n[2])},m(i,s){N(i,e,s),c(e,t)},p(i,s){s&4&&le(t,i[2])},d(i){i&&F(e)}}}function un(n){let e,t,i=n[2]&&It(n);return{c(){e=et("svg"),i&&i.c(),t=et("use"),kt(t,"xlink:href",n[1]),f(e,"role","img"),f(e,"class",n[0])},m(s,o){N(s,e,o),i&&i.m(e,null),c(e,t)},p(s,[o]){s[2]?i?i.p(s,o):(i=It(s),i.c(),i.m(e,t)):i&&(i.d(1),i=null),o&2&&kt(t,"xlink:href",s[1]),o&1&&f(e,"class",s[0])},i:J,o:J,d(s){s&&F(e),i&&i.d()}}}function dn(n,e,t){let{class:i}=e,{href:s}=e,{title:o}=e;return n.$$set=l=>{"class"in l&&t(0,i=l.class),"href"in l&&t(1,s=l.href),"title"in l&&t(2,o=l.title)},[i,s,o]}class Qe extends Ie{constructor(e){super(),ze(this,e,dn,un,Ce,{class:0,href:1,title:2})}}function Mt(n,e,t){const i=n.slice();return i[17]=e[t],i}function Ut(n,e,t){const i=n.slice();return i[20]=e[t],i}function Wt(n){let e,t,i,s,o,l,a,r,u,m,h,d,b,w,v,R,g,S,k,p,A,O,C,z,D,j,ne,ee,K,Q,fe,V,T,te,Re,H=ce(n[5]),P=[];for(let y=0;y<H.length;y+=1)P[y]=Dt(Ut(n,H,y));function he(y,U){return y[4].length>0?pn:_n}let ue=he(n),q=ue(n);return Q=new Qe({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=_("div"),t=E(),i=_("div"),s=_("div"),o=_("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',l=E(),a=_("div"),r=_("form"),u=_("input"),m=E(),h=_("input"),d=E(),b=_("input"),w=E(),v=_("input"),R=E(),g=_("input"),S=E(),k=_("div");for(let y=0;y<P.length;y+=1)P[y].c();p=E(),A=_("div"),O=_("select"),q.c(),z=E(),D=_("div"),j=_("input"),ne=E(),ee=_("div"),K=_("button"),Ke(Q.$$.fragment),fe=E(),V=_("span"),V.textContent=`${window.trans("Search")}`,f(e,"class","search-button-modal-overlay"),f(o,"type","button"),f(o,"class","close"),f(o,"data-dismiss","modal"),f(o,"aria-label","Close"),f(s,"class","modal-header"),f(u,"type","hidden"),f(u,"name","__mode"),u.value="search_replace",f(h,"type","hidden"),f(h,"name","blog_id"),h.value=n[2],f(b,"type","hidden"),f(b,"name","_type"),f(v,"type","hidden"),f(v,"name","do_search"),v.value="1",f(g,"type","hidden"),f(g,"name","magic_token"),g.value=n[3],f(k,"class","search-type"),f(O,"class","custom-select form-control form-select"),f(O,"name","content_type_id"),O.disabled=C=n[1]!=="content_data"||n[4].length===0,Rt(O,"disabled",n[1]!=="content_data"),f(A,"class","search-content-type"),f(j,"type","text"),f(j,"placeholder",window.trans("Select target and search text...")),f(j,"name","search"),f(D,"class","search-text-box"),f(K,"type","submit"),f(K,"class","btn btn-primary"),f(ee,"class","submit-button"),f(r,"class","search-form"),f(r,"method","post"),f(r,"action",window.ScriptURI),f(a,"class","modal-body"),f(i,"class","modal search-button-modal")},m(y,U){N(y,e,U),N(y,t,U),N(y,i,U),c(i,s),c(s,o),c(i,l),c(i,a),c(a,r),c(r,u),c(r,m),c(r,h),c(r,d),c(r,b),$(b,n[1]),c(r,w),c(r,v),c(r,R),c(r,g),c(r,S),c(r,k);for(let I=0;I<P.length;I+=1)P[I]&&P[I].m(k,null);c(r,p),c(r,A),c(A,O),q.m(O,null),c(r,z),c(r,D),c(D,j),n[15](j),c(r,ne),c(r,ee),c(ee,K),Fe(Q,K,null),c(K,fe),c(K,V),n[16](i),T=!0,te||(Re=[M(e,"click",n[8]),be(ke.call(null,e,"body")),M(o,"click",n[8]),M(b,"input",n[12]),be(ke.call(null,i,"body"))],te=!0)},p(y,U){if((!T||U&4)&&(h.value=y[2]),U&2&&$(b,y[1]),(!T||U&8)&&(g.value=y[3]),U&34){H=ce(y[5]);let I;for(I=0;I<H.length;I+=1){const Ee=Ut(y,H,I);P[I]?P[I].p(Ee,U):(P[I]=Dt(Ee),P[I].c(),P[I].m(k,null))}for(;I<P.length;I+=1)P[I].d(1);P.length=H.length}ue===(ue=he(y))&&q?q.p(y,U):(q.d(1),q=ue(y),q&&(q.c(),q.m(O,null))),(!T||U&18&&C!==(C=y[1]!=="content_data"||y[4].length===0))&&(O.disabled=C),(!T||U&2)&&Rt(O,"disabled",y[1]!=="content_data")},i(y){T||(B(Q.$$.fragment,y),T=!0)},o(y){Y(Q.$$.fragment,y),T=!1},d(y){y&&(F(e),F(t),F(i)),Be(P,y),q.d(),n[15](null),Ne(Q),n[16](null),te=!1,se(Re)}}}function Dt(n){let e,t,i,s=!1,o,l,a=n[20].label+"",r,u,m,h,d;return m=Qt(n[14][0]),{c(){e=_("label"),t=_("input"),l=E(),r=W(a),u=E(),f(t,"type","radio"),f(t,"name","type"),t.__value=i=n[20].key,$(t,t.__value),f(t,"id",o=n[20].key),m.p(t)},m(b,w){N(b,e,w),c(e,t),t.checked=t.__value===n[1],c(e,l),c(e,r),c(e,u),h||(d=M(t,"change",n[13]),h=!0)},p(b,w){w&32&&i!==(i=b[20].key)&&(t.__value=i,$(t,t.__value),s=!0),w&32&&o!==(o=b[20].key)&&f(t,"id",o),(s||w&34)&&(t.checked=t.__value===b[1]),w&32&&a!==(a=b[20].label+"")&&le(r,a)},d(b){b&&F(e),m.r(),h=!1,d()}}}function _n(n){let e;return{c(){e=_("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",$(e,e.__value)},m(t,i){N(t,e,i)},p:J,d(t){t&&F(e)}}}function pn(n){let e,t=ce(n[4]),i=[];for(let s=0;s<t.length;s+=1)i[s]=jt(Mt(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},m(s,o){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,o);N(s,e,o)},p(s,o){if(o&16){t=ce(s[4]);let l;for(l=0;l<t.length;l+=1){const a=Mt(s,t,l);i[l]?i[l].p(a,o):(i[l]=jt(a),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&F(e),Be(i,s)}}}function jt(n){let e,t=n[17].name+"",i,s;return{c(){e=_("option"),i=W(t),e.__value=s=n[17].id,$(e,e.__value)},m(o,l){N(o,e,l),c(e,i)},p(o,l){l&16&&t!==(t=o[17].name+"")&&le(i,t),l&16&&s!==(s=o[17].id)&&(e.__value=s,$(e,e.__value))},d(o){o&&F(e)}}}function gn(n){let e,t,i,s,o,l=n[0]&&Wt(n);return{c(){e=E(),l&&l.c(),t=Ae()},m(a,r){N(a,e,r),l&&l.m(a,r),N(a,t,r),i=!0,s||(o=M(document.body,"click",n[9]),s=!0)},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&B(l,1)):(l=Wt(a),l.c(),B(l,1),l.m(t.parentNode,t)):l&&(Ve(),Y(l,1,1,()=>{l=null}),Je())},i(a){i||(B(l),i=!0)},o(a){Y(l),i=!1},d(a){a&&(F(e),F(t)),l&&l.d(a),s=!1,o()}}}function mn(n,e,t){let{blogId:i}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:l=!1}=e,{buttonRef:a}=e,{anchorRef:r}=e,{searchTabs:u}=e,{objectType:m}=e;const h=()=>{t(0,l=!1)};let d=null;const b=p=>{const A=p.target;l&&st([a,d],A)&&h()};let w=null;tt(async()=>{m&&u.find(p=>p.key===m)||t(1,m=u[0].key)});const v=[[]];function R(){m=this.value,t(1,m)}function g(){m=this.__value,t(1,m)}function S(p){ye[p?"unshift":"push"](()=>{w=p,t(6,w)})}function k(p){ye[p?"unshift":"push"](()=>{d=p,t(7,d)})}return n.$$set=p=>{"blogId"in p&&t(2,i=p.blogId),"magicToken"in p&&t(3,s=p.magicToken),"contentTypes"in p&&t(4,o=p.contentTypes),"open"in p&&t(0,l=p.open),"buttonRef"in p&&t(10,a=p.buttonRef),"anchorRef"in p&&t(11,r=p.anchorRef),"searchTabs"in p&&t(5,u=p.searchTabs),"objectType"in p&&t(1,m=p.objectType)},n.$$.update=()=>{n.$$.dirty&2049&&r&&(l?r.classList.add("open"):r.classList.remove("open")),n.$$.dirty&65&&l&&w&&w.focus()},[l,m,i,s,o,u,w,d,h,b,a,r,R,g,v,S,k]}class bn extends Ie{constructor(e){super(),ze(this,e,mn,gn,Ce,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function wn(n,e){var t;let i=[];if(n.dataset.searchTabsJson){const o=JSON.parse(n.dataset.searchTabsJson);o.success&&(i=o.data)}const s=new bn({target:n,props:{searchTabs:i,objectType:(t=n.dataset.objectType)!==null&&t!==void 0?t:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const yn=new wt,Pt=new _t({cache:yn}),vn=async n=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(n.items),limit:n.limit,magic_token:n.magicToken,page:n.page,sort_by:"id",sort_order:"descend"};return await Pt.fetchWithCache({key:Pt.generateCacheKey({prefix:"sites",params:e}),fetcher:async()=>{const t=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json"});if(t.error)return console.log("Failed to fetch sites:",t.error),{count:0,page:0,pageMax:0,sites:[],error:t.error};const i=t.result.objects.map(s=>{const o=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:o,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(t.result.count),page:Number.parseInt(t.result.page),pageMax:Number.parseInt(t.result.page_max),sites:i}}})};function Gt(n,e,t){const i=n.slice();return i[30]=e[t],i}function Bt(n){let e,t,i,s,o,l,a,r,u,m=window.trans("[_1]Site",n[2].toString())+"",h,d,b,w,v,R,g,S,k,p,A,O,C,z,D,j,ne,ee,K,Q,fe,V,T,te,Re,H,P,he,ue,q,y,U,I,Ee,_e,ie,ot,Me,pe,rt,oe,at,ge,Ue,ct,We,ft,De,Xe,je,X,Z,x,Ye,ht;pe=new Qe({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const ut=[kn,Sn],re=[];function dt(L,G){return L[7]?0:1}return X=dt(n),Z=re[X]=ut[X](n),{c(){e=_("div"),t=E(),i=_("div"),s=_("div"),o=_("div"),l=_("div"),a=_("div"),r=_("span"),u=W("("),h=W(m),d=W(")"),b=E(),w=_("p"),w.textContent=`${window.trans("Site List")}`,v=E(),R=_("div"),g=_("div"),S=_("button"),k=W("<<"),A=E(),O=_("button"),C=W("<"),D=E(),j=_("span"),ne=_("span"),ee=W(n[3]),K=W("/"),Q=W(n[4]),fe=E(),V=_("button"),T=W(">"),Re=E(),H=_("button"),P=W(">>"),ue=E(),q=_("div"),y=_("select"),U=_("option"),U.textContent=`${window.trans("All Sites")}`,I=_("option"),I.textContent=`${window.trans("Only to child sites within this system")}`,Ee=E(),_e=_("div"),ie=_("input"),ot=E(),Me=_("button"),Ke(pe.$$.fragment),rt=E(),oe=_("button"),oe.innerHTML='<span aria-hidden="true">\xD7</span>',at=E(),ge=_("div"),Ue=_("span"),Ue.textContent=`${window.trans("Site Name")}`,ct=E(),We=_("span"),We.textContent=`${window.trans("Parent Site")}`,ft=E(),De=_("div"),Xe=_("table"),je=_("tbody"),Z.c(),f(e,"class","site-list-button-modal-overlay"),f(a,"class","site-list-title"),f(S,"type","button"),S.disabled=p=n[3]<=1,f(O,"type","button"),O.disabled=z=n[3]<=1,f(ne,"class","current"),f(j,"class","page-num"),f(V,"type","button"),V.disabled=te=n[3]===n[4],f(H,"type","button"),H.disabled=he=n[3]===n[4],f(g,"class","prev-next"),U.__value="",$(U,U.__value),I.__value="blog",$(I,I.__value),f(y,"class","custom-select form-control form-select"),n[5]===void 0&&He(()=>n[24].call(y)),f(q,"class","site-type-filter"),f(ie,"type","text"),f(ie,"placeholder",window.trans("Filter by site name")),f(_e,"class","site-name-filter"),f(oe,"type","button"),f(oe,"class","close"),f(oe,"data-dismiss","modal"),f(oe,"aria-label","Close"),f(R,"class","site-list-actions"),f(l,"class","site-list-header"),f(Ue,"class","table-header-col site-list-header-name"),f(We,"class","table-header-col site-list-header-parent"),f(ge,"class","site-list-table-header"),f(De,"class","site-list-table-wrapper"),f(o,"class","site-list-container"),f(s,"class","modal-body"),f(i,"class","modal site-list-button-modal")},m(L,G){N(L,e,G),N(L,t,G),N(L,i,G),c(i,s),c(s,o),c(o,l),c(l,a),c(a,r),c(r,u),c(r,h),c(r,d),c(a,b),c(a,w),c(l,v),c(l,R),c(R,g),c(g,S),c(S,k),c(g,A),c(g,O),c(O,C),c(g,D),c(g,j),c(j,ne),c(ne,ee),c(j,K),c(j,Q),c(g,fe),c(g,V),c(V,T),c(g,Re),c(g,H),c(H,P),c(R,ue),c(R,q),c(q,y),c(y,U),c(y,I),Tt(y,n[5],!0),c(R,Ee),c(R,_e),c(_e,ie),$(ie,n[6]),c(_e,ot),c(_e,Me),Fe(pe,Me,null),c(R,rt),c(R,oe),c(o,at),c(o,ge),c(ge,Ue),c(ge,ct),c(ge,We),c(o,ft),c(o,De),c(De,Xe),c(Xe,je),re[X].m(je,null),n[27](i),x=!0,Ye||(ht=[M(e,"click",n[9]),be(ke.call(null,e,"body")),M(S,"click",n[13]),M(S,"keydown",n[20]),M(O,"click",n[12]),M(O,"keydown",n[21]),M(V,"click",n[10]),M(V,"keydown",n[22]),M(H,"click",n[11]),M(H,"keydown",n[23]),M(y,"change",n[24]),M(y,"change",n[14]),M(ie,"input",n[25]),M(ie,"keydown",n[26]),M(Me,"click",n[14]),M(oe,"click",n[9]),be(ke.call(null,i,"body"))],Ye=!0)},p(L,G){(!x||G[0]&4)&&m!==(m=window.trans("[_1]Site",L[2].toString())+"")&&le(h,m),(!x||G[0]&8&&p!==(p=L[3]<=1))&&(S.disabled=p),(!x||G[0]&8&&z!==(z=L[3]<=1))&&(O.disabled=z),(!x||G[0]&8)&&le(ee,L[3]),(!x||G[0]&16)&&le(Q,L[4]),(!x||G[0]&24&&te!==(te=L[3]===L[4]))&&(V.disabled=te),(!x||G[0]&24&&he!==(he=L[3]===L[4]))&&(H.disabled=he),G[0]&32&&Tt(y,L[5]),G[0]&64&&ie.value!==L[6]&&$(ie,L[6]);let Ze=X;X=dt(L),X===Ze?re[X].p(L,G):(Ve(),Y(re[Ze],1,1,()=>{re[Ze]=null}),Je(),Z=re[X],Z?Z.p(L,G):(Z=re[X]=ut[X](L),Z.c()),B(Z,1),Z.m(je,null))},i(L){x||(B(pe.$$.fragment,L),B(Z),x=!0)},o(L){Y(pe.$$.fragment,L),Y(Z),x=!1},d(L){L&&(F(e),F(t),F(i)),Ne(pe),re[X].d(),n[27](null),Ye=!1,se(ht)}}}function Sn(n){let e,t,i=ce(n[1]),s=[];for(let l=0;l<i.length;l+=1)s[l]=Ht(Gt(n,i,l));const o=l=>Y(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Ae()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);N(l,e,a),t=!0},p(l,a){if(a[0]&2){i=ce(l[1]);let r;for(r=0;r<i.length;r+=1){const u=Gt(l,i,r);s[r]?(s[r].p(u,a),B(s[r],1)):(s[r]=Ht(u),s[r].c(),B(s[r],1),s[r].m(e.parentNode,e))}for(Ve(),r=i.length;r<s.length;r+=1)o(r);Je()}},i(l){if(!t){for(let a=0;a<i.length;a+=1)B(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Y(s[a]);t=!1},d(l){l&&F(e),Be(s,l)}}}function kn(n){let e,t;return{c(){e=_("tr"),t=_("td"),t.textContent=`${window.trans("Loading...")}`,f(t,"colspan","2"),f(t,"class","loading")},m(i,s){N(i,e,s),c(e,t)},p:J,i:J,o:J,d(i){i&&F(e)}}}function Ht(n){let e,t,i,s,o,l=n[30].name+"",a,r,u,m,h,d,b,w,v=n[30].parentSiteName+"",R,g,S;return s=new Qe({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${n[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),h=new Qe({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=_("tr"),t=_("td"),i=_("a"),Ke(s.$$.fragment),o=E(),a=W(l),u=E(),m=_("a"),Ke(h.$$.fragment),b=E(),w=_("td"),R=W(v),g=E(),f(i,"href",r=`${window.ScriptURI}?__mode=dashboard&blog_id=${n[30].id}`),f(i,"class","dashboard-link"),f(m,"href",d=n[30].siteUrl),f(m,"class","site-link"),f(m,"target","_blank")},m(k,p){N(k,e,p),c(e,t),c(t,i),Fe(s,i,null),c(i,o),c(i,a),c(t,u),c(t,m),Fe(h,m,null),c(e,b),c(e,w),c(w,R),c(e,g),S=!0},p(k,p){const A={};p[0]&2&&(A.href=`${window.StaticURI}images/admin2025/sprite.svg#${k[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),s.$set(A),(!S||p[0]&2)&&l!==(l=k[30].name+"")&&le(a,l),(!S||p[0]&2&&r!==(r=`${window.ScriptURI}?__mode=dashboard&blog_id=${k[30].id}`))&&f(i,"href",r),(!S||p[0]&2&&d!==(d=k[30].siteUrl))&&f(m,"href",d),(!S||p[0]&2)&&v!==(v=k[30].parentSiteName+"")&&le(R,v)},i(k){S||(B(s.$$.fragment,k),B(h.$$.fragment,k),S=!0)},o(k){Y(s.$$.fragment,k),Y(h.$$.fragment,k),S=!1},d(k){k&&F(e),Ne(s),Ne(h)}}}function Tn(n){let e,t,i,s,o,l=n[0]&&Bt(n);return{c(){e=E(),l&&l.c(),t=Ae()},m(a,r){N(a,e,r),l&&l.m(a,r),N(a,t,r),i=!0,s||(o=M(document.body,"click",n[15]),s=!0)},p(a,r){a[0]?l?(l.p(a,r),r[0]&1&&B(l,1)):(l=Bt(a),l.c(),B(l,1),l.m(t.parentNode,t)):l&&(Ve(),Y(l,1,1,()=>{l=null}),Je())},i(a){i||(B(l),i=!0)},o(a){Y(l),i=!1},d(a){a&&(F(e),F(t)),l&&l.d(a),s=!1,o()}}}function Rn(n,e,t){let{magicToken:i}=e,{limit:s=50}=e,{open:o=!1}=e,{buttonRef:l}=e,{anchorRef:a}=e;const r=()=>{t(0,o=!1)};let u=[],m=0,h=1,d=1,b="",w="",v=[],R=!1,g=null;const S=()=>{t(3,h++,h),C()},k=()=>{t(3,h=d),C()},p=()=>{t(3,h--,h),C()},A=()=>{t(3,h=1),C()},O=()=>{v=[],b==="blog"&&(v=[{type:"parent_website",args:{value:""}}]),t(6,w=w.trim()),w!==""&&v.push({type:"name",args:{string:w,option:"contains"}}),t(3,h=1),C()},C=async()=>{t(7,R=!0);const T=await vn({magicToken:i,items:v,page:h,limit:s});t(2,m=T.count),t(4,d=T.pageMax),t(3,h=d!==0?T.page:0),t(1,u=T.sites),t(7,R=!1)},z=T=>{const te=T.target;o&&st([l,g],te)&&r()};tt(async()=>{C()});const D=T=>T.key==="Enter"&&A(),j=T=>T.key==="Enter"&&p(),ne=T=>T.key==="Enter"&&S(),ee=T=>T.key==="Enter"&&k();function K(){b=Yt(this),t(5,b)}function Q(){w=this.value,t(6,w)}const fe=T=>T.key==="Enter"&&O();function V(T){ye[T?"unshift":"push"](()=>{g=T,t(8,g)})}return n.$$set=T=>{"magicToken"in T&&t(16,i=T.magicToken),"limit"in T&&t(17,s=T.limit),"open"in T&&t(0,o=T.open),"buttonRef"in T&&t(18,l=T.buttonRef),"anchorRef"in T&&t(19,a=T.anchorRef)},n.$$.update=()=>{n.$$.dirty[0]&524289&&a&&(o?a.classList.add("open"):a.classList.remove("open"))},[o,u,m,h,d,b,w,R,g,r,S,k,p,A,O,z,i,s,l,a,D,j,ne,ee,K,Q,fe,V]}class En extends Ie{constructor(e){super(),ze(this,e,Rn,Tn,Ce,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function Cn(n,e){const t=new En({target:n,props:e});e.anchorRef.addEventListener("click",i=>{i.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})}document.addEventListener("DOMContentLoaded",()=>{var n,e;const t=document.querySelector('[data-is="primary-navigation-toggle"]');if(t!==null){const m="collapsed",h=sessionStorage.getItem(m);hn(t,{collapsed:h==="true",buttonRef:t.getElementsByTagName("button")[0],sessionName:m,isStored:h!==null})}const i=document.querySelector('[data-script="admin-header"]');if(i===null){console.error("data-script='admin-header' is not set");return}const s=(n=i.getAttribute("data-blog-id"))!==null&&n!==void 0?n:"",o=(e=i.getAttribute("data-magic-token"))!==null&&e!==void 0?e:"";if(o===""){console.error("data-magic-token is not set");return}const l="50",a=document.querySelector('[data-is="site-list-button"]');if(a!==null){const m=a.getElementsByTagName("a")[0];Cn(a,{magicToken:o,limit:Number.parseInt(l),open:!1,buttonRef:a,anchorRef:m})}const r=document.querySelector('[data-is="create-button"]'),u=document.querySelector('[data-is="search-button"]');(r!==null||u!==null)&&Jt({blogId:s,magicToken:o}).then(m=>{if(r!==null){const h=r.getElementsByTagName("a")[0];rn({target:r,props:{blog_id:s,contentTypes:m.contentTypes.filter(d=>d.can_create===1),open:!1,buttonRef:r,anchorRef:h}})}if(u!==null){const h=u.getElementsByTagName("a")[0];wn(u,{blogId:s,magicToken:o,contentTypes:m.contentTypes.filter(d=>d.can_search===1),open:!1,buttonRef:u,anchorRef:h})}})});
