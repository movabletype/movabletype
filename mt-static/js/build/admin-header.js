class de{constructor({cache:t}){this.cache=t}generateCacheKey({prefix:t,params:e}){const n=Object.keys(e).sort().reduce((s,o)=>(s[o]=e[o],s),{});return`${t}_${JSON.stringify(n)}`}async fetchWithCache({key:t,fetcher:e,ttl:n=1e3*60,noCache:s=!1}){return s?e():this.cache.get(t)||e().then(l=>(this.cache.set(t,l,n),l)).catch(l=>(console.log("Failed to fetch data:",l),l))}clearCache(t){this.cache.delete(t)}clearAllCache(){this.cache.clear()}}const pt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_e=new Set,Zt=typeof process=="object"&&process?process:{},pe=(i,t,e,n)=>{typeof Zt.emitWarning=="function"?Zt.emitWarning(i,t,e,n):console.error(`[${e}] ${t}: ${i}`)};let Wt=globalThis.AbortController,ge=globalThis.AbortSignal;if(typeof Wt>"u"){ge=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Wt=class{constructor(){t()}signal=new ge;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let i=Zt.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const t=()=>{i&&(i=!1,pe("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const He=i=>!_e.has(i),at=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),me=i=>at(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Dt:null:null;class Dt extends Array{constructor(t){super(t),this.fill(0)}}class yt{heap;length;static#a=!1;static create(t){const e=me(t);if(!e)return[];yt.#a=!0;const n=new yt(t,e);return yt.#a=!1,n}constructor(t,e){if(!yt.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class se{#a;#h;#p;#g;#L;#F;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#i;#n;#t;#c;#u;#r;#l;#b;#o;#w;#y;#d;#v;#E;#f;static unsafeExposeInternals(t){return{starts:t.#y,ttls:t.#d,sizes:t.#w,keyMap:t.#i,keyList:t.#n,valList:t.#t,next:t.#c,prev:t.#u,get head(){return t.#r},get tail(){return t.#l},free:t.#b,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,n,s,o)=>t.#I(e,n,s,o),moveToTail:e=>t.#O(e),indexes:e=>t.#S(e),rindexes:e=>t.#k(e),isStale:e=>t.#_(e)}}get max(){return this.#a}get maxSize(){return this.#h}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#L}get memoMethod(){return this.#F}get dispose(){return this.#p}get disposeAfter(){return this.#g}constructor(t){const{max:e=0,ttl:n,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:r,dispose:f,disposeAfter:m,noDisposeOnSet:u,noUpdateTTL:d,maxSize:g=0,maxEntrySize:w=0,sizeCalculation:y,fetchMethod:R,memoMethod:b,noDeleteOnFetchRejection:k,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:A,ignoreFetchAbort:F}=t;if(e!==0&&!at(e))throw new TypeError("max option must be a nonnegative integer");const E=e?me(e):Array;if(!E)throw new Error("invalid max value: "+e);if(this.#a=e,this.#h=g,this.maxEntrySize=w||this.#h,this.sizeCalculation=y,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(b!==void 0&&typeof b!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#F=b,R!==void 0&&typeof R!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=R,this.#E=!!R,this.#i=new Map,this.#n=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#c=new E(e),this.#u=new E(e),this.#r=0,this.#l=0,this.#b=yt.create(e),this.#s=0,this.#m=0,typeof f=="function"&&(this.#p=f),typeof m=="function"?(this.#g=m,this.#o=[]):(this.#g=void 0,this.#o=void 0),this.#v=!!this.#p,this.#f=!!this.#g,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!k,this.allowStaleOnFetchRejection=!!p,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!F,this.maxEntrySize!==0){if(this.#h!==0&&!at(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!at(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#G()}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=at(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!at(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#a===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#h){const N="LRU_CACHE_UNBOUNDED";He(N)&&(_e.add(N),pe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,se))}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#M(){const t=new Dt(this.#a),e=new Dt(this.#a);this.#d=t,this.#y=e,this.#U=(o,l,a=pt.now())=>{if(e[o]=l!==0?a:0,t[o]=l,l!==0&&this.ttlAutopurge){const r=setTimeout(()=>{this.#_(o)&&this.#T(this.#n[o],"expire")},l+1);r.unref&&r.unref()}},this.#C=o=>{e[o]=t[o]!==0?pt.now():0},this.#R=(o,l)=>{if(t[l]){const a=t[l],r=e[l];if(!a||!r)return;o.ttl=a,o.start=r,o.now=n||s();const f=o.now-r;o.remainingTTL=a-f}};let n=0;const s=()=>{const o=pt.now();if(this.ttlResolution>0){n=o;const l=setTimeout(()=>n=0,this.ttlResolution);l.unref&&l.unref()}return o};this.getRemainingTTL=o=>{const l=this.#i.get(o);if(l===void 0)return 0;const a=t[l],r=e[l];if(!a||!r)return 1/0;const f=(n||s())-r;return a-f},this.#_=o=>{const l=e[o],a=t[o];return!!a&&!!l&&(n||s())-l>a}}#C=()=>{};#R=()=>{};#U=()=>{};#_=()=>!1;#G(){const t=new Dt(this.#a);this.#m=0,this.#w=t,this.#A=e=>{this.#m-=t[e],t[e]=0},this.#W=(e,n,s,o)=>{if(this.#e(n))return 0;if(!at(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(n,e),!at(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#N=(e,n,s)=>{if(t[e]=n,this.#h){const o=this.#h-t[e];for(;this.#m>o;)this.#z(!0)}this.#m+=t[e],s&&(s.entrySize=n,s.totalCalculatedSize=this.#m)}}#A=t=>{};#N=(t,e,n)=>{};#W=(t,e,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:t=this.allowStale}={}){if(this.#s)for(let e=this.#l;!(!this.#D(e)||((t||!this.#_(e))&&(yield e),e===this.#r));)e=this.#u[e]}*#k({allowStale:t=this.allowStale}={}){if(this.#s)for(let e=this.#r;!(!this.#D(e)||((t||!this.#_(e))&&(yield e),e===this.#l));)e=this.#c[e]}#D(t){return t!==void 0&&this.#i.get(this.#n[t])===t}*entries(){for(const t of this.#S())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*rentries(){for(const t of this.#k())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*keys(){for(const t of this.#S()){const e=this.#n[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(const t of this.#k()){const e=this.#n[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(const t of this.#S())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(const t of this.#k())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const n of this.#S()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;if(o!==void 0&&t(o,this.#n[n],this))return this.get(this.#n[n],e)}}forEach(t,e=this){for(const n of this.#S()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;o!==void 0&&t.call(e,o,this.#n[n],this)}}rforEach(t,e=this){for(const n of this.#k()){const s=this.#t[n],o=this.#e(s)?s.__staleWhileFetching:s;o!==void 0&&t.call(e,o,this.#n[n],this)}}purgeStale(){let t=!1;for(const e of this.#k({allowStale:!0}))this.#_(e)&&(this.#T(this.#n[e],"expire"),t=!0);return t}info(t){const e=this.#i.get(t);if(e===void 0)return;const n=this.#t[e],s=this.#e(n)?n.__staleWhileFetching:n;if(s===void 0)return;const o={value:s};if(this.#d&&this.#y){const l=this.#d[e],a=this.#y[e];if(l&&a){const r=l-(pt.now()-a);o.ttl=r,o.start=Date.now()}}return this.#w&&(o.size=this.#w[e]),o}dump(){const t=[];for(const e of this.#S({allowStale:!0})){const n=this.#n[e],s=this.#t[e],o=this.#e(s)?s.__staleWhileFetching:s;if(o===void 0||n===void 0)continue;const l={value:o};if(this.#d&&this.#y){l.ttl=this.#d[e];const a=pt.now()-this.#y[e];l.start=Math.floor(Date.now()-a)}this.#w&&(l.size=this.#w[e]),t.unshift([n,l])}return t}load(t){this.clear();for(const[e,n]of t){if(n.start){const s=Date.now()-n.start;n.start=pt.now()-s}this.set(e,n.value,n)}}set(t,e,n={}){if(e===void 0)return this.delete(t),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:r}=n;let{noUpdateTTL:f=this.noUpdateTTL}=n;const m=this.#W(t,e,n.size||0,a);if(this.maxEntrySize&&m>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.#T(t,"set"),this;let u=this.#s===0?void 0:this.#i.get(t);if(u===void 0)u=this.#s===0?this.#l:this.#b.length!==0?this.#b.pop():this.#s===this.#a?this.#z(!1):this.#s,this.#n[u]=t,this.#t[u]=e,this.#i.set(t,u),this.#c[this.#l]=u,this.#u[u]=this.#l,this.#l=u,this.#s++,this.#N(u,m,r),r&&(r.set="add"),f=!1;else{this.#O(u);const d=this.#t[u];if(e!==d){if(this.#E&&this.#e(d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:g}=d;g!==void 0&&!l&&(this.#v&&this.#p?.(g,t,"set"),this.#f&&this.#o?.push([g,t,"set"]))}else l||(this.#v&&this.#p?.(d,t,"set"),this.#f&&this.#o?.push([d,t,"set"]));if(this.#A(u),this.#N(u,m,r),this.#t[u]=e,r){r.set="replace";const g=d&&this.#e(d)?d.__staleWhileFetching:d;g!==void 0&&(r.oldValue=g)}}else r&&(r.set="update")}if(s!==0&&!this.#d&&this.#M(),this.#d&&(f||this.#U(u,s,o),r&&this.#R(r,u)),!l&&this.#f&&this.#o){const d=this.#o;let g;for(;g=d?.shift();)this.#g?.(...g)}return this}pop(){try{for(;this.#s;){const t=this.#t[this.#r];if(this.#z(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#f&&this.#o){const t=this.#o;let e;for(;e=t?.shift();)this.#g?.(...e)}}}#z(t){const e=this.#r,n=this.#n[e],s=this.#t[e];return this.#E&&this.#e(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(s,n,"evict"),this.#f&&this.#o?.push([s,n,"evict"])),this.#A(e),t&&(this.#n[e]=void 0,this.#t[e]=void 0,this.#b.push(e)),this.#s===1?(this.#r=this.#l=0,this.#b.length=0):this.#r=this.#c[e],this.#i.delete(n),this.#s--,e}has(t,e={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=e,o=this.#i.get(t);if(o!==void 0){const l=this.#t[o];if(this.#e(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#_(o))s&&(s.has="stale",this.#R(s,o));else return n&&this.#C(o),s&&(s.has="hit",this.#R(s,o)),!0}else s&&(s.has="miss");return!1}peek(t,e={}){const{allowStale:n=this.allowStale}=e,s=this.#i.get(t);if(s===void 0||!n&&this.#_(s))return;const o=this.#t[s];return this.#e(o)?o.__staleWhileFetching:o}#I(t,e,n,s){const o=e===void 0?void 0:this.#t[e];if(this.#e(o))return o;const l=new Wt,{signal:a}=n;a?.addEventListener("abort",()=>l.abort(a.reason),{signal:l.signal});const r={signal:l.signal,options:n,context:s},f=(y,R=!1)=>{const{aborted:b}=l.signal,k=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(b&&!R?(n.status.fetchAborted=!0,n.status.fetchError=l.signal.reason,k&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),b&&!k&&!R)return u(l.signal.reason);const v=g;return this.#t[e]===g&&(y===void 0?v.__staleWhileFetching?this.#t[e]=v.__staleWhileFetching:this.#T(t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,y,r.options))),y},m=y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),u(y)),u=y=>{const{aborted:R}=l.signal,b=R&&n.allowStaleOnFetchAbort,k=b||n.allowStaleOnFetchRejection,v=k||n.noDeleteOnFetchRejection,p=g;if(this.#t[e]===g&&(!v||p.__staleWhileFetching===void 0?this.#T(t,"fetch"):b||(this.#t[e]=p.__staleWhileFetching)),k)return n.status&&p.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw y},d=(y,R)=>{const b=this.#L?.(t,o,r);b&&b instanceof Promise&&b.then(k=>y(k===void 0?void 0:k),R),l.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=k=>f(k,!0)))})};n.status&&(n.status.fetchDispatched=!0);const g=new Promise(d).then(f,m),w=Object.assign(g,{__abortController:l,__staleWhileFetching:o,__returned:void 0});return e===void 0?(this.set(t,w,{...r.options,status:void 0}),e=this.#i.get(t)):this.#t[e]=w,w}#e(t){if(!this.#E)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Wt}async fetch(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:y,forceRefresh:R=!1,status:b,signal:k}=e;if(!this.#E)return b&&(b.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:b});const v={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:l,noDisposeOnSet:a,size:r,sizeCalculation:f,noUpdateTTL:m,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:w,ignoreFetchAbort:g,status:b,signal:k};let p=this.#i.get(t);if(p===void 0){b&&(b.fetch="miss");const A=this.#I(t,p,v,y);return A.__returned=A}else{const A=this.#t[p];if(this.#e(A)){const H=n&&A.__staleWhileFetching!==void 0;return b&&(b.fetch="inflight",H&&(b.returnedStale=!0)),H?A.__staleWhileFetching:A.__returned=A}const F=this.#_(p);if(!R&&!F)return b&&(b.fetch="hit"),this.#O(p),s&&this.#C(p),b&&this.#R(b,p),A;const E=this.#I(t,p,v,y),U=E.__staleWhileFetching!==void 0&&n;return b&&(b.fetch=F?"stale":"refresh",U&&F&&(b.returnedStale=!0)),U?E.__staleWhileFetching:E.__returned=E}}async forceFetch(t,e={}){const n=await this.fetch(t,e);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,e={}){const n=this.#F;if(!n)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...l}=e,a=this.get(t,l);if(!o&&a!==void 0)return a;const r=n(t,a,{options:l,context:s});return this.set(t,r,l),r}get(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:l}=e,a=this.#i.get(t);if(a!==void 0){const r=this.#t[a],f=this.#e(r);return l&&this.#R(l,a),this.#_(a)?(l&&(l.get="stale"),f?(l&&n&&r.__staleWhileFetching!==void 0&&(l.returnedStale=!0),n?r.__staleWhileFetching:void 0):(o||this.#T(t,"expire"),l&&n&&(l.returnedStale=!0),n?r:void 0)):(l&&(l.get="hit"),f?r.__staleWhileFetching:(this.#O(a),s&&this.#C(a),r))}else l&&(l.get="miss")}#j(t,e){this.#u[e]=t,this.#c[t]=e}#O(t){t!==this.#l&&(t===this.#r?this.#r=this.#c[t]:this.#j(this.#u[t],this.#c[t]),this.#j(this.#l,t),this.#l=t)}delete(t){return this.#T(t,"delete")}#T(t,e){let n=!1;if(this.#s!==0){const s=this.#i.get(t);if(s!==void 0)if(n=!0,this.#s===1)this.#P(e);else{this.#A(s);const o=this.#t[s];if(this.#e(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(o,t,e),this.#f&&this.#o?.push([o,t,e])),this.#i.delete(t),this.#n[s]=void 0,this.#t[s]=void 0,s===this.#l)this.#l=this.#u[s];else if(s===this.#r)this.#r=this.#c[s];else{const l=this.#u[s];this.#c[l]=this.#c[s];const a=this.#c[s];this.#u[a]=this.#u[s]}this.#s--,this.#b.push(s)}}if(this.#f&&this.#o?.length){const s=this.#o;let o;for(;o=s?.shift();)this.#g?.(...o)}return n}clear(){return this.#P("delete")}#P(t){for(const e of this.#k({allowStale:!0})){const n=this.#t[e];if(this.#e(n))n.__abortController.abort(new Error("deleted"));else{const s=this.#n[e];this.#v&&this.#p?.(n,s,t),this.#f&&this.#o?.push([n,s,t])}}if(this.#i.clear(),this.#t.fill(void 0),this.#n.fill(void 0),this.#d&&this.#y&&(this.#d.fill(0),this.#y.fill(0)),this.#w&&this.#w.fill(0),this.#r=0,this.#l=0,this.#b.length=0,this.#m=0,this.#s=0,this.#f&&this.#o){const e=this.#o;let n;for(;n=e?.shift();)this.#g?.(...n)}}}class be{constructor(t){var e;this.cache=new se({ttl:(e=t?.ttl)!==null&&e!==void 0?e:1e3*60,ttlAutopurge:!0,allowStale:!1})}get(t){const e=this.cache.get(t);if(e){if(e.expiry>Date.now())return e.data;this.delete(t)}return null}set(t,e,n){const s=Date.now()+n;this.cache.set(t,{data:e,expiry:s},{ttl:n})}delete(t){this.cache.delete(t)}clear(){this.cache.clear()}}const qe=new be,we=new de({cache:qe}),Ve=async i=>{const t={__mode:"fetch_admin_header_content_types",blog_id:i.blogId,magic_token:i.magicToken};return await we.fetchWithCache({key:we.generateCacheKey({prefix:"content_types",params:t}),fetcher:async()=>{const e=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json"});return e.result.success!==1?{contentTypes:[]}:{contentTypes:e.result.content_types}}})};function q(){}function ye(i){return i()}function ve(){return Object.create(null)}function st(i){i.forEach(ye)}function xt(i){return typeof i=="function"}function Tt(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function Je(i){return Object.keys(i).length===0}function Rt(i){return i&&xt(i.destroy)?i.destroy:q}function c(i,t){i.appendChild(t)}function L(i,t,e){i.insertBefore(t,e||null)}function O(i){i.parentNode&&i.parentNode.removeChild(i)}function jt(i,t){for(let e=0;e<i.length;e+=1)i[e]&&i[e].d(t)}function _(i){return document.createElement(i)}function $t(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function W(i){return document.createTextNode(i)}function C(){return W(" ")}function Et(){return W("")}function M(i,t,e,n){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e,n)}function h(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function Se(i,t,e){i.setAttributeNS("http://www.w3.org/1999/xlink",t,e)}function Ke(i){let t;return{p(...e){t=e,t.forEach(n=>i.push(n))},r(){t.forEach(e=>i.splice(i.indexOf(e),1))}}}function Qe(i){return Array.from(i.childNodes)}function lt(i,t){t=""+t,i.data!==t&&(i.data=t)}function et(i,t){i.value=t??""}function ke(i,t,e){for(let n=0;n<i.options.length;n+=1){const s=i.options[n];if(s.__value===t){s.selected=!0;return}}(!e||t!==void 0)&&(i.selectedIndex=-1)}function Xe(i){const t=i.querySelector(":checked");return t&&t.__value}function Te(i,t,e){i.classList.toggle(t,!!e)}let Ct;function At(i){Ct=i}function Ye(){if(!Ct)throw new Error("Function called outside component initialization");return Ct}function te(i){Ye().$$.on_mount.push(i)}const gt=[],mt=[];let bt=[];const Re=[],Ee=Promise.resolve();let ee=!1;function Ce(){ee||(ee=!0,Ee.then(Ae))}function Ze(){return Ce(),Ee}function Pt(i){bt.push(i)}const ne=new Set;let wt=0;function Ae(){if(wt!==0)return;const i=Ct;do{try{for(;wt<gt.length;){const t=gt[wt];wt++,At(t),xe(t.$$)}}catch(t){throw gt.length=0,wt=0,t}for(At(null),gt.length=0,wt=0;mt.length;)mt.pop()();for(let t=0;t<bt.length;t+=1){const e=bt[t];ne.has(e)||(ne.add(e),e())}bt.length=0}while(gt.length);for(;Re.length;)Re.pop()();ee=!1,ne.clear(),At(i)}function xe(i){if(i.fragment!==null){i.update(),st(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(Pt)}}function $e(i){const t=[],e=[];bt.forEach(n=>i.indexOf(n)===-1?t.push(n):e.push(n)),e.forEach(n=>n()),bt=t}const Gt=new Set;let dt;function Bt(){dt={r:0,c:[],p:dt}}function Ht(){dt.r||st(dt.c),dt=dt.p}function B(i,t){i&&i.i&&(Gt.delete(i),i.i(t))}function Z(i,t,e,n){if(i&&i.o){if(Gt.has(i))return;Gt.add(i),dt.c.push(()=>{Gt.delete(i),n&&(e&&i.d(1),n())}),i.o(t)}else n&&n()}function ct(i){return i?.length!==void 0?i:Array.from(i)}function qt(i){i&&i.c()}function Ot(i,t,e){const{fragment:n,after_update:s}=i.$$;n&&n.m(t,e),Pt(()=>{const o=i.$$.on_mount.map(ye).filter(xt);i.$$.on_destroy?i.$$.on_destroy.push(...o):st(o),i.$$.on_mount=[]}),s.forEach(Pt)}function Lt(i,t){const e=i.$$;e.fragment!==null&&($e(e.after_update),st(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function tn(i,t){i.$$.dirty[0]===-1&&(gt.push(i),Ce(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function Ft(i,t,e,n,s,o,l=null,a=[-1]){const r=Ct;At(i);const f=i.$$={fragment:null,ctx:[],props:o,update:q,not_equal:s,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:ve(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};l&&l(f.root);let m=!1;if(f.ctx=e?e(i,t.props||{},(u,d,...g)=>{const w=g.length?g[0]:d;return f.ctx&&s(f.ctx[u],f.ctx[u]=w)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](w),m&&tn(i,u)),d}):[],f.update(),m=!0,st(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){const u=Qe(t.target);f.fragment&&f.fragment.l(u),u.forEach(O)}else f.fragment&&f.fragment.c();t.intro&&B(i.$$.fragment),Ot(i,t.target,t.anchor),Ae()}At(r)}class Nt{$$=void 0;$$set=void 0;$destroy(){Lt(this,1),this.$destroy=q}$on(t,e){if(!xt(e))return q;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const en="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(en);function zt(i,t="body"){let e;async function n(o){if(t=o,typeof t=="string"){if(e=document.querySelector(t),e===null&&(await Ze(),e=document.querySelector(t)),e===null)throw new Error(`No element found matching css selector: "${t}"`)}else if(t instanceof HTMLElement)e=t;else throw new TypeError(`Unknown portal target type: ${t===null?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);e.appendChild(i),i.hidden=!1}function s(){i.parentNode&&i.parentNode.removeChild(i)}return n(t),{update:n,destroy:s}}function ie(i,t){return!i.some(e=>e&&e.contains(t))}function Oe(i,t,e){const n=i.slice();return n[9]=t[e],n}function Le(i){let t,e,n,s,o,l,a,r,f,m,u,d=window.trans("New [_1] creation",window.trans("Entry"))+"",g,w,y,R,b,k=window.trans("New [_1] creation",window.trans("Page"))+"",v,p,A,F,E=i[1].length>0&&Fe(i);return{c(){t=_("div"),e=_("div"),n=_("button"),n.innerHTML='<span aria-hidden="true">\xD7</span>',s=C(),o=_("div"),E&&E.c(),l=C(),a=_("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=C(),f=_("ul"),m=_("li"),u=_("a"),g=W(d),y=C(),R=_("li"),b=_("a"),v=W(k),h(n,"type","button"),h(n,"class","close"),h(n,"data-dismiss","modal"),h(n,"aria-label","Close"),h(e,"class","modal-header"),h(a,"class","block-title"),h(u,"href",w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${i[2]}`),h(b,"href",p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${i[2]}`),h(f,"class","create-button-list"),h(o,"class","modal-body"),h(t,"class","modal create-button-modal")},m(N,U){L(N,t,U),c(t,e),c(e,n),c(t,s),c(t,o),E&&E.m(o,null),c(o,l),c(o,a),c(o,r),c(o,f),c(f,m),c(m,u),c(u,g),c(f,y),c(f,R),c(R,b),c(b,v),i[8](t),A||(F=[M(n,"click",i[4]),Rt(zt.call(null,t,"body"))],A=!0)},p(N,U){N[1].length>0?E?E.p(N,U):(E=Fe(N),E.c(),E.m(o,l)):E&&(E.d(1),E=null),U&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${N[2]}`)&&h(u,"href",w),U&4&&p!==(p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${N[2]}`)&&h(b,"href",p)},d(N){N&&O(t),E&&E.d(),i[8](null),A=!1,st(F)}}}function Fe(i){let t,e,n,s=ct(i[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=Ne(Oe(i,s,l));return{c(){t=_("p"),t.textContent=`${window.trans("Content Data")}`,e=C(),n=_("ul");for(let l=0;l<o.length;l+=1)o[l].c();h(t,"class","block-title"),h(n,"class","create-button-list")},m(l,a){L(l,t,a),L(l,e,a),L(l,n,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,null)},p(l,a){if(a&6){s=ct(l[1]);let r;for(r=0;r<s.length;r+=1){const f=Oe(l,s,r);o[r]?o[r].p(f,a):(o[r]=Ne(f),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(l){l&&(O(t),O(e),O(n)),jt(o,l)}}}function Ne(i){let t,e,n=window.trans("New [_1] creation",i[9].name)+"",s,o,l;return{c(){t=_("li"),e=_("a"),s=W(n),l=C(),h(e,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${i[9].id}&type=content_data_${i[9].id}&blog_id=${i[2]}`)},m(a,r){L(a,t,r),c(t,e),c(e,s),c(t,l)},p(a,r){r&2&&n!==(n=window.trans("New [_1] creation",a[9].name)+"")&&lt(s,n),r&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[9].id}&type=content_data_${a[9].id}&blog_id=${a[2]}`)&&h(e,"href",o)},d(a){a&&O(t)}}}function nn(i){let t,e,n,s,o=i[0]&&Le(i);return{c(){t=C(),o&&o.c(),e=Et()},m(l,a){L(l,t,a),o&&o.m(l,a),L(l,e,a),n||(s=M(document.body,"click",i[5]),n=!0)},p(l,[a]){l[0]?o?o.p(l,a):(o=Le(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:q,o:q,d(l){l&&(O(t),O(e)),o&&o.d(l),n=!1,s()}}}function sn(i,t,e){let{contentTypes:n=[]}=t,{blog_id:s}=t,{open:o=!1}=t,{buttonRef:l=null}=t,{anchorRef:a=null}=t,r=null;const f=()=>{e(0,o=!1)},m=d=>{const g=d.target;o&&ie([l,r],g)&&f()};function u(d){mt[d?"unshift":"push"](()=>{r=d,e(3,r),e(7,a),e(0,o)})}return i.$$set=d=>{"contentTypes"in d&&e(1,n=d.contentTypes),"blog_id"in d&&e(2,s=d.blog_id),"open"in d&&e(0,o=d.open),"buttonRef"in d&&e(6,l=d.buttonRef),"anchorRef"in d&&e(7,a=d.anchorRef)},i.$$.update=()=>{if(i.$$.dirty&137&&a){if(r){const g=`calc(${a.getBoundingClientRect().bottom}px + 10px)`;e(3,r.style.top=g,r)}o?a.classList.add("open"):a.classList.remove("open")}},[o,n,s,r,f,m,l,a,u]}class ln extends Nt{constructor(t){super(),Ft(this,t,sn,nn,Tt,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7})}}const on=({target:i,props:t})=>{const e=new ln({target:i,props:t});i.getElementsByTagName("a")[0].addEventListener("click",n=>{n.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,e.$set(t)})};function rn(i){let t,e,n,s;return{c(){t=_("div"),h(t,"class","mt-primaryNavigation-overlay"),h(t,"style",e=`display: ${i[0]?"block":"none"}`)},m(o,l){L(o,t,l),n||(s=[Rt(zt.call(null,t,"body")),M(t,"mouseenter",i[1])],n=!0)},p(o,[l]){l&1&&e!==(e=`display: ${o[0]?"block":"none"}`)&&h(t,"style",e)},i:q,o:q,d(o){o&&O(t),n=!1,st(s)}}}function an(i,t,e){let{buttonRef:n}=t,{collapsed:s=!1}=t,{isStored:o=!1}=t,l=!1;const a=(d,g)=>{const w=document.querySelector('[data-is="content-wrapper"]');g?w.classList.add(d):w.classList.remove(d)},r=()=>{a("collapsed",s)},f=()=>{a("mouseover",l)},m=()=>{var d;s&&(l=!0,f(),(d=document.querySelector('[data-is="primary-navigation"]'))===null||d===void 0||d.addEventListener("mouseleave",u,{once:!0}))},u=()=>{l=!1,f()};return te(()=>{o||window.innerWidth<1e3&&e(0,s=!0),r()}),i.$$set=d=>{"buttonRef"in d&&e(2,n=d.buttonRef),"collapsed"in d&&e(0,s=d.collapsed),"isStored"in d&&e(3,o=d.isStored)},i.$$.update=()=>{i.$$.dirty&5&&(r(),l=!1,f(),n&&(s?(n.classList.remove("expanded"),n.classList.add("collapsed")):(n.classList.remove("collapsed"),n.classList.add("expanded"))))},[s,m,n,o]}class cn extends Nt{constructor(t){super(),Ft(this,t,an,rn,Tt,{buttonRef:2,collapsed:0,isStored:3})}}function fn(i,t){const e=new cn({target:i,props:{collapsed:t.collapsed,buttonRef:t.buttonRef,isStored:t.isStored}});t.buttonRef.addEventListener("click",()=>{t.buttonRef.classList.contains("collapsed")?t.collapsed=!1:t.collapsed=!0,e.$set(t),sessionStorage.setItem(t.sessionName,t.collapsed.toString())})}function ze(i){let t,e;return{c(){t=$t("title"),e=W(i[2])},m(n,s){L(n,t,s),c(t,e)},p(n,s){s&4&&lt(e,n[2])},d(n){n&&O(t)}}}function hn(i){let t,e,n=i[2]&&ze(i);return{c(){t=$t("svg"),n&&n.c(),e=$t("use"),Se(e,"xlink:href",i[1]),h(t,"role","img"),h(t,"class",i[0])},m(s,o){L(s,t,o),n&&n.m(t,null),c(t,e)},p(s,[o]){s[2]?n?n.p(s,o):(n=ze(s),n.c(),n.m(t,e)):n&&(n.d(1),n=null),o&2&&Se(e,"xlink:href",s[1]),o&1&&h(t,"class",s[0])},i:q,o:q,d(s){s&&O(t),n&&n.d()}}}function un(i,t,e){let{class:n}=t,{href:s}=t,{title:o}=t;return i.$$set=l=>{"class"in l&&e(0,n=l.class),"href"in l&&e(1,s=l.href),"title"in l&&e(2,o=l.title)},[n,s,o]}class Vt extends Nt{constructor(t){super(),Ft(this,t,un,hn,Tt,{class:0,href:1,title:2})}}function Ie(i,t,e){const n=i.slice();return n[17]=t[e],n}function Me(i,t,e){const n=i.slice();return n[20]=t[e],n}function Ue(i){let t,e,n,s,o,l,a,r,f,m,u,d,g,w,y,R,b,k,v,p,A,F,E,N,U,H,ft,nt,Q,j,ht,it,S,V,vt,x=ct(i[5]),D=[];for(let T=0;T<x.length;T+=1)D[T]=We(Me(i,x,T));function ut(T,G){return T[4].length>0?_n:dn}let J=ut(i),P=J(i);return j=new Vt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){t=_("div"),e=C(),n=_("div"),s=_("div"),o=_("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',l=C(),a=_("div"),r=_("form"),f=_("input"),m=C(),u=_("input"),d=C(),g=_("input"),w=C(),y=_("input"),R=C(),b=_("input"),k=C(),v=_("div");for(let T=0;T<D.length;T+=1)D[T].c();p=C(),A=_("div"),F=_("select"),P.c(),N=C(),U=_("div"),H=_("input"),ft=C(),nt=_("div"),Q=_("button"),qt(j.$$.fragment),ht=C(),it=_("span"),it.textContent=`${window.trans("Search")}`,h(t,"class","search-button-modal-overlay"),h(o,"type","button"),h(o,"class","close"),h(o,"data-dismiss","modal"),h(o,"aria-label","Close"),h(s,"class","modal-header"),h(f,"type","hidden"),h(f,"name","__mode"),f.value="search_replace",h(u,"type","hidden"),h(u,"name","blog_id"),u.value=i[2],h(g,"type","hidden"),h(g,"name","_type"),h(y,"type","hidden"),h(y,"name","do_search"),y.value="1",h(b,"type","hidden"),h(b,"name","magic_token"),b.value=i[3],h(v,"class","search-type"),h(F,"name","content_type_id"),F.disabled=E=i[1]!=="content_data"||i[4].length===0,Te(F,"disabled",i[1]!=="content_data"),h(A,"class","search-content-type"),h(H,"type","text"),h(H,"placeholder",window.trans("Select target and search text...")),h(H,"name","search"),h(U,"class","search-text-box"),h(Q,"type","submit"),h(Q,"class","btn btn-primary"),h(nt,"class","submit-button"),h(r,"class","search-form"),h(r,"method","post"),h(r,"action",window.ScriptURI),h(a,"class","modal-body"),h(n,"class","modal search-button-modal")},m(T,G){L(T,t,G),L(T,e,G),L(T,n,G),c(n,s),c(s,o),c(n,l),c(n,a),c(a,r),c(r,f),c(r,m),c(r,u),c(r,d),c(r,g),et(g,i[1]),c(r,w),c(r,y),c(r,R),c(r,b),c(r,k),c(r,v);for(let I=0;I<D.length;I+=1)D[I]&&D[I].m(v,null);c(r,p),c(r,A),c(A,F),P.m(F,null),c(r,N),c(r,U),c(U,H),i[15](H),c(r,ft),c(r,nt),c(nt,Q),Ot(j,Q,null),c(Q,ht),c(Q,it),i[16](n),S=!0,V||(vt=[M(t,"click",i[8]),Rt(zt.call(null,t,"body")),M(o,"click",i[8]),M(g,"input",i[12]),Rt(zt.call(null,n,"body"))],V=!0)},p(T,G){if((!S||G&4)&&(u.value=T[2]),G&2&&et(g,T[1]),(!S||G&8)&&(b.value=T[3]),G&34){x=ct(T[5]);let I;for(I=0;I<x.length;I+=1){const X=Me(T,x,I);D[I]?D[I].p(X,G):(D[I]=We(X),D[I].c(),D[I].m(v,null))}for(;I<D.length;I+=1)D[I].d(1);D.length=x.length}J===(J=ut(T))&&P?P.p(T,G):(P.d(1),P=J(T),P&&(P.c(),P.m(F,null))),(!S||G&18&&E!==(E=T[1]!=="content_data"||T[4].length===0))&&(F.disabled=E),(!S||G&2)&&Te(F,"disabled",T[1]!=="content_data")},i(T){S||(B(j.$$.fragment,T),S=!0)},o(T){Z(j.$$.fragment,T),S=!1},d(T){T&&(O(t),O(e),O(n)),jt(D,T),P.d(),i[15](null),Lt(j),i[16](null),V=!1,st(vt)}}}function We(i){let t,e,n,s=!1,o,l,a=i[20].label+"",r,f,m,u,d;return m=Ke(i[14][0]),{c(){t=_("label"),e=_("input"),l=C(),r=W(a),f=C(),h(e,"type","radio"),h(e,"name","type"),e.__value=n=i[20].key,et(e,e.__value),h(e,"id",o=i[20].key),m.p(e)},m(g,w){L(g,t,w),c(t,e),e.checked=e.__value===i[1],c(t,l),c(t,r),c(t,f),u||(d=M(e,"change",i[13]),u=!0)},p(g,w){w&32&&n!==(n=g[20].key)&&(e.__value=n,et(e,e.__value),s=!0),w&32&&o!==(o=g[20].key)&&h(e,"id",o),(s||w&34)&&(e.checked=e.__value===g[1]),w&32&&a!==(a=g[20].label+"")&&lt(r,a)},d(g){g&&O(t),m.r(),u=!1,d()}}}function dn(i){let t;return{c(){t=_("option"),t.textContent=`${window.trans("No Content Type could be found.")}`,t.__value="",et(t,t.__value)},m(e,n){L(e,t,n)},p:q,d(e){e&&O(t)}}}function _n(i){let t,e=ct(i[4]),n=[];for(let s=0;s<e.length;s+=1)n[s]=De(Ie(i,e,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=Et()},m(s,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,o);L(s,t,o)},p(s,o){if(o&16){e=ct(s[4]);let l;for(l=0;l<e.length;l+=1){const a=Ie(s,e,l);n[l]?n[l].p(a,o):(n[l]=De(a),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=e.length}},d(s){s&&O(t),jt(n,s)}}}function De(i){let t,e=i[17].name+"",n,s;return{c(){t=_("option"),n=W(e),t.__value=s=i[17].id,et(t,t.__value)},m(o,l){L(o,t,l),c(t,n)},p(o,l){l&16&&e!==(e=o[17].name+"")&&lt(n,e),l&16&&s!==(s=o[17].id)&&(t.__value=s,et(t,t.__value))},d(o){o&&O(t)}}}function pn(i){let t,e,n,s,o,l=i[0]&&Ue(i);return{c(){t=C(),l&&l.c(),e=Et()},m(a,r){L(a,t,r),l&&l.m(a,r),L(a,e,r),n=!0,s||(o=M(document.body,"click",i[9]),s=!0)},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&B(l,1)):(l=Ue(a),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(Bt(),Z(l,1,1,()=>{l=null}),Ht())},i(a){n||(B(l),n=!0)},o(a){Z(l),n=!1},d(a){a&&(O(t),O(e)),l&&l.d(a),s=!1,o()}}}function gn(i,t,e){let{blogId:n}=t,{magicToken:s}=t,{contentTypes:o=[]}=t,{open:l=!1}=t,{buttonRef:a}=t,{anchorRef:r}=t,{searchTabs:f}=t,{objectType:m}=t;const u=()=>{e(0,l=!1)};let d=null;const g=p=>{const A=p.target;l&&ie([a,d],A)&&u()};let w=null;te(async()=>{m&&f.find(p=>p.key===m)||e(1,m=f[0].key)});const y=[[]];function R(){m=this.value,e(1,m)}function b(){m=this.__value,e(1,m)}function k(p){mt[p?"unshift":"push"](()=>{w=p,e(6,w)})}function v(p){mt[p?"unshift":"push"](()=>{d=p,e(7,d)})}return i.$$set=p=>{"blogId"in p&&e(2,n=p.blogId),"magicToken"in p&&e(3,s=p.magicToken),"contentTypes"in p&&e(4,o=p.contentTypes),"open"in p&&e(0,l=p.open),"buttonRef"in p&&e(10,a=p.buttonRef),"anchorRef"in p&&e(11,r=p.anchorRef),"searchTabs"in p&&e(5,f=p.searchTabs),"objectType"in p&&e(1,m=p.objectType)},i.$$.update=()=>{i.$$.dirty&2049&&r&&(l?r.classList.add("open"):r.classList.remove("open")),i.$$.dirty&65&&l&&w&&w.focus()},[l,m,n,s,o,f,w,d,u,g,a,r,R,b,y,k,v]}class mn extends Nt{constructor(t){super(),Ft(this,t,gn,pn,Tt,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function bn(i,t){var e;let n=[];if(i.dataset.searchTabsJson){const o=JSON.parse(i.dataset.searchTabsJson);o.success&&(n=o.data)}const s=new mn({target:i,props:{searchTabs:n,objectType:(e=i.dataset.objectType)!==null&&e!==void 0?e:"",...t}});t.anchorRef.addEventListener("click",o=>{o.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,s.$set(t)})}const wn=new be,je=new de({cache:wn}),yn=async i=>{const t={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(i.items),limit:i.limit,magic_token:i.magicToken,page:i.page,sort_by:"id",sort_order:"descend"};return await je.fetchWithCache({key:je.generateCacheKey({prefix:"sites",params:t}),fetcher:async()=>{const e=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json"});if(e.error)return console.log("Failed to fetch sites:",e.error),{count:0,page:0,pageMax:0,sites:[],error:e.error};const n=e.result.objects.map(s=>{const o=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:o,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(e.result.count),page:Number.parseInt(e.result.page),pageMax:Number.parseInt(e.result.page_max),sites:n}}})};function Pe(i,t,e){const n=i.slice();return n[30]=t[e],n}function Ge(i){let t,e,n,s,o,l,a,r=window.trans("[_1]Site",i[2].toString())+"",f,m,u,d,g,w,y,R,b,k,v,p,A,F,E,N,U,H,ft,nt,Q,j,ht,it,S,V,vt,x,D,ut,J,P,T,G,I,X,le,It,_t,oe,Mt,ot,re,St,Jt,kt,Kt,ae,Qt,ce,Ut,Y,$,tt,Xt,fe;_t=new Vt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/sprite.svg#ic_search`}});const he=[Sn,vn],rt=[];function ue(z,K){return z[7]?0:1}return Y=ue(i),$=rt[Y]=he[Y](i),{c(){t=_("div"),e=_("div"),n=_("div"),s=_("div"),o=_("div"),l=_("span"),a=W("("),f=W(r),m=W(")"),u=C(),d=_("p"),d.textContent=`${window.trans("Site List")}`,g=C(),w=_("div"),y=_("div"),R=_("button"),b=W("<<"),v=C(),p=_("button"),A=W("<"),E=C(),N=_("span"),U=_("span"),H=W(i[3]),ft=W("/"),nt=W(i[4]),Q=C(),j=_("button"),ht=W(">"),S=C(),V=_("button"),vt=W(">>"),D=C(),ut=_("div"),J=_("select"),P=_("option"),P.textContent=`${window.trans("All Sites")}`,T=_("option"),T.textContent=`${window.trans("Only to child sites within this system")}`,G=C(),I=_("div"),X=_("input"),le=C(),It=_("button"),qt(_t.$$.fragment),oe=C(),Mt=_("div"),ot=_("button"),ot.innerHTML='<span aria-hidden="true">\xD7</span>',re=C(),St=_("table"),Jt=_("thead"),kt=_("tr"),Kt=_("th"),Kt.textContent=`${window.trans("Site Name")}`,ae=C(),Qt=_("th"),Qt.textContent=`${window.trans("Parent Site")}`,ce=C(),Ut=_("tbody"),$.c(),h(o,"class","table-title"),h(R,"type","button"),R.disabled=k=i[3]<=1,h(p,"type","button"),p.disabled=F=i[3]<=1,h(U,"class","current"),h(N,"class","page-num"),h(j,"type","button"),j.disabled=it=i[3]===i[4],h(V,"type","button"),V.disabled=x=i[3]===i[4],h(y,"class","prev-next"),P.__value="",et(P,P.__value),T.__value="blog",et(T,T.__value),i[5]===void 0&&Pt(()=>i[24].call(J)),h(ut,"class","site-type-filter"),h(X,"type","text"),h(X,"placeholder",window.trans("Filter by site name")),h(I,"class","site-name-filter"),h(ot,"type","button"),h(ot,"class","close"),h(ot,"data-dismiss","modal"),h(ot,"aria-label","Close"),h(Mt,"class","close"),h(w,"class","table-control"),h(s,"class","site-list-table-header"),h(n,"class","site-list-table"),h(e,"class","modal-body"),h(t,"class","modal site-list-button-modal")},m(z,K){L(z,t,K),c(t,e),c(e,n),c(n,s),c(s,o),c(o,l),c(l,a),c(l,f),c(l,m),c(o,u),c(o,d),c(s,g),c(s,w),c(w,y),c(y,R),c(R,b),c(y,v),c(y,p),c(p,A),c(y,E),c(y,N),c(N,U),c(U,H),c(N,ft),c(N,nt),c(y,Q),c(y,j),c(j,ht),c(y,S),c(y,V),c(V,vt),c(w,D),c(w,ut),c(ut,J),c(J,P),c(J,T),ke(J,i[5],!0),c(w,G),c(w,I),c(I,X),et(X,i[6]),c(I,le),c(I,It),Ot(_t,It,null),c(w,oe),c(w,Mt),c(Mt,ot),c(n,re),c(n,St),c(St,Jt),c(Jt,kt),c(kt,Kt),c(kt,ae),c(kt,Qt),c(St,ce),c(St,Ut),rt[Y].m(Ut,null),i[27](t),tt=!0,Xt||(fe=[M(R,"click",i[13]),M(R,"keydown",i[20]),M(p,"click",i[12]),M(p,"keydown",i[21]),M(j,"click",i[10]),M(j,"keydown",i[22]),M(V,"click",i[11]),M(V,"keydown",i[23]),M(J,"change",i[24]),M(J,"change",i[14]),M(X,"input",i[25]),M(X,"keydown",i[26]),M(It,"click",i[14]),M(ot,"click",i[9]),Rt(zt.call(null,t,"body"))],Xt=!0)},p(z,K){(!tt||K[0]&4)&&r!==(r=window.trans("[_1]Site",z[2].toString())+"")&&lt(f,r),(!tt||K[0]&8&&k!==(k=z[3]<=1))&&(R.disabled=k),(!tt||K[0]&8&&F!==(F=z[3]<=1))&&(p.disabled=F),(!tt||K[0]&8)&&lt(H,z[3]),(!tt||K[0]&16)&&lt(nt,z[4]),(!tt||K[0]&24&&it!==(it=z[3]===z[4]))&&(j.disabled=it),(!tt||K[0]&24&&x!==(x=z[3]===z[4]))&&(V.disabled=x),K[0]&32&&ke(J,z[5]),K[0]&64&&X.value!==z[6]&&et(X,z[6]);let Yt=Y;Y=ue(z),Y===Yt?rt[Y].p(z,K):(Bt(),Z(rt[Yt],1,1,()=>{rt[Yt]=null}),Ht(),$=rt[Y],$?$.p(z,K):($=rt[Y]=he[Y](z),$.c()),B($,1),$.m(Ut,null))},i(z){tt||(B(_t.$$.fragment,z),B($),tt=!0)},o(z){Z(_t.$$.fragment,z),Z($),tt=!1},d(z){z&&O(t),Lt(_t),rt[Y].d(),i[27](null),Xt=!1,st(fe)}}}function vn(i){let t,e,n=ct(i[1]),s=[];for(let l=0;l<n.length;l+=1)s[l]=Be(Pe(i,n,l));const o=l=>Z(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();t=Et()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);L(l,t,a),e=!0},p(l,a){if(a[0]&2){n=ct(l[1]);let r;for(r=0;r<n.length;r+=1){const f=Pe(l,n,r);s[r]?(s[r].p(f,a),B(s[r],1)):(s[r]=Be(f),s[r].c(),B(s[r],1),s[r].m(t.parentNode,t))}for(Bt(),r=n.length;r<s.length;r+=1)o(r);Ht()}},i(l){if(!e){for(let a=0;a<n.length;a+=1)B(s[a]);e=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Z(s[a]);e=!1},d(l){l&&O(t),jt(s,l)}}}function Sn(i){let t,e;return{c(){t=_("tr"),e=_("td"),e.textContent=`${window.trans("Loading...")}`,h(e,"colspan","2"),h(e,"class","loading")},m(n,s){L(n,t,s),c(t,e)},p:q,i:q,o:q,d(n){n&&O(t)}}}function kn(i){let t;return{c(){t=_("span"),t.textContent="-",h(t,"class","text-center")},m(e,n){L(e,t,n)},p:q,d(e){e&&O(t)}}}function Tn(i){let t=i[30].parentSiteName+"",e;return{c(){e=W(t)},m(n,s){L(n,e,s)},p(n,s){s[0]&2&&t!==(t=n[30].parentSiteName+"")&&lt(e,t)},d(n){n&&O(e)}}}function Be(i){let t,e,n,s,o=i[30].name+"",l,a,r,f,m,u,d,g,w,y;s=new Vt({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/sprite.svg#ic_sites`}}),m=new Vt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/sprite.svg#ic_permalink`}});function R(v,p){return v[30].parentSiteName?Tn:kn}let b=R(i),k=b(i);return{c(){t=_("tr"),e=_("td"),n=_("a"),qt(s.$$.fragment),l=W(o),r=C(),f=_("a"),qt(m.$$.fragment),d=C(),g=_("td"),k.c(),w=C(),h(n,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${i[30].id}`),h(n,"class","dashboard-link"),h(f,"href",u=i[30].siteUrl),h(f,"class","site-link"),h(f,"target","_blank")},m(v,p){L(v,t,p),c(t,e),c(e,n),Ot(s,n,null),c(n,l),c(e,r),c(e,f),Ot(m,f,null),c(t,d),c(t,g),k.m(g,null),c(t,w),y=!0},p(v,p){(!y||p[0]&2)&&o!==(o=v[30].name+"")&&lt(l,o),(!y||p[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${v[30].id}`))&&h(n,"href",a),(!y||p[0]&2&&u!==(u=v[30].siteUrl))&&h(f,"href",u),b===(b=R(v))&&k?k.p(v,p):(k.d(1),k=b(v),k&&(k.c(),k.m(g,null)))},i(v){y||(B(s.$$.fragment,v),B(m.$$.fragment,v),y=!0)},o(v){Z(s.$$.fragment,v),Z(m.$$.fragment,v),y=!1},d(v){v&&O(t),Lt(s),Lt(m),k.d()}}}function Rn(i){let t,e,n,s,o,l=i[0]&&Ge(i);return{c(){t=C(),l&&l.c(),e=Et()},m(a,r){L(a,t,r),l&&l.m(a,r),L(a,e,r),n=!0,s||(o=M(document.body,"click",i[15]),s=!0)},p(a,r){a[0]?l?(l.p(a,r),r[0]&1&&B(l,1)):(l=Ge(a),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(Bt(),Z(l,1,1,()=>{l=null}),Ht())},i(a){n||(B(l),n=!0)},o(a){Z(l),n=!1},d(a){a&&(O(t),O(e)),l&&l.d(a),s=!1,o()}}}function En(i,t,e){let{magicToken:n}=t,{limit:s=50}=t,{open:o=!1}=t,{buttonRef:l}=t,{anchorRef:a}=t;const r=()=>{e(0,o=!1)};let f=[],m=0,u=1,d=1,g="",w="",y=[],R=!1,b=null;const k=()=>{e(3,u++,u),E()},v=()=>{e(3,u=d),E()},p=()=>{e(3,u--,u),E()},A=()=>{e(3,u=1),E()},F=()=>{y=[],g==="blog"&&(y=[{type:"parent_website",args:{value:""}}]),e(6,w=w.trim()),w!==""&&y.push({type:"name",args:{string:w,option:"contains"}}),e(3,u=1),E()},E=async()=>{e(7,R=!0);const S=await yn({magicToken:n,items:y,page:u,limit:s});e(2,m=S.count),e(4,d=S.pageMax),e(3,u=d!==0?S.page:0),e(1,f=S.sites),e(7,R=!1)},N=S=>{const V=S.target;o&&ie([l,b],V)&&r()};te(async()=>{E()});const U=S=>S.key==="Enter"&&A(),H=S=>S.key==="Enter"&&p(),ft=S=>S.key==="Enter"&&k(),nt=S=>S.key==="Enter"&&v();function Q(){g=Xe(this),e(5,g)}function j(){w=this.value,e(6,w)}const ht=S=>S.key==="Enter"&&F();function it(S){mt[S?"unshift":"push"](()=>{b=S,e(8,b)})}return i.$$set=S=>{"magicToken"in S&&e(16,n=S.magicToken),"limit"in S&&e(17,s=S.limit),"open"in S&&e(0,o=S.open),"buttonRef"in S&&e(18,l=S.buttonRef),"anchorRef"in S&&e(19,a=S.anchorRef)},i.$$.update=()=>{i.$$.dirty[0]&524289&&a&&(o?a.classList.add("open"):a.classList.remove("open"))},[o,f,m,u,d,g,w,R,b,r,k,v,p,A,F,N,n,s,l,a,U,H,ft,nt,Q,j,ht,it]}class Cn extends Nt{constructor(t){super(),Ft(this,t,En,Rn,Tt,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function An(i,t){const e=new Cn({target:i,props:t});t.anchorRef.addEventListener("click",n=>{n.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,e.$set(t)})}document.addEventListener("DOMContentLoaded",()=>{var i,t;const e=document.querySelector('[data-is="primary-navigation-toggle"]');if(e!==null){const m="collapsed",u=sessionStorage.getItem(m);fn(e,{collapsed:u==="true",buttonRef:e.getElementsByTagName("button")[0],sessionName:m,isStored:u!==null})}const n=document.querySelector('[data-script="admin-header"]');if(n===null){console.error("data-script='admin-header' is not set");return}const s=(i=n.getAttribute("data-blog-id"))!==null&&i!==void 0?i:"",o=(t=n.getAttribute("data-magic-token"))!==null&&t!==void 0?t:"";if(o===""){console.error("data-magic-token is not set");return}const l="50",a=document.querySelector('[data-is="site-list-button"]');if(a!==null){const m=a.getElementsByTagName("a")[0];An(a,{magicToken:o,limit:Number.parseInt(l),open:!1,buttonRef:a,anchorRef:m})}const r=document.querySelector('[data-is="create-button"]'),f=document.querySelector('[data-is="search-button"]');(r!==null||f!==null)&&Ve({blogId:s,magicToken:o}).then(m=>{if(r!==null){const u=r.getElementsByTagName("a")[0];on({target:r,props:{blog_id:s,contentTypes:m.contentTypes.filter(d=>d.can_create===1),open:!1,buttonRef:r,anchorRef:u}})}if(f!==null){const u=f.getElementsByTagName("a")[0];bn(f,{blogId:s,magicToken:o,contentTypes:m.contentTypes.filter(d=>d.can_search===1),open:!1,buttonRef:f,anchorRef:u})}})});
