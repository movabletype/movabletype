class dt{constructor({cache:e}){this.cache=e}generateCacheKey({prefix:e,params:t}){const n=Object.keys(t).sort().reduce((s,o)=>(s[o]=t[o],s),{});return`${e}_${JSON.stringify(n)}`}async fetchWithCache({key:e,fetcher:t,ttl:n=1e3*60,noCache:s=!1}){return s?t():this.cache.get(e)||t().then(l=>(this.cache.set(e,l,n),l)).catch(l=>(console.log("Failed to fetch data:",l),l))}clearCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear()}}const Ee=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_t=new Set,tt=typeof process=="object"&&process?process:{},mt=(i,e,t,n)=>{typeof tt.emitWarning=="function"?tt.emitWarning(i,e,t,n):console.error(`[${t}] ${e}: ${i}`)};let Je=globalThis.AbortController,pt=globalThis.AbortSignal;if(typeof Je>"u"){pt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Je=class{constructor(){e()}signal=new pt;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let i=tt.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{i&&(i=!1,mt("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const xt=i=>!_t.has(i),pe=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),bt=i=>pe(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Ke:null:null;class Ke extends Array{constructor(e){super(e),this.fill(0)}}class Me{heap;length;static#a=!1;static create(e){const t=bt(e);if(!t)return[];Me.#a=!0;const n=new Me(e,t);return Me.#a=!1,n}constructor(e,t){if(!Me.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class rt{#a;#u;#m;#p;#L;#F;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#b;#i;#n;#e;#c;#h;#r;#l;#g;#o;#w;#y;#d;#v;#C;#f;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#d,sizes:e.#w,keyMap:e.#i,keyList:e.#n,valList:e.#e,next:e.#c,prev:e.#h,get head(){return e.#r},get tail(){return e.#l},free:e.#g,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,n,s,o)=>e.#W(t,n,s,o),moveToTail:t=>e.#O(t),indexes:t=>e.#S(t),rindexes:t=>e.#k(t),isStale:t=>e.#_(t)}}get max(){return this.#a}get maxSize(){return this.#u}get calculatedSize(){return this.#b}get size(){return this.#s}get fetchMethod(){return this.#L}get memoMethod(){return this.#F}get dispose(){return this.#m}get disposeAfter(){return this.#p}constructor(e){const{max:t=0,ttl:n,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:r,dispose:f,disposeAfter:_,noDisposeOnSet:h,noUpdateTTL:m,maxSize:g=0,maxEntrySize:y=0,sizeCalculation:b,fetchMethod:T,memoMethod:v,noDeleteOnFetchRejection:R,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:w,ignoreFetchAbort:C}=e;if(t!==0&&!pe(t))throw new TypeError("max option must be a nonnegative integer");const k=t?bt(t):Array;if(!k)throw new Error("invalid max value: "+t);if(this.#a=t,this.#u=g,this.maxEntrySize=y||this.#u,this.sizeCalculation=b,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(v!==void 0&&typeof v!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#F=v,T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=T,this.#C=!!T,this.#i=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#c=new k(t),this.#h=new k(t),this.#r=0,this.#l=0,this.#g=Me.create(t),this.#s=0,this.#b=0,typeof f=="function"&&(this.#m=f),typeof _=="function"?(this.#p=_,this.#o=[]):(this.#p=void 0,this.#o=void 0),this.#v=!!this.#m,this.#f=!!this.#p,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!R,this.allowStaleOnFetchRejection=!!p,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!C,this.maxEntrySize!==0){if(this.#u!==0&&!pe(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!pe(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=pe(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!pe(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#z()}if(this.#a===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#u){const N="LRU_CACHE_UNBOUNDED";xt(N)&&(_t.add(N),mt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,rt))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#z(){const e=new Ke(this.#a),t=new Ke(this.#a);this.#d=e,this.#y=t,this.#D=(o,l,a=Ee.now())=>{if(t[o]=l!==0?a:0,e[o]=l,l!==0&&this.ttlAutopurge){const r=setTimeout(()=>{this.#_(o)&&this.#T(this.#n[o],"expire")},l+1);r.unref&&r.unref()}},this.#E=o=>{t[o]=e[o]!==0?Ee.now():0},this.#R=(o,l)=>{if(e[l]){const a=e[l],r=t[l];if(!a||!r)return;o.ttl=a,o.start=r,o.now=n||s();const f=o.now-r;o.remainingTTL=a-f}};let n=0;const s=()=>{const o=Ee.now();if(this.ttlResolution>0){n=o;const l=setTimeout(()=>n=0,this.ttlResolution);l.unref&&l.unref()}return o};this.getRemainingTTL=o=>{const l=this.#i.get(o);if(l===void 0)return 0;const a=e[l],r=t[l];if(!a||!r)return 1/0;const f=(n||s())-r;return a-f},this.#_=o=>{const l=t[o],a=e[o];return!!a&&!!l&&(n||s())-l>a}}#E=()=>{};#R=()=>{};#D=()=>{};#_=()=>!1;#B(){const e=new Ke(this.#a);this.#b=0,this.#w=e,this.#A=t=>{this.#b-=e[t],e[t]=0},this.#U=(t,n,s,o)=>{if(this.#t(n))return 0;if(!pe(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(n,t),!pe(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#N=(t,n,s)=>{if(e[t]=n,this.#u){const o=this.#u-e[t];for(;this.#b>o;)this.#I(!0)}this.#b+=e[t],s&&(s.entrySize=n,s.totalCalculatedSize=this.#b)}}#A=e=>{};#N=(e,t,n)=>{};#U=(e,t,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#l;!(!this.#M(t)||((e||!this.#_(t))&&(yield t),t===this.#r));)t=this.#h[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#r;!(!this.#M(t)||((e||!this.#_(t))&&(yield t),t===this.#l));)t=this.#c[t]}#M(e){return e!==void 0&&this.#i.get(this.#n[e])===e}*entries(){for(const e of this.#S())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(const e of this.#k())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(const e of this.#S()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(const e of this.#k()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(const e of this.#S())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#k())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const n of this.#S()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],t)}}forEach(e,t=this){for(const n of this.#S()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[n],this)}}rforEach(e,t=this){for(const n of this.#k()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[n],this)}}purgeStale(){let e=!1;for(const t of this.#k({allowStale:!0}))this.#_(t)&&(this.#T(this.#n[t],"expire"),e=!0);return e}info(e){const t=this.#i.get(e);if(t===void 0)return;const n=this.#e[t],s=this.#t(n)?n.__staleWhileFetching:n;if(s===void 0)return;const o={value:s};if(this.#d&&this.#y){const l=this.#d[t],a=this.#y[t];if(l&&a){const r=l-(Ee.now()-a);o.ttl=r,o.start=Date.now()}}return this.#w&&(o.size=this.#w[t]),o}dump(){const e=[];for(const t of this.#S({allowStale:!0})){const n=this.#n[t],s=this.#e[t],o=this.#t(s)?s.__staleWhileFetching:s;if(o===void 0||n===void 0)continue;const l={value:o};if(this.#d&&this.#y){l.ttl=this.#d[t];const a=Ee.now()-this.#y[t];l.start=Math.floor(Date.now()-a)}this.#w&&(l.size=this.#w[t]),e.unshift([n,l])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const s=Date.now()-n.start;n.start=Ee.now()-s}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:r}=n;let{noUpdateTTL:f=this.noUpdateTTL}=n;const _=this.#U(e,t,n.size||0,a);if(this.maxEntrySize&&_>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.#T(e,"set"),this;let h=this.#s===0?void 0:this.#i.get(e);if(h===void 0)h=this.#s===0?this.#l:this.#g.length!==0?this.#g.pop():this.#s===this.#a?this.#I(!1):this.#s,this.#n[h]=e,this.#e[h]=t,this.#i.set(e,h),this.#c[this.#l]=h,this.#h[h]=this.#l,this.#l=h,this.#s++,this.#N(h,_,r),r&&(r.set="add"),f=!1;else{this.#O(h);const m=this.#e[h];if(t!==m){if(this.#C&&this.#t(m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:g}=m;g!==void 0&&!l&&(this.#v&&this.#m?.(g,e,"set"),this.#f&&this.#o?.push([g,e,"set"]))}else l||(this.#v&&this.#m?.(m,e,"set"),this.#f&&this.#o?.push([m,e,"set"]));if(this.#A(h),this.#N(h,_,r),this.#e[h]=t,r){r.set="replace";const g=m&&this.#t(m)?m.__staleWhileFetching:m;g!==void 0&&(r.oldValue=g)}}else r&&(r.set="update")}if(s!==0&&!this.#d&&this.#z(),this.#d&&(f||this.#D(h,s,o),r&&this.#R(r,h)),!l&&this.#f&&this.#o){const m=this.#o;let g;for(;g=m?.shift();)this.#p?.(...g)}return this}pop(){try{for(;this.#s;){const e=this.#e[this.#r];if(this.#I(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#o){const e=this.#o;let t;for(;t=e?.shift();)this.#p?.(...t)}}}#I(e){const t=this.#r,n=this.#n[t],s=this.#e[t];return this.#C&&this.#t(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#m?.(s,n,"evict"),this.#f&&this.#o?.push([s,n,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#g.push(t)),this.#s===1?(this.#r=this.#l=0,this.#g.length=0):this.#r=this.#c[t],this.#i.delete(n),this.#s--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=t,o=this.#i.get(e);if(o!==void 0){const l=this.#e[o];if(this.#t(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#_(o))s&&(s.has="stale",this.#R(s,o));else return n&&this.#E(o),s&&(s.has="hit",this.#R(s,o)),!0}else s&&(s.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,s=this.#i.get(e);if(s===void 0||!n&&this.#_(s))return;const o=this.#e[s];return this.#t(o)?o.__staleWhileFetching:o}#W(e,t,n,s){const o=t===void 0?void 0:this.#e[t];if(this.#t(o))return o;const l=new Je,{signal:a}=n;a?.addEventListener("abort",()=>l.abort(a.reason),{signal:l.signal});const r={signal:l.signal,options:n,context:s},f=(b,T=!1)=>{const{aborted:v}=l.signal,R=n.ignoreFetchAbort&&b!==void 0;if(n.status&&(v&&!T?(n.status.fetchAborted=!0,n.status.fetchError=l.signal.reason,R&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!R&&!T)return h(l.signal.reason);const A=g;return this.#e[t]===g&&(b===void 0?A.__staleWhileFetching?this.#e[t]=A.__staleWhileFetching:this.#T(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,b,r.options))),b},_=b=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=b),h(b)),h=b=>{const{aborted:T}=l.signal,v=T&&n.allowStaleOnFetchAbort,R=v||n.allowStaleOnFetchRejection,A=R||n.noDeleteOnFetchRejection,p=g;if(this.#e[t]===g&&(!A||p.__staleWhileFetching===void 0?this.#T(e,"fetch"):v||(this.#e[t]=p.__staleWhileFetching)),R)return n.status&&p.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw b},m=(b,T)=>{const v=this.#L?.(e,o,r);v&&v instanceof Promise&&v.then(R=>b(R===void 0?void 0:R),T),l.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(b(void 0),n.allowStaleOnFetchAbort&&(b=R=>f(R,!0)))})};n.status&&(n.status.fetchDispatched=!0);const g=new Promise(m).then(f,_),y=Object.assign(g,{__abortController:l,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,y,{...r.options,status:void 0}),t=this.#i.get(e)):this.#e[t]=y,y}#t(e){if(!this.#C)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Je}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:_=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:y=this.allowStaleOnFetchAbort,context:b,forceRefresh:T=!1,status:v,signal:R}=t;if(!this.#C)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:v});const A={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:l,noDisposeOnSet:a,size:r,sizeCalculation:f,noUpdateTTL:_,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:y,ignoreFetchAbort:g,status:v,signal:R};let p=this.#i.get(e);if(p===void 0){v&&(v.fetch="miss");const w=this.#W(e,p,A,b);return w.__returned=w}else{const w=this.#e[p];if(this.#t(w)){const Z=n&&w.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",Z&&(v.returnedStale=!0)),Z?w.__staleWhileFetching:w.__returned=w}const C=this.#_(p);if(!T&&!C)return v&&(v.fetch="hit"),this.#O(p),s&&this.#E(p),v&&this.#R(v,p),w;const k=this.#W(e,p,A,b),P=k.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=C?"stale":"refresh",P&&C&&(v.returnedStale=!0)),P?k.__staleWhileFetching:k.__returned=k}}async forceFetch(e,t={}){const n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){const n=this.#F;if(!n)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...l}=t,a=this.get(e,l);if(!o&&a!==void 0)return a;const r=n(e,a,{options:l,context:s});return this.set(e,r,l),r}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:l}=t,a=this.#i.get(e);if(a!==void 0){const r=this.#e[a],f=this.#t(r);return l&&this.#R(l,a),this.#_(a)?(l&&(l.get="stale"),f?(l&&n&&r.__staleWhileFetching!==void 0&&(l.returnedStale=!0),n?r.__staleWhileFetching:void 0):(o||this.#T(e,"expire"),l&&n&&(l.returnedStale=!0),n?r:void 0)):(l&&(l.get="hit"),f?r.__staleWhileFetching:(this.#O(a),s&&this.#E(a),r))}else l&&(l.get="miss")}#j(e,t){this.#h[t]=e,this.#c[e]=t}#O(e){e!==this.#l&&(e===this.#r?this.#r=this.#c[e]:this.#j(this.#h[e],this.#c[e]),this.#j(this.#l,e),this.#l=e)}delete(e){return this.#T(e,"delete")}#T(e,t){let n=!1;if(this.#s!==0){const s=this.#i.get(e);if(s!==void 0)if(n=!0,this.#s===1)this.#P(t);else{this.#A(s);const o=this.#e[s];if(this.#t(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#m?.(o,e,t),this.#f&&this.#o?.push([o,e,t])),this.#i.delete(e),this.#n[s]=void 0,this.#e[s]=void 0,s===this.#l)this.#l=this.#h[s];else if(s===this.#r)this.#r=this.#c[s];else{const l=this.#h[s];this.#c[l]=this.#c[s];const a=this.#c[s];this.#h[a]=this.#h[s]}this.#s--,this.#g.push(s)}}if(this.#f&&this.#o?.length){const s=this.#o;let o;for(;o=s?.shift();)this.#p?.(...o)}return n}clear(){return this.#P("delete")}#P(e){for(const t of this.#k({allowStale:!0})){const n=this.#e[t];if(this.#t(n))n.__abortController.abort(new Error("deleted"));else{const s=this.#n[t];this.#v&&this.#m?.(n,s,e),this.#f&&this.#o?.push([n,s,e])}}if(this.#i.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#d&&this.#y&&(this.#d.fill(0),this.#y.fill(0)),this.#w&&this.#w.fill(0),this.#r=0,this.#l=0,this.#g.length=0,this.#b=0,this.#s=0,this.#f&&this.#o){const t=this.#o;let n;for(;n=t?.shift();)this.#p?.(...n)}}}class gt{constructor(e){var t;this.cache=new rt({ttl:(t=e?.ttl)!==null&&t!==void 0?t:1e3*60,ttlAutopurge:!0,allowStale:!1})}get(e){const t=this.cache.get(e);if(t){if(t.expiry>Date.now())return t.data;this.delete(e)}return null}set(e,t,n){const s=Date.now()+n;this.cache.set(e,{data:t,expiry:s},{ttl:n})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const $t=new gt,wt=new dt({cache:$t}),en=async i=>{const e={__mode:"fetch_admin_header_content_types",blog_id:i.blogId,magic_token:i.magicToken};return await wt.fetchWithCache({key:wt.generateCacheKey({prefix:"content_types",params:e}),fetcher:async()=>{const t=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json"});return t.result.success!==1?{contentTypes:[]}:{contentTypes:t.result.content_types}}})};function G(){}function yt(i){return i()}function vt(){return Object.create(null)}function te(i){i.forEach(yt)}function nt(i){return typeof i=="function"}function Ae(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function tn(i){return Object.keys(i).length===0}function Oe(i){return i&&nt(i.destroy)?i.destroy:G}const nn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(i,e){i.appendChild(e)}function F(i,e,t){i.insertBefore(e,t||null)}function O(i){i.parentNode&&i.parentNode.removeChild(i)}function Pe(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function d(i){return document.createElement(i)}function it(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function I(i){return document.createTextNode(i)}function S(){return I(" ")}function ve(){return I("")}function W(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function u(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function St(i,e,t){i.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function kt(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function sn(i){return Array.from(i.childNodes)}function K(i,e){e=""+e,i.data!==e&&(i.data=e)}function ne(i,e){i.value=e??""}function Tt(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}function Rt(i,e,t){for(let n=0;n<i.options.length;n+=1){const s=i.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function ln(i){const e=i.querySelector(":checked");return e&&e.__value}function Ct(i,e,t){i.classList.toggle(e,!!t)}let Be;function Ge(i){Be=i}function on(){if(!Be)throw new Error("Function called outside component initialization");return Be}function st(i){on().$$.on_mount.push(i)}const Le=[],be=[];let Fe=[];const Et=[],At=Promise.resolve();let lt=!1;function Ot(){lt||(lt=!0,At.then(Lt))}function rn(){return Ot(),At}function Qe(i){Fe.push(i)}const ot=new Set;let Ne=0;function Lt(){if(Ne!==0)return;const i=Be;do{try{for(;Ne<Le.length;){const e=Le[Ne];Ne++,Ge(e),an(e.$$)}}catch(e){throw Le.length=0,Ne=0,e}for(Ge(null),Le.length=0,Ne=0;be.length;)be.pop()();for(let e=0;e<Fe.length;e+=1){const t=Fe[e];ot.has(t)||(ot.add(t),t())}Fe.length=0}while(Le.length);for(;Et.length;)Et.pop()();lt=!1,ot.clear(),Ge(i)}function an(i){if(i.fragment!==null){i.update(),te(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Qe)}}function cn(i){const e=[],t=[];Fe.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Fe=e}const Xe=new Set;let Se;function He(){Se={r:0,c:[],p:Se}}function qe(){Se.r||te(Se.c),Se=Se.p}function U(i,e){i&&i.i&&(Xe.delete(i),i.i(e))}function q(i,e,t,n){if(i&&i.o){if(Xe.has(i))return;Xe.add(i),Se.c.push(()=>{Xe.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function oe(i){return i?.length!==void 0?i:Array.from(i)}function Ie(i){i&&i.c()}function ke(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),Qe(()=>{const o=i.$$.on_mount.map(yt).filter(nt);i.$$.on_destroy?i.$$.on_destroy.push(...o):te(o),i.$$.on_mount=[]}),s.forEach(Qe)}function Te(i,e){const t=i.$$;t.fragment!==null&&(cn(t.after_update),te(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function fn(i,e){i.$$.dirty[0]===-1&&(Le.push(i),Ot(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function We(i,e,t,n,s,o,l=null,a=[-1]){const r=Be;Ge(i);const f=i.$$={fragment:null,ctx:[],props:o,update:G,not_equal:s,bound:vt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:vt(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};l&&l(f.root);let _=!1;if(f.ctx=t?t(i,e.props||{},(h,m,...g)=>{const y=g.length?g[0]:m;return f.ctx&&s(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),_&&fn(i,h)),m}):[],f.update(),_=!0,te(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=sn(e.target);f.fragment&&f.fragment.l(h),h.forEach(O)}else f.fragment&&f.fragment.c();e.intro&&U(i.$$.fragment),ke(i,e.target,e.anchor),Lt()}Ge(r)}class ze{$$=void 0;$$set=void 0;$destroy(){Te(this,1),this.$destroy=G}$on(e,t){if(!nt(t))return G;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const un="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(un);function De(i,e="body"){let t;async function n(o){if(e=o,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await rn(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(i),i.hidden=!1}function s(){i.parentNode&&i.parentNode.removeChild(i)}return n(e),{update:n,destroy:s}}function Ye(i,e){return!i.some(t=>t&&t.contains(e))}function Ft(i,e,t){const n=i.slice();return n[9]=e[t],n}function Nt(i){let e,t,n,s,o,l,a,r,f,_,h,m=window.trans("New [_1] creation",window.trans("Entry"))+"",g,y,b,T,v,R=window.trans("New [_1] creation",window.trans("Page"))+"",A,p,w,C,k=i[1].length>0&&It(i);return{c(){e=d("div"),t=d("div"),n=d("button"),n.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=d("div"),k&&k.c(),l=S(),a=d("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=S(),f=d("ul"),_=d("li"),h=d("a"),g=I(m),b=S(),T=d("li"),v=d("a"),A=I(R),u(n,"type","button"),u(n,"class","close"),u(n,"data-dismiss","modal"),u(n,"aria-label","Close"),u(t,"class","modal-header"),u(a,"class","block-title"),u(h,"href",y=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${i[2]}`),u(v,"href",p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${i[2]}`),u(f,"class","create-button-list"),u(o,"class","modal-body"),u(e,"class","modal create-button-modal")},m(N,P){F(N,e,P),c(e,t),c(t,n),c(e,s),c(e,o),k&&k.m(o,null),c(o,l),c(o,a),c(o,r),c(o,f),c(f,_),c(_,h),c(h,g),c(f,b),c(f,T),c(T,v),c(v,A),i[8](e),w||(C=[W(n,"click",i[4]),Oe(De.call(null,e,"body"))],w=!0)},p(N,P){N[1].length>0?k?k.p(N,P):(k=It(N),k.c(),k.m(o,l)):k&&(k.d(1),k=null),P&4&&y!==(y=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${N[2]}`)&&u(h,"href",y),P&4&&p!==(p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${N[2]}`)&&u(v,"href",p)},d(N){N&&O(e),k&&k.d(),i[8](null),w=!1,te(C)}}}function It(i){let e,t,n,s=oe(i[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=Wt(Ft(i,s,l));return{c(){e=d("p"),e.textContent=`${window.trans("Content Data")}`,t=S(),n=d("ul");for(let l=0;l<o.length;l+=1)o[l].c();u(e,"class","block-title"),u(n,"class","create-button-list")},m(l,a){F(l,e,a),F(l,t,a),F(l,n,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,null)},p(l,a){if(a&6){s=oe(l[1]);let r;for(r=0;r<s.length;r+=1){const f=Ft(l,s,r);o[r]?o[r].p(f,a):(o[r]=Wt(f),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(l){l&&(O(e),O(t),O(n)),Pe(o,l)}}}function Wt(i){let e,t,n=window.trans("New [_1] creation",i[9].name)+"",s,o,l;return{c(){e=d("li"),t=d("a"),s=I(n),l=S(),u(t,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${i[9].id}&type=content_data_${i[9].id}&blog_id=${i[2]}`)},m(a,r){F(a,e,r),c(e,t),c(t,s),c(e,l)},p(a,r){r&2&&n!==(n=window.trans("New [_1] creation",a[9].name)+"")&&K(s,n),r&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[9].id}&type=content_data_${a[9].id}&blog_id=${a[2]}`)&&u(t,"href",o)},d(a){a&&O(e)}}}function hn(i){let e,t,n,s,o=i[0]&&Nt(i);return{c(){e=S(),o&&o.c(),t=ve()},m(l,a){F(l,e,a),o&&o.m(l,a),F(l,t,a),n||(s=W(document.body,"click",i[5]),n=!0)},p(l,[a]){l[0]?o?o.p(l,a):(o=Nt(l),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:G,o:G,d(l){l&&(O(e),O(t)),o&&o.d(l),n=!1,s()}}}function dn(i,e,t){let{contentTypes:n=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{buttonRef:l=null}=e,{anchorRef:a=null}=e;const r=()=>{t(0,o=!1)};let f=null;const _=m=>{const g=m.target;o&&Ye([l,f],g)&&r()};function h(m){be[m?"unshift":"push"](()=>{f=m,t(3,f),t(7,a),t(0,o)})}return i.$$set=m=>{"contentTypes"in m&&t(1,n=m.contentTypes),"blog_id"in m&&t(2,s=m.blog_id),"open"in m&&t(0,o=m.open),"buttonRef"in m&&t(6,l=m.buttonRef),"anchorRef"in m&&t(7,a=m.anchorRef)},i.$$.update=()=>{if(i.$$.dirty&137&&a){if(f){const g=`calc(${a.getBoundingClientRect().bottom}px + 10px)`;t(3,f.style.top=g,f)}o?a.classList.add("open"):a.classList.remove("open")}},[o,n,s,f,r,_,l,a,h]}class _n extends ze{constructor(e){super(),We(this,e,dn,hn,Ae,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7})}}const mn=({target:i,props:e})=>{const t=new _n({target:i,props:e});i.getElementsByTagName("a")[0].addEventListener("click",n=>{n.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})};function pn(i){let e,t,n,s;return{c(){e=d("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",t=`display: ${i[0]?"block":"none"}`)},m(o,l){F(o,e,l),n||(s=[Oe(De.call(null,e,"body")),W(e,"mouseenter",i[1])],n=!0)},p(o,[l]){l&1&&t!==(t=`display: ${o[0]?"block":"none"}`)&&u(e,"style",t)},i:G,o:G,d(o){o&&O(e),n=!1,te(s)}}}function bn(i,e,t){let{buttonRef:n}=e,{collapsed:s=!1}=e,o=!1;const l=(h,m)=>{const g=document.querySelector('[data-is="content-wrapper"]');m?g.classList.add(h):g.classList.remove(h)},a=()=>{l("collapsed",s)},r=()=>{l("mouseover",o)},f=()=>{var h;s&&(o=!0,r(),(h=document.querySelector('[data-is="primary-navigation"]'))===null||h===void 0||h.addEventListener("mouseleave",_,{once:!0}))},_=()=>{o=!1,r()};return st(()=>{window.innerWidth<1e3&&t(0,s=!0),a()}),i.$$set=h=>{"buttonRef"in h&&t(2,n=h.buttonRef),"collapsed"in h&&t(0,s=h.collapsed)},i.$$.update=()=>{i.$$.dirty&5&&(a(),o=!1,r(),n&&(s?(n.classList.remove("expanded"),n.classList.add("collapsed")):(n.classList.remove("collapsed"),n.classList.add("expanded"))))},[s,f,n]}class gn extends ze{constructor(e){super(),We(this,e,bn,pn,Ae,{buttonRef:2,collapsed:0})}}function wn(i,e){const t=new gn({target:i,props:{collapsed:e.collapsed,buttonRef:e.buttonRef}});e.buttonRef.addEventListener("click",()=>{e.collapsed=!e.collapsed,t.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function zt(i){let e,t;return{c(){e=it("title"),t=I(i[2])},m(n,s){F(n,e,s),c(e,t)},p(n,s){s&4&&K(t,n[2])},d(n){n&&O(e)}}}function yn(i){let e,t,n=i[2]&&zt(i);return{c(){e=it("svg"),n&&n.c(),t=it("use"),St(t,"xlink:href",i[1]),u(e,"role","img"),u(e,"class",i[0])},m(s,o){F(s,e,o),n&&n.m(e,null),c(e,t)},p(s,[o]){s[2]?n?n.p(s,o):(n=zt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),o&2&&St(t,"xlink:href",s[1]),o&1&&u(e,"class",s[0])},i:G,o:G,d(s){s&&O(e),n&&n.d()}}}function vn(i,e,t){let{class:n}=e,{href:s}=e,{title:o}=e;return i.$$set=l=>{"class"in l&&t(0,n=l.class),"href"in l&&t(1,s=l.href),"title"in l&&t(2,o=l.title)},[n,s,o]}class Ue extends ze{constructor(e){super(),We(this,e,vn,yn,Ae,{class:0,href:1,title:2})}}function Dt(i,e,t){const n=i.slice();return n[18]=e[t],n}function Ut(i,e,t){const n=i.slice();return n[21]=e[t],n}function Mt(i){let e,t,n,s,o,l,a,r,f,_,h,m,g,y,b,T,v,R,A,p,w,C,k,N,P=window.trans("Content Data")+"",Z,ge,_e,re,M,ae,ce,fe,E,we,ue,ie,x,Q,se,H,Re,le,X,he=oe(i[9].slice(1)),j=[];for(let L=0;L<he.length;L+=1)j[L]=jt(Ut(i,he,L));function de(L,B){return L[3].length>0?kn:Sn}let ye=de(i),V=ye(i);return x=new Ue({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/sprite.svg#ic_search`}}),Re=kt(i[14][0]),{c(){e=d("div"),t=S(),n=d("div"),s=d("div"),o=d("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',l=S(),a=d("div"),r=d("form"),f=d("input"),_=S(),h=d("input"),g=S(),y=d("input"),b=S(),T=d("input"),v=S(),R=d("input"),A=S(),p=d("div"),w=d("label"),C=d("input"),N=S(),Z=I(P),ge=S();for(let L=0;L<j.length;L+=1)j[L].c();_e=S(),re=d("div"),M=d("select"),V.c(),ce=S(),fe=d("div"),E=d("input"),we=S(),ue=d("div"),ie=d("button"),Ie(x.$$.fragment),Q=S(),se=d("span"),se.textContent=`${window.trans("Search")}`,u(e,"class","search-button-modal-overlay"),u(o,"type","button"),u(o,"class","close"),u(o,"data-dismiss","modal"),u(o,"aria-label","Close"),u(s,"class","modal-header"),u(f,"type","hidden"),u(f,"name","__mode"),f.value="search_replace",u(h,"type","hidden"),u(h,"name","blog_id"),h.value=m=i[6]!=="blog"?i[1]:"0",u(y,"type","hidden"),u(y,"name","_type"),u(T,"type","hidden"),u(T,"name","do_search"),T.value="1",u(R,"type","hidden"),u(R,"name","magic_token"),R.value=i[2],u(C,"type","radio"),u(C,"name","type"),C.__value="content_data",ne(C,C.__value),u(C,"id","content_data"),C.disabled=k=i[3].length===0,u(p,"class","search-type"),u(M,"name","content_type_id"),M.disabled=ae=i[6]!=="content_data"||i[3].length===0,Ct(M,"disabled",i[6]!=="content_data"),u(re,"class","search-content-type"),u(E,"type","text"),u(E,"placeholder",window.trans("Select target and search text...")),u(E,"name","search"),u(fe,"class","search-text-box"),u(ie,"type","submit"),u(ie,"class","btn btn-primary"),u(ue,"class","submit-button"),u(r,"class","search-form"),u(r,"method","post"),u(r,"action",window.ScriptURI),u(a,"class","modal-body"),u(n,"class","modal search-button-modal"),Re.p(C)},m(L,B){F(L,e,B),F(L,t,B),F(L,n,B),c(n,s),c(s,o),c(n,l),c(n,a),c(a,r),c(r,f),c(r,_),c(r,h),c(r,g),c(r,y),ne(y,i[6]),c(r,b),c(r,T),c(r,v),c(r,R),c(r,A),c(r,p),c(p,w),c(w,C),C.checked=C.__value===i[6],c(w,N),c(w,Z),c(p,ge);for(let D=0;D<j.length;D+=1)j[D]&&j[D].m(p,null);c(r,_e),c(r,re),c(re,M),V.m(M,null),c(r,ce),c(r,fe),c(fe,E),i[16](E),c(r,we),c(r,ue),c(ue,ie),ke(x,ie,null),c(ie,Q),c(ie,se),i[17](n),H=!0,le||(X=[W(e,"click",i[7]),Oe(De.call(null,e,"body")),W(o,"click",i[7]),W(y,"input",i[12]),W(C,"change",i[13]),Oe(De.call(null,n,"body"))],le=!0)},p(L,B){if((!H||B&66&&m!==(m=L[6]!=="blog"?L[1]:"0"))&&(h.value=m),B&64&&ne(y,L[6]),(!H||B&4)&&(R.value=L[2]),(!H||B&8&&k!==(k=L[3].length===0))&&(C.disabled=k),B&64&&(C.checked=C.__value===L[6]),B&576){he=oe(L[9].slice(1));let D;for(D=0;D<he.length;D+=1){const Ce=Ut(L,he,D);j[D]?j[D].p(Ce,B):(j[D]=jt(Ce),j[D].c(),j[D].m(p,null))}for(;D<j.length;D+=1)j[D].d(1);j.length=he.length}ye===(ye=de(L))&&V?V.p(L,B):(V.d(1),V=ye(L),V&&(V.c(),V.m(M,null))),(!H||B&72&&ae!==(ae=L[6]!=="content_data"||L[3].length===0))&&(M.disabled=ae),(!H||B&64)&&Ct(M,"disabled",L[6]!=="content_data")},i(L){H||(U(x.$$.fragment,L),H=!0)},o(L){q(x.$$.fragment,L),H=!1},d(L){L&&(O(e),O(t),O(n)),Pe(j,L),V.d(),i[16](null),Te(x),i[17](null),Re.r(),le=!1,te(X)}}}function jt(i){let e,t,n,s=i[21].label+"",o,l,a,r,f;return a=kt(i[14][0]),{c(){e=d("label"),t=d("input"),n=S(),o=I(s),l=S(),u(t,"type","radio"),u(t,"name","type"),t.__value=i[21].value,ne(t,t.__value),u(t,"id",i[21].value),a.p(t)},m(_,h){F(_,e,h),c(e,t),t.checked=t.__value===i[6],c(e,n),c(e,o),c(e,l),r||(f=W(t,"change",i[15]),r=!0)},p(_,h){h&64&&(t.checked=t.__value===_[6])},d(_){_&&O(e),a.r(),r=!1,f()}}}function Sn(i){let e;return{c(){e=d("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",ne(e,e.__value)},m(t,n){F(t,e,n)},p:G,d(t){t&&O(e)}}}function kn(i){let e,t=oe(i[3]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pt(Dt(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,o);F(s,e,o)},p(s,o){if(o&8){t=oe(s[3]);let l;for(l=0;l<t.length;l+=1){const a=Dt(s,t,l);n[l]?n[l].p(a,o):(n[l]=Pt(a),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(s){s&&O(e),Pe(n,s)}}}function Pt(i){let e,t=i[18].name+"",n,s;return{c(){e=d("option"),n=I(t),e.__value=s=i[18].id,ne(e,e.__value)},m(o,l){F(o,e,l),c(e,n)},p(o,l){l&8&&t!==(t=o[18].name+"")&&K(n,t),l&8&&s!==(s=o[18].id)&&(e.__value=s,ne(e,e.__value))},d(o){o&&O(e)}}}function Tn(i){let e,t,n,s,o,l=i[0]&&Mt(i);return{c(){e=S(),l&&l.c(),t=ve()},m(a,r){F(a,e,r),l&&l.m(a,r),F(a,t,r),n=!0,s||(o=W(document.body,"click",i[8]),s=!0)},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&U(l,1)):(l=Mt(a),l.c(),U(l,1),l.m(t.parentNode,t)):l&&(He(),q(l,1,1,()=>{l=null}),qe())},i(a){n||(U(l),n=!0)},o(a){q(l),n=!1},d(a){a&&(O(e),O(t)),l&&l.d(a),s=!1,o()}}}function Rn(i,e,t){let{blogId:n}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:l=!1}=e,{buttonRef:a}=e,{anchorRef:r}=e;const f=()=>{t(0,l=!1)};let _=null;const h=w=>{const C=w.target;l&&Ye([a,_],C)&&f()},m=[{value:"content_data",label:window.trans("Content Data")},{value:"entry",label:window.trans("Entry")},{value:"comment",label:window.trans("Comment")},{value:"page",label:window.trans("Page")},{value:"template",label:window.trans("Template")},{value:"asset",label:window.trans("Asset")},{value:"log",label:window.trans("Log")},{value:"blog",label:window.trans("Child Site")}];let g=null,y="entry";st(async()=>{o.length>0&&t(6,y="content_data")});const b=[[]];function T(){y=this.value,t(6,y)}function v(){y=this.__value,t(6,y)}function R(){y=this.__value,t(6,y)}function A(w){be[w?"unshift":"push"](()=>{g=w,t(4,g)})}function p(w){be[w?"unshift":"push"](()=>{_=w,t(5,_)})}return i.$$set=w=>{"blogId"in w&&t(1,n=w.blogId),"magicToken"in w&&t(2,s=w.magicToken),"contentTypes"in w&&t(3,o=w.contentTypes),"open"in w&&t(0,l=w.open),"buttonRef"in w&&t(10,a=w.buttonRef),"anchorRef"in w&&t(11,r=w.anchorRef)},i.$$.update=()=>{i.$$.dirty&2049&&r&&(l?r.classList.add("open"):r.classList.remove("open")),i.$$.dirty&17&&l&&g&&g.focus()},[l,n,s,o,g,_,y,f,h,m,a,r,T,v,b,R,A,p]}class Cn extends ze{constructor(e){super(),We(this,e,Rn,Tn,Ae,{blogId:1,magicToken:2,contentTypes:3,open:0,buttonRef:10,anchorRef:11})}}function En(i,e){const t=new Cn({target:i,props:e});e.anchorRef.addEventListener("click",n=>{n.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})}const An=new gt,Bt=new dt({cache:An}),On=async i=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(i.items),limit:i.limit,magic_token:i.magicToken,page:i.page,sort_by:"id",sort_order:"descend"};return await Bt.fetchWithCache({key:Bt.generateCacheKey({prefix:"sites",params:e}),fetcher:async()=>{const t=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json"});if(t.error)return console.log("Failed to fetch sites:",t.error),{count:0,page:0,pageMax:0,sites:[],error:t.error};const n=t.result.objects.map(s=>{const o=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:o,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(t.result.count),page:Number.parseInt(t.result.page),pageMax:Number.parseInt(t.result.page_max),sites:n}}})},{document:Ln}=nn;function Gt(i,e,t){const n=i.slice();return n[31]=e[t],n}function Ht(i){let e,t,n,s,o,l,a,r=window.trans("[_1]Site",i[2].toString())+"",f,_,h,m,g,y,b,T,v,R,A,p,w,C,k,N,P,Z,ge,_e,re,M,ae,ce,fe,E,we,ue,ie,x,Q,se,H,Re,le,X,he,j,de,ye,V,L,B,D,Ce,je,Ze,at,xe,ct,Ve,Y,$,ee,$e,ft;de=new Ue({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/sprite.svg#ic_search`}});const ut=[Nn,Fn],me=[];function ht(z,J){return z[7]?0:1}return Y=ht(i),$=me[Y]=ut[Y](i),{c(){e=d("div"),t=d("div"),n=d("div"),s=d("div"),o=d("div"),l=d("span"),a=I("("),f=I(r),_=I(")"),h=S(),m=d("p"),m.textContent=`${window.trans("Site List")}`,g=S(),y=d("div"),b=d("div"),T=d("button"),v=I("<<"),A=S(),p=d("button"),w=I("<"),k=S(),N=d("span"),P=d("span"),Z=I(i[3]),ge=I("/"),_e=I(i[4]),re=S(),M=d("button"),ae=I(">"),fe=S(),E=d("button"),we=I(">>"),ie=S(),x=d("div"),Q=d("select"),se=d("option"),se.textContent=`${window.trans("All Sites")}`,H=d("option"),H.textContent=`${window.trans("Only to child sites within this system")}`,Re=S(),le=d("div"),X=d("input"),he=S(),j=d("button"),Ie(de.$$.fragment),ye=S(),V=d("div"),L=d("button"),L.innerHTML='<span aria-hidden="true">\xD7</span>',B=S(),D=d("table"),Ce=d("thead"),je=d("tr"),Ze=d("th"),Ze.textContent=`${window.trans("Site Name")}`,at=S(),xe=d("th"),xe.textContent=`${window.trans("Parent Site")}`,ct=S(),Ve=d("tbody"),$.c(),u(o,"class","table-title"),u(T,"type","button"),T.disabled=R=i[3]<=1,u(p,"type","button"),p.disabled=C=i[3]<=1,u(P,"class","current"),u(N,"class","page-num"),u(M,"type","button"),M.disabled=ce=i[3]===i[4],u(E,"type","button"),E.disabled=ue=i[3]===i[4],u(b,"class","prev-next"),se.__value="",ne(se,se.__value),H.__value="blog",ne(H,H.__value),i[5]===void 0&&Qe(()=>i[25].call(Q)),u(x,"class","site-type-filter"),u(X,"type","text"),u(X,"placeholder",window.trans("Filter by site name")),u(le,"class","site-name-filter"),u(L,"type","button"),u(L,"class","close"),u(L,"data-dismiss","modal"),u(L,"aria-label","Close"),u(V,"class","close"),u(y,"class","table-control"),u(s,"class","site-list-table-header"),u(n,"class","site-list-table"),u(t,"class","modal-body"),u(e,"class","modal site-list-button-modal")},m(z,J){F(z,e,J),c(e,t),c(t,n),c(n,s),c(s,o),c(o,l),c(l,a),c(l,f),c(l,_),c(o,h),c(o,m),c(s,g),c(s,y),c(y,b),c(b,T),c(T,v),c(b,A),c(b,p),c(p,w),c(b,k),c(b,N),c(N,P),c(P,Z),c(N,ge),c(N,_e),c(b,re),c(b,M),c(M,ae),c(b,fe),c(b,E),c(E,we),c(y,ie),c(y,x),c(x,Q),c(Q,se),c(Q,H),Rt(Q,i[5],!0),c(y,Re),c(y,le),c(le,X),ne(X,i[6]),c(le,he),c(le,j),ke(de,j,null),c(y,ye),c(y,V),c(V,L),c(n,B),c(n,D),c(D,Ce),c(Ce,je),c(je,Ze),c(je,at),c(je,xe),c(D,ct),c(D,Ve),me[Y].m(Ve,null),i[28](e),ee=!0,$e||(ft=[W(T,"click",i[13]),W(T,"keydown",i[21]),W(p,"click",i[12]),W(p,"keydown",i[22]),W(M,"click",i[10]),W(M,"keydown",i[23]),W(E,"click",i[11]),W(E,"keydown",i[24]),W(Q,"change",i[25]),W(Q,"change",i[14]),W(X,"input",i[26]),W(X,"keydown",i[27]),W(j,"click",i[14]),W(L,"click",i[9]),Oe(De.call(null,e,"body"))],$e=!0)},p(z,J){(!ee||J[0]&4)&&r!==(r=window.trans("[_1]Site",z[2].toString())+"")&&K(f,r),(!ee||J[0]&8&&R!==(R=z[3]<=1))&&(T.disabled=R),(!ee||J[0]&8&&C!==(C=z[3]<=1))&&(p.disabled=C),(!ee||J[0]&8)&&K(Z,z[3]),(!ee||J[0]&16)&&K(_e,z[4]),(!ee||J[0]&24&&ce!==(ce=z[3]===z[4]))&&(M.disabled=ce),(!ee||J[0]&24&&ue!==(ue=z[3]===z[4]))&&(E.disabled=ue),J[0]&32&&Rt(Q,z[5]),J[0]&64&&X.value!==z[6]&&ne(X,z[6]);let et=Y;Y=ht(z),Y===et?me[Y].p(z,J):(He(),q(me[et],1,1,()=>{me[et]=null}),qe(),$=me[Y],$?$.p(z,J):($=me[Y]=ut[Y](z),$.c()),U($,1),$.m(Ve,null))},i(z){ee||(U(de.$$.fragment,z),U($),ee=!0)},o(z){q(de.$$.fragment,z),q($),ee=!1},d(z){z&&O(e),Te(de),me[Y].d(),i[28](null),$e=!1,te(ft)}}}function Fn(i){let e,t,n=oe(i[1]),s=[];for(let l=0;l<n.length;l+=1)s[l]=qt(Gt(i,n,l));const o=l=>q(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=ve()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);F(l,e,a),t=!0},p(l,a){if(a[0]&2){n=oe(l[1]);let r;for(r=0;r<n.length;r+=1){const f=Gt(l,n,r);s[r]?(s[r].p(f,a),U(s[r],1)):(s[r]=qt(f),s[r].c(),U(s[r],1),s[r].m(e.parentNode,e))}for(He(),r=n.length;r<s.length;r+=1)o(r);qe()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)U(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)q(s[a]);t=!1},d(l){l&&O(e),Pe(s,l)}}}function Nn(i){let e,t;return{c(){e=d("tr"),t=d("td"),t.textContent=`${window.trans("Loading...")}`,u(t,"colspan","2"),u(t,"class","loading")},m(n,s){F(n,e,s),c(e,t)},p:G,i:G,o:G,d(n){n&&O(e)}}}function In(i){let e;return{c(){e=d("span"),e.textContent="-",u(e,"class","text-center")},m(t,n){F(t,e,n)},p:G,d(t){t&&O(e)}}}function Wn(i){let e=i[31].parentSiteName+"",t;return{c(){t=I(e)},m(n,s){F(n,t,s)},p(n,s){s[0]&2&&e!==(e=n[31].parentSiteName+"")&&K(t,e)},d(n){n&&O(t)}}}function qt(i){let e,t,n,s,o=i[31].name+"",l,a,r,f,_,h,m,g,y,b;s=new Ue({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/sprite.svg#ic_sites`}}),_=new Ue({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/sprite.svg#ic_permalink`}});function T(A,p){return A[31].parentSiteName?Wn:In}let v=T(i),R=v(i);return{c(){e=d("tr"),t=d("td"),n=d("a"),Ie(s.$$.fragment),l=I(o),r=S(),f=d("a"),Ie(_.$$.fragment),m=S(),g=d("td"),R.c(),y=S(),u(n,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${i[31].id}`),u(n,"class","dashboard-link"),u(f,"href",h=i[31].siteUrl),u(f,"class","site-link"),u(f,"target","_blank")},m(A,p){F(A,e,p),c(e,t),c(t,n),ke(s,n,null),c(n,l),c(t,r),c(t,f),ke(_,f,null),c(e,m),c(e,g),R.m(g,null),c(e,y),b=!0},p(A,p){(!b||p[0]&2)&&o!==(o=A[31].name+"")&&K(l,o),(!b||p[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${A[31].id}`))&&u(n,"href",a),(!b||p[0]&2&&h!==(h=A[31].siteUrl))&&u(f,"href",h),v===(v=T(A))&&R?R.p(A,p):(R.d(1),R=v(A),R&&(R.c(),R.m(g,null)))},i(A){b||(U(s.$$.fragment,A),U(_.$$.fragment,A),b=!0)},o(A){q(s.$$.fragment,A),q(_.$$.fragment,A),b=!1},d(A){A&&O(e),Te(s),Te(_),R.d()}}}function zn(i){let e,t,n,s,o,l=i[0]&&Ht(i);return{c(){e=S(),l&&l.c(),t=ve()},m(a,r){F(a,e,r),l&&l.m(a,r),F(a,t,r),n=!0,s||(o=W(Ln.body,"click",i[15]),s=!0)},p(a,r){a[0]?l?(l.p(a,r),r[0]&1&&U(l,1)):(l=Ht(a),l.c(),U(l,1),l.m(t.parentNode,t)):l&&(He(),q(l,1,1,()=>{l=null}),qe())},i(a){n||(U(l),n=!0)},o(a){q(l),n=!1},d(a){a&&(O(e),O(t)),l&&l.d(a),s=!1,o()}}}function Dn(i,e,t){let{magicToken:n}=e,{limit:s=50}=e,{open:o=!1}=e,{oldOverflow:l}=e,{buttonRef:a}=e,{anchorRef:r}=e;const f=()=>{t(0,o=!1),document.body.style.overflow=l};let _=[],h=0,m=1,g=1,y="",b="",T=[],v=!1,R=null;const A=()=>{t(3,m++,m),N()},p=()=>{t(3,m=g),N()},w=()=>{t(3,m--,m),N()},C=()=>{t(3,m=1),N()},k=()=>{T=[],y==="blog"&&(T=[{type:"parent_website",args:{value:""}}]),t(6,b=b.trim()),b!==""&&T.push({type:"name",args:{string:b,option:"contains"}}),t(3,m=1),N()},N=async()=>{t(7,v=!0);const E=await On({magicToken:n,items:T,page:m,limit:s});t(2,h=E.count),t(4,g=E.pageMax),t(3,m=g!==0?E.page:0),t(1,_=E.sites),t(7,v=!1)},P=E=>{const we=E.target;o&&Ye([a,R],we)&&f()};st(async()=>{N()});const Z=E=>E.key==="Enter"&&C(),ge=E=>E.key==="Enter"&&w(),_e=E=>E.key==="Enter"&&A(),re=E=>E.key==="Enter"&&p();function M(){y=ln(this),t(5,y)}function ae(){b=this.value,t(6,b)}const ce=E=>E.key==="Enter"&&k();function fe(E){be[E?"unshift":"push"](()=>{R=E,t(8,R)})}return i.$$set=E=>{"magicToken"in E&&t(16,n=E.magicToken),"limit"in E&&t(17,s=E.limit),"open"in E&&t(0,o=E.open),"oldOverflow"in E&&t(18,l=E.oldOverflow),"buttonRef"in E&&t(19,a=E.buttonRef),"anchorRef"in E&&t(20,r=E.anchorRef)},i.$$.update=()=>{i.$$.dirty[0]&1048577&&r&&(o?r.classList.add("open"):r.classList.remove("open"))},[o,_,h,m,g,y,b,v,R,f,A,p,w,C,k,P,n,s,l,a,r,Z,ge,_e,re,M,ae,ce,fe]}class Un extends ze{constructor(e){super(),We(this,e,Dn,zn,Ae,{magicToken:16,limit:17,open:0,oldOverflow:18,buttonRef:19,anchorRef:20},null,[-1,-1])}}function Mn(i,e){const t=new Un({target:i,props:e});e.anchorRef.addEventListener("click",n=>{n.preventDefault(),e.anchorRef.classList.contains("open")?(e.open=!1,document.body.style.overflow=e.oldOverflow):(e.open=!0,e.oldOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),t.$set(e)})}function Vt(i,e,t){const n=i.slice();return n[17]=e[t],n}function Jt(i){let e,t,n,s,o,l,a,r,f,_,h,m=window.trans("Dashboard")+"",g,y,b,T,v,R;f=new Ue({props:{class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_home`,title:window.trans("Dashboard")}});function A(k,N){return k[1]==="system"?Pn:jn}let p=A(i),w=p(i),C=i[0].length>0&&Qt(i);return{c(){e=d("div"),t=d("div"),n=d("button"),n.innerHTML='<span aria-hidden="true">\xD7</span>',s=S(),o=d("div"),l=d("ul"),a=d("li"),r=d("span"),Ie(f.$$.fragment),_=S(),h=d("a"),g=I(m),y=S(),w.c(),b=S(),C&&C.c(),u(n,"type","button"),u(n,"class","close"),u(n,"data-dismiss","modal"),u(n,"aria-label","Close"),u(t,"class","modal-header"),u(r,"class","mt-icon"),u(h,"href",window.ScriptURI+"?__mode=dashboard"),u(h,"title",window.trans("Dashboard")),u(a,"class","breadcrumb-list-item"),u(l,"class","breadcrumb-list"),u(o,"class","modal-body"),u(e,"class","modal breadcrumbs-modal"),Tt(e,"--modal-left",i[11]+"px")},m(k,N){F(k,e,N),c(e,t),c(t,n),c(e,s),c(e,o),c(o,l),c(l,a),c(a,r),ke(f,r,null),c(a,_),c(a,h),c(h,g),c(l,y),w.m(l,null),c(l,b),C&&C.m(l,null),i[16](e),T=!0,v||(R=[W(n,"click",i[13]),Oe(De.call(null,e,"body"))],v=!0)},p(k,N){p===(p=A(k))&&w?w.p(k,N):(w.d(1),w=p(k),w&&(w.c(),w.m(l,b))),k[0].length>0?C?C.p(k,N):(C=Qt(k),C.c(),C.m(l,null)):C&&(C.d(1),C=null),(!T||N&2048)&&Tt(e,"--modal-left",k[11]+"px")},i(k){T||(U(f.$$.fragment,k),T=!0)},o(k){q(f.$$.fragment,k),T=!1},d(k){k&&O(e),Te(f),w.d(),C&&C.d(),i[16](null),v=!1,te(R)}}}function jn(i){let e,t,n,s,o,l,a,r=i[1]==="blog"&&Kt(i);return{c(){r&&r.c(),e=S(),t=d("li"),n=d("span"),n.textContent="\xA0",s=S(),o=d("a"),l=I(i[7]),u(n,"class","mt-icon icon-circle"),u(o,"href",a=window.ScriptURI+"?__mode=dashboard&blog_id="+i[6]),u(t,"class","breadcrumb-list-item")},m(f,_){r&&r.m(f,_),F(f,e,_),F(f,t,_),c(t,n),c(t,s),c(t,o),c(o,l)},p(f,_){f[1]==="blog"?r?r.p(f,_):(r=Kt(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),_&128&&K(l,f[7]),_&64&&a!==(a=window.ScriptURI+"?__mode=dashboard&blog_id="+f[6])&&u(o,"href",a)},d(f){f&&(O(e),O(t)),r&&r.d(f)}}}function Pn(i){let e,t,n;function s(a,r){return a[2]?qn:Hn}let o=s(i),l=o(i);return{c(){e=d("li"),t=d("span"),t.textContent="\xA0",n=S(),l.c(),u(t,"class","mt-icon icon-circle"),u(e,"class","breadcrumb-list-item")},m(a,r){F(a,e,r),c(e,t),c(e,n),l.m(e,null)},p(a,r){o===(o=s(a))&&l?l.p(a,r):(l.d(1),l=o(a),l&&(l.c(),l.m(e,null)))},d(a){a&&O(e),l.d()}}}function Kt(i){let e,t,n;function s(a,r){return a[3]?Gn:Bn}let o=s(i),l=o(i);return{c(){e=d("li"),t=d("span"),t.textContent="\xA0",n=S(),l.c(),u(t,"class","mt-icon icon-circle"),u(e,"class","breadcrumb-list-item")},m(a,r){F(a,e,r),c(e,t),c(e,n),l.m(e,null)},p(a,r){o===(o=s(a))&&l?l.p(a,r):(l.d(1),l=o(a),l&&(l.c(),l.m(e,null)))},d(a){a&&O(e),l.d()}}}function Bn(i){let e;return{c(){e=I(i[5])},m(t,n){F(t,e,n)},p(t,n){n&32&&K(e,t[5])},d(t){t&&O(e)}}}function Gn(i){let e,t,n;return{c(){e=d("a"),t=I(i[5]),u(e,"href",n=window.ScriptURI+"?__mode=dashboard&blog_id="+i[4])},m(s,o){F(s,e,o),c(e,t)},p(s,o){o&32&&K(t,s[5]),o&16&&n!==(n=window.ScriptURI+"?__mode=dashboard&blog_id="+s[4])&&u(e,"href",n)},d(s){s&&O(e)}}}function Hn(i){let e=window.trans("System")+"",t;return{c(){t=I(e)},m(n,s){F(n,t,s)},p:G,d(n){n&&O(t)}}}function qn(i){let e,t=window.trans("System")+"",n;return{c(){e=d("a"),n=I(t),u(e,"href",window.ScriptURI+"?__mode=dashboard&blog_id=0")},m(s,o){F(s,e,o),c(e,n)},p:G,d(s){s&&O(e)}}}function Qt(i){let e,t=oe(i[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Zt(Vt(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,o);F(s,e,o)},p(s,o){if(o&1){t=oe(s[0]);let l;for(l=0;l<t.length;l+=1){const a=Vt(s,t,l);n[l]?n[l].p(a,o):(n[l]=Zt(a),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(s){s&&O(e),Pe(n,s)}}}function Xt(i){let e,t=i[17].bc_name+"",n,s;return{c(){e=d("a"),n=I(t),u(e,"href",s=i[17].bc_uri),u(e,"class","mt-breadcrumb__item")},m(o,l){F(o,e,l),c(e,n)},p(o,l){l&1&&t!==(t=o[17].bc_name+"")&&K(n,t),l&1&&s!==(s=o[17].bc_uri)&&u(e,"href",s)},d(o){o&&O(e)}}}function Yt(i){let e,t=i[17].bc_name+"",n;return{c(){e=d("span"),n=I(t),u(e,"class","current")},m(s,o){F(s,e,o),c(e,n)},p(s,o){o&1&&t!==(t=s[17].bc_name+"")&&K(n,t)},d(s){s&&O(e)}}}function Zt(i){let e,t,n,s,o,l,a=i[17].bc_uri!==null&&Xt(i),r=i[17].is_last&&Yt(i);return{c(){e=S(),t=d("li"),n=d("span"),n.textContent="\xA0",s=S(),a&&a.c(),o=S(),r&&r.c(),l=S(),u(n,"class","mt-icon icon-circle"),u(t,"class","breadcrumb-list-item")},m(f,_){F(f,e,_),F(f,t,_),c(t,n),c(t,s),a&&a.m(t,null),c(t,o),r&&r.m(t,null),c(t,l)},p(f,_){f[17].bc_uri!==null?a?a.p(f,_):(a=Xt(f),a.c(),a.m(t,o)):a&&(a.d(1),a=null),f[17].is_last?r?r.p(f,_):(r=Yt(f),r.c(),r.m(t,l)):r&&(r.d(1),r=null)},d(f){f&&(O(e),O(t)),a&&a.d(),r&&r.d()}}}function Vn(i){let e,t,n,s,o,l,a,r,f;s=new Ue({props:{class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_menu`,title:window.trans("menu")}});let _=i[10]&&Jt(i);return{c(){e=S(),t=d("span"),n=d("button"),Ie(s.$$.fragment),o=S(),_&&_.c(),l=ve(),u(n,"type","button"),u(n,"class","mt-breadcrumb-button"),u(t,"class","mt-breadcrumb-button-wrapper")},m(h,m){F(h,e,m),F(h,t,m),c(t,n),ke(s,n,null),i[15](n),F(h,o,m),_&&_.m(h,m),F(h,l,m),a=!0,r||(f=[W(document.body,"click",i[14]),W(n,"click",i[12])],r=!0)},p(h,[m]){h[10]?_?(_.p(h,m),m&1024&&U(_,1)):(_=Jt(h),_.c(),U(_,1),_.m(l.parentNode,l)):_&&(He(),q(_,1,1,()=>{_=null}),qe())},i(h){a||(U(s.$$.fragment,h),U(_),a=!0)},o(h){q(s.$$.fragment,h),q(_),a=!1},d(h){h&&(O(e),O(t),O(o),O(l)),Te(s),i[15](null),_&&_.d(h),r=!1,te(f)}}}function Jn(i,e,t){let{breadcrumbs:n=[]}=e,{scopeType:s=""}=e,{canAccessToSystemDashboard:o=!1}=e,{canCurrWebsiteLink:l=!1}=e,{currWebsiteId:a=""}=e,{currWebsiteName:r=""}=e,{blogID:f=""}=e,{blogName:_=""}=e,h=!1;const m=()=>{t(10,h=!0)},g=()=>{t(10,h=!1)};let y=null,b=null,T=0;const v=p=>{const w=p.target;h&&Ye([y,b],w)&&g()};function R(p){be[p?"unshift":"push"](()=>{y=p,t(8,y)})}function A(p){be[p?"unshift":"push"](()=>{b=p,t(9,b)})}return i.$$set=p=>{"breadcrumbs"in p&&t(0,n=p.breadcrumbs),"scopeType"in p&&t(1,s=p.scopeType),"canAccessToSystemDashboard"in p&&t(2,o=p.canAccessToSystemDashboard),"canCurrWebsiteLink"in p&&t(3,l=p.canCurrWebsiteLink),"currWebsiteId"in p&&t(4,a=p.currWebsiteId),"currWebsiteName"in p&&t(5,r=p.currWebsiteName),"blogID"in p&&t(6,f=p.blogID),"blogName"in p&&t(7,_=p.blogName)},i.$$.update=()=>{if(i.$$.dirty&768&&y&&b){const p=y.getBoundingClientRect();t(11,T=p.left+(p.width-b.offsetWidth)/2)}},[n,s,o,l,a,r,f,_,y,b,h,T,m,g,v,R,A]}class Kn extends ze{constructor(e){super(),We(this,e,Jn,Vn,Ae,{breadcrumbs:0,scopeType:1,canAccessToSystemDashboard:2,canCurrWebsiteLink:3,currWebsiteId:4,currWebsiteName:5,blogID:6,blogName:7})}}const Qn=({target:i})=>{const{breadcrumbs:e,canAccessToSystemDashboard:t,currWebsiteCanLink:n,...s}=i.dataset;new Kn({target:i,props:{breadcrumbs:JSON.parse(e??"[]"),canAccessToSystemDashboard:t==="1",canCurrWebsiteLink:n==="1",...s}})};document.addEventListener("DOMContentLoaded",()=>{var i,e;const t=document.querySelector('[data-is="primary-navigation-toggle"]');if(t!==null){const h="collapsed",m=sessionStorage.getItem(h);wn(t,{collapsed:m==="true",buttonRef:t,sessionName:h})}const n=document.querySelector('[data-is="breadcrumbs"]');n!==null&&Qn({target:n});const s=document.querySelector('[data-script="admin-header"]');if(s===null){console.error("data-script='admin-header' is not set");return}const o=(i=s.getAttribute("data-blog-id"))!==null&&i!==void 0?i:"",l=(e=s.getAttribute("data-magic-token"))!==null&&e!==void 0?e:"";if(l===""){console.error("data-magic-token is not set");return}const a="50",r=document.querySelector('[data-is="site-list-button"]');if(r!==null){const h=r.getElementsByTagName("a")[0];Mn(r,{magicToken:l,limit:Number.parseInt(a),open:!1,oldOverflow:document.body.style.overflow,buttonRef:r,anchorRef:h})}const f=document.querySelector('[data-is="create-button"]'),_=document.querySelector('[data-is="search-button"]');(f!==null||_!==null)&&en({blogId:o,magicToken:l}).then(h=>{if(f!==null){const m=f.getElementsByTagName("a")[0];mn({target:f,props:{blog_id:o,contentTypes:h.contentTypes.filter(g=>g.can_create===1),open:!1,buttonRef:f,anchorRef:m}})}if(_!==null){const m=_.getElementsByTagName("a")[0];En(_,{blogId:o,magicToken:l,contentTypes:h.contentTypes.filter(g=>g.can_search===1),open:!1,buttonRef:_,anchorRef:m})}})});
