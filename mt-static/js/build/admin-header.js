const zt=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function J(){}function vt(t){return t()}function kt(){return Object.create(null)}function ee(t){t.forEach(vt)}function Ze(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function be(t){return t&&Ze(t.destroy)?t.destroy:J}function c(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function De(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function xe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function v(){return q(" ")}function Ce(){return q("")}function j(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Kt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Xt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function St(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Yt(t){const e=t.querySelector(":checked");return e&&e.__value}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Ee;function Le(t){Ee=t}function Zt(){if(!Ee)throw new Error("Function called outside component initialization");return Ee}function $e(t){Zt().$$.on_mount.push(t)}const ge=[],ye=[];let we=[];const Ct=[],Et=Promise.resolve();let et=!1;function Lt(){et||(et=!0,Et.then(Nt))}function xt(){return Lt(),Et}function Fe(t){we.push(t)}const tt=new Set;let ve=0;function Nt(){if(ve!==0)return;const t=Ee;do{try{for(;ve<ge.length;){const e=ge[ve];ve++,Le(e),$t(e.$$)}}catch(e){throw ge.length=0,ve=0,e}for(Le(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];tt.has(n)||(tt.add(n),n())}we.length=0}while(ge.length);for(;Ct.length;)Ct.pop()();et=!1,tt.clear(),Le(t)}function $t(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Fe)}}function en(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const We=new Set;let ae;function Ve(){ae={r:0,c:[],p:ae}}function Qe(){ae.r||ee(ae.c),ae=ae.p}function D(t,e){t&&t.i&&(We.delete(t),t.i(e))}function Q(t,e,n,l){if(t&&t.o){if(We.has(t))return;We.add(t),ae.c.push(()=>{We.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function se(t){return t?.length!==void 0?t:Array.from(t)}function ze(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),Fe(()=>{const s=t.$$.on_mount.map(vt).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...s):ee(s),t.$$.on_mount=[]}),o.forEach(Fe)}function Ie(t,e){const n=t.$$;n.fragment!==null&&(en(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tn(t,e){t.$$.dirty[0]===-1&&(ge.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,n,l,o,s,i=null,a=[-1]){const r=Ee;Le(t);const d=t.$$={fragment:null,ctx:[],props:s,update:J,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:kt(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};i&&i(d.root);let y=!1;if(d.ctx=n?n(t,e.props||{},(g,_,...h)=>{const b=h.length?h[0]:_;return d.ctx&&o(d.ctx[g],d.ctx[g]=b)&&(!d.skip_bound&&d.bound[g]&&d.bound[g](b),y&&tn(t,g)),_}):[],d.update(),y=!0,ee(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const g=Xt(e.target);d.fragment&&d.fragment.l(g),g.forEach(T)}else d.fragment&&d.fragment.c();e.intro&&D(t.$$.fragment),Ne(t,e.target,e.anchor),Nt()}Le(r)}class Te{$$=void 0;$$set=void 0;$destroy(){Ie(this,1),this.$destroy=J}$on(e,n){if(!Ze(n))return J;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);function Se(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await xt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function nt(t,e){return!t.some(n=>n&&n.contains(e))}function It(t,e,n){const l=t.slice();return l[10]=e[n],l}function Mt(t){let e,n,l,o,s,i,a,r,d,y,g,_=window.trans("New [_1] creation",window.trans("Entry"))+"",h,b,p,C,I,O=window.trans("New [_1] creation",window.trans("Page"))+"",S,w,L,W,k=t[1].length>0&&jt(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=v(),s=f("div"),k&&k.c(),i=v(),a=f("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=v(),d=f("ul"),y=f("li"),g=f("a"),h=q(_),p=v(),C=f("li"),I=f("a"),S=q(O),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(a,"class","block-title"),u(g,"href",b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(I,"href",w=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(d,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(U,P){R(U,e,P),c(e,n),c(n,l),c(e,o),c(e,s),k&&k.m(s,null),c(s,i),c(s,a),c(s,r),c(s,d),c(d,y),c(y,g),c(g,h),c(d,p),c(d,C),c(C,I),c(I,S),t[9](e),L||(W=[j(l,"click",t[4]),be(Se.call(null,e,"body"))],L=!0)},p(U,P){U[1].length>0?k?k.p(U,P):(k=jt(U),k.c(),k.m(s,i)):k&&(k.d(1),k=null),P&4&&b!==(b=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${U[2]}`)&&u(g,"href",b),P&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${U[2]}`)&&u(I,"href",w)},d(U){U&&T(e),k&&k.d(),t[9](null),L=!1,ee(W)}}}function jt(t){let e,n,l,o=se(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Ut(It(t,o,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=v(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,a){R(i,e,a),R(i,n,a),R(i,l,a);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(i,a){if(a&6){o=se(i[1]);let r;for(r=0;r<o.length;r+=1){const d=It(i,o,r);s[r]?s[r].p(d,a):(s[r]=Ut(d),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(i){i&&(T(e),T(n),T(l)),De(s,i)}}}function Ut(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=f("li"),n=f("a"),o=q(l),i=v(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(a,r){R(a,e,r),c(e,n),c(n,o),c(e,i)},p(a,r){r&2&&l!==(l=window.trans("New [_1] creation",a[10].name)+"")&&oe(o,l),r&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[10].id}&type=content_data_${a[10].id}&blog_id=${a[2]}`)&&u(n,"href",s)},d(a){a&&T(e)}}}function ln(t){let e,n,l,o,s=t[0]&&Mt(t);return{c(){e=v(),s&&s.c(),n=Ce()},m(i,a){R(i,e,a),s&&s.m(i,a),R(i,n,a),l||(o=j(document.body,"click",t[5]),l=!0)},p(i,[a]){i[0]?s?s.p(i,a):(s=Mt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:J,o:J,d(i){i&&(T(e),T(n)),s&&s.d(i),l=!1,o()}}}function on(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:a=null}=e,{containerRef:r=null}=e,d=null;const y=()=>{n(0,s=!1)},g=h=>{if(r&&r.classList.contains("show"))return;const b=h.target;s&&nt([i,d],b)&&y()};function _(h){ye[h?"unshift":"push"](()=>{d=h,n(3,d),n(7,a),n(0,s)})}return t.$$set=h=>{"contentTypes"in h&&n(1,l=h.contentTypes),"blog_id"in h&&n(2,o=h.blog_id),"open"in h&&n(0,s=h.open),"buttonRef"in h&&n(6,i=h.buttonRef),"anchorRef"in h&&n(7,a=h.anchorRef),"containerRef"in h&&n(8,r=h.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&a){if(d){const h=a.getBoundingClientRect(),b=`calc(${h.bottom}px + 10px)`;n(3,d.style.top=b,d);const p=`calc(100vh - ${h.bottom}px - 10px - 20px)`;n(3,d.style.maxHeight=p,d)}s?a.classList.add("open"):a.classList.remove("open")}},[s,l,o,d,y,g,i,a,r,_]}class sn extends Te{constructor(e){super(),ke(this,e,on,ln,pe,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const an=({target:t,props:e})=>{const n=new sn({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function cn(t){let e,n,l,o;return{c(){e=f("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){R(s,e,i),l||(o=[be(Se.call(null,e,"body")),j(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(e,"style",n)},i:J,o:J,d(s){s&&T(e),l=!1,ee(o)}}}function rn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const a=(_,h)=>{const b=document.querySelector('[data-is="content-wrapper"]');h?b.classList.add(_):b.classList.remove(_)},r=()=>{a("collapsed",o)},d=()=>{a("mouseover",i)},y=()=>{var _;o&&(i=!0,d(),(_=document.querySelector('[data-is="primary-navigation"]'))===null||_===void 0||_.addEventListener("mouseleave",g,{once:!0}))},g=()=>{i=!1,d()};return $e(()=>{s||window.innerWidth<1e3&&n(0,o=!0),window.innerWidth<800&&n(0,o=!0),r()}),t.$$set=_=>{"buttonRef"in _&&n(2,l=_.buttonRef),"collapsed"in _&&n(0,o=_.collapsed),"isStored"in _&&n(3,s=_.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(r(),i=!1,d(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,y,l,s]}class un extends Te{constructor(e){super(),ke(this,e,rn,cn,pe,{buttonRef:2,collapsed:0,isStored:3})}}function fn(t,e){const n=new un({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Ot(t){let e,n;return{c(){e=xe("title"),n=q(t[2])},m(l,o){R(l,e,o),c(e,n)},p(l,o){o&4&&oe(n,l[2])},d(l){l&&T(e)}}}function dn(t){let e,n,l=t[2]&&Ot(t);return{c(){e=xe("svg"),l&&l.c(),n=xe("use"),Tt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){R(o,e,s),l&&l.m(e,null),c(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=Ot(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&Tt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:J,o:J,d(o){o&&T(e),l&&l.d()}}}function _n(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class lt extends Te{constructor(e){super(),ke(this,e,_n,dn,pe,{class:0,href:1,title:2})}}function Pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function qt(t,e,n){const l=t.slice();return l[12]=e[n],l}function At(t){let e,n,l,o=!1,s,i,a,r=t[12].label+"",d,y,g,_,h;return g=Kt(t[7][0]),{c(){e=f("label"),n=f("input"),a=v(),d=q(r),y=v(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[12].key,Z(n,n.__value),u(n,"id",s=t[12].key),n.checked=i=t[0]===t[12].key,g.p(n)},m(b,p){R(b,e,p),c(e,n),n.checked=n.__value===t[0],c(e,a),c(e,d),c(e,y),_||(h=j(n,"change",t[6]),_=!0)},p(b,p){p&16&&l!==(l=b[12].key)&&(n.__value=l,Z(n,n.__value),o=!0),p&16&&s!==(s=b[12].key)&&u(n,"id",s),p&17&&i!==(i=b[0]===b[12].key)&&(n.checked=i),(o||p&17)&&(n.checked=n.__value===b[0]),p&16&&r!==(r=b[12].label+"")&&oe(d,r)},d(b){b&&T(e),g.r(),_=!1,h()}}}function mn(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Z(e,e.__value)},m(n,l){R(n,e,l)},p:J,d(n){n&&T(e)}}}function hn(t){let e,n=se(t[3]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Bt(Pt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);R(o,e,s)},p(o,s){if(s&8){n=se(o[3]);let i;for(i=0;i<n.length;i+=1){const a=Pt(o,n,i);l[i]?l[i].p(a,s):(l[i]=Bt(a),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&T(e),De(l,o)}}}function Bt(t){let e,n=t[9].name+"",l,o;return{c(){e=f("option"),l=q(n),e.__value=o=t[9].id,Z(e,e.__value)},m(s,i){R(s,e,i),c(e,l)},p(s,i){i&8&&n!==(n=s[9].name+"")&&oe(l,n),i&8&&o!==(o=s[9].id)&&(e.__value=o,Z(e,e.__value))},d(s){s&&T(e)}}}function pn(t){let e,n,l,o,s,i,a,r,d,y,g,_,h,b,p,C,I,O,S,w,L,W,k,U,P,te,A,z=se(t[4]),M=[];for(let m=0;m<z.length;m+=1)M[m]=At(qt(t,z,m));function x(m,B){return m[3].length>0?hn:mn}let Y=x(t),F=Y(t);return U=new lt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("form"),n=f("input"),l=v(),o=f("input"),s=v(),i=f("input"),a=v(),r=f("input"),d=v(),y=f("input"),g=v(),_=f("div");for(let m=0;m<M.length;m+=1)M[m].c();h=v(),b=f("div"),p=f("select"),F.c(),I=v(),O=f("div"),S=f("div"),w=f("input"),L=v(),W=f("div"),k=f("button"),ze(U.$$.fragment),P=v(),te=f("span"),te.textContent=`${window.trans("Search")}`,u(n,"type","hidden"),u(n,"name","__mode"),n.value="search_replace",u(o,"type","hidden"),u(o,"name","blog_id"),o.value=t[1],u(i,"type","hidden"),u(i,"name","_type"),i.value=t[0],u(r,"type","hidden"),u(r,"name","do_search"),r.value="1",u(y,"type","hidden"),u(y,"name","magic_token"),y.value=t[2],u(_,"class","search-type"),u(p,"class","custom-select form-control form-select"),u(p,"name","content_type_id"),p.disabled=C=t[0]!=="content_data"||t[3].length===0,Rt(p,"disabled",t[0]!=="content_data"),u(b,"class","search-content-type"),u(w,"type","text"),u(w,"placeholder",window.trans("Select target and search text...")),u(w,"name","search"),u(S,"class","search-text-box"),u(k,"type","submit"),u(k,"class","btn btn-primary"),u(W,"class","submit-button"),u(O,"class","search-input-group"),u(e,"class","mt-search-form"),u(e,"method","post"),u(e,"action",window.ScriptURI)},m(m,B){R(m,e,B),c(e,n),c(e,l),c(e,o),c(e,s),c(e,i),c(e,a),c(e,r),c(e,d),c(e,y),c(e,g),c(e,_);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(_,null);c(e,h),c(e,b),c(b,p),F.m(p,null),c(e,I),c(e,O),c(O,S),c(S,w),t[8](w),c(O,L),c(O,W),c(W,k),Ne(U,k,null),c(k,P),c(k,te),A=!0},p(m,[B]){if((!A||B&2)&&(o.value=m[1]),(!A||B&1)&&(i.value=m[0]),(!A||B&4)&&(y.value=m[2]),B&17){z=se(m[4]);let N;for(N=0;N<z.length;N+=1){const Re=qt(m,z,N);M[N]?M[N].p(Re,B):(M[N]=At(Re),M[N].c(),M[N].m(_,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=z.length}Y===(Y=x(m))&&F?F.p(m,B):(F.d(1),F=Y(m),F&&(F.c(),F.m(p,null))),(!A||B&9&&C!==(C=m[0]!=="content_data"||m[3].length===0))&&(p.disabled=C),(!A||B&1)&&Rt(p,"disabled",m[0]!=="content_data")},i(m){A||(D(U.$$.fragment,m),A=!0)},o(m){Q(U.$$.fragment,m),A=!1},d(m){m&&T(e),De(M,m),F.d(),t[8](null),Ie(U)}}}function bn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{searchTabs:i=[]}=e,{objectType:a}=e,r=null;const d=[[]];function y(){a=this.__value,n(0,a)}function g(_){ye[_?"unshift":"push"](()=>{r=_,n(5,r)})}return t.$$set=_=>{"blogId"in _&&n(1,l=_.blogId),"magicToken"in _&&n(2,o=_.magicToken),"contentTypes"in _&&n(3,s=_.contentTypes),"searchTabs"in _&&n(4,i=_.searchTabs),"objectType"in _&&n(0,a=_.objectType)},t.$$.update=()=>{t.$$.dirty&32&&r&&r.focus()},[a,l,o,s,i,r,y,d,g]}class Ht extends Te{constructor(e){super(),ke(this,e,bn,pn,pe,{blogId:1,magicToken:2,contentTypes:3,searchTabs:4,objectType:0})}}function Jt(t){let e,n,l,o,s,i,a,r,d,y,g;return r=new Ht({props:{blogId:t[2],magicToken:t[3],contentTypes:t[4],objectType:t[1],searchTabs:t[5]}}),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=v(),a=f("div"),ze(r.$$.fragment),u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(a,"class","modal-body"),u(l,"class","modal search-button-modal")},m(_,h){R(_,e,h),R(_,n,h),R(_,l,h),c(l,o),c(o,s),c(l,i),c(l,a),Ne(r,a,null),t[11](l),d=!0,y||(g=[j(e,"click",t[7]),be(Se.call(null,e,"body")),j(s,"click",t[7]),be(Se.call(null,l,"body"))],y=!0)},p(_,h){const b={};h&4&&(b.blogId=_[2]),h&8&&(b.magicToken=_[3]),h&16&&(b.contentTypes=_[4]),h&2&&(b.objectType=_[1]),h&32&&(b.searchTabs=_[5]),r.$set(b)},i(_){d||(D(r.$$.fragment,_),d=!0)},o(_){Q(r.$$.fragment,_),d=!1},d(_){_&&(T(e),T(n),T(l)),Ie(r),t[11](null),y=!1,ee(g)}}}function gn(t){let e,n,l,o,s,i=t[0]&&Jt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(a,r){R(a,e,r),i&&i.m(a,r),R(a,n,r),l=!0,o||(s=j(document.body,"click",t[8]),o=!0)},p(a,[r]){a[0]?i?(i.p(a,r),r&1&&D(i,1)):(i=Jt(a),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(Ve(),Q(i,1,1,()=>{i=null}),Qe())},i(a){l||(D(i),l=!0)},o(a){Q(i),l=!1},d(a){a&&(T(e),T(n)),i&&i.d(a),o=!1,s()}}}let Dt=null;function yn(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:a}=e,{anchorRef:r}=e,{searchTabs:d}=e,{objectType:y}=e;const g=()=>{n(0,i=!1)};let _=null;const h=p=>{const C=p.target;i&&nt([a,_],C)&&g()};$e(async()=>{y&&d.find(p=>p.key===y)||n(1,y=d[0].key)});function b(p){ye[p?"unshift":"push"](()=>{_=p,n(6,_)})}return t.$$set=p=>{"blogId"in p&&n(2,l=p.blogId),"magicToken"in p&&n(3,o=p.magicToken),"contentTypes"in p&&n(4,s=p.contentTypes),"open"in p&&n(0,i=p.open),"buttonRef"in p&&n(9,a=p.buttonRef),"anchorRef"in p&&n(10,r=p.anchorRef),"searchTabs"in p&&n(5,d=p.searchTabs),"objectType"in p&&n(1,y=p.objectType)},t.$$.update=()=>{t.$$.dirty&1025&&r&&(i?r.classList.add("open"):r.classList.remove("open")),t.$$.dirty&1&&i&&Dt&&Dt.focus()},[i,y,l,o,s,d,_,g,h,a,r,b]}class wn extends Te{constructor(e){super(),ke(this,e,yn,gn,pe,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:9,anchorRef:10,searchTabs:5,objectType:1})}}function vn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new wn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const kn=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Ft(t,e,n){const l=t.slice();return l[30]=e[n],l}function Wt(t){let e,n,l,o,s,i,a,r,d,y=window.trans("[_1]Site",t[2].toString())+"",g,_,h,b,p,C,I,O,S,w,L,W,k,U,P,te,A,z,M,x,Y,F,m,B,N,Re,je,rt,ne,ut,Ue,ft,re,Oe,G,ue,fe,de,dt,_e,$,_t,Pe,me,mt,qe,le,ht,he,Ae,pt,Be,bt,He,Ke,Je,V,K,X,Xe,gt;me=new lt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const yt=[Sn,Tn],ie=[];function wt(E,H){return E[7]?0:1}return V=wt(t),K=ie[V]=yt[V](t),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),a=f("div"),r=f("span"),d=q("("),g=q(y),_=q(")"),h=v(),b=f("p"),b.textContent=`${window.trans("Site List")}`,p=v(),C=f("div"),I=f("button"),I.innerHTML='<span aria-hidden="true">\xD7</span>',O=v(),S=f("div"),w=f("div"),L=f("button"),W=q("<<"),U=v(),P=f("button"),te=q("<"),z=v(),M=f("span"),x=f("span"),Y=q(t[3]),F=q("/"),m=q(t[4]),B=v(),N=f("button"),Re=q(">"),rt=v(),ne=f("button"),ut=q(">>"),ft=v(),re=f("div"),Oe=f("div"),G=f("select"),ue=f("option"),ue.textContent=`${window.trans("Parent Sites")}`,fe=f("option"),fe.textContent=`${window.trans("Parent and child sites")}`,de=f("option"),de.textContent=`${window.trans("Only child sites")}`,dt=v(),_e=f("div"),$=f("input"),_t=v(),Pe=f("button"),ze(me.$$.fragment),mt=v(),qe=f("div"),le=f("button"),le.innerHTML='<span aria-hidden="true">\xD7</span>',ht=v(),he=f("div"),Ae=f("span"),Ae.textContent=`${window.trans("Site Name")}`,pt=v(),Be=f("span"),Be.textContent=`${window.trans("Parent Site")}`,bt=v(),He=f("div"),Ke=f("table"),Je=f("tbody"),K.c(),u(e,"class","site-list-button-modal-overlay"),u(I,"type","button"),u(I,"class","close"),u(I,"data-dismiss","modal"),u(I,"aria-label","Close"),u(C,"class","d-block d-md-none"),u(a,"class","site-list-title"),u(L,"type","button"),L.disabled=k=t[3]<=1,u(P,"type","button"),P.disabled=A=t[3]<=1,u(x,"class","current"),u(M,"class","page-num"),u(N,"type","button"),N.disabled=je=t[3]===t[4],u(ne,"type","button"),ne.disabled=Ue=t[3]===t[4],u(w,"class","prev-next"),ue.__value="parent_sites",Z(ue,ue.__value),fe.__value="parent_and_child_sites",Z(fe,fe.__value),de.__value="child_sites_only",Z(de,de.__value),u(G,"class","custom-select form-control form-select"),t[5]===void 0&&Fe(()=>t[24].call(G)),u(Oe,"class","site-type-filter"),u($,"type","text"),u($,"placeholder",window.trans("Filter by site name")),u(_e,"class","site-name-filter"),u(re,"class","site-filter-actions"),u(le,"type","button"),u(le,"class","close"),u(le,"data-dismiss","modal"),u(le,"aria-label","Close"),u(qe,"class","d-none d-md-block"),u(S,"class","site-list-actions"),u(i,"class","site-list-header"),u(Ae,"class","table-header-col site-list-header-name"),u(Be,"class","table-header-col site-list-header-parent"),u(he,"class","site-list-table-header"),u(He,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(E,H){R(E,e,H),R(E,n,H),R(E,l,H),c(l,o),c(o,s),c(s,i),c(i,a),c(a,r),c(r,d),c(r,g),c(r,_),c(a,h),c(a,b),c(a,p),c(a,C),c(C,I),c(i,O),c(i,S),c(S,w),c(w,L),c(L,W),c(w,U),c(w,P),c(P,te),c(w,z),c(w,M),c(M,x),c(x,Y),c(M,F),c(M,m),c(w,B),c(w,N),c(N,Re),c(w,rt),c(w,ne),c(ne,ut),c(S,ft),c(S,re),c(re,Oe),c(Oe,G),c(G,ue),c(G,fe),c(G,de),St(G,t[5],!0),c(re,dt),c(re,_e),c(_e,$),Z($,t[6]),c(_e,_t),c(_e,Pe),Ne(me,Pe,null),c(S,mt),c(S,qe),c(qe,le),c(s,ht),c(s,he),c(he,Ae),c(he,pt),c(he,Be),c(s,bt),c(s,He),c(He,Ke),c(Ke,Je),ie[V].m(Je,null),t[27](l),X=!0,Xe||(gt=[j(e,"click",t[9]),be(Se.call(null,e,"body")),j(I,"click",t[9]),j(L,"click",t[13]),j(L,"keydown",t[20]),j(P,"click",t[12]),j(P,"keydown",t[21]),j(N,"click",t[10]),j(N,"keydown",t[22]),j(ne,"click",t[11]),j(ne,"keydown",t[23]),j(G,"change",t[24]),j(G,"change",t[14]),j($,"input",t[25]),j($,"keydown",t[26]),j(Pe,"click",t[14]),j(le,"click",t[9]),be(Se.call(null,l,"body"))],Xe=!0)},p(E,H){(!X||H[0]&4)&&y!==(y=window.trans("[_1]Site",E[2].toString())+"")&&oe(g,y),(!X||H[0]&8&&k!==(k=E[3]<=1))&&(L.disabled=k),(!X||H[0]&8&&A!==(A=E[3]<=1))&&(P.disabled=A),(!X||H[0]&8)&&oe(Y,E[3]),(!X||H[0]&16)&&oe(m,E[4]),(!X||H[0]&24&&je!==(je=E[3]===E[4]))&&(N.disabled=je),(!X||H[0]&24&&Ue!==(Ue=E[3]===E[4]))&&(ne.disabled=Ue),H[0]&32&&St(G,E[5]),H[0]&64&&$.value!==E[6]&&Z($,E[6]);let Ye=V;V=wt(E),V===Ye?ie[V].p(E,H):(Ve(),Q(ie[Ye],1,1,()=>{ie[Ye]=null}),Qe(),K=ie[V],K?K.p(E,H):(K=ie[V]=yt[V](E),K.c()),D(K,1),K.m(Je,null))},i(E){X||(D(me.$$.fragment,E),D(K),X=!0)},o(E){Q(me.$$.fragment,E),Q(K),X=!1},d(E){E&&(T(e),T(n),T(l)),Ie(me),ie[V].d(),t[27](null),Xe=!1,ee(gt)}}}function Tn(t){let e,n,l=se(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Vt(Ft(t,l,i));const s=i=>Q(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(i,a);R(i,e,a),n=!0},p(i,a){if(a[0]&2){l=se(i[1]);let r;for(r=0;r<l.length;r+=1){const d=Ft(i,l,r);o[r]?(o[r].p(d,a),D(o[r],1)):(o[r]=Vt(d),o[r].c(),D(o[r],1),o[r].m(e.parentNode,e))}for(Ve(),r=l.length;r<o.length;r+=1)s(r);Qe()}},i(i){if(!n){for(let a=0;a<l.length;a+=1)D(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)Q(o[a]);n=!1},d(i){i&&T(e),De(o,i)}}}function Sn(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){R(l,e,o),c(e,n)},p:J,i:J,o:J,d(l){l&&T(e)}}}function Rn(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Child Site")}`,u(e,"class","badge badge-child-site")},m(n,l){R(n,e,l)},p:J,d(n){n&&T(e)}}}function Cn(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Site")}`,u(e,"class","badge badge-site")},m(n,l){R(n,e,l)},p:J,d(n){n&&T(e)}}}function Vt(t){let e,n,l,o,s=t[30].name+"",i,a,r,d,y,g,_,h,b=t[30].parentSiteName+"",p,C;function I(w,L){return w[30].parentSiteName==="-"?Cn:Rn}let O=I(t),S=O(t);return y=new lt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=f("tr"),n=f("td"),S.c(),l=v(),o=f("a"),i=q(s),r=v(),d=f("a"),ze(y.$$.fragment),_=v(),h=f("td"),p=v(),u(o,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(o,"class","dashboard-link"),u(d,"href",g=t[30].siteUrl),u(d,"class","site-link"),u(d,"target","_blank")},m(w,L){R(w,e,L),c(e,n),S.m(n,null),c(n,l),c(n,o),c(o,i),c(n,r),c(n,d),Ne(y,d,null),c(e,_),c(e,h),h.innerHTML=b,c(e,p),C=!0},p(w,L){O===(O=I(w))&&S?S.p(w,L):(S.d(1),S=O(w),S&&(S.c(),S.m(n,l))),(!C||L[0]&2)&&s!==(s=w[30].name+"")&&oe(i,s),(!C||L[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${w[30].id}`))&&u(o,"href",a),(!C||L[0]&2&&g!==(g=w[30].siteUrl))&&u(d,"href",g),(!C||L[0]&2)&&b!==(b=w[30].parentSiteName+"")&&(h.innerHTML=b)},i(w){C||(D(y.$$.fragment,w),C=!0)},o(w){Q(y.$$.fragment,w),C=!1},d(w){w&&T(e),S.d(),Ie(y)}}}function En(t){let e,n,l,o,s,i=t[0]&&Wt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(a,r){R(a,e,r),i&&i.m(a,r),R(a,n,r),l=!0,o||(s=j(document.body,"click",t[15]),o=!0)},p(a,r){a[0]?i?(i.p(a,r),r[0]&1&&D(i,1)):(i=Wt(a),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(Ve(),Q(i,1,1,()=>{i=null}),Qe())},i(a){l||(D(i),l=!0)},o(a){Q(i),l=!1},d(a){a&&(T(e),T(n)),i&&i.d(a),o=!1,s()}}}function Ln(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:a}=e;const r=()=>{n(0,s=!1)};let d=[],y=0,g=1,_=1,h="parent_sites",b="",p=[],C=!1,I=null;const O=()=>{n(3,g++,g),k()},S=()=>{n(3,g=_),k()},w=()=>{n(3,g--,g),k()},L=()=>{n(3,g=1),k()},W=()=>{p=[],h==="child_sites_only"?p=[{type:"parent_website",args:{value:""}}]:h==="parent_sites"&&(p=[{type:"parent_website",args:{value:"1"}}]),n(6,b=b.trim()),b!==""&&p.push({type:"name",args:{string:b,option:"contains"}}),n(3,g=1),k()},k=async()=>{n(7,C=!0);const m=await kn({magicToken:l,items:p,page:g,limit:o});n(2,y=m.count),n(4,_=m.pageMax),n(3,g=_!==0?m.page:0),n(1,d=m.sites),n(7,C=!1)},U=m=>{const B=m.target;s&&nt([i,I],B)&&r()};$e(async()=>{W()});const P=m=>m.key==="Enter"&&L(),te=m=>m.key==="Enter"&&w(),A=m=>m.key==="Enter"&&O(),z=m=>m.key==="Enter"&&S();function M(){h=Yt(this),n(5,h)}function x(){b=this.value,n(6,b)}const Y=m=>m.key==="Enter"&&W();function F(m){ye[m?"unshift":"push"](()=>{I=m,n(8,I)})}return t.$$set=m=>{"magicToken"in m&&n(16,l=m.magicToken),"limit"in m&&n(17,o=m.limit),"open"in m&&n(0,s=m.open),"buttonRef"in m&&n(18,i=m.buttonRef),"anchorRef"in m&&n(19,a=m.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&a&&(s?a.classList.add("open"):a.classList.remove("open"))},[s,d,y,g,_,h,b,C,I,r,O,S,w,L,W,U,l,o,i,a,P,te,A,z,M,x,Y,F]}class Nn extends Te{constructor(e){super(),ke(this,e,Ln,En,pe,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function In(t,e){const n=new Nn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}function Mn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const o=JSON.parse(t.dataset.searchTabsJson);o.success&&(l=o.data)}new Ht({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}})}var it,ot;const st=document.querySelector('[data-is="primary-navigation-toggle"]');if(st!==null){const t="collapsed",e=sessionStorage.getItem(t);fn(st,{collapsed:e==="true",buttonRef:st.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const at=document.querySelector('[data-script="admin-header"]');at===null&&console.error("data-script='admin-header' is not set");const Ge=(it=at?.getAttribute("data-blog-id"))!==null&&it!==void 0?it:"",ce=(ot=at?.getAttribute("data-magic-token"))!==null&&ot!==void 0?ot:"";ce===""&&console.error("data-magic-token is not set");const jn="50",Qt=document.querySelectorAll('[data-is="site-list-button"]');Qt.length>0&&ce!==""&&Qt.forEach(t=>{In(t,{magicToken:ce,limit:Number.parseInt(jn),open:!1,buttonRef:t,anchorRef:t})});const ct=document.querySelectorAll('[data-is="create-button"]'),Me=document.querySelector('[data-is="search-button"]'),Un=document.querySelector("div.mt-modal");(ct.length>0||Me!==null)&&ce!==""&&zt({blogId:Ge,magicToken:ce}).then(t=>{if(ct.length>0&&ct.forEach(n=>{an({target:n,props:{blog_id:Ge,contentTypes:t.contentTypes.filter(l=>l.can_create===1),open:!1,buttonRef:n,anchorRef:n,containerRef:Un}})}),Me!==null){const n=Me.getElementsByTagName("a")[0];vn(Me,{blogId:Ge,magicToken:ce,contentTypes:t.contentTypes.filter(l=>l.can_search===1),open:!1,buttonRef:Me,anchorRef:n})}const e=document.querySelector('[data-is="search-form"]');e!==null&&Mn(e,{blogId:Ge,magicToken:ce,contentTypes:t.contentTypes.filter(n=>n.can_search===1)})});
