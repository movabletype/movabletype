const Ht=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function z(){}function bt(t){return t()}function gt(){return Object.create(null)}function oe(t){t.forEach(bt)}function Ze(t){return typeof t=="function"}function Te(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Dt(t){return Object.keys(t).length===0}function be(t){return t&&Ze(t.destroy)?t.destroy:z}function c(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function De(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function xe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function k(){return B(" ")}function Ce(){return B("")}function j(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Jt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Vt(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e){t.value=e??""}function wt(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Wt(t){const e=t.querySelector(":checked");return e&&e.__value}function vt(t,e,n){t.classList.toggle(e,!!n)}let Le;function Ee(t){Le=t}function Ft(){if(!Le)throw new Error("Function called outside component initialization");return Le}function $e(t){Ft().$$.on_mount.push(t)}const ge=[],ye=[];let we=[];const kt=[],St=Promise.resolve();let et=!1;function Rt(){et||(et=!0,St.then(Tt))}function Qt(){return Rt(),St}function Je(t){we.push(t)}const tt=new Set;let ve=0;function Tt(){if(ve!==0)return;const t=Le;do{try{for(;ve<ge.length;){const e=ge[ve];ve++,Ee(e),zt(e.$$)}}catch(e){throw ge.length=0,ve=0,e}for(Ee(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];tt.has(n)||(tt.add(n),n())}we.length=0}while(ge.length);for(;kt.length;)kt.pop()();et=!1,tt.clear(),Ee(t)}function zt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Je)}}function Gt(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Ve=new Set;let _e;function We(){_e={r:0,c:[],p:_e}}function Fe(){_e.r||oe(_e.c),_e=_e.p}function D(t,e){t&&t.i&&(Ve.delete(t),t.i(e))}function Z(t,e,n,l){if(t&&t.o){if(Ve.has(t))return;Ve.add(t),_e.c.push(()=>{Ve.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function re(t){return t?.length!==void 0?t:Array.from(t)}function Qe(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),Je(()=>{const s=t.$$.on_mount.map(bt).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...s):oe(s),t.$$.on_mount=[]}),o.forEach(Je)}function Ie(t,e){const n=t.$$;n.fragment!==null&&(Gt(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Kt(t,e){t.$$.dirty[0]===-1&&(ge.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Me(t,e,n,l,o,s,i=null,r=[-1]){const a=Le;Ee(t);const d=t.$$={fragment:null,ctx:[],props:s,update:z,not_equal:o,bound:gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:gt(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};i&&i(d.root);let h=!1;if(d.ctx=n?n(t,e.props||{},(p,y,..._)=>{const m=_.length?_[0]:y;return d.ctx&&o(d.ctx[p],d.ctx[p]=m)&&(!d.skip_bound&&d.bound[p]&&d.bound[p](m),h&&Kt(t,p)),y}):[],d.update(),h=!0,oe(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const p=Vt(e.target);d.fragment&&d.fragment.l(p),p.forEach(C)}else d.fragment&&d.fragment.c();e.intro&&D(t.$$.fragment),Ne(t,e.target,e.anchor),Tt()}Ee(a)}class Ue{$$=void 0;$$set=void 0;$destroy(){Ie(this,1),this.$destroy=z}$on(e,n){if(!Ze(n))return z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xt);function ke(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Qt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function nt(t,e){return!t.some(n=>n&&n.contains(e))}function Ct(t,e,n){const l=t.slice();return l[10]=e[n],l}function Lt(t){let e,n,l,o,s,i,r,a,d,h,p,y=window.trans("New [_1] creation",window.trans("Entry"))+"",_,m,E,N,v,S=window.trans("New [_1] creation",window.trans("Page"))+"",M,b,A,I,R=t[1].length>0&&Et(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=k(),s=f("div"),R&&R.c(),i=k(),r=f("p"),r.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,a=k(),d=f("ul"),h=f("li"),p=f("a"),_=B(y),E=k(),N=f("li"),v=f("a"),M=B(S),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(r,"class","block-title"),u(p,"href",m=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(v,"href",b=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(d,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(P,J){L(P,e,J),c(e,n),c(n,l),c(e,o),c(e,s),R&&R.m(s,null),c(s,i),c(s,r),c(s,a),c(s,d),c(d,h),c(h,p),c(p,_),c(d,E),c(d,N),c(N,v),c(v,M),t[9](e),A||(I=[j(l,"click",t[4]),be(ke.call(null,e,"body"))],A=!0)},p(P,J){P[1].length>0?R?R.p(P,J):(R=Et(P),R.c(),R.m(s,i)):R&&(R.d(1),R=null),J&4&&m!==(m=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${P[2]}`)&&u(p,"href",m),J&4&&b!==(b=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${P[2]}`)&&u(v,"href",b)},d(P){P&&C(e),R&&R.d(),t[9](null),A=!1,oe(I)}}}function Et(t){let e,n,l,o=re(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Nt(Ct(t,o,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=k(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,r){L(i,e,r),L(i,n,r),L(i,l,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(i,r){if(r&6){o=re(i[1]);let a;for(a=0;a<o.length;a+=1){const d=Ct(i,o,a);s[a]?s[a].p(d,r):(s[a]=Nt(d),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(i){i&&(C(e),C(n),C(l)),De(s,i)}}}function Nt(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=f("li"),n=f("a"),o=B(l),i=k(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(r,a){L(r,e,a),c(e,n),c(n,o),c(e,i)},p(r,a){a&2&&l!==(l=window.trans("New [_1] creation",r[10].name)+"")&&ce(o,l),a&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${r[10].id}&type=content_data_${r[10].id}&blog_id=${r[2]}`)&&u(n,"href",s)},d(r){r&&C(e)}}}function Yt(t){let e,n,l,o,s=t[0]&&Lt(t);return{c(){e=k(),s&&s.c(),n=Ce()},m(i,r){L(i,e,r),s&&s.m(i,r),L(i,n,r),l||(o=j(document.body,"click",t[5]),l=!0)},p(i,[r]){i[0]?s?s.p(i,r):(s=Lt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:z,o:z,d(i){i&&(C(e),C(n)),s&&s.d(i),l=!1,o()}}}function Zt(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:r=null}=e,{containerRef:a=null}=e,d=null;const h=()=>{n(0,s=!1)},p=_=>{if(a&&a.classList.contains("show"))return;const m=_.target;s&&nt([i,d],m)&&h()};function y(_){ye[_?"unshift":"push"](()=>{d=_,n(3,d),n(7,r),n(0,s)})}return t.$$set=_=>{"contentTypes"in _&&n(1,l=_.contentTypes),"blog_id"in _&&n(2,o=_.blog_id),"open"in _&&n(0,s=_.open),"buttonRef"in _&&n(6,i=_.buttonRef),"anchorRef"in _&&n(7,r=_.anchorRef),"containerRef"in _&&n(8,a=_.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&r){if(d){const _=r.getBoundingClientRect(),m=`calc(${_.bottom}px + 10px)`;n(3,d.style.top=m,d);const E=`calc(100vh - ${_.bottom}px - 10px - 20px)`;n(3,d.style.maxHeight=E,d)}s?r.classList.add("open"):r.classList.remove("open")}},[s,l,o,d,h,p,i,r,a,y]}class xt extends Ue{constructor(e){super(),Me(this,e,Zt,Yt,Te,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const $t=({target:t,props:e})=>{const n=new xt({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function en(t){let e,n,l,o;return{c(){e=f("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){L(s,e,i),l||(o=[be(ke.call(null,e,"body")),j(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(e,"style",n)},i:z,o:z,d(s){s&&C(e),l=!1,oe(o)}}}function tn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const r=(y,_)=>{const m=document.querySelector('[data-is="content-wrapper"]');_?m.classList.add(y):m.classList.remove(y)},a=()=>{r("collapsed",o)},d=()=>{r("mouseover",i)},h=()=>{var y;o&&(i=!0,d(),(y=document.querySelector('[data-is="primary-navigation"]'))===null||y===void 0||y.addEventListener("mouseleave",p,{once:!0}))},p=()=>{i=!1,d()};return $e(()=>{s||window.innerWidth<1e3&&n(0,o=!0),a()}),t.$$set=y=>{"buttonRef"in y&&n(2,l=y.buttonRef),"collapsed"in y&&n(0,o=y.collapsed),"isStored"in y&&n(3,s=y.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(a(),i=!1,d(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,h,l,s]}class nn extends Ue{constructor(e){super(),Me(this,e,tn,en,Te,{buttonRef:2,collapsed:0,isStored:3})}}function ln(t,e){const n=new nn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function It(t){let e,n;return{c(){e=xe("title"),n=B(t[2])},m(l,o){L(l,e,o),c(e,n)},p(l,o){o&4&&ce(n,l[2])},d(l){l&&C(e)}}}function on(t){let e,n,l=t[2]&&It(t);return{c(){e=xe("svg"),l&&l.c(),n=xe("use"),yt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){L(o,e,s),l&&l.m(e,null),c(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=It(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&yt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:z,o:z,d(o){o&&C(e),l&&l.d()}}}function sn(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class ze extends Ue{constructor(e){super(),Me(this,e,sn,on,Te,{class:0,href:1,title:2})}}function Mt(t,e,n){const l=t.slice();return l[17]=e[n],l}function Ut(t,e,n){const l=t.slice();return l[20]=e[n],l}function jt(t){let e,n,l,o,s,i,r,a,d,h,p,y,_,m,E,N,v,S,M,b,A,I,R,P,J,V,ne,ee,G,K,ue,Q,w,te,Re,W=re(t[5]),q=[];for(let g=0;g<W.length;g+=1)q[g]=Ot(Ut(t,W,g));function fe(g,O){return g[4].length>0?cn:an}let de=fe(t),F=de(t);return K=new ze({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("div"),n=k(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=k(),r=f("div"),a=f("form"),d=f("input"),h=k(),p=f("input"),y=k(),_=f("input"),m=k(),E=f("input"),N=k(),v=f("input"),S=k(),M=f("div");for(let g=0;g<q.length;g+=1)q[g].c();b=k(),A=f("div"),I=f("select"),F.c(),P=k(),J=f("div"),V=f("input"),ne=k(),ee=f("div"),G=f("button"),Qe(K.$$.fragment),ue=k(),Q=f("span"),Q.textContent=`${window.trans("Search")}`,u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(d,"type","hidden"),u(d,"name","__mode"),d.value="search_replace",u(p,"type","hidden"),u(p,"name","blog_id"),p.value=t[2],u(_,"type","hidden"),u(_,"name","_type"),u(E,"type","hidden"),u(E,"name","do_search"),E.value="1",u(v,"type","hidden"),u(v,"name","magic_token"),v.value=t[3],u(M,"class","search-type"),u(I,"class","custom-select form-control form-select"),u(I,"name","content_type_id"),I.disabled=R=t[1]!=="content_data"||t[4].length===0,vt(I,"disabled",t[1]!=="content_data"),u(A,"class","search-content-type"),u(V,"type","text"),u(V,"placeholder",window.trans("Select target and search text...")),u(V,"name","search"),u(J,"class","search-text-box"),u(G,"type","submit"),u(G,"class","btn btn-primary"),u(ee,"class","submit-button"),u(a,"class","search-form"),u(a,"method","post"),u(a,"action",window.ScriptURI),u(r,"class","modal-body"),u(l,"class","modal search-button-modal")},m(g,O){L(g,e,O),L(g,n,O),L(g,l,O),c(l,o),c(o,s),c(l,i),c(l,r),c(r,a),c(a,d),c(a,h),c(a,p),c(a,y),c(a,_),Y(_,t[1]),c(a,m),c(a,E),c(a,N),c(a,v),c(a,S),c(a,M);for(let U=0;U<q.length;U+=1)q[U]&&q[U].m(M,null);c(a,b),c(a,A),c(A,I),F.m(I,null),c(a,P),c(a,J),c(J,V),t[15](V),c(a,ne),c(a,ee),c(ee,G),Ne(K,G,null),c(G,ue),c(G,Q),t[16](l),w=!0,te||(Re=[j(e,"click",t[8]),be(ke.call(null,e,"body")),j(s,"click",t[8]),j(_,"input",t[12]),be(ke.call(null,l,"body"))],te=!0)},p(g,O){if((!w||O&4)&&(p.value=g[2]),O&2&&Y(_,g[1]),(!w||O&8)&&(v.value=g[3]),O&34){W=re(g[5]);let U;for(U=0;U<W.length;U+=1){const le=Ut(g,W,U);q[U]?q[U].p(le,O):(q[U]=Ot(le),q[U].c(),q[U].m(M,null))}for(;U<q.length;U+=1)q[U].d(1);q.length=W.length}de===(de=fe(g))&&F?F.p(g,O):(F.d(1),F=de(g),F&&(F.c(),F.m(I,null))),(!w||O&18&&R!==(R=g[1]!=="content_data"||g[4].length===0))&&(I.disabled=R),(!w||O&2)&&vt(I,"disabled",g[1]!=="content_data")},i(g){w||(D(K.$$.fragment,g),w=!0)},o(g){Z(K.$$.fragment,g),w=!1},d(g){g&&(C(e),C(n),C(l)),De(q,g),F.d(),t[15](null),Ie(K),t[16](null),te=!1,oe(Re)}}}function Ot(t){let e,n,l,o=!1,s,i,r=t[20].label+"",a,d,h,p,y;return h=Jt(t[14][0]),{c(){e=f("label"),n=f("input"),i=k(),a=B(r),d=k(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[20].key,Y(n,n.__value),u(n,"id",s=t[20].key),h.p(n)},m(_,m){L(_,e,m),c(e,n),n.checked=n.__value===t[1],c(e,i),c(e,a),c(e,d),p||(y=j(n,"change",t[13]),p=!0)},p(_,m){m&32&&l!==(l=_[20].key)&&(n.__value=l,Y(n,n.__value),o=!0),m&32&&s!==(s=_[20].key)&&u(n,"id",s),(o||m&34)&&(n.checked=n.__value===_[1]),m&32&&r!==(r=_[20].label+"")&&ce(a,r)},d(_){_&&C(e),h.r(),p=!1,y()}}}function an(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Y(e,e.__value)},m(n,l){L(n,e,l)},p:z,d(n){n&&C(e)}}}function cn(t){let e,n=re(t[4]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Pt(Mt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);L(o,e,s)},p(o,s){if(s&16){n=re(o[4]);let i;for(i=0;i<n.length;i+=1){const r=Mt(o,n,i);l[i]?l[i].p(r,s):(l[i]=Pt(r),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&C(e),De(l,o)}}}function Pt(t){let e,n=t[17].name+"",l,o;return{c(){e=f("option"),l=B(n),e.__value=o=t[17].id,Y(e,e.__value)},m(s,i){L(s,e,i),c(e,l)},p(s,i){i&16&&n!==(n=s[17].name+"")&&ce(l,n),i&16&&o!==(o=s[17].id)&&(e.__value=o,Y(e,e.__value))},d(s){s&&C(e)}}}function rn(t){let e,n,l,o,s,i=t[0]&&jt(t);return{c(){e=k(),i&&i.c(),n=Ce()},m(r,a){L(r,e,a),i&&i.m(r,a),L(r,n,a),l=!0,o||(s=j(document.body,"click",t[9]),o=!0)},p(r,[a]){r[0]?i?(i.p(r,a),a&1&&D(i,1)):(i=jt(r),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(We(),Z(i,1,1,()=>{i=null}),Fe())},i(r){l||(D(i),l=!0)},o(r){Z(i),l=!1},d(r){r&&(C(e),C(n)),i&&i.d(r),o=!1,s()}}}function un(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:r}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:h}=e;const p=()=>{n(0,i=!1)};let y=null;const _=b=>{const A=b.target;i&&nt([r,y],A)&&p()};let m=null;$e(async()=>{h&&d.find(b=>b.key===h)||n(1,h=d[0].key)});const E=[[]];function N(){h=this.value,n(1,h)}function v(){h=this.__value,n(1,h)}function S(b){ye[b?"unshift":"push"](()=>{m=b,n(6,m)})}function M(b){ye[b?"unshift":"push"](()=>{y=b,n(7,y)})}return t.$$set=b=>{"blogId"in b&&n(2,l=b.blogId),"magicToken"in b&&n(3,o=b.magicToken),"contentTypes"in b&&n(4,s=b.contentTypes),"open"in b&&n(0,i=b.open),"buttonRef"in b&&n(10,r=b.buttonRef),"anchorRef"in b&&n(11,a=b.anchorRef),"searchTabs"in b&&n(5,d=b.searchTabs),"objectType"in b&&n(1,h=b.objectType)},t.$$.update=()=>{t.$$.dirty&2049&&a&&(i?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty&65&&i&&m&&m.focus()},[i,h,l,o,s,d,m,y,p,_,r,a,N,v,E,S,M]}class fn extends Ue{constructor(e){super(),Me(this,e,un,rn,Te,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function dn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new fn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const _n=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Bt(t,e,n){const l=t.slice();return l[30]=e[n],l}function qt(t){let e,n,l,o,s,i,r,a,d,h=window.trans("[_1]Site",t[2].toString())+"",p,y,_,m,E,N,v,S,M,b,A,I,R,P,J,V,ne,ee,G,K,ue,Q,w,te,Re,W,q,fe,de,F,g,O,U,le,ct,pe,ie,rt,Pe,me,ut,se,ft,he,Be,dt,qe,_t,Ae,Ke,He,X,x,$,Xe,pt;me=new ze({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const mt=[mn,pn],ae=[];function ht(T,H){return T[7]?0:1}return X=ht(t),x=ae[X]=mt[X](t),{c(){e=f("div"),n=k(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),r=f("div"),a=f("span"),d=B("("),p=B(h),y=B(")"),_=k(),m=f("p"),m.textContent=`${window.trans("Site List")}`,E=k(),N=f("div"),v=f("div"),S=f("button"),M=B("<<"),A=k(),I=f("button"),R=B("<"),J=k(),V=f("span"),ne=f("span"),ee=B(t[3]),G=B("/"),K=B(t[4]),ue=k(),Q=f("button"),w=B(">"),Re=k(),W=f("button"),q=B(">>"),de=k(),F=f("div"),g=f("select"),O=f("option"),O.textContent=`${window.trans("Parent Sites")}`,U=f("option"),U.textContent=`${window.trans("Parent and child sites")}`,le=f("option"),le.textContent=`${window.trans("Only child sites")}`,ct=k(),pe=f("div"),ie=f("input"),rt=k(),Pe=f("button"),Qe(me.$$.fragment),ut=k(),se=f("button"),se.innerHTML='<span aria-hidden="true">\xD7</span>',ft=k(),he=f("div"),Be=f("span"),Be.textContent=`${window.trans("Site Name")}`,dt=k(),qe=f("span"),qe.textContent=`${window.trans("Parent Site")}`,_t=k(),Ae=f("div"),Ke=f("table"),He=f("tbody"),x.c(),u(e,"class","site-list-button-modal-overlay"),u(r,"class","site-list-title"),u(S,"type","button"),S.disabled=b=t[3]<=1,u(I,"type","button"),I.disabled=P=t[3]<=1,u(ne,"class","current"),u(V,"class","page-num"),u(Q,"type","button"),Q.disabled=te=t[3]===t[4],u(W,"type","button"),W.disabled=fe=t[3]===t[4],u(v,"class","prev-next"),O.__value="parent_sites",Y(O,O.__value),U.__value="parent_and_child_sites",Y(U,U.__value),le.__value="child_sites_only",Y(le,le.__value),u(g,"class","custom-select form-control form-select"),t[5]===void 0&&Je(()=>t[24].call(g)),u(F,"class","site-type-filter"),u(ie,"type","text"),u(ie,"placeholder",window.trans("Filter by site name")),u(pe,"class","site-name-filter"),u(se,"type","button"),u(se,"class","close"),u(se,"data-dismiss","modal"),u(se,"aria-label","Close"),u(N,"class","site-list-actions"),u(i,"class","site-list-header"),u(Be,"class","table-header-col site-list-header-name"),u(qe,"class","table-header-col site-list-header-parent"),u(he,"class","site-list-table-header"),u(Ae,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(T,H){L(T,e,H),L(T,n,H),L(T,l,H),c(l,o),c(o,s),c(s,i),c(i,r),c(r,a),c(a,d),c(a,p),c(a,y),c(r,_),c(r,m),c(i,E),c(i,N),c(N,v),c(v,S),c(S,M),c(v,A),c(v,I),c(I,R),c(v,J),c(v,V),c(V,ne),c(ne,ee),c(V,G),c(V,K),c(v,ue),c(v,Q),c(Q,w),c(v,Re),c(v,W),c(W,q),c(N,de),c(N,F),c(F,g),c(g,O),c(g,U),c(g,le),wt(g,t[5],!0),c(N,ct),c(N,pe),c(pe,ie),Y(ie,t[6]),c(pe,rt),c(pe,Pe),Ne(me,Pe,null),c(N,ut),c(N,se),c(s,ft),c(s,he),c(he,Be),c(he,dt),c(he,qe),c(s,_t),c(s,Ae),c(Ae,Ke),c(Ke,He),ae[X].m(He,null),t[27](l),$=!0,Xe||(pt=[j(e,"click",t[9]),be(ke.call(null,e,"body")),j(S,"click",t[13]),j(S,"keydown",t[20]),j(I,"click",t[12]),j(I,"keydown",t[21]),j(Q,"click",t[10]),j(Q,"keydown",t[22]),j(W,"click",t[11]),j(W,"keydown",t[23]),j(g,"change",t[24]),j(g,"change",t[14]),j(ie,"input",t[25]),j(ie,"keydown",t[26]),j(Pe,"click",t[14]),j(se,"click",t[9]),be(ke.call(null,l,"body"))],Xe=!0)},p(T,H){(!$||H[0]&4)&&h!==(h=window.trans("[_1]Site",T[2].toString())+"")&&ce(p,h),(!$||H[0]&8&&b!==(b=T[3]<=1))&&(S.disabled=b),(!$||H[0]&8&&P!==(P=T[3]<=1))&&(I.disabled=P),(!$||H[0]&8)&&ce(ee,T[3]),(!$||H[0]&16)&&ce(K,T[4]),(!$||H[0]&24&&te!==(te=T[3]===T[4]))&&(Q.disabled=te),(!$||H[0]&24&&fe!==(fe=T[3]===T[4]))&&(W.disabled=fe),H[0]&32&&wt(g,T[5]),H[0]&64&&ie.value!==T[6]&&Y(ie,T[6]);let Ye=X;X=ht(T),X===Ye?ae[X].p(T,H):(We(),Z(ae[Ye],1,1,()=>{ae[Ye]=null}),Fe(),x=ae[X],x?x.p(T,H):(x=ae[X]=mt[X](T),x.c()),D(x,1),x.m(He,null))},i(T){$||(D(me.$$.fragment,T),D(x),$=!0)},o(T){Z(me.$$.fragment,T),Z(x),$=!1},d(T){T&&(C(e),C(n),C(l)),Ie(me),ae[X].d(),t[27](null),Xe=!1,oe(pt)}}}function pn(t){let e,n,l=re(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=At(Bt(t,l,i));const s=i=>Z(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,r);L(i,e,r),n=!0},p(i,r){if(r[0]&2){l=re(i[1]);let a;for(a=0;a<l.length;a+=1){const d=Bt(i,l,a);o[a]?(o[a].p(d,r),D(o[a],1)):(o[a]=At(d),o[a].c(),D(o[a],1),o[a].m(e.parentNode,e))}for(We(),a=l.length;a<o.length;a+=1)s(a);Fe()}},i(i){if(!n){for(let r=0;r<l.length;r+=1)D(o[r]);n=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Z(o[r]);n=!1},d(i){i&&C(e),De(o,i)}}}function mn(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){L(l,e,o),c(e,n)},p:z,i:z,o:z,d(l){l&&C(e)}}}function At(t){let e,n,l,o,s,i=t[30].name+"",r,a,d,h,p,y,_,m,E=t[30].parentSiteName+"",N,v;return o=new ze({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${t[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),p=new ze({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=f("tr"),n=f("td"),l=f("a"),Qe(o.$$.fragment),s=k(),r=B(i),d=k(),h=f("a"),Qe(p.$$.fragment),_=k(),m=f("td"),N=k(),u(l,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(l,"class","dashboard-link"),u(h,"href",y=t[30].siteUrl),u(h,"class","site-link"),u(h,"target","_blank")},m(S,M){L(S,e,M),c(e,n),c(n,l),Ne(o,l,null),c(l,s),c(l,r),c(n,d),c(n,h),Ne(p,h,null),c(e,_),c(e,m),m.innerHTML=E,c(e,N),v=!0},p(S,M){const b={};M[0]&2&&(b.href=`${window.StaticURI}images/admin2025/sprite.svg#${S[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),o.$set(b),(!v||M[0]&2)&&i!==(i=S[30].name+"")&&ce(r,i),(!v||M[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${S[30].id}`))&&u(l,"href",a),(!v||M[0]&2&&y!==(y=S[30].siteUrl))&&u(h,"href",y),(!v||M[0]&2)&&E!==(E=S[30].parentSiteName+"")&&(m.innerHTML=E)},i(S){v||(D(o.$$.fragment,S),D(p.$$.fragment,S),v=!0)},o(S){Z(o.$$.fragment,S),Z(p.$$.fragment,S),v=!1},d(S){S&&C(e),Ie(o),Ie(p)}}}function hn(t){let e,n,l,o,s,i=t[0]&&qt(t);return{c(){e=k(),i&&i.c(),n=Ce()},m(r,a){L(r,e,a),i&&i.m(r,a),L(r,n,a),l=!0,o||(s=j(document.body,"click",t[15]),o=!0)},p(r,a){r[0]?i?(i.p(r,a),a[0]&1&&D(i,1)):(i=qt(r),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(We(),Z(i,1,1,()=>{i=null}),Fe())},i(r){l||(D(i),l=!0)},o(r){Z(i),l=!1},d(r){r&&(C(e),C(n)),i&&i.d(r),o=!1,s()}}}function bn(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:r}=e;const a=()=>{n(0,s=!1)};let d=[],h=0,p=1,y=1,_="parent_sites",m="",E=[],N=!1,v=null;const S=()=>{n(3,p++,p),R()},M=()=>{n(3,p=y),R()},b=()=>{n(3,p--,p),R()},A=()=>{n(3,p=1),R()},I=()=>{E=[],_==="child_sites_only"?E=[{type:"parent_website",args:{value:""}}]:_==="parent_sites"&&(E=[{type:"parent_website",args:{value:"1"}}]),n(6,m=m.trim()),m!==""&&E.push({type:"name",args:{string:m,option:"contains"}}),n(3,p=1),R()},R=async()=>{n(7,N=!0);const w=await _n({magicToken:l,items:E,page:p,limit:o});n(2,h=w.count),n(4,y=w.pageMax),n(3,p=y!==0?w.page:0),n(1,d=w.sites),n(7,N=!1)},P=w=>{const te=w.target;s&&nt([i,v],te)&&a()};$e(async()=>{I()});const J=w=>w.key==="Enter"&&A(),V=w=>w.key==="Enter"&&b(),ne=w=>w.key==="Enter"&&S(),ee=w=>w.key==="Enter"&&M();function G(){_=Wt(this),n(5,_)}function K(){m=this.value,n(6,m)}const ue=w=>w.key==="Enter"&&I();function Q(w){ye[w?"unshift":"push"](()=>{v=w,n(8,v)})}return t.$$set=w=>{"magicToken"in w&&n(16,l=w.magicToken),"limit"in w&&n(17,o=w.limit),"open"in w&&n(0,s=w.open),"buttonRef"in w&&n(18,i=w.buttonRef),"anchorRef"in w&&n(19,r=w.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&r&&(s?r.classList.add("open"):r.classList.remove("open"))},[s,d,h,p,y,_,m,N,v,a,S,M,b,A,I,P,l,o,i,r,J,V,ne,ee,G,K,ue,Q]}class gn extends Ue{constructor(e){super(),Me(this,e,bn,hn,Te,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function yn(t,e){const n=new gn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}var lt,it;const ot=document.querySelector('[data-is="primary-navigation-toggle"]');if(ot!==null){const t="collapsed",e=sessionStorage.getItem(t);ln(ot,{collapsed:e==="true",buttonRef:ot.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const st=document.querySelector('[data-script="admin-header"]');st===null&&console.error("data-script='admin-header' is not set");const at=(lt=st?.getAttribute("data-blog-id"))!==null&&lt!==void 0?lt:"",Se=(it=st?.getAttribute("data-magic-token"))!==null&&it!==void 0?it:"";Se===""&&console.error("data-magic-token is not set");const wn="50",Ge=document.querySelector('[data-is="site-list-button"]');Ge!==null&&Se!==""&&yn(Ge,{magicToken:Se,limit:Number.parseInt(wn),open:!1,buttonRef:Ge,anchorRef:Ge});const je=document.querySelector('[data-is="create-button"]'),Oe=document.querySelector('[data-is="search-button"]'),vn=document.querySelector("div.mt-modal");(je!==null||Oe!==null)&&Se!==""&&Ht({blogId:at,magicToken:Se}).then(t=>{if(je!==null&&$t({target:je,props:{blog_id:at,contentTypes:t.contentTypes.filter(e=>e.can_create===1),open:!1,buttonRef:je,anchorRef:je,containerRef:vn}}),Oe!==null){const e=Oe.getElementsByTagName("a")[0];dn(Oe,{blogId:at,magicToken:Se,contentTypes:t.contentTypes.filter(n=>n.can_search===1),open:!1,buttonRef:Oe,anchorRef:e})}});
