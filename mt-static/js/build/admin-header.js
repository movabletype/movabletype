const It=async e=>{const t={__mode:"content_types_for_search_action",blog_id:e.blogId,magic_token:e.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function z(){}function rt(e){return e()}function ct(){return Object.create(null)}function oe(e){e.forEach(rt)}function Ge(e){return typeof e=="function"}function Re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Mt(e){return Object.keys(e).length===0}function be(e){return e&&Ge(e.destroy)?e.destroy:z}function c(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function qe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function Ke(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function k(){return B(" ")}function Te(){return B("")}function j(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function u(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ut(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function Ut(e){let t;return{p(...n){t=n,t.forEach(l=>e.push(l))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function jt(e){return Array.from(e.childNodes)}function re(e,t){t=""+t,e.data!==t&&(e.data=t)}function Y(e,t){e.value=t??""}function ft(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ot(e){const t=e.querySelector(":checked");return t&&t.__value}function dt(e,t,n){e.classList.toggle(t,!!n)}let Ce;function Le(e){Ce=e}function Pt(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Xe(e){Pt().$$.on_mount.push(e)}const ge=[],ye=[];let we=[];const _t=[],pt=Promise.resolve();let Ye=!1;function mt(){Ye||(Ye=!0,pt.then(ht))}function Bt(){return mt(),pt}function Ae(e){we.push(e)}const Ze=new Set;let ve=0;function ht(){if(ve!==0)return;const e=Ce;do{try{for(;ve<ge.length;){const t=ge[ve];ve++,Le(t),qt(t.$$)}}catch(t){throw ge.length=0,ve=0,t}for(Le(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let t=0;t<we.length;t+=1){const n=we[t];Ze.has(n)||(Ze.add(n),n())}we.length=0}while(ge.length);for(;_t.length;)_t.pop()();Ye=!1,Ze.clear(),Le(e)}function qt(e){if(e.fragment!==null){e.update(),oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ae)}}function At(e){const t=[],n=[];we.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),we=t}const He=new Set;let _e;function De(){_e={r:0,c:[],p:_e}}function Je(){_e.r||oe(_e.c),_e=_e.p}function D(e,t){e&&e.i&&(He.delete(e),e.i(t))}function Z(e,t,n,l){if(e&&e.o){if(He.has(e))return;He.add(e),_e.c.push(()=>{He.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ce(e){return e?.length!==void 0?e:Array.from(e)}function Ve(e){e&&e.c()}function Ee(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),Ae(()=>{const s=e.$$.on_mount.map(rt).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...s):oe(s),e.$$.on_mount=[]}),o.forEach(Ae)}function Ne(e,t){const n=e.$$;n.fragment!==null&&(At(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(e,t){e.$$.dirty[0]===-1&&(ge.push(e),mt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ie(e,t,n,l,o,s,i=null,r=[-1]){const a=Ce;Le(e);const d=e.$$={fragment:null,ctx:[],props:s,update:z,not_equal:o,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:ct(),dirty:r,skip_bound:!1,root:t.target||a.$$.root};i&&i(d.root);let m=!1;if(d.ctx=n?n(e,t.props||{},(p,_,...y)=>{const h=y.length?y[0]:_;return d.ctx&&o(d.ctx[p],d.ctx[p]=h)&&(!d.skip_bound&&d.bound[p]&&d.bound[p](h),m&&Ht(e,p)),_}):[],d.update(),m=!0,oe(d.before_update),d.fragment=l?l(d.ctx):!1,t.target){if(t.hydrate){const p=jt(t.target);d.fragment&&d.fragment.l(p),p.forEach(C)}else d.fragment&&d.fragment.c();t.intro&&D(e.$$.fragment),Ee(e,t.target,t.anchor),ht()}Le(a)}class Me{$$=void 0;$$set=void 0;$destroy(){Ne(this,1),this.$destroy=z}$on(t,n){if(!Ge(n))return z;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Mt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Dt);function ke(e,t="body"){let n;async function l(s){if(t=s,typeof t=="string"){if(n=document.querySelector(t),n===null&&(await Bt(),n=document.querySelector(t)),n===null)throw new Error(`No element found matching css selector: "${t}"`)}else if(t instanceof HTMLElement)n=t;else throw new TypeError(`Unknown portal target type: ${t===null?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(e),e.hidden=!1}function o(){e.parentNode&&e.parentNode.removeChild(e)}return l(t),{update:l,destroy:o}}function xe(e,t){return!e.some(n=>n&&n.contains(t))}function bt(e,t,n){const l=e.slice();return l[9]=t[n],l}function gt(e){let t,n,l,o,s,i,r,a,d,m,p,_=window.trans("New [_1] creation",window.trans("Entry"))+"",y,h,I,E,v,S=window.trans("New [_1] creation",window.trans("Page"))+"",M,b,A,N,R=e[1].length>0&&yt(e);return{c(){t=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=k(),s=f("div"),R&&R.c(),i=k(),r=f("p"),r.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,a=k(),d=f("ul"),m=f("li"),p=f("a"),y=B(_),I=k(),E=f("li"),v=f("a"),M=B(S),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(r,"class","block-title"),u(p,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${e[2]}`),u(v,"href",b=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${e[2]}`),u(d,"class","create-button-list"),u(s,"class","modal-body"),u(t,"class","modal create-button-modal")},m(P,J){L(P,t,J),c(t,n),c(n,l),c(t,o),c(t,s),R&&R.m(s,null),c(s,i),c(s,r),c(s,a),c(s,d),c(d,m),c(m,p),c(p,y),c(d,I),c(d,E),c(E,v),c(v,M),e[8](t),A||(N=[j(l,"click",e[4]),be(ke.call(null,t,"body"))],A=!0)},p(P,J){P[1].length>0?R?R.p(P,J):(R=yt(P),R.c(),R.m(s,i)):R&&(R.d(1),R=null),J&4&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${P[2]}`)&&u(p,"href",h),J&4&&b!==(b=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${P[2]}`)&&u(v,"href",b)},d(P){P&&C(t),R&&R.d(),e[8](null),A=!1,oe(N)}}}function yt(e){let t,n,l,o=ce(e[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=wt(bt(e,o,i));return{c(){t=f("p"),t.textContent=`${window.trans("Content Data")}`,n=k(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(t,"class","block-title"),u(l,"class","create-button-list")},m(i,r){L(i,t,r),L(i,n,r),L(i,l,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(i,r){if(r&6){o=ce(i[1]);let a;for(a=0;a<o.length;a+=1){const d=bt(i,o,a);s[a]?s[a].p(d,r):(s[a]=wt(d),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(i){i&&(C(t),C(n),C(l)),qe(s,i)}}}function wt(e){let t,n,l=window.trans("New [_1] creation",e[9].name)+"",o,s,i;return{c(){t=f("li"),n=f("a"),o=B(l),i=k(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${e[9].id}&type=content_data_${e[9].id}&blog_id=${e[2]}`)},m(r,a){L(r,t,a),c(t,n),c(n,o),c(t,i)},p(r,a){a&2&&l!==(l=window.trans("New [_1] creation",r[9].name)+"")&&re(o,l),a&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${r[9].id}&type=content_data_${r[9].id}&blog_id=${r[2]}`)&&u(n,"href",s)},d(r){r&&C(t)}}}function Jt(e){let t,n,l,o,s=e[0]&&gt(e);return{c(){t=k(),s&&s.c(),n=Te()},m(i,r){L(i,t,r),s&&s.m(i,r),L(i,n,r),l||(o=j(document.body,"click",e[5]),l=!0)},p(i,[r]){i[0]?s?s.p(i,r):(s=gt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:z,o:z,d(i){i&&(C(t),C(n)),s&&s.d(i),l=!1,o()}}}function Vt(e,t,n){let{contentTypes:l=[]}=t,{blog_id:o}=t,{open:s=!1}=t,{buttonRef:i=null}=t,{anchorRef:r=null}=t,a=null;const d=()=>{n(0,s=!1)},m=_=>{const y=_.target;s&&xe([i,a],y)&&d()};function p(_){ye[_?"unshift":"push"](()=>{a=_,n(3,a),n(7,r),n(0,s)})}return e.$$set=_=>{"contentTypes"in _&&n(1,l=_.contentTypes),"blog_id"in _&&n(2,o=_.blog_id),"open"in _&&n(0,s=_.open),"buttonRef"in _&&n(6,i=_.buttonRef),"anchorRef"in _&&n(7,r=_.anchorRef)},e.$$.update=()=>{if(e.$$.dirty&137&&r){if(a){const _=r.getBoundingClientRect(),y=`calc(${_.bottom}px + 10px)`;n(3,a.style.top=y,a);const h=`calc(100vh - ${_.bottom}px - 10px - 20px)`;n(3,a.style.maxHeight=h,a)}s?r.classList.add("open"):r.classList.remove("open")}},[s,l,o,a,d,m,i,r,p]}class Wt extends Me{constructor(t){super(),Ie(this,t,Vt,Jt,Re,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7})}}const Ft=({target:e,props:t})=>{const n=new Wt({target:e,props:t});e.addEventListener("click",l=>{l.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,n.$set(t)})};function Qt(e){let t,n,l,o;return{c(){t=f("div"),u(t,"class","mt-primaryNavigation-overlay"),u(t,"style",n=`display: ${e[0]?"block":"none"}`)},m(s,i){L(s,t,i),l||(o=[be(ke.call(null,t,"body")),j(t,"mouseenter",e[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(t,"style",n)},i:z,o:z,d(s){s&&C(t),l=!1,oe(o)}}}function zt(e,t,n){let{buttonRef:l}=t,{collapsed:o=!1}=t,{isStored:s=!1}=t,i=!1;const r=(_,y)=>{const h=document.querySelector('[data-is="content-wrapper"]');y?h.classList.add(_):h.classList.remove(_)},a=()=>{r("collapsed",o)},d=()=>{r("mouseover",i)},m=()=>{var _;o&&(i=!0,d(),(_=document.querySelector('[data-is="primary-navigation"]'))===null||_===void 0||_.addEventListener("mouseleave",p,{once:!0}))},p=()=>{i=!1,d()};return Xe(()=>{s||window.innerWidth<1e3&&n(0,o=!0),a()}),e.$$set=_=>{"buttonRef"in _&&n(2,l=_.buttonRef),"collapsed"in _&&n(0,o=_.collapsed),"isStored"in _&&n(3,s=_.isStored)},e.$$.update=()=>{e.$$.dirty&5&&(a(),i=!1,d(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,m,l,s]}class Gt extends Me{constructor(t){super(),Ie(this,t,zt,Qt,Re,{buttonRef:2,collapsed:0,isStored:3})}}function Kt(e,t){const n=new Gt({target:e,props:{collapsed:t.collapsed,buttonRef:t.buttonRef,isStored:t.isStored}});t.buttonRef.addEventListener("click",()=>{t.buttonRef.classList.contains("collapsed")?t.collapsed=!1:t.collapsed=!0,n.$set(t),sessionStorage.setItem(t.sessionName,t.collapsed.toString())})}function vt(e){let t,n;return{c(){t=Ke("title"),n=B(e[2])},m(l,o){L(l,t,o),c(t,n)},p(l,o){o&4&&re(n,l[2])},d(l){l&&C(t)}}}function Xt(e){let t,n,l=e[2]&&vt(e);return{c(){t=Ke("svg"),l&&l.c(),n=Ke("use"),ut(n,"xlink:href",e[1]),u(t,"role","img"),u(t,"class",e[0])},m(o,s){L(o,t,s),l&&l.m(t,null),c(t,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=vt(o),l.c(),l.m(t,n)):l&&(l.d(1),l=null),s&2&&ut(n,"xlink:href",o[1]),s&1&&u(t,"class",o[0])},i:z,o:z,d(o){o&&C(t),l&&l.d()}}}function Yt(e,t,n){let{class:l}=t,{href:o}=t,{title:s}=t;return e.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class We extends Me{constructor(t){super(),Ie(this,t,Yt,Xt,Re,{class:0,href:1,title:2})}}function kt(e,t,n){const l=e.slice();return l[17]=t[n],l}function St(e,t,n){const l=e.slice();return l[20]=t[n],l}function Rt(e){let t,n,l,o,s,i,r,a,d,m,p,_,y,h,I,E,v,S,M,b,A,N,R,P,J,V,ne,ee,G,K,ue,Q,w,te,Se,W=ce(e[5]),q=[];for(let g=0;g<W.length;g+=1)q[g]=Tt(St(e,W,g));function fe(g,O){return g[4].length>0?xt:Zt}let de=fe(e),F=de(e);return K=new We({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){t=f("div"),n=k(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=k(),r=f("div"),a=f("form"),d=f("input"),m=k(),p=f("input"),_=k(),y=f("input"),h=k(),I=f("input"),E=k(),v=f("input"),S=k(),M=f("div");for(let g=0;g<q.length;g+=1)q[g].c();b=k(),A=f("div"),N=f("select"),F.c(),P=k(),J=f("div"),V=f("input"),ne=k(),ee=f("div"),G=f("button"),Ve(K.$$.fragment),ue=k(),Q=f("span"),Q.textContent=`${window.trans("Search")}`,u(t,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(d,"type","hidden"),u(d,"name","__mode"),d.value="search_replace",u(p,"type","hidden"),u(p,"name","blog_id"),p.value=e[2],u(y,"type","hidden"),u(y,"name","_type"),u(I,"type","hidden"),u(I,"name","do_search"),I.value="1",u(v,"type","hidden"),u(v,"name","magic_token"),v.value=e[3],u(M,"class","search-type"),u(N,"class","custom-select form-control form-select"),u(N,"name","content_type_id"),N.disabled=R=e[1]!=="content_data"||e[4].length===0,dt(N,"disabled",e[1]!=="content_data"),u(A,"class","search-content-type"),u(V,"type","text"),u(V,"placeholder",window.trans("Select target and search text...")),u(V,"name","search"),u(J,"class","search-text-box"),u(G,"type","submit"),u(G,"class","btn btn-primary"),u(ee,"class","submit-button"),u(a,"class","search-form"),u(a,"method","post"),u(a,"action",window.ScriptURI),u(r,"class","modal-body"),u(l,"class","modal search-button-modal")},m(g,O){L(g,t,O),L(g,n,O),L(g,l,O),c(l,o),c(o,s),c(l,i),c(l,r),c(r,a),c(a,d),c(a,m),c(a,p),c(a,_),c(a,y),Y(y,e[1]),c(a,h),c(a,I),c(a,E),c(a,v),c(a,S),c(a,M);for(let U=0;U<q.length;U+=1)q[U]&&q[U].m(M,null);c(a,b),c(a,A),c(A,N),F.m(N,null),c(a,P),c(a,J),c(J,V),e[15](V),c(a,ne),c(a,ee),c(ee,G),Ee(K,G,null),c(G,ue),c(G,Q),e[16](l),w=!0,te||(Se=[j(t,"click",e[8]),be(ke.call(null,t,"body")),j(s,"click",e[8]),j(y,"input",e[12]),be(ke.call(null,l,"body"))],te=!0)},p(g,O){if((!w||O&4)&&(p.value=g[2]),O&2&&Y(y,g[1]),(!w||O&8)&&(v.value=g[3]),O&34){W=ce(g[5]);let U;for(U=0;U<W.length;U+=1){const le=St(g,W,U);q[U]?q[U].p(le,O):(q[U]=Tt(le),q[U].c(),q[U].m(M,null))}for(;U<q.length;U+=1)q[U].d(1);q.length=W.length}de===(de=fe(g))&&F?F.p(g,O):(F.d(1),F=de(g),F&&(F.c(),F.m(N,null))),(!w||O&18&&R!==(R=g[1]!=="content_data"||g[4].length===0))&&(N.disabled=R),(!w||O&2)&&dt(N,"disabled",g[1]!=="content_data")},i(g){w||(D(K.$$.fragment,g),w=!0)},o(g){Z(K.$$.fragment,g),w=!1},d(g){g&&(C(t),C(n),C(l)),qe(q,g),F.d(),e[15](null),Ne(K),e[16](null),te=!1,oe(Se)}}}function Tt(e){let t,n,l,o=!1,s,i,r=e[20].label+"",a,d,m,p,_;return m=Ut(e[14][0]),{c(){t=f("label"),n=f("input"),i=k(),a=B(r),d=k(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=e[20].key,Y(n,n.__value),u(n,"id",s=e[20].key),m.p(n)},m(y,h){L(y,t,h),c(t,n),n.checked=n.__value===e[1],c(t,i),c(t,a),c(t,d),p||(_=j(n,"change",e[13]),p=!0)},p(y,h){h&32&&l!==(l=y[20].key)&&(n.__value=l,Y(n,n.__value),o=!0),h&32&&s!==(s=y[20].key)&&u(n,"id",s),(o||h&34)&&(n.checked=n.__value===y[1]),h&32&&r!==(r=y[20].label+"")&&re(a,r)},d(y){y&&C(t),m.r(),p=!1,_()}}}function Zt(e){let t;return{c(){t=f("option"),t.textContent=`${window.trans("No Content Type could be found.")}`,t.__value="",Y(t,t.__value)},m(n,l){L(n,t,l)},p:z,d(n){n&&C(t)}}}function xt(e){let t,n=ce(e[4]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ct(kt(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=Te()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);L(o,t,s)},p(o,s){if(s&16){n=ce(o[4]);let i;for(i=0;i<n.length;i+=1){const r=kt(o,n,i);l[i]?l[i].p(r,s):(l[i]=Ct(r),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&C(t),qe(l,o)}}}function Ct(e){let t,n=e[17].name+"",l,o;return{c(){t=f("option"),l=B(n),t.__value=o=e[17].id,Y(t,t.__value)},m(s,i){L(s,t,i),c(t,l)},p(s,i){i&16&&n!==(n=s[17].name+"")&&re(l,n),i&16&&o!==(o=s[17].id)&&(t.__value=o,Y(t,t.__value))},d(s){s&&C(t)}}}function $t(e){let t,n,l,o,s,i=e[0]&&Rt(e);return{c(){t=k(),i&&i.c(),n=Te()},m(r,a){L(r,t,a),i&&i.m(r,a),L(r,n,a),l=!0,o||(s=j(document.body,"click",e[9]),o=!0)},p(r,[a]){r[0]?i?(i.p(r,a),a&1&&D(i,1)):(i=Rt(r),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(De(),Z(i,1,1,()=>{i=null}),Je())},i(r){l||(D(i),l=!0)},o(r){Z(i),l=!1},d(r){r&&(C(t),C(n)),i&&i.d(r),o=!1,s()}}}function en(e,t,n){let{blogId:l}=t,{magicToken:o}=t,{contentTypes:s=[]}=t,{open:i=!1}=t,{buttonRef:r}=t,{anchorRef:a}=t,{searchTabs:d}=t,{objectType:m}=t;const p=()=>{n(0,i=!1)};let _=null;const y=b=>{const A=b.target;i&&xe([r,_],A)&&p()};let h=null;Xe(async()=>{m&&d.find(b=>b.key===m)||n(1,m=d[0].key)});const I=[[]];function E(){m=this.value,n(1,m)}function v(){m=this.__value,n(1,m)}function S(b){ye[b?"unshift":"push"](()=>{h=b,n(6,h)})}function M(b){ye[b?"unshift":"push"](()=>{_=b,n(7,_)})}return e.$$set=b=>{"blogId"in b&&n(2,l=b.blogId),"magicToken"in b&&n(3,o=b.magicToken),"contentTypes"in b&&n(4,s=b.contentTypes),"open"in b&&n(0,i=b.open),"buttonRef"in b&&n(10,r=b.buttonRef),"anchorRef"in b&&n(11,a=b.anchorRef),"searchTabs"in b&&n(5,d=b.searchTabs),"objectType"in b&&n(1,m=b.objectType)},e.$$.update=()=>{e.$$.dirty&2049&&a&&(i?a.classList.add("open"):a.classList.remove("open")),e.$$.dirty&65&&i&&h&&h.focus()},[i,m,l,o,s,d,h,_,p,y,r,a,E,v,I,S,M]}class tn extends Me{constructor(t){super(),Ie(this,t,en,$t,Re,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function nn(e,t){var n;let l=[];if(e.dataset.searchTabsJson){const s=JSON.parse(e.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new tn({target:e,props:{searchTabs:l,objectType:(n=e.dataset.objectType)!==null&&n!==void 0?n:"",...t}});t.anchorRef.addEventListener("click",s=>{s.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,o.$set(t)})}const ln=async e=>{const t={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(e.items),limit:e.limit,magic_token:e.magicToken,page:e.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:t,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Lt(e,t,n){const l=e.slice();return l[30]=t[n],l}function Et(e){let t,n,l,o,s,i,r,a,d,m=window.trans("[_1]Site",e[2].toString())+"",p,_,y,h,I,E,v,S,M,b,A,N,R,P,J,V,ne,ee,G,K,ue,Q,w,te,Se,W,q,fe,de,F,g,O,U,le,$e,pe,ie,et,Ue,me,tt,se,nt,he,je,lt,Oe,it,Pe,Fe,Be,X,x,$,Qe,ot;me=new We({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const st=[sn,on],ae=[];function at(T,H){return T[7]?0:1}return X=at(e),x=ae[X]=st[X](e),{c(){t=f("div"),n=k(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),r=f("div"),a=f("span"),d=B("("),p=B(m),_=B(")"),y=k(),h=f("p"),h.textContent=`${window.trans("Site List")}`,I=k(),E=f("div"),v=f("div"),S=f("button"),M=B("<<"),A=k(),N=f("button"),R=B("<"),J=k(),V=f("span"),ne=f("span"),ee=B(e[3]),G=B("/"),K=B(e[4]),ue=k(),Q=f("button"),w=B(">"),Se=k(),W=f("button"),q=B(">>"),de=k(),F=f("div"),g=f("select"),O=f("option"),O.textContent=`${window.trans("Parent Sites")}`,U=f("option"),U.textContent=`${window.trans("Parent and child sites")}`,le=f("option"),le.textContent=`${window.trans("Only child sites")}`,$e=k(),pe=f("div"),ie=f("input"),et=k(),Ue=f("button"),Ve(me.$$.fragment),tt=k(),se=f("button"),se.innerHTML='<span aria-hidden="true">\xD7</span>',nt=k(),he=f("div"),je=f("span"),je.textContent=`${window.trans("Site Name")}`,lt=k(),Oe=f("span"),Oe.textContent=`${window.trans("Parent Site")}`,it=k(),Pe=f("div"),Fe=f("table"),Be=f("tbody"),x.c(),u(t,"class","site-list-button-modal-overlay"),u(r,"class","site-list-title"),u(S,"type","button"),S.disabled=b=e[3]<=1,u(N,"type","button"),N.disabled=P=e[3]<=1,u(ne,"class","current"),u(V,"class","page-num"),u(Q,"type","button"),Q.disabled=te=e[3]===e[4],u(W,"type","button"),W.disabled=fe=e[3]===e[4],u(v,"class","prev-next"),O.__value="parent_sites",Y(O,O.__value),U.__value="parent_and_child_sites",Y(U,U.__value),le.__value="child_sites_only",Y(le,le.__value),u(g,"class","custom-select form-control form-select"),e[5]===void 0&&Ae(()=>e[24].call(g)),u(F,"class","site-type-filter"),u(ie,"type","text"),u(ie,"placeholder",window.trans("Filter by site name")),u(pe,"class","site-name-filter"),u(se,"type","button"),u(se,"class","close"),u(se,"data-dismiss","modal"),u(se,"aria-label","Close"),u(E,"class","site-list-actions"),u(i,"class","site-list-header"),u(je,"class","table-header-col site-list-header-name"),u(Oe,"class","table-header-col site-list-header-parent"),u(he,"class","site-list-table-header"),u(Pe,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(T,H){L(T,t,H),L(T,n,H),L(T,l,H),c(l,o),c(o,s),c(s,i),c(i,r),c(r,a),c(a,d),c(a,p),c(a,_),c(r,y),c(r,h),c(i,I),c(i,E),c(E,v),c(v,S),c(S,M),c(v,A),c(v,N),c(N,R),c(v,J),c(v,V),c(V,ne),c(ne,ee),c(V,G),c(V,K),c(v,ue),c(v,Q),c(Q,w),c(v,Se),c(v,W),c(W,q),c(E,de),c(E,F),c(F,g),c(g,O),c(g,U),c(g,le),ft(g,e[5],!0),c(E,$e),c(E,pe),c(pe,ie),Y(ie,e[6]),c(pe,et),c(pe,Ue),Ee(me,Ue,null),c(E,tt),c(E,se),c(s,nt),c(s,he),c(he,je),c(he,lt),c(he,Oe),c(s,it),c(s,Pe),c(Pe,Fe),c(Fe,Be),ae[X].m(Be,null),e[27](l),$=!0,Qe||(ot=[j(t,"click",e[9]),be(ke.call(null,t,"body")),j(S,"click",e[13]),j(S,"keydown",e[20]),j(N,"click",e[12]),j(N,"keydown",e[21]),j(Q,"click",e[10]),j(Q,"keydown",e[22]),j(W,"click",e[11]),j(W,"keydown",e[23]),j(g,"change",e[24]),j(g,"change",e[14]),j(ie,"input",e[25]),j(ie,"keydown",e[26]),j(Ue,"click",e[14]),j(se,"click",e[9]),be(ke.call(null,l,"body"))],Qe=!0)},p(T,H){(!$||H[0]&4)&&m!==(m=window.trans("[_1]Site",T[2].toString())+"")&&re(p,m),(!$||H[0]&8&&b!==(b=T[3]<=1))&&(S.disabled=b),(!$||H[0]&8&&P!==(P=T[3]<=1))&&(N.disabled=P),(!$||H[0]&8)&&re(ee,T[3]),(!$||H[0]&16)&&re(K,T[4]),(!$||H[0]&24&&te!==(te=T[3]===T[4]))&&(Q.disabled=te),(!$||H[0]&24&&fe!==(fe=T[3]===T[4]))&&(W.disabled=fe),H[0]&32&&ft(g,T[5]),H[0]&64&&ie.value!==T[6]&&Y(ie,T[6]);let ze=X;X=at(T),X===ze?ae[X].p(T,H):(De(),Z(ae[ze],1,1,()=>{ae[ze]=null}),Je(),x=ae[X],x?x.p(T,H):(x=ae[X]=st[X](T),x.c()),D(x,1),x.m(Be,null))},i(T){$||(D(me.$$.fragment,T),D(x),$=!0)},o(T){Z(me.$$.fragment,T),Z(x),$=!1},d(T){T&&(C(t),C(n),C(l)),Ne(me),ae[X].d(),e[27](null),Qe=!1,oe(ot)}}}function on(e){let t,n,l=ce(e[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Nt(Lt(e,l,i));const s=i=>Z(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=Te()},m(i,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,r);L(i,t,r),n=!0},p(i,r){if(r[0]&2){l=ce(i[1]);let a;for(a=0;a<l.length;a+=1){const d=Lt(i,l,a);o[a]?(o[a].p(d,r),D(o[a],1)):(o[a]=Nt(d),o[a].c(),D(o[a],1),o[a].m(t.parentNode,t))}for(De(),a=l.length;a<o.length;a+=1)s(a);Je()}},i(i){if(!n){for(let r=0;r<l.length;r+=1)D(o[r]);n=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Z(o[r]);n=!1},d(i){i&&C(t),qe(o,i)}}}function sn(e){let t,n;return{c(){t=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){L(l,t,o),c(t,n)},p:z,i:z,o:z,d(l){l&&C(t)}}}function Nt(e){let t,n,l,o,s,i=e[30].name+"",r,a,d,m,p,_,y,h,I=e[30].parentSiteName+"",E,v;return o=new We({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${e[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),p=new We({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){t=f("tr"),n=f("td"),l=f("a"),Ve(o.$$.fragment),s=k(),r=B(i),d=k(),m=f("a"),Ve(p.$$.fragment),y=k(),h=f("td"),E=k(),u(l,"href",a=`${window.ScriptURI}?__mode=dashboard&blog_id=${e[30].id}`),u(l,"class","dashboard-link"),u(m,"href",_=e[30].siteUrl),u(m,"class","site-link"),u(m,"target","_blank")},m(S,M){L(S,t,M),c(t,n),c(n,l),Ee(o,l,null),c(l,s),c(l,r),c(n,d),c(n,m),Ee(p,m,null),c(t,y),c(t,h),h.innerHTML=I,c(t,E),v=!0},p(S,M){const b={};M[0]&2&&(b.href=`${window.StaticURI}images/admin2025/sprite.svg#${S[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),o.$set(b),(!v||M[0]&2)&&i!==(i=S[30].name+"")&&re(r,i),(!v||M[0]&2&&a!==(a=`${window.ScriptURI}?__mode=dashboard&blog_id=${S[30].id}`))&&u(l,"href",a),(!v||M[0]&2&&_!==(_=S[30].siteUrl))&&u(m,"href",_),(!v||M[0]&2)&&I!==(I=S[30].parentSiteName+"")&&(h.innerHTML=I)},i(S){v||(D(o.$$.fragment,S),D(p.$$.fragment,S),v=!0)},o(S){Z(o.$$.fragment,S),Z(p.$$.fragment,S),v=!1},d(S){S&&C(t),Ne(o),Ne(p)}}}function an(e){let t,n,l,o,s,i=e[0]&&Et(e);return{c(){t=k(),i&&i.c(),n=Te()},m(r,a){L(r,t,a),i&&i.m(r,a),L(r,n,a),l=!0,o||(s=j(document.body,"click",e[15]),o=!0)},p(r,a){r[0]?i?(i.p(r,a),a[0]&1&&D(i,1)):(i=Et(r),i.c(),D(i,1),i.m(n.parentNode,n)):i&&(De(),Z(i,1,1,()=>{i=null}),Je())},i(r){l||(D(i),l=!0)},o(r){Z(i),l=!1},d(r){r&&(C(t),C(n)),i&&i.d(r),o=!1,s()}}}function rn(e,t,n){let{magicToken:l}=t,{limit:o=50}=t,{open:s=!1}=t,{buttonRef:i}=t,{anchorRef:r}=t;const a=()=>{n(0,s=!1)};let d=[],m=0,p=1,_=1,y="parent_sites",h="",I=[],E=!1,v=null;const S=()=>{n(3,p++,p),R()},M=()=>{n(3,p=_),R()},b=()=>{n(3,p--,p),R()},A=()=>{n(3,p=1),R()},N=()=>{I=[],y==="child_sites_only"?I=[{type:"parent_website",args:{value:""}}]:y==="parent_sites"&&(I=[{type:"parent_website",args:{value:"1"}}]),n(6,h=h.trim()),h!==""&&I.push({type:"name",args:{string:h,option:"contains"}}),n(3,p=1),R()},R=async()=>{n(7,E=!0);const w=await ln({magicToken:l,items:I,page:p,limit:o});n(2,m=w.count),n(4,_=w.pageMax),n(3,p=_!==0?w.page:0),n(1,d=w.sites),n(7,E=!1)},P=w=>{const te=w.target;s&&xe([i,v],te)&&a()};Xe(async()=>{N()});const J=w=>w.key==="Enter"&&A(),V=w=>w.key==="Enter"&&b(),ne=w=>w.key==="Enter"&&S(),ee=w=>w.key==="Enter"&&M();function G(){y=Ot(this),n(5,y)}function K(){h=this.value,n(6,h)}const ue=w=>w.key==="Enter"&&N();function Q(w){ye[w?"unshift":"push"](()=>{v=w,n(8,v)})}return e.$$set=w=>{"magicToken"in w&&n(16,l=w.magicToken),"limit"in w&&n(17,o=w.limit),"open"in w&&n(0,s=w.open),"buttonRef"in w&&n(18,i=w.buttonRef),"anchorRef"in w&&n(19,r=w.anchorRef)},e.$$.update=()=>{e.$$.dirty[0]&524289&&r&&(s?r.classList.add("open"):r.classList.remove("open"))},[s,d,m,p,_,y,h,E,v,a,S,M,b,A,N,P,l,o,i,r,J,V,ne,ee,G,K,ue,Q]}class cn extends Me{constructor(t){super(),Ie(this,t,rn,an,Re,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function un(e,t){const n=new cn({target:e,props:t});t.anchorRef.addEventListener("click",l=>{l.preventDefault(),t.anchorRef.classList.contains("open")?t.open=!1:t.open=!0,n.$set(t)})}document.addEventListener("DOMContentLoaded",()=>{var e,t;const n=document.querySelector('[data-is="primary-navigation-toggle"]');if(n!==null){const m="collapsed",p=sessionStorage.getItem(m);Kt(n,{collapsed:p==="true",buttonRef:n.getElementsByTagName("button")[0],sessionName:m,isStored:p!==null})}const l=document.querySelector('[data-script="admin-header"]');if(l===null){console.error("data-script='admin-header' is not set");return}const o=(e=l.getAttribute("data-blog-id"))!==null&&e!==void 0?e:"",s=(t=l.getAttribute("data-magic-token"))!==null&&t!==void 0?t:"";if(s===""){console.error("data-magic-token is not set");return}const i="50",r=document.querySelector('[data-is="site-list-button"]');r!==null&&un(r,{magicToken:s,limit:Number.parseInt(i),open:!1,buttonRef:r,anchorRef:r});const a=document.querySelector('[data-is="create-button"]'),d=document.querySelector('[data-is="search-button"]');(a!==null||d!==null)&&It({blogId:o,magicToken:s}).then(m=>{if(a!==null&&Ft({target:a,props:{blog_id:o,contentTypes:m.contentTypes.filter(p=>p.can_create===1),open:!1,buttonRef:a,anchorRef:a}}),d!==null){const p=d.getElementsByTagName("a")[0];nn(d,{blogId:o,magicToken:s,contentTypes:m.contentTypes.filter(_=>_.can_search===1),open:!1,buttonRef:d,anchorRef:p})}})});
