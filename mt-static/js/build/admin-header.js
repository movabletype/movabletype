class pt{constructor({cache:e}){this.cache=e}generateCacheKey({prefix:e,params:t}){const n=Object.keys(t).sort().reduce((s,o)=>(s[o]=t[o],s),{});return`${e}_${JSON.stringify(n)}`}async fetchWithCache({key:e,fetcher:t,ttl:n=1e3*60,noCache:s=!1}){return s?t():this.cache.get(e)||t().then(l=>(this.cache.set(e,l,n),l)).catch(l=>(console.log("Failed to fetch data:",l),l))}clearCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear()}}const be=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,gt=new Set,xe=typeof process=="object"&&process?process:{},mt=(i,e,t,n)=>{typeof xe.emitWarning=="function"?xe.emitWarning(i,e,t,n):console.error(`[${t}] ${e}: ${i}`)};let Pe=globalThis.AbortController,bt=globalThis.AbortSignal;if(typeof Pe>"u"){bt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Pe=class{constructor(){e()}signal=new bt;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let i=xe.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{i&&(i=!1,mt("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const Vt=i=>!gt.has(i),ae=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),wt=i=>ae(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Ge:null:null;class Ge extends Array{constructor(e){super(e),this.fill(0)}}class Re{heap;length;static#a=!1;static create(e){const t=wt(e);if(!t)return[];Re.#a=!0;const n=new Re(e,t);return Re.#a=!1,n}constructor(e,t){if(!Re.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class lt{#a;#h;#p;#g;#L;#F;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#i;#n;#e;#c;#u;#r;#l;#b;#o;#w;#y;#d;#v;#E;#f;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#d,sizes:e.#w,keyMap:e.#i,keyList:e.#n,valList:e.#e,next:e.#c,prev:e.#u,get head(){return e.#r},get tail(){return e.#l},free:e.#b,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,n,s,o)=>e.#I(t,n,s,o),moveToTail:t=>e.#O(t),indexes:t=>e.#S(t),rindexes:t=>e.#k(t),isStale:t=>e.#_(t)}}get max(){return this.#a}get maxSize(){return this.#h}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#L}get memoMethod(){return this.#F}get dispose(){return this.#p}get disposeAfter(){return this.#g}constructor(e){const{max:t=0,ttl:n,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:l,updateAgeOnHas:a,allowStale:r,dispose:h,disposeAfter:b,noDisposeOnSet:u,noUpdateTTL:g,maxSize:d=0,maxEntrySize:w=0,sizeCalculation:v,fetchMethod:T,memoMethod:p,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:C,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:O,ignoreFetchAbort:A}=e;if(t!==0&&!ae(t))throw new TypeError("max option must be a nonnegative integer");const E=t?wt(t):Array;if(!E)throw new Error("invalid max value: "+t);if(this.#a=t,this.#h=d,this.maxEntrySize=w||this.#h,this.sizeCalculation=v,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(p!==void 0&&typeof p!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#F=p,T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#L=T,this.#E=!!T,this.#i=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#c=new E(t),this.#u=new E(t),this.#r=0,this.#l=0,this.#b=Re.create(t),this.#s=0,this.#m=0,typeof h=="function"&&(this.#p=h),typeof b=="function"?(this.#g=b,this.#o=[]):(this.#g=void 0,this.#o=void 0),this.#v=!!this.#p,this.#f=!!this.#g,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!m,this.allowStaleOnFetchAbort=!!O,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(this.#h!==0&&!ae(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!ae(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#G()}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!C,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!a,this.ttlResolution=ae(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!ae(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#a===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#h){const N="LRU_CACHE_UNBOUNDED";Vt(N)&&(gt.add(N),mt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,lt))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#M(){const e=new Ge(this.#a),t=new Ge(this.#a);this.#d=e,this.#y=t,this.#U=(o,l,a=be.now())=>{if(t[o]=l!==0?a:0,e[o]=l,l!==0&&this.ttlAutopurge){const r=setTimeout(()=>{this.#_(o)&&this.#T(this.#n[o],"expire")},l+1);r.unref&&r.unref()}},this.#C=o=>{t[o]=e[o]!==0?be.now():0},this.#R=(o,l)=>{if(e[l]){const a=e[l],r=t[l];if(!a||!r)return;o.ttl=a,o.start=r,o.now=n||s();const h=o.now-r;o.remainingTTL=a-h}};let n=0;const s=()=>{const o=be.now();if(this.ttlResolution>0){n=o;const l=setTimeout(()=>n=0,this.ttlResolution);l.unref&&l.unref()}return o};this.getRemainingTTL=o=>{const l=this.#i.get(o);if(l===void 0)return 0;const a=e[l],r=t[l];if(!a||!r)return 1/0;const h=(n||s())-r;return a-h},this.#_=o=>{const l=t[o],a=e[o];return!!a&&!!l&&(n||s())-l>a}}#C=()=>{};#R=()=>{};#U=()=>{};#_=()=>!1;#G(){const e=new Ge(this.#a);this.#m=0,this.#w=e,this.#A=t=>{this.#m-=e[t],e[t]=0},this.#W=(t,n,s,o)=>{if(this.#t(n))return 0;if(!ae(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(n,t),!ae(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#z=(t,n,s)=>{if(e[t]=n,this.#h){const o=this.#h-e[t];for(;this.#m>o;)this.#N(!0)}this.#m+=e[t],s&&(s.entrySize=n,s.totalCalculatedSize=this.#m)}}#A=e=>{};#z=(e,t,n)=>{};#W=(e,t,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#l;!(!this.#D(t)||((e||!this.#_(t))&&(yield t),t===this.#r));)t=this.#u[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#r;!(!this.#D(t)||((e||!this.#_(t))&&(yield t),t===this.#l));)t=this.#c[t]}#D(e){return e!==void 0&&this.#i.get(this.#n[e])===e}*entries(){for(const e of this.#S())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(const e of this.#k())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(const e of this.#S()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(const e of this.#k()){const t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(const e of this.#S())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#k())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const n of this.#S()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],t)}}forEach(e,t=this){for(const n of this.#S()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[n],this)}}rforEach(e,t=this){for(const n of this.#k()){const s=this.#e[n],o=this.#t(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(t,o,this.#n[n],this)}}purgeStale(){let e=!1;for(const t of this.#k({allowStale:!0}))this.#_(t)&&(this.#T(this.#n[t],"expire"),e=!0);return e}info(e){const t=this.#i.get(e);if(t===void 0)return;const n=this.#e[t],s=this.#t(n)?n.__staleWhileFetching:n;if(s===void 0)return;const o={value:s};if(this.#d&&this.#y){const l=this.#d[t],a=this.#y[t];if(l&&a){const r=l-(be.now()-a);o.ttl=r,o.start=Date.now()}}return this.#w&&(o.size=this.#w[t]),o}dump(){const e=[];for(const t of this.#S({allowStale:!0})){const n=this.#n[t],s=this.#e[t],o=this.#t(s)?s.__staleWhileFetching:s;if(o===void 0||n===void 0)continue;const l={value:o};if(this.#d&&this.#y){l.ttl=this.#d[t];const a=be.now()-this.#y[t];l.start=Math.floor(Date.now()-a)}this.#w&&(l.size=this.#w[t]),e.unshift([n,l])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const s=Date.now()-n.start;n.start=be.now()-s}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:r}=n;let{noUpdateTTL:h=this.noUpdateTTL}=n;const b=this.#W(e,t,n.size||0,a);if(this.maxEntrySize&&b>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.#T(e,"set"),this;let u=this.#s===0?void 0:this.#i.get(e);if(u===void 0)u=this.#s===0?this.#l:this.#b.length!==0?this.#b.pop():this.#s===this.#a?this.#N(!1):this.#s,this.#n[u]=e,this.#e[u]=t,this.#i.set(e,u),this.#c[this.#l]=u,this.#u[u]=this.#l,this.#l=u,this.#s++,this.#z(u,b,r),r&&(r.set="add"),h=!1;else{this.#O(u);const g=this.#e[u];if(t!==g){if(this.#E&&this.#t(g)){g.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:d}=g;d!==void 0&&!l&&(this.#v&&this.#p?.(d,e,"set"),this.#f&&this.#o?.push([d,e,"set"]))}else l||(this.#v&&this.#p?.(g,e,"set"),this.#f&&this.#o?.push([g,e,"set"]));if(this.#A(u),this.#z(u,b,r),this.#e[u]=t,r){r.set="replace";const d=g&&this.#t(g)?g.__staleWhileFetching:g;d!==void 0&&(r.oldValue=d)}}else r&&(r.set="update")}if(s!==0&&!this.#d&&this.#M(),this.#d&&(h||this.#U(u,s,o),r&&this.#R(r,u)),!l&&this.#f&&this.#o){const g=this.#o;let d;for(;d=g?.shift();)this.#g?.(...d)}return this}pop(){try{for(;this.#s;){const e=this.#e[this.#r];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#o){const e=this.#o;let t;for(;t=e?.shift();)this.#g?.(...t)}}}#N(e){const t=this.#r,n=this.#n[t],s=this.#e[t];return this.#E&&this.#t(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(s,n,"evict"),this.#f&&this.#o?.push([s,n,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#b.push(t)),this.#s===1?(this.#r=this.#l=0,this.#b.length=0):this.#r=this.#c[t],this.#i.delete(n),this.#s--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=t,o=this.#i.get(e);if(o!==void 0){const l=this.#e[o];if(this.#t(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#_(o))s&&(s.has="stale",this.#R(s,o));else return n&&this.#C(o),s&&(s.has="hit",this.#R(s,o)),!0}else s&&(s.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,s=this.#i.get(e);if(s===void 0||!n&&this.#_(s))return;const o=this.#e[s];return this.#t(o)?o.__staleWhileFetching:o}#I(e,t,n,s){const o=t===void 0?void 0:this.#e[t];if(this.#t(o))return o;const l=new Pe,{signal:a}=n;a?.addEventListener("abort",()=>l.abort(a.reason),{signal:l.signal});const r={signal:l.signal,options:n,context:s},h=(v,T=!1)=>{const{aborted:p}=l.signal,y=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(p&&!T?(n.status.fetchAborted=!0,n.status.fetchError=l.signal.reason,y&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),p&&!y&&!T)return u(l.signal.reason);const C=d;return this.#e[t]===d&&(v===void 0?C.__staleWhileFetching?this.#e[t]=C.__staleWhileFetching:this.#T(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,r.options))),v},b=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),u(v)),u=v=>{const{aborted:T}=l.signal,p=T&&n.allowStaleOnFetchAbort,y=p||n.allowStaleOnFetchRejection,C=y||n.noDeleteOnFetchRejection,m=d;if(this.#e[t]===d&&(!C||m.__staleWhileFetching===void 0?this.#T(e,"fetch"):p||(this.#e[t]=m.__staleWhileFetching)),y)return n.status&&m.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),m.__staleWhileFetching;if(m.__returned===m)throw v},g=(v,T)=>{const p=this.#L?.(e,o,r);p&&p instanceof Promise&&p.then(y=>v(y===void 0?void 0:y),T),l.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=y=>h(y,!0)))})};n.status&&(n.status.fetchDispatched=!0);const d=new Promise(g).then(h,b),w=Object.assign(d,{__abortController:l,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,w,{...r.options,status:void 0}),t=this.#i.get(e)):this.#e[t]=w,w}#t(e){if(!this.#E)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Pe}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:b=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:v,forceRefresh:T=!1,status:p,signal:y}=t;if(!this.#E)return p&&(p.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:p});const C={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:l,noDisposeOnSet:a,size:r,sizeCalculation:h,noUpdateTTL:b,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:w,ignoreFetchAbort:d,status:p,signal:y};let m=this.#i.get(e);if(m===void 0){p&&(p.fetch="miss");const O=this.#I(e,m,C,v);return O.__returned=O}else{const O=this.#e[m];if(this.#t(O)){const j=n&&O.__staleWhileFetching!==void 0;return p&&(p.fetch="inflight",j&&(p.returnedStale=!0)),j?O.__staleWhileFetching:O.__returned=O}const A=this.#_(m);if(!T&&!A)return p&&(p.fetch="hit"),this.#O(m),s&&this.#C(m),p&&this.#R(p,m),O;const E=this.#I(e,m,C,v),W=E.__staleWhileFetching!==void 0&&n;return p&&(p.fetch=A?"stale":"refresh",W&&A&&(p.returnedStale=!0)),W?E.__staleWhileFetching:E.__returned=E}}async forceFetch(e,t={}){const n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){const n=this.#F;if(!n)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...l}=t,a=this.get(e,l);if(!o&&a!==void 0)return a;const r=n(e,a,{options:l,context:s});return this.set(e,r,l),r}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:l}=t,a=this.#i.get(e);if(a!==void 0){const r=this.#e[a],h=this.#t(r);return l&&this.#R(l,a),this.#_(a)?(l&&(l.get="stale"),h?(l&&n&&r.__staleWhileFetching!==void 0&&(l.returnedStale=!0),n?r.__staleWhileFetching:void 0):(o||this.#T(e,"expire"),l&&n&&(l.returnedStale=!0),n?r:void 0)):(l&&(l.get="hit"),h?r.__staleWhileFetching:(this.#O(a),s&&this.#C(a),r))}else l&&(l.get="miss")}#j(e,t){this.#u[t]=e,this.#c[e]=t}#O(e){e!==this.#l&&(e===this.#r?this.#r=this.#c[e]:this.#j(this.#u[e],this.#c[e]),this.#j(this.#l,e),this.#l=e)}delete(e){return this.#T(e,"delete")}#T(e,t){let n=!1;if(this.#s!==0){const s=this.#i.get(e);if(s!==void 0)if(n=!0,this.#s===1)this.#P(t);else{this.#A(s);const o=this.#e[s];if(this.#t(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#p?.(o,e,t),this.#f&&this.#o?.push([o,e,t])),this.#i.delete(e),this.#n[s]=void 0,this.#e[s]=void 0,s===this.#l)this.#l=this.#u[s];else if(s===this.#r)this.#r=this.#c[s];else{const l=this.#u[s];this.#c[l]=this.#c[s];const a=this.#c[s];this.#u[a]=this.#u[s]}this.#s--,this.#b.push(s)}}if(this.#f&&this.#o?.length){const s=this.#o;let o;for(;o=s?.shift();)this.#g?.(...o)}return n}clear(){return this.#P("delete")}#P(e){for(const t of this.#k({allowStale:!0})){const n=this.#e[t];if(this.#t(n))n.__abortController.abort(new Error("deleted"));else{const s=this.#n[t];this.#v&&this.#p?.(n,s,e),this.#f&&this.#o?.push([n,s,e])}}if(this.#i.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#d&&this.#y&&(this.#d.fill(0),this.#y.fill(0)),this.#w&&this.#w.fill(0),this.#r=0,this.#l=0,this.#b.length=0,this.#m=0,this.#s=0,this.#f&&this.#o){const t=this.#o;let n;for(;n=t?.shift();)this.#g?.(...n)}}}class yt{constructor(e){var t;this.cache=new lt({ttl:(t=e?.ttl)!==null&&t!==void 0?t:1e3*60,ttlAutopurge:!0,allowStale:!1})}get(e){const t=this.cache.get(e);if(t){if(t.expiry>Date.now())return t.data;this.delete(e)}return null}set(e,t,n){const s=Date.now()+n;this.cache.set(e,{data:t,expiry:s},{ttl:n})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const Jt=new yt,vt=new pt({cache:Jt}),Kt=async i=>{const e={__mode:"content_types_for_search_action",blog_id:i.blogId,magic_token:i.magicToken};return await vt.fetchWithCache({key:vt.generateCacheKey({prefix:"content_types",params:e}),fetcher:async()=>{let t,n;try{n=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(t="possibly unloaded")}})}catch(s){t??(t=s)}return t||n.result.success!==1?{contentTypes:[]}:{contentTypes:n.result.content_types}}})};function J(){}function St(i){return i()}function kt(){return Object.create(null)}function le(i){i.forEach(St)}function $e(i){return typeof i=="function"}function Ce(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function Qt(i){return Object.keys(i).length===0}function we(i){return i&&$e(i.destroy)?i.destroy:J}function c(i,e){i.appendChild(e)}function z(i,e,t){i.insertBefore(e,t||null)}function F(i){i.parentNode&&i.parentNode.removeChild(i)}function He(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function _(i){return document.createElement(i)}function et(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function D(i){return document.createTextNode(i)}function R(){return D(" ")}function Ae(){return D("")}function M(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function f(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function Tt(i,e,t){i.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}function Xt(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function Yt(i){return Array.from(i.childNodes)}function ce(i,e){e=""+e,i.data!==e&&(i.data=e)}function Y(i,e){i.value=e??""}function Rt(i,e,t){for(let n=0;n<i.options.length;n+=1){const s=i.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function Zt(i){const e=i.querySelector(":checked");return e&&e.__value}function Et(i,e,t){i.classList.toggle(e,!!t)}let Oe;function Le(i){Oe=i}function xt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function tt(i){xt().$$.on_mount.push(i)}const ye=[],ve=[];let Se=[];const Ct=[],At=Promise.resolve();let nt=!1;function Ot(){nt||(nt=!0,At.then(Lt))}function $t(){return Ot(),At}function Be(i){Se.push(i)}const it=new Set;let ke=0;function Lt(){if(ke!==0)return;const i=Oe;do{try{for(;ke<ye.length;){const e=ye[ke];ke++,Le(e),en(e.$$)}}catch(e){throw ye.length=0,ke=0,e}for(Le(null),ye.length=0,ke=0;ve.length;)ve.pop()();for(let e=0;e<Se.length;e+=1){const t=Se[e];it.has(t)||(it.add(t),t())}Se.length=0}while(ye.length);for(;Ct.length;)Ct.pop()();nt=!1,it.clear(),Le(i)}function en(i){if(i.fragment!==null){i.update(),le(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Be)}}function tn(i){const e=[],t=[];Se.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Se=e}const qe=new Set;let _e;function Ve(){_e={r:0,c:[],p:_e}}function Je(){_e.r||le(_e.c),_e=_e.p}function H(i,e){i&&i.i&&(qe.delete(i),i.i(e))}function Z(i,e,t,n){if(i&&i.o){if(qe.has(i))return;qe.add(i),_e.c.push(()=>{qe.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function fe(i){return i?.length!==void 0?i:Array.from(i)}function Ke(i){i&&i.c()}function Fe(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),Be(()=>{const o=i.$$.on_mount.map(St).filter($e);i.$$.on_destroy?i.$$.on_destroy.push(...o):le(o),i.$$.on_mount=[]}),s.forEach(Be)}function ze(i,e){const t=i.$$;t.fragment!==null&&(tn(t.after_update),le(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function nn(i,e){i.$$.dirty[0]===-1&&(ye.push(i),Ot(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Ne(i,e,t,n,s,o,l=null,a=[-1]){const r=Oe;Le(i);const h=i.$$={fragment:null,ctx:[],props:o,update:J,not_equal:s,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:kt(),dirty:a,skip_bound:!1,root:e.target||r.$$.root};l&&l(h.root);let b=!1;if(h.ctx=t?t(i,e.props||{},(u,g,...d)=>{const w=d.length?d[0]:g;return h.ctx&&s(h.ctx[u],h.ctx[u]=w)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](w),b&&nn(i,u)),g}):[],h.update(),b=!0,le(h.before_update),h.fragment=n?n(h.ctx):!1,e.target){if(e.hydrate){const u=Yt(e.target);h.fragment&&h.fragment.l(u),u.forEach(F)}else h.fragment&&h.fragment.c();e.intro&&H(i.$$.fragment),Fe(i,e.target,e.anchor),Lt()}Le(r)}class Ie{$$=void 0;$$set=void 0;$destroy(){ze(this,1),this.$destroy=J}$on(e,t){if(!$e(t))return J;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sn);function Te(i,e="body"){let t;async function n(o){if(e=o,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await $t(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(i),i.hidden=!1}function s(){i.parentNode&&i.parentNode.removeChild(i)}return n(e),{update:n,destroy:s}}function st(i,e){return!i.some(t=>t&&t.contains(e))}function Ft(i,e,t){const n=i.slice();return n[10]=e[t],n}function zt(i){let e,t,n,s,o,l,a,r,h,b,u,g=window.trans("New [_1] creation",window.trans("Entry"))+"",d,w,v,T,p,y=window.trans("New [_1] creation",window.trans("Page"))+"",C,m,O,A,E=i[1].length>0&&Nt(i);return{c(){e=_("div"),t=_("div"),n=_("button"),n.innerHTML='<span aria-hidden="true">\xD7</span>',s=R(),o=_("div"),E&&E.c(),l=R(),a=_("p"),a.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,r=R(),h=_("ul"),b=_("li"),u=_("a"),d=D(g),v=R(),T=_("li"),p=_("a"),C=D(y),f(n,"type","button"),f(n,"class","close"),f(n,"data-dismiss","modal"),f(n,"aria-label","Close"),f(t,"class","modal-header"),f(a,"class","block-title"),f(u,"href",w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${i[2]}`),f(p,"href",m=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${i[2]}`),f(h,"class","create-button-list"),f(o,"class","modal-body"),f(e,"class","modal create-button-modal")},m(N,W){z(N,e,W),c(e,t),c(t,n),c(e,s),c(e,o),E&&E.m(o,null),c(o,l),c(o,a),c(o,r),c(o,h),c(h,b),c(b,u),c(u,d),c(h,v),c(h,T),c(T,p),c(p,C),i[9](e),O||(A=[M(n,"click",i[4]),we(Te.call(null,e,"body"))],O=!0)},p(N,W){N[1].length>0?E?E.p(N,W):(E=Nt(N),E.c(),E.m(o,l)):E&&(E.d(1),E=null),W&4&&w!==(w=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${N[2]}`)&&f(u,"href",w),W&4&&m!==(m=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${N[2]}`)&&f(p,"href",m)},d(N){N&&F(e),E&&E.d(),i[9](null),O=!1,le(A)}}}function Nt(i){let e,t,n,s=fe(i[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=It(Ft(i,s,l));return{c(){e=_("p"),e.textContent=`${window.trans("Content Data")}`,t=R(),n=_("ul");for(let l=0;l<o.length;l+=1)o[l].c();f(e,"class","block-title"),f(n,"class","create-button-list")},m(l,a){z(l,e,a),z(l,t,a),z(l,n,a);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,null)},p(l,a){if(a&6){s=fe(l[1]);let r;for(r=0;r<s.length;r+=1){const h=Ft(l,s,r);o[r]?o[r].p(h,a):(o[r]=It(h),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(l){l&&(F(e),F(t),F(n)),He(o,l)}}}function It(i){let e,t,n=window.trans("New [_1] creation",i[10].name)+"",s,o,l;return{c(){e=_("li"),t=_("a"),s=D(n),l=R(),f(t,"href",o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${i[10].id}&type=content_data_${i[10].id}&blog_id=${i[2]}`)},m(a,r){z(a,e,r),c(e,t),c(t,s),c(e,l)},p(a,r){r&2&&n!==(n=window.trans("New [_1] creation",a[10].name)+"")&&ce(s,n),r&6&&o!==(o=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${a[10].id}&type=content_data_${a[10].id}&blog_id=${a[2]}`)&&f(t,"href",o)},d(a){a&&F(e)}}}function ln(i){let e,t,n,s,o=i[0]&&zt(i);return{c(){e=R(),o&&o.c(),t=Ae()},m(l,a){z(l,e,a),o&&o.m(l,a),z(l,t,a),n||(s=M(document.body,"click",i[5]),n=!0)},p(l,[a]){l[0]?o?o.p(l,a):(o=zt(l),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:J,o:J,d(l){l&&(F(e),F(t)),o&&o.d(l),n=!1,s()}}}function on(i,e,t){let{contentTypes:n=[]}=e,{blog_id:s}=e,{open:o=!1}=e,{buttonRef:l=null}=e,{anchorRef:a=null}=e,{containerRef:r=null}=e,h=null;const b=()=>{t(0,o=!1)},u=d=>{if(r&&r.classList.contains("show"))return;const w=d.target;o&&st([l,h],w)&&b()};function g(d){ve[d?"unshift":"push"](()=>{h=d,t(3,h),t(7,a),t(0,o)})}return i.$$set=d=>{"contentTypes"in d&&t(1,n=d.contentTypes),"blog_id"in d&&t(2,s=d.blog_id),"open"in d&&t(0,o=d.open),"buttonRef"in d&&t(6,l=d.buttonRef),"anchorRef"in d&&t(7,a=d.anchorRef),"containerRef"in d&&t(8,r=d.containerRef)},i.$$.update=()=>{if(i.$$.dirty&137&&a){if(h){const d=a.getBoundingClientRect(),w=`calc(${d.bottom}px + 10px)`;t(3,h.style.top=w,h);const v=`calc(100vh - ${d.bottom}px - 10px - 20px)`;t(3,h.style.maxHeight=v,h)}o?a.classList.add("open"):a.classList.remove("open")}},[o,n,s,h,b,u,l,a,r,g]}class rn extends Ie{constructor(e){super(),Ne(this,e,on,ln,Ce,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const an=({target:i,props:e})=>{const t=new rn({target:i,props:e});i.addEventListener("click",n=>{n.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})};function cn(i){let e,t,n,s;return{c(){e=_("div"),f(e,"class","mt-primaryNavigation-overlay"),f(e,"style",t=`display: ${i[0]?"block":"none"}`)},m(o,l){z(o,e,l),n||(s=[we(Te.call(null,e,"body")),M(e,"mouseenter",i[1])],n=!0)},p(o,[l]){l&1&&t!==(t=`display: ${o[0]?"block":"none"}`)&&f(e,"style",t)},i:J,o:J,d(o){o&&F(e),n=!1,le(s)}}}function fn(i,e,t){let{buttonRef:n}=e,{collapsed:s=!1}=e,{isStored:o=!1}=e,l=!1;const a=(g,d)=>{const w=document.querySelector('[data-is="content-wrapper"]');d?w.classList.add(g):w.classList.remove(g)},r=()=>{a("collapsed",s)},h=()=>{a("mouseover",l)},b=()=>{var g;s&&(l=!0,h(),(g=document.querySelector('[data-is="primary-navigation"]'))===null||g===void 0||g.addEventListener("mouseleave",u,{once:!0}))},u=()=>{l=!1,h()};return tt(()=>{o||window.innerWidth<1e3&&t(0,s=!0),r()}),i.$$set=g=>{"buttonRef"in g&&t(2,n=g.buttonRef),"collapsed"in g&&t(0,s=g.collapsed),"isStored"in g&&t(3,o=g.isStored)},i.$$.update=()=>{i.$$.dirty&5&&(r(),l=!1,h(),n&&(s?(n.classList.remove("expanded"),n.classList.add("collapsed")):(n.classList.remove("collapsed"),n.classList.add("expanded"))))},[s,b,n,o]}class hn extends Ie{constructor(e){super(),Ne(this,e,fn,cn,Ce,{buttonRef:2,collapsed:0,isStored:3})}}function un(i,e){const t=new hn({target:i,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,t.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function Mt(i){let e,t;return{c(){e=et("title"),t=D(i[2])},m(n,s){z(n,e,s),c(e,t)},p(n,s){s&4&&ce(t,n[2])},d(n){n&&F(e)}}}function dn(i){let e,t,n=i[2]&&Mt(i);return{c(){e=et("svg"),n&&n.c(),t=et("use"),Tt(t,"xlink:href",i[1]),f(e,"role","img"),f(e,"class",i[0])},m(s,o){z(s,e,o),n&&n.m(e,null),c(e,t)},p(s,[o]){s[2]?n?n.p(s,o):(n=Mt(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),o&2&&Tt(t,"xlink:href",s[1]),o&1&&f(e,"class",s[0])},i:J,o:J,d(s){s&&F(e),n&&n.d()}}}function _n(i,e,t){let{class:n}=e,{href:s}=e,{title:o}=e;return i.$$set=l=>{"class"in l&&t(0,n=l.class),"href"in l&&t(1,s=l.href),"title"in l&&t(2,o=l.title)},[n,s,o]}class Qe extends Ie{constructor(e){super(),Ne(this,e,_n,dn,Ce,{class:0,href:1,title:2})}}function Ut(i,e,t){const n=i.slice();return n[17]=e[t],n}function Wt(i,e,t){const n=i.slice();return n[20]=e[t],n}function Dt(i){let e,t,n,s,o,l,a,r,h,b,u,g,d,w,v,T,p,y,C,m,O,A,E,N,W,j,ne,ee,K,Q,he,V,k,te,Ee,B=fe(i[5]),P=[];for(let S=0;S<B.length;S+=1)P[S]=jt(Wt(i,B,S));function ue(S,U){return S[4].length>0?gn:pn}let de=ue(i),q=de(i);return Q=new Qe({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=_("div"),t=R(),n=_("div"),s=_("div"),o=_("button"),o.innerHTML='<span aria-hidden="true">\xD7</span>',l=R(),a=_("div"),r=_("form"),h=_("input"),b=R(),u=_("input"),g=R(),d=_("input"),w=R(),v=_("input"),T=R(),p=_("input"),y=R(),C=_("div");for(let S=0;S<P.length;S+=1)P[S].c();m=R(),O=_("div"),A=_("select"),q.c(),N=R(),W=_("div"),j=_("input"),ne=R(),ee=_("div"),K=_("button"),Ke(Q.$$.fragment),he=R(),V=_("span"),V.textContent=`${window.trans("Search")}`,f(e,"class","search-button-modal-overlay"),f(o,"type","button"),f(o,"class","close"),f(o,"data-dismiss","modal"),f(o,"aria-label","Close"),f(s,"class","modal-header"),f(h,"type","hidden"),f(h,"name","__mode"),h.value="search_replace",f(u,"type","hidden"),f(u,"name","blog_id"),u.value=i[2],f(d,"type","hidden"),f(d,"name","_type"),f(v,"type","hidden"),f(v,"name","do_search"),v.value="1",f(p,"type","hidden"),f(p,"name","magic_token"),p.value=i[3],f(C,"class","search-type"),f(A,"class","custom-select form-control form-select"),f(A,"name","content_type_id"),A.disabled=E=i[1]!=="content_data"||i[4].length===0,Et(A,"disabled",i[1]!=="content_data"),f(O,"class","search-content-type"),f(j,"type","text"),f(j,"placeholder",window.trans("Select target and search text...")),f(j,"name","search"),f(W,"class","search-text-box"),f(K,"type","submit"),f(K,"class","btn btn-primary"),f(ee,"class","submit-button"),f(r,"class","search-form"),f(r,"method","post"),f(r,"action",window.ScriptURI),f(a,"class","modal-body"),f(n,"class","modal search-button-modal")},m(S,U){z(S,e,U),z(S,t,U),z(S,n,U),c(n,s),c(s,o),c(n,l),c(n,a),c(a,r),c(r,h),c(r,b),c(r,u),c(r,g),c(r,d),Y(d,i[1]),c(r,w),c(r,v),c(r,T),c(r,p),c(r,y),c(r,C);for(let I=0;I<P.length;I+=1)P[I]&&P[I].m(C,null);c(r,m),c(r,O),c(O,A),q.m(A,null),c(r,N),c(r,W),c(W,j),i[15](j),c(r,ne),c(r,ee),c(ee,K),Fe(Q,K,null),c(K,he),c(K,V),i[16](n),k=!0,te||(Ee=[M(e,"click",i[8]),we(Te.call(null,e,"body")),M(o,"click",i[8]),M(d,"input",i[12]),we(Te.call(null,n,"body"))],te=!0)},p(S,U){if((!k||U&4)&&(u.value=S[2]),U&2&&Y(d,S[1]),(!k||U&8)&&(p.value=S[3]),U&34){B=fe(S[5]);let I;for(I=0;I<B.length;I+=1){const ie=Wt(S,B,I);P[I]?P[I].p(ie,U):(P[I]=jt(ie),P[I].c(),P[I].m(C,null))}for(;I<P.length;I+=1)P[I].d(1);P.length=B.length}de===(de=ue(S))&&q?q.p(S,U):(q.d(1),q=de(S),q&&(q.c(),q.m(A,null))),(!k||U&18&&E!==(E=S[1]!=="content_data"||S[4].length===0))&&(A.disabled=E),(!k||U&2)&&Et(A,"disabled",S[1]!=="content_data")},i(S){k||(H(Q.$$.fragment,S),k=!0)},o(S){Z(Q.$$.fragment,S),k=!1},d(S){S&&(F(e),F(t),F(n)),He(P,S),q.d(),i[15](null),ze(Q),i[16](null),te=!1,le(Ee)}}}function jt(i){let e,t,n,s=!1,o,l,a=i[20].label+"",r,h,b,u,g;return b=Xt(i[14][0]),{c(){e=_("label"),t=_("input"),l=R(),r=D(a),h=R(),f(t,"type","radio"),f(t,"name","type"),t.__value=n=i[20].key,Y(t,t.__value),f(t,"id",o=i[20].key),b.p(t)},m(d,w){z(d,e,w),c(e,t),t.checked=t.__value===i[1],c(e,l),c(e,r),c(e,h),u||(g=M(t,"change",i[13]),u=!0)},p(d,w){w&32&&n!==(n=d[20].key)&&(t.__value=n,Y(t,t.__value),s=!0),w&32&&o!==(o=d[20].key)&&f(t,"id",o),(s||w&34)&&(t.checked=t.__value===d[1]),w&32&&a!==(a=d[20].label+"")&&ce(r,a)},d(d){d&&F(e),b.r(),u=!1,g()}}}function pn(i){let e;return{c(){e=_("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Y(e,e.__value)},m(t,n){z(t,e,n)},p:J,d(t){t&&F(e)}}}function gn(i){let e,t=fe(i[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pt(Ut(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ae()},m(s,o){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,o);z(s,e,o)},p(s,o){if(o&16){t=fe(s[4]);let l;for(l=0;l<t.length;l+=1){const a=Ut(s,t,l);n[l]?n[l].p(a,o):(n[l]=Pt(a),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(s){s&&F(e),He(n,s)}}}function Pt(i){let e,t=i[17].name+"",n,s;return{c(){e=_("option"),n=D(t),e.__value=s=i[17].id,Y(e,e.__value)},m(o,l){z(o,e,l),c(e,n)},p(o,l){l&16&&t!==(t=o[17].name+"")&&ce(n,t),l&16&&s!==(s=o[17].id)&&(e.__value=s,Y(e,e.__value))},d(o){o&&F(e)}}}function mn(i){let e,t,n,s,o,l=i[0]&&Dt(i);return{c(){e=R(),l&&l.c(),t=Ae()},m(a,r){z(a,e,r),l&&l.m(a,r),z(a,t,r),n=!0,s||(o=M(document.body,"click",i[9]),s=!0)},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&H(l,1)):(l=Dt(a),l.c(),H(l,1),l.m(t.parentNode,t)):l&&(Ve(),Z(l,1,1,()=>{l=null}),Je())},i(a){n||(H(l),n=!0)},o(a){Z(l),n=!1},d(a){a&&(F(e),F(t)),l&&l.d(a),s=!1,o()}}}function bn(i,e,t){let{blogId:n}=e,{magicToken:s}=e,{contentTypes:o=[]}=e,{open:l=!1}=e,{buttonRef:a}=e,{anchorRef:r}=e,{searchTabs:h}=e,{objectType:b}=e;const u=()=>{t(0,l=!1)};let g=null;const d=m=>{const O=m.target;l&&st([a,g],O)&&u()};let w=null;tt(async()=>{b&&h.find(m=>m.key===b)||t(1,b=h[0].key)});const v=[[]];function T(){b=this.value,t(1,b)}function p(){b=this.__value,t(1,b)}function y(m){ve[m?"unshift":"push"](()=>{w=m,t(6,w)})}function C(m){ve[m?"unshift":"push"](()=>{g=m,t(7,g)})}return i.$$set=m=>{"blogId"in m&&t(2,n=m.blogId),"magicToken"in m&&t(3,s=m.magicToken),"contentTypes"in m&&t(4,o=m.contentTypes),"open"in m&&t(0,l=m.open),"buttonRef"in m&&t(10,a=m.buttonRef),"anchorRef"in m&&t(11,r=m.anchorRef),"searchTabs"in m&&t(5,h=m.searchTabs),"objectType"in m&&t(1,b=m.objectType)},i.$$.update=()=>{i.$$.dirty&2049&&r&&(l?r.classList.add("open"):r.classList.remove("open")),i.$$.dirty&65&&l&&w&&w.focus()},[l,b,n,s,o,h,w,g,u,d,a,r,T,p,v,y,C]}class wn extends Ie{constructor(e){super(),Ne(this,e,bn,mn,Ce,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function yn(i,e){var t;let n=[];if(i.dataset.searchTabsJson){const o=JSON.parse(i.dataset.searchTabsJson);o.success&&(n=o.data)}const s=new wn({target:i,props:{searchTabs:n,objectType:(t=i.dataset.objectType)!==null&&t!==void 0?t:"",...e}});e.anchorRef.addEventListener("click",o=>{o.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,s.$set(e)})}const vn=new yt,Gt=new pt({cache:vn}),Sn=async i=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(i.items),limit:i.limit,magic_token:i.magicToken,page:i.page,sort_by:"id",sort_order:"descend"};return await Gt.fetchWithCache({key:Gt.generateCacheKey({prefix:"sites",params:e}),fetcher:async()=>{let t,n;try{n=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(t="possibly unloaded")}})}catch(o){t??(t=o)}if(t||n.error)return{count:0,page:0,pageMax:0,sites:[],error:t??n.error};const s=n.result.objects.map(o=>{const l=o[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:o[0],name:l,siteUrl:o[2],parentSiteName:o[3]}});return{count:Number.parseInt(n.result.count),page:Number.parseInt(n.result.page),pageMax:Number.parseInt(n.result.page_max),sites:s}}})};function Ht(i,e,t){const n=i.slice();return n[30]=e[t],n}function Bt(i){let e,t,n,s,o,l,a,r,h,b=window.trans("[_1]Site",i[2].toString())+"",u,g,d,w,v,T,p,y,C,m,O,A,E,N,W,j,ne,ee,K,Q,he,V,k,te,Ee,B,P,ue,de,q,S,U,I,ie,ot,pe,se,rt,Me,ge,at,oe,ct,me,Ue,ft,We,ht,De,Xe,je,X,x,$,Ye,ut;ge=new Qe({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const dt=[Tn,kn],re=[];function _t(L,G){return L[7]?0:1}return X=_t(i),x=re[X]=dt[X](i),{c(){e=_("div"),t=R(),n=_("div"),s=_("div"),o=_("div"),l=_("div"),a=_("div"),r=_("span"),h=D("("),u=D(b),g=D(")"),d=R(),w=_("p"),w.textContent=`${window.trans("Site List")}`,v=R(),T=_("div"),p=_("div"),y=_("button"),C=D("<<"),O=R(),A=_("button"),E=D("<"),W=R(),j=_("span"),ne=_("span"),ee=D(i[3]),K=D("/"),Q=D(i[4]),he=R(),V=_("button"),k=D(">"),Ee=R(),B=_("button"),P=D(">>"),de=R(),q=_("div"),S=_("select"),U=_("option"),U.textContent=`${window.trans("Parent Sites")}`,I=_("option"),I.textContent=`${window.trans("Parent and child sites")}`,ie=_("option"),ie.textContent=`${window.trans("Only child sites")}`,ot=R(),pe=_("div"),se=_("input"),rt=R(),Me=_("button"),Ke(ge.$$.fragment),at=R(),oe=_("button"),oe.innerHTML='<span aria-hidden="true">\xD7</span>',ct=R(),me=_("div"),Ue=_("span"),Ue.textContent=`${window.trans("Site Name")}`,ft=R(),We=_("span"),We.textContent=`${window.trans("Parent Site")}`,ht=R(),De=_("div"),Xe=_("table"),je=_("tbody"),x.c(),f(e,"class","site-list-button-modal-overlay"),f(a,"class","site-list-title"),f(y,"type","button"),y.disabled=m=i[3]<=1,f(A,"type","button"),A.disabled=N=i[3]<=1,f(ne,"class","current"),f(j,"class","page-num"),f(V,"type","button"),V.disabled=te=i[3]===i[4],f(B,"type","button"),B.disabled=ue=i[3]===i[4],f(p,"class","prev-next"),U.__value="parent_sites",Y(U,U.__value),I.__value="parent_and_child_sites",Y(I,I.__value),ie.__value="child_sites_only",Y(ie,ie.__value),f(S,"class","custom-select form-control form-select"),i[5]===void 0&&Be(()=>i[24].call(S)),f(q,"class","site-type-filter"),f(se,"type","text"),f(se,"placeholder",window.trans("Filter by site name")),f(pe,"class","site-name-filter"),f(oe,"type","button"),f(oe,"class","close"),f(oe,"data-dismiss","modal"),f(oe,"aria-label","Close"),f(T,"class","site-list-actions"),f(l,"class","site-list-header"),f(Ue,"class","table-header-col site-list-header-name"),f(We,"class","table-header-col site-list-header-parent"),f(me,"class","site-list-table-header"),f(De,"class","site-list-table-wrapper"),f(o,"class","site-list-container"),f(s,"class","modal-body"),f(n,"class","modal site-list-button-modal")},m(L,G){z(L,e,G),z(L,t,G),z(L,n,G),c(n,s),c(s,o),c(o,l),c(l,a),c(a,r),c(r,h),c(r,u),c(r,g),c(a,d),c(a,w),c(l,v),c(l,T),c(T,p),c(p,y),c(y,C),c(p,O),c(p,A),c(A,E),c(p,W),c(p,j),c(j,ne),c(ne,ee),c(j,K),c(j,Q),c(p,he),c(p,V),c(V,k),c(p,Ee),c(p,B),c(B,P),c(T,de),c(T,q),c(q,S),c(S,U),c(S,I),c(S,ie),Rt(S,i[5],!0),c(T,ot),c(T,pe),c(pe,se),Y(se,i[6]),c(pe,rt),c(pe,Me),Fe(ge,Me,null),c(T,at),c(T,oe),c(o,ct),c(o,me),c(me,Ue),c(me,ft),c(me,We),c(o,ht),c(o,De),c(De,Xe),c(Xe,je),re[X].m(je,null),i[27](n),$=!0,Ye||(ut=[M(e,"click",i[9]),we(Te.call(null,e,"body")),M(y,"click",i[13]),M(y,"keydown",i[20]),M(A,"click",i[12]),M(A,"keydown",i[21]),M(V,"click",i[10]),M(V,"keydown",i[22]),M(B,"click",i[11]),M(B,"keydown",i[23]),M(S,"change",i[24]),M(S,"change",i[14]),M(se,"input",i[25]),M(se,"keydown",i[26]),M(Me,"click",i[14]),M(oe,"click",i[9]),we(Te.call(null,n,"body"))],Ye=!0)},p(L,G){(!$||G[0]&4)&&b!==(b=window.trans("[_1]Site",L[2].toString())+"")&&ce(u,b),(!$||G[0]&8&&m!==(m=L[3]<=1))&&(y.disabled=m),(!$||G[0]&8&&N!==(N=L[3]<=1))&&(A.disabled=N),(!$||G[0]&8)&&ce(ee,L[3]),(!$||G[0]&16)&&ce(Q,L[4]),(!$||G[0]&24&&te!==(te=L[3]===L[4]))&&(V.disabled=te),(!$||G[0]&24&&ue!==(ue=L[3]===L[4]))&&(B.disabled=ue),G[0]&32&&Rt(S,L[5]),G[0]&64&&se.value!==L[6]&&Y(se,L[6]);let Ze=X;X=_t(L),X===Ze?re[X].p(L,G):(Ve(),Z(re[Ze],1,1,()=>{re[Ze]=null}),Je(),x=re[X],x?x.p(L,G):(x=re[X]=dt[X](L),x.c()),H(x,1),x.m(je,null))},i(L){$||(H(ge.$$.fragment,L),H(x),$=!0)},o(L){Z(ge.$$.fragment,L),Z(x),$=!1},d(L){L&&(F(e),F(t),F(n)),ze(ge),re[X].d(),i[27](null),Ye=!1,le(ut)}}}function kn(i){let e,t,n=fe(i[1]),s=[];for(let l=0;l<n.length;l+=1)s[l]=qt(Ht(i,n,l));const o=l=>Z(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Ae()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);z(l,e,a),t=!0},p(l,a){if(a[0]&2){n=fe(l[1]);let r;for(r=0;r<n.length;r+=1){const h=Ht(l,n,r);s[r]?(s[r].p(h,a),H(s[r],1)):(s[r]=qt(h),s[r].c(),H(s[r],1),s[r].m(e.parentNode,e))}for(Ve(),r=n.length;r<s.length;r+=1)o(r);Je()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)H(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Z(s[a]);t=!1},d(l){l&&F(e),He(s,l)}}}function Tn(i){let e,t;return{c(){e=_("tr"),t=_("td"),t.textContent=`${window.trans("Loading...")}`,f(t,"colspan","2"),f(t,"class","loading")},m(n,s){z(n,e,s),c(e,t)},p:J,i:J,o:J,d(n){n&&F(e)}}}function qt(i){let e,t,n,s,o,l=i[30].name+"",a,r,h,b,u,g,d,w,v=i[30].parentSiteName+"",T,p;return s=new Qe({props:{title:window.trans("Site"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#${i[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`}}),u=new Qe({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=_("tr"),t=_("td"),n=_("a"),Ke(s.$$.fragment),o=R(),a=D(l),h=R(),b=_("a"),Ke(u.$$.fragment),d=R(),w=_("td"),T=R(),f(n,"href",r=`${window.ScriptURI}?__mode=dashboard&blog_id=${i[30].id}`),f(n,"class","dashboard-link"),f(b,"href",g=i[30].siteUrl),f(b,"class","site-link"),f(b,"target","_blank")},m(y,C){z(y,e,C),c(e,t),c(t,n),Fe(s,n,null),c(n,o),c(n,a),c(t,h),c(t,b),Fe(u,b,null),c(e,d),c(e,w),w.innerHTML=v,c(e,T),p=!0},p(y,C){const m={};C[0]&2&&(m.href=`${window.StaticURI}images/admin2025/sprite.svg#${y[30].parentSiteName!=="-"?"ic_subsites":"ic_sites"}`),s.$set(m),(!p||C[0]&2)&&l!==(l=y[30].name+"")&&ce(a,l),(!p||C[0]&2&&r!==(r=`${window.ScriptURI}?__mode=dashboard&blog_id=${y[30].id}`))&&f(n,"href",r),(!p||C[0]&2&&g!==(g=y[30].siteUrl))&&f(b,"href",g),(!p||C[0]&2)&&v!==(v=y[30].parentSiteName+"")&&(w.innerHTML=v)},i(y){p||(H(s.$$.fragment,y),H(u.$$.fragment,y),p=!0)},o(y){Z(s.$$.fragment,y),Z(u.$$.fragment,y),p=!1},d(y){y&&F(e),ze(s),ze(u)}}}function Rn(i){let e,t,n,s,o,l=i[0]&&Bt(i);return{c(){e=R(),l&&l.c(),t=Ae()},m(a,r){z(a,e,r),l&&l.m(a,r),z(a,t,r),n=!0,s||(o=M(document.body,"click",i[15]),s=!0)},p(a,r){a[0]?l?(l.p(a,r),r[0]&1&&H(l,1)):(l=Bt(a),l.c(),H(l,1),l.m(t.parentNode,t)):l&&(Ve(),Z(l,1,1,()=>{l=null}),Je())},i(a){n||(H(l),n=!0)},o(a){Z(l),n=!1},d(a){a&&(F(e),F(t)),l&&l.d(a),s=!1,o()}}}function En(i,e,t){let{magicToken:n}=e,{limit:s=50}=e,{open:o=!1}=e,{buttonRef:l}=e,{anchorRef:a}=e;const r=()=>{t(0,o=!1)};let h=[],b=0,u=1,g=1,d="parent_sites",w="",v=[],T=!1,p=null;const y=()=>{t(3,u++,u),E()},C=()=>{t(3,u=g),E()},m=()=>{t(3,u--,u),E()},O=()=>{t(3,u=1),E()},A=()=>{v=[],d==="child_sites_only"?v=[{type:"parent_website",args:{value:""}}]:d==="parent_sites"&&(v=[{type:"parent_website",args:{value:"1"}}]),t(6,w=w.trim()),w!==""&&v.push({type:"name",args:{string:w,option:"contains"}}),t(3,u=1),E()},E=async()=>{t(7,T=!0);const k=await Sn({magicToken:n,items:v,page:u,limit:s});t(2,b=k.count),t(4,g=k.pageMax),t(3,u=g!==0?k.page:0),t(1,h=k.sites),t(7,T=!1)},N=k=>{const te=k.target;o&&st([l,p],te)&&r()};tt(async()=>{A()});const W=k=>k.key==="Enter"&&O(),j=k=>k.key==="Enter"&&m(),ne=k=>k.key==="Enter"&&y(),ee=k=>k.key==="Enter"&&C();function K(){d=Zt(this),t(5,d)}function Q(){w=this.value,t(6,w)}const he=k=>k.key==="Enter"&&A();function V(k){ve[k?"unshift":"push"](()=>{p=k,t(8,p)})}return i.$$set=k=>{"magicToken"in k&&t(16,n=k.magicToken),"limit"in k&&t(17,s=k.limit),"open"in k&&t(0,o=k.open),"buttonRef"in k&&t(18,l=k.buttonRef),"anchorRef"in k&&t(19,a=k.anchorRef)},i.$$.update=()=>{i.$$.dirty[0]&524289&&a&&(o?a.classList.add("open"):a.classList.remove("open"))},[o,h,b,u,g,d,w,T,p,r,y,C,m,O,A,N,n,s,l,a,W,j,ne,ee,K,Q,he,V]}class Cn extends Ie{constructor(e){super(),Ne(this,e,En,Rn,Ce,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function An(i,e){const t=new Cn({target:i,props:e});e.anchorRef.addEventListener("click",n=>{n.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,t.$set(e)})}document.addEventListener("DOMContentLoaded",()=>{var i,e;const t=document.querySelector('[data-is="primary-navigation-toggle"]');if(t!==null){const u="collapsed",g=sessionStorage.getItem(u);un(t,{collapsed:g==="true",buttonRef:t.getElementsByTagName("button")[0],sessionName:u,isStored:g!==null})}const n=document.querySelector('[data-script="admin-header"]');if(n===null){console.error("data-script='admin-header' is not set");return}const s=(i=n.getAttribute("data-blog-id"))!==null&&i!==void 0?i:"",o=(e=n.getAttribute("data-magic-token"))!==null&&e!==void 0?e:"";if(o===""){console.error("data-magic-token is not set");return}const l="50",a=document.querySelector('[data-is="site-list-button"]');a!==null&&An(a,{magicToken:o,limit:Number.parseInt(l),open:!1,buttonRef:a,anchorRef:a});const r=document.querySelector('[data-is="create-button"]'),h=document.querySelector('[data-is="search-button"]'),b=document.querySelector("div.mt-modal");(r!==null||h!==null)&&Kt({blogId:s,magicToken:o}).then(u=>{if(r!==null&&an({target:r,props:{blog_id:s,contentTypes:u.contentTypes.filter(g=>g.can_create===1),open:!1,buttonRef:r,anchorRef:r,containerRef:b}}),h!==null){const g=h.getElementsByTagName("a")[0];yn(h,{blogId:s,magicToken:o,contentTypes:u.contentTypes.filter(d=>d.can_search===1),open:!1,buttonRef:h,anchorRef:g})}})});
