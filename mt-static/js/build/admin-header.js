const Ht=async t=>{const e={__mode:"content_types_for_search_action",blog_id:t.blogId,magic_token:t.magicToken};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:o=>{(o.readyState===0||o.status===0)&&(n="possibly unloaded")}})}catch(o){n??(n=o)}return n||l.result.success!==1?{contentTypes:[]}:{contentTypes:l.result.content_types}};function D(){}function bt(t){return t()}function gt(){return Object.create(null)}function oe(t){t.forEach(bt)}function Xe(t){return typeof t=="function"}function Te(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Dt(t){return Object.keys(t).length===0}function be(t){return t&&Xe(t.destroy)?t.destroy:D}function r(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function Ye(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function v(){return q(" ")}function Ce(){return q("")}function j(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Jt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Vt(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e){t.value=e??""}function wt(t,e,n){for(let l=0;l<t.options.length;l+=1){const o=t.options[l];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Wt(t){const e=t.querySelector(":checked");return e&&e.__value}function vt(t,e,n){t.classList.toggle(e,!!n)}let Le;function Ee(t){Le=t}function Ft(){if(!Le)throw new Error("Function called outside component initialization");return Le}function Ze(t){Ft().$$.on_mount.push(t)}const ge=[],ye=[];let we=[];const kt=[],St=Promise.resolve();let xe=!1;function Rt(){xe||(xe=!0,St.then(Tt))}function Qt(){return Rt(),St}function He(t){we.push(t)}const $e=new Set;let ve=0;function Tt(){if(ve!==0)return;const t=Le;do{try{for(;ve<ge.length;){const e=ge[ve];ve++,Ee(e),zt(e.$$)}}catch(e){throw ge.length=0,ve=0,e}for(Ee(null),ge.length=0,ve=0;ye.length;)ye.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];$e.has(n)||($e.add(n),n())}we.length=0}while(ge.length);for(;kt.length;)kt.pop()();xe=!1,$e.clear(),Ee(t)}function zt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}function Gt(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const De=new Set;let _e;function Je(){_e={r:0,c:[],p:_e}}function Ve(){_e.r||oe(_e.c),_e=_e.p}function Q(t,e){t&&t.i&&(De.delete(t),t.i(e))}function $(t,e,n,l){if(t&&t.o){if(De.has(t))return;De.add(t),_e.c.push(()=>{De.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function re(t){return t?.length!==void 0?t:Array.from(t)}function et(t){t&&t.c()}function We(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),He(()=>{const s=t.$$.on_mount.map(bt).filter(Xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):oe(s),t.$$.on_mount=[]}),o.forEach(He)}function Fe(t,e){const n=t.$$;n.fragment!==null&&(Gt(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Kt(t,e){t.$$.dirty[0]===-1&&(ge.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ne(t,e,n,l,o,s,i=null,c=[-1]){const a=Le;Ee(t);const d=t.$$={fragment:null,ctx:[],props:s,update:D,not_equal:o,bound:gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:gt(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(d.root);let g=!1;if(d.ctx=n?n(t,e.props||{},(m,y,..._)=>{const h=_.length?_[0]:y;return d.ctx&&o(d.ctx[m],d.ctx[m]=h)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](h),g&&Kt(t,m)),y}):[],d.update(),g=!0,oe(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const m=Vt(e.target);d.fragment&&d.fragment.l(m),m.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&Q(t.$$.fragment),We(t,e.target,e.anchor),Tt()}Ee(a)}class Ie{$$=void 0;$$set=void 0;$destroy(){Fe(this,1),this.$destroy=D}$on(e,n){if(!Xe(n))return D;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xt);function ke(t,e="body"){let n;async function l(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Qt(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(t),t.hidden=!1}function o(){t.parentNode&&t.parentNode.removeChild(t)}return l(e),{update:l,destroy:o}}function tt(t,e){return!t.some(n=>n&&n.contains(e))}function Ct(t,e,n){const l=t.slice();return l[10]=e[n],l}function Lt(t){let e,n,l,o,s,i,c,a,d,g,m,y=window.trans("New [_1] creation",window.trans("Entry"))+"",_,h,M,S,k,O=window.trans("New [_1] creation",window.trans("Page"))+"",E,p,I,N,C=t[1].length>0&&Et(t);return{c(){e=f("div"),n=f("div"),l=f("button"),l.innerHTML='<span aria-hidden="true">\xD7</span>',o=v(),s=f("div"),C&&C.c(),i=v(),c=f("p"),c.textContent=`${`${window.trans("Entry")}\u30FB${window.trans("Page")}`}`,a=v(),d=f("ul"),g=f("li"),m=f("a"),_=q(y),M=v(),S=f("li"),k=f("a"),E=q(O),u(l,"type","button"),u(l,"class","close"),u(l,"data-dismiss","modal"),u(l,"aria-label","Close"),u(n,"class","modal-header"),u(c,"class","block-title"),u(m,"href",h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${t[2]}`),u(k,"href",p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${t[2]}`),u(d,"class","create-button-list"),u(s,"class","modal-body"),u(e,"class","modal create-button-modal")},m(B,J){T(B,e,J),r(e,n),r(n,l),r(e,o),r(e,s),C&&C.m(s,null),r(s,i),r(s,c),r(s,a),r(s,d),r(d,g),r(g,m),r(m,_),r(d,M),r(d,S),r(S,k),r(k,E),t[9](e),I||(N=[j(l,"click",t[4]),be(ke.call(null,e,"body"))],I=!0)},p(B,J){B[1].length>0?C?C.p(B,J):(C=Et(B),C.c(),C.m(s,i)):C&&(C.d(1),C=null),J&4&&h!==(h=`${window.CMSScriptURI}?__mode=view&_type=entry&blog_id=${B[2]}`)&&u(m,"href",h),J&4&&p!==(p=`${window.CMSScriptURI}?__mode=view&_type=page&blog_id=${B[2]}`)&&u(k,"href",p)},d(B){B&&R(e),C&&C.d(),t[9](null),I=!1,oe(N)}}}function Et(t){let e,n,l,o=re(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Nt(Ct(t,o,i));return{c(){e=f("p"),e.textContent=`${window.trans("Content Data")}`,n=v(),l=f("ul");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","block-title"),u(l,"class","create-button-list")},m(i,c){T(i,e,c),T(i,n,c),T(i,l,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(i,c){if(c&6){o=re(i[1]);let a;for(a=0;a<o.length;a+=1){const d=Ct(i,o,a);s[a]?s[a].p(d,c):(s[a]=Nt(d),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(i){i&&(R(e),R(n),R(l)),Ae(s,i)}}}function Nt(t){let e,n,l=window.trans("New [_1] creation",t[10].name)+"",o,s,i;return{c(){e=f("li"),n=f("a"),o=q(l),i=v(),u(n,"href",s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${t[10].id}&type=content_data_${t[10].id}&blog_id=${t[2]}`)},m(c,a){T(c,e,a),r(e,n),r(n,o),r(e,i)},p(c,a){a&2&&l!==(l=window.trans("New [_1] creation",c[10].name)+"")&&ce(o,l),a&6&&s!==(s=`${window.CMSScriptURI}?__mode=view&_type=content_data&content_type_id=${c[10].id}&type=content_data_${c[10].id}&blog_id=${c[2]}`)&&u(n,"href",s)},d(c){c&&R(e)}}}function Yt(t){let e,n,l,o,s=t[0]&&Lt(t);return{c(){e=v(),s&&s.c(),n=Ce()},m(i,c){T(i,e,c),s&&s.m(i,c),T(i,n,c),l||(o=j(document.body,"click",t[5]),l=!0)},p(i,[c]){i[0]?s?s.p(i,c):(s=Lt(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:D,o:D,d(i){i&&(R(e),R(n)),s&&s.d(i),l=!1,o()}}}function Zt(t,e,n){let{contentTypes:l=[]}=e,{blog_id:o}=e,{open:s=!1}=e,{buttonRef:i=null}=e,{anchorRef:c=null}=e,{containerRef:a=null}=e,d=null;const g=()=>{n(0,s=!1)},m=_=>{if(a&&a.classList.contains("show"))return;const h=_.target;s&&tt([i,d],h)&&g()};function y(_){ye[_?"unshift":"push"](()=>{d=_,n(3,d),n(7,c),n(0,s)})}return t.$$set=_=>{"contentTypes"in _&&n(1,l=_.contentTypes),"blog_id"in _&&n(2,o=_.blog_id),"open"in _&&n(0,s=_.open),"buttonRef"in _&&n(6,i=_.buttonRef),"anchorRef"in _&&n(7,c=_.anchorRef),"containerRef"in _&&n(8,a=_.containerRef)},t.$$.update=()=>{if(t.$$.dirty&137&&c){if(d){const _=c.getBoundingClientRect(),h=`calc(${_.bottom}px + 10px)`;n(3,d.style.top=h,d);const M=`calc(100vh - ${_.bottom}px - 10px - 20px)`;n(3,d.style.maxHeight=M,d)}s?c.classList.add("open"):c.classList.remove("open")}},[s,l,o,d,g,m,i,c,a,y]}class xt extends Ie{constructor(e){super(),Ne(this,e,Zt,Yt,Te,{contentTypes:1,blog_id:2,open:0,buttonRef:6,anchorRef:7,containerRef:8})}}const $t=({target:t,props:e})=>{const n=new xt({target:t,props:e});t.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})};function en(t){let e,n,l,o;return{c(){e=f("div"),u(e,"class","mt-primaryNavigation-overlay"),u(e,"style",n=`display: ${t[0]?"block":"none"}`)},m(s,i){T(s,e,i),l||(o=[be(ke.call(null,e,"body")),j(e,"mouseenter",t[1])],l=!0)},p(s,[i]){i&1&&n!==(n=`display: ${s[0]?"block":"none"}`)&&u(e,"style",n)},i:D,o:D,d(s){s&&R(e),l=!1,oe(o)}}}function tn(t,e,n){let{buttonRef:l}=e,{collapsed:o=!1}=e,{isStored:s=!1}=e,i=!1;const c=(y,_)=>{const h=document.querySelector('[data-is="content-wrapper"]');_?h.classList.add(y):h.classList.remove(y)},a=()=>{c("collapsed",o)},d=()=>{c("mouseover",i)},g=()=>{var y;o&&(i=!0,d(),(y=document.querySelector('[data-is="primary-navigation"]'))===null||y===void 0||y.addEventListener("mouseleave",m,{once:!0}))},m=()=>{i=!1,d()};return Ze(()=>{s||window.innerWidth<1e3&&n(0,o=!0),a()}),t.$$set=y=>{"buttonRef"in y&&n(2,l=y.buttonRef),"collapsed"in y&&n(0,o=y.collapsed),"isStored"in y&&n(3,s=y.isStored)},t.$$.update=()=>{t.$$.dirty&5&&(a(),i=!1,d(),l&&(o?(l.classList.remove("expanded"),l.classList.add("collapsed")):(l.classList.remove("collapsed"),l.classList.add("expanded"))))},[o,g,l,s]}class nn extends Ie{constructor(e){super(),Ne(this,e,tn,en,Te,{buttonRef:2,collapsed:0,isStored:3})}}function ln(t,e){const n=new nn({target:t,props:{collapsed:e.collapsed,buttonRef:e.buttonRef,isStored:e.isStored}});e.buttonRef.addEventListener("click",()=>{e.buttonRef.classList.contains("collapsed")?e.collapsed=!1:e.collapsed=!0,n.$set(e),sessionStorage.setItem(e.sessionName,e.collapsed.toString())})}function It(t){let e,n;return{c(){e=Ye("title"),n=q(t[2])},m(l,o){T(l,e,o),r(e,n)},p(l,o){o&4&&ce(n,l[2])},d(l){l&&R(e)}}}function on(t){let e,n,l=t[2]&&It(t);return{c(){e=Ye("svg"),l&&l.c(),n=Ye("use"),yt(n,"xlink:href",t[1]),u(e,"role","img"),u(e,"class",t[0])},m(o,s){T(o,e,s),l&&l.m(e,null),r(e,n)},p(o,[s]){o[2]?l?l.p(o,s):(l=It(o),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s&2&&yt(n,"xlink:href",o[1]),s&1&&u(e,"class",o[0])},i:D,o:D,d(o){o&&R(e),l&&l.d()}}}function sn(t,e,n){let{class:l}=e,{href:o}=e,{title:s}=e;return t.$$set=i=>{"class"in i&&n(0,l=i.class),"href"in i&&n(1,o=i.href),"title"in i&&n(2,s=i.title)},[l,o,s]}class nt extends Ie{constructor(e){super(),Ne(this,e,sn,on,Te,{class:0,href:1,title:2})}}function Mt(t,e,n){const l=t.slice();return l[17]=e[n],l}function Ut(t,e,n){const l=t.slice();return l[20]=e[n],l}function jt(t){let e,n,l,o,s,i,c,a,d,g,m,y,_,h,M,S,k,O,E,p,I,N,C,B,J,V,ne,ee,G,K,ue,z,w,te,Re,W=re(t[5]),A=[];for(let b=0;b<W.length;b+=1)A[b]=Ot(Ut(t,W,b));function fe(b,P){return b[4].length>0?cn:an}let de=fe(t),F=de(t);return K=new nt({props:{title:window.trans("Search"),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}}),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("button"),s.innerHTML='<span aria-hidden="true">\xD7</span>',i=v(),c=f("div"),a=f("form"),d=f("input"),g=v(),m=f("input"),y=v(),_=f("input"),h=v(),M=f("input"),S=v(),k=f("input"),O=v(),E=f("div");for(let b=0;b<A.length;b+=1)A[b].c();p=v(),I=f("div"),N=f("select"),F.c(),B=v(),J=f("div"),V=f("input"),ne=v(),ee=f("div"),G=f("button"),et(K.$$.fragment),ue=v(),z=f("span"),z.textContent=`${window.trans("Search")}`,u(e,"class","search-button-modal-overlay"),u(s,"type","button"),u(s,"class","close"),u(s,"data-dismiss","modal"),u(s,"aria-label","Close"),u(o,"class","modal-header"),u(d,"type","hidden"),u(d,"name","__mode"),d.value="search_replace",u(m,"type","hidden"),u(m,"name","blog_id"),m.value=t[2],u(_,"type","hidden"),u(_,"name","_type"),u(M,"type","hidden"),u(M,"name","do_search"),M.value="1",u(k,"type","hidden"),u(k,"name","magic_token"),k.value=t[3],u(E,"class","search-type"),u(N,"class","custom-select form-control form-select"),u(N,"name","content_type_id"),N.disabled=C=t[1]!=="content_data"||t[4].length===0,vt(N,"disabled",t[1]!=="content_data"),u(I,"class","search-content-type"),u(V,"type","text"),u(V,"placeholder",window.trans("Select target and search text...")),u(V,"name","search"),u(J,"class","search-text-box"),u(G,"type","submit"),u(G,"class","btn btn-primary"),u(ee,"class","submit-button"),u(a,"class","search-form"),u(a,"method","post"),u(a,"action",window.ScriptURI),u(c,"class","modal-body"),u(l,"class","modal search-button-modal")},m(b,P){T(b,e,P),T(b,n,P),T(b,l,P),r(l,o),r(o,s),r(l,i),r(l,c),r(c,a),r(a,d),r(a,g),r(a,m),r(a,y),r(a,_),Y(_,t[1]),r(a,h),r(a,M),r(a,S),r(a,k),r(a,O),r(a,E);for(let U=0;U<A.length;U+=1)A[U]&&A[U].m(E,null);r(a,p),r(a,I),r(I,N),F.m(N,null),r(a,B),r(a,J),r(J,V),t[15](V),r(a,ne),r(a,ee),r(ee,G),We(K,G,null),r(G,ue),r(G,z),t[16](l),w=!0,te||(Re=[j(e,"click",t[8]),be(ke.call(null,e,"body")),j(s,"click",t[8]),j(_,"input",t[12]),be(ke.call(null,l,"body"))],te=!0)},p(b,P){if((!w||P&4)&&(m.value=b[2]),P&2&&Y(_,b[1]),(!w||P&8)&&(k.value=b[3]),P&34){W=re(b[5]);let U;for(U=0;U<W.length;U+=1){const le=Ut(b,W,U);A[U]?A[U].p(le,P):(A[U]=Ot(le),A[U].c(),A[U].m(E,null))}for(;U<A.length;U+=1)A[U].d(1);A.length=W.length}de===(de=fe(b))&&F?F.p(b,P):(F.d(1),F=de(b),F&&(F.c(),F.m(N,null))),(!w||P&18&&C!==(C=b[1]!=="content_data"||b[4].length===0))&&(N.disabled=C),(!w||P&2)&&vt(N,"disabled",b[1]!=="content_data")},i(b){w||(Q(K.$$.fragment,b),w=!0)},o(b){$(K.$$.fragment,b),w=!1},d(b){b&&(R(e),R(n),R(l)),Ae(A,b),F.d(),t[15](null),Fe(K),t[16](null),te=!1,oe(Re)}}}function Ot(t){let e,n,l,o=!1,s,i,c=t[20].label+"",a,d,g,m,y;return g=Jt(t[14][0]),{c(){e=f("label"),n=f("input"),i=v(),a=q(c),d=v(),u(n,"type","radio"),u(n,"name","type"),n.__value=l=t[20].key,Y(n,n.__value),u(n,"id",s=t[20].key),g.p(n)},m(_,h){T(_,e,h),r(e,n),n.checked=n.__value===t[1],r(e,i),r(e,a),r(e,d),m||(y=j(n,"change",t[13]),m=!0)},p(_,h){h&32&&l!==(l=_[20].key)&&(n.__value=l,Y(n,n.__value),o=!0),h&32&&s!==(s=_[20].key)&&u(n,"id",s),(o||h&34)&&(n.checked=n.__value===_[1]),h&32&&c!==(c=_[20].label+"")&&ce(a,c)},d(_){_&&R(e),g.r(),m=!1,y()}}}function an(t){let e;return{c(){e=f("option"),e.textContent=`${window.trans("No Content Type could be found.")}`,e.__value="",Y(e,e.__value)},m(n,l){T(n,e,l)},p:D,d(n){n&&R(e)}}}function cn(t){let e,n=re(t[4]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Pt(Mt(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ce()},m(o,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,s);T(o,e,s)},p(o,s){if(s&16){n=re(o[4]);let i;for(i=0;i<n.length;i+=1){const c=Mt(o,n,i);l[i]?l[i].p(c,s):(l[i]=Pt(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(o){o&&R(e),Ae(l,o)}}}function Pt(t){let e,n=t[17].name+"",l,o;return{c(){e=f("option"),l=q(n),e.__value=o=t[17].id,Y(e,e.__value)},m(s,i){T(s,e,i),r(e,l)},p(s,i){i&16&&n!==(n=s[17].name+"")&&ce(l,n),i&16&&o!==(o=s[17].id)&&(e.__value=o,Y(e,e.__value))},d(s){s&&R(e)}}}function rn(t){let e,n,l,o,s,i=t[0]&&jt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(c,a){T(c,e,a),i&&i.m(c,a),T(c,n,a),l=!0,o||(s=j(document.body,"click",t[9]),o=!0)},p(c,[a]){c[0]?i?(i.p(c,a),a&1&&Q(i,1)):(i=jt(c),i.c(),Q(i,1),i.m(n.parentNode,n)):i&&(Je(),$(i,1,1,()=>{i=null}),Ve())},i(c){l||(Q(i),l=!0)},o(c){$(i),l=!1},d(c){c&&(R(e),R(n)),i&&i.d(c),o=!1,s()}}}function un(t,e,n){let{blogId:l}=e,{magicToken:o}=e,{contentTypes:s=[]}=e,{open:i=!1}=e,{buttonRef:c}=e,{anchorRef:a}=e,{searchTabs:d}=e,{objectType:g}=e;const m=()=>{n(0,i=!1)};let y=null;const _=p=>{const I=p.target;i&&tt([c,y],I)&&m()};let h=null;Ze(async()=>{g&&d.find(p=>p.key===g)||n(1,g=d[0].key)});const M=[[]];function S(){g=this.value,n(1,g)}function k(){g=this.__value,n(1,g)}function O(p){ye[p?"unshift":"push"](()=>{h=p,n(6,h)})}function E(p){ye[p?"unshift":"push"](()=>{y=p,n(7,y)})}return t.$$set=p=>{"blogId"in p&&n(2,l=p.blogId),"magicToken"in p&&n(3,o=p.magicToken),"contentTypes"in p&&n(4,s=p.contentTypes),"open"in p&&n(0,i=p.open),"buttonRef"in p&&n(10,c=p.buttonRef),"anchorRef"in p&&n(11,a=p.anchorRef),"searchTabs"in p&&n(5,d=p.searchTabs),"objectType"in p&&n(1,g=p.objectType)},t.$$.update=()=>{t.$$.dirty&2049&&a&&(i?a.classList.add("open"):a.classList.remove("open")),t.$$.dirty&65&&i&&h&&h.focus()},[i,g,l,o,s,d,h,y,m,_,c,a,S,k,M,O,E]}class fn extends Ie{constructor(e){super(),Ne(this,e,un,rn,Te,{blogId:2,magicToken:3,contentTypes:4,open:0,buttonRef:10,anchorRef:11,searchTabs:5,objectType:1})}}function dn(t,e){var n;let l=[];if(t.dataset.searchTabsJson){const s=JSON.parse(t.dataset.searchTabsJson);s.success&&(l=s.data)}const o=new fn({target:t,props:{searchTabs:l,objectType:(n=t.dataset.objectType)!==null&&n!==void 0?n:"",...e}});e.anchorRef.addEventListener("click",s=>{s.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,o.$set(e)})}const _n=async t=>{const e={__mode:"filtered_list",blog_id:"0",columns:"name,site_url,parent_website",datasource:"website",items:JSON.stringify(t.items),limit:t.limit,magic_token:t.magicToken,page:t.page,sort_by:"id",sort_order:"descend"};let n,l;try{l=await jQuery.ajax(window.ScriptURI,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:e,dataType:"json",error:s=>{(s.readyState===0||s.status===0)&&(n="possibly unloaded")}})}catch(s){n??(n=s)}if(n||l.error)return{count:0,page:0,pageMax:0,sites:[]};const o=l.result.objects.map(s=>{const i=s[1].replace(/<span[^>]*>.*?<\/span>\s*<a[^>]*>([^<]+)<\/a>/,"$1").trim();return{id:s[0],name:i,siteUrl:s[2],parentSiteName:s[3]}});return{count:Number.parseInt(l.result.count),page:Number.parseInt(l.result.page),pageMax:Number.parseInt(l.result.page_max),sites:o}};function Bt(t,e,n){const l=t.slice();return l[30]=e[n],l}function qt(t){let e,n,l,o,s,i,c,a,d,g=window.trans("[_1]Site",t[2].toString())+"",m,y,_,h,M,S,k,O,E,p,I,N,C,B,J,V,ne,ee,G,K,ue,z,w,te,Re,W,A,fe,de,F,b,P,U,le,ct,pe,ie,rt,je,me,ut,se,ft,he,Oe,dt,Pe,_t,Be,ze,qe,X,Z,x,Ge,pt;me=new nt({props:{title:window.trans("Search"),class:"mt-icon",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_search`}});const mt=[mn,pn],ae=[];function ht(L,H){return L[7]?0:1}return X=ht(t),Z=ae[X]=mt[X](t),{c(){e=f("div"),n=v(),l=f("div"),o=f("div"),s=f("div"),i=f("div"),c=f("div"),a=f("span"),d=q("("),m=q(g),y=q(")"),_=v(),h=f("p"),h.textContent=`${window.trans("Site List")}`,M=v(),S=f("div"),k=f("div"),O=f("button"),E=q("<<"),I=v(),N=f("button"),C=q("<"),J=v(),V=f("span"),ne=f("span"),ee=q(t[3]),G=q("/"),K=q(t[4]),ue=v(),z=f("button"),w=q(">"),Re=v(),W=f("button"),A=q(">>"),de=v(),F=f("div"),b=f("select"),P=f("option"),P.textContent=`${window.trans("Parent Sites")}`,U=f("option"),U.textContent=`${window.trans("Parent and child sites")}`,le=f("option"),le.textContent=`${window.trans("Only child sites")}`,ct=v(),pe=f("div"),ie=f("input"),rt=v(),je=f("button"),et(me.$$.fragment),ut=v(),se=f("button"),se.innerHTML='<span aria-hidden="true">\xD7</span>',ft=v(),he=f("div"),Oe=f("span"),Oe.textContent=`${window.trans("Site Name")}`,dt=v(),Pe=f("span"),Pe.textContent=`${window.trans("Parent Site")}`,_t=v(),Be=f("div"),ze=f("table"),qe=f("tbody"),Z.c(),u(e,"class","site-list-button-modal-overlay"),u(c,"class","site-list-title"),u(O,"type","button"),O.disabled=p=t[3]<=1,u(N,"type","button"),N.disabled=B=t[3]<=1,u(ne,"class","current"),u(V,"class","page-num"),u(z,"type","button"),z.disabled=te=t[3]===t[4],u(W,"type","button"),W.disabled=fe=t[3]===t[4],u(k,"class","prev-next"),P.__value="parent_sites",Y(P,P.__value),U.__value="parent_and_child_sites",Y(U,U.__value),le.__value="child_sites_only",Y(le,le.__value),u(b,"class","custom-select form-control form-select"),t[5]===void 0&&He(()=>t[24].call(b)),u(F,"class","site-type-filter"),u(ie,"type","text"),u(ie,"placeholder",window.trans("Filter by site name")),u(pe,"class","site-name-filter"),u(se,"type","button"),u(se,"class","close"),u(se,"data-dismiss","modal"),u(se,"aria-label","Close"),u(S,"class","site-list-actions"),u(i,"class","site-list-header"),u(Oe,"class","table-header-col site-list-header-name"),u(Pe,"class","table-header-col site-list-header-parent"),u(he,"class","site-list-table-header"),u(Be,"class","site-list-table-wrapper"),u(s,"class","site-list-container"),u(o,"class","modal-body"),u(l,"class","modal site-list-button-modal")},m(L,H){T(L,e,H),T(L,n,H),T(L,l,H),r(l,o),r(o,s),r(s,i),r(i,c),r(c,a),r(a,d),r(a,m),r(a,y),r(c,_),r(c,h),r(i,M),r(i,S),r(S,k),r(k,O),r(O,E),r(k,I),r(k,N),r(N,C),r(k,J),r(k,V),r(V,ne),r(ne,ee),r(V,G),r(V,K),r(k,ue),r(k,z),r(z,w),r(k,Re),r(k,W),r(W,A),r(S,de),r(S,F),r(F,b),r(b,P),r(b,U),r(b,le),wt(b,t[5],!0),r(S,ct),r(S,pe),r(pe,ie),Y(ie,t[6]),r(pe,rt),r(pe,je),We(me,je,null),r(S,ut),r(S,se),r(s,ft),r(s,he),r(he,Oe),r(he,dt),r(he,Pe),r(s,_t),r(s,Be),r(Be,ze),r(ze,qe),ae[X].m(qe,null),t[27](l),x=!0,Ge||(pt=[j(e,"click",t[9]),be(ke.call(null,e,"body")),j(O,"click",t[13]),j(O,"keydown",t[20]),j(N,"click",t[12]),j(N,"keydown",t[21]),j(z,"click",t[10]),j(z,"keydown",t[22]),j(W,"click",t[11]),j(W,"keydown",t[23]),j(b,"change",t[24]),j(b,"change",t[14]),j(ie,"input",t[25]),j(ie,"keydown",t[26]),j(je,"click",t[14]),j(se,"click",t[9]),be(ke.call(null,l,"body"))],Ge=!0)},p(L,H){(!x||H[0]&4)&&g!==(g=window.trans("[_1]Site",L[2].toString())+"")&&ce(m,g),(!x||H[0]&8&&p!==(p=L[3]<=1))&&(O.disabled=p),(!x||H[0]&8&&B!==(B=L[3]<=1))&&(N.disabled=B),(!x||H[0]&8)&&ce(ee,L[3]),(!x||H[0]&16)&&ce(K,L[4]),(!x||H[0]&24&&te!==(te=L[3]===L[4]))&&(z.disabled=te),(!x||H[0]&24&&fe!==(fe=L[3]===L[4]))&&(W.disabled=fe),H[0]&32&&wt(b,L[5]),H[0]&64&&ie.value!==L[6]&&Y(ie,L[6]);let Ke=X;X=ht(L),X===Ke?ae[X].p(L,H):(Je(),$(ae[Ke],1,1,()=>{ae[Ke]=null}),Ve(),Z=ae[X],Z?Z.p(L,H):(Z=ae[X]=mt[X](L),Z.c()),Q(Z,1),Z.m(qe,null))},i(L){x||(Q(me.$$.fragment,L),Q(Z),x=!0)},o(L){$(me.$$.fragment,L),$(Z),x=!1},d(L){L&&(R(e),R(n),R(l)),Fe(me),ae[X].d(),t[27](null),Ge=!1,oe(pt)}}}function pn(t){let e,n,l=re(t[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=At(Bt(t,l,i));const s=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ce()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);T(i,e,c),n=!0},p(i,c){if(c[0]&2){l=re(i[1]);let a;for(a=0;a<l.length;a+=1){const d=Bt(i,l,a);o[a]?(o[a].p(d,c),Q(o[a],1)):(o[a]=At(d),o[a].c(),Q(o[a],1),o[a].m(e.parentNode,e))}for(Je(),a=l.length;a<o.length;a+=1)s(a);Ve()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)Q(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&R(e),Ae(o,i)}}}function mn(t){let e,n;return{c(){e=f("tr"),n=f("td"),n.textContent=`${window.trans("Loading...")}`,u(n,"colspan","2"),u(n,"class","loading")},m(l,o){T(l,e,o),r(e,n)},p:D,i:D,o:D,d(l){l&&R(e)}}}function hn(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Child Site")}`,u(e,"class","badge badge-child-site")},m(n,l){T(n,e,l)},p:D,d(n){n&&R(e)}}}function bn(t){let e;return{c(){e=f("span"),e.textContent=`${window.trans("Site")}`,u(e,"class","badge badge-site")},m(n,l){T(n,e,l)},p:D,d(n){n&&R(e)}}}function At(t){let e,n,l,o,s=t[30].name+"",i,c,a,d,g,m,y,_,h=t[30].parentSiteName+"",M,S;function k(p,I){return p[30].parentSiteName==="-"?bn:hn}let O=k(t),E=O(t);return g=new nt({props:{title:window.trans("View your site."),class:"mt-icon mt-icon--sm",href:`${window.StaticURI}images/admin2025/sprite.svg#ic_permalink`}}),{c(){e=f("tr"),n=f("td"),E.c(),l=v(),o=f("a"),i=q(s),a=v(),d=f("a"),et(g.$$.fragment),y=v(),_=f("td"),M=v(),u(o,"href",c=`${window.ScriptURI}?__mode=dashboard&blog_id=${t[30].id}`),u(o,"class","dashboard-link"),u(d,"href",m=t[30].siteUrl),u(d,"class","site-link"),u(d,"target","_blank")},m(p,I){T(p,e,I),r(e,n),E.m(n,null),r(n,l),r(n,o),r(o,i),r(n,a),r(n,d),We(g,d,null),r(e,y),r(e,_),_.innerHTML=h,r(e,M),S=!0},p(p,I){O===(O=k(p))&&E?E.p(p,I):(E.d(1),E=O(p),E&&(E.c(),E.m(n,l))),(!S||I[0]&2)&&s!==(s=p[30].name+"")&&ce(i,s),(!S||I[0]&2&&c!==(c=`${window.ScriptURI}?__mode=dashboard&blog_id=${p[30].id}`))&&u(o,"href",c),(!S||I[0]&2&&m!==(m=p[30].siteUrl))&&u(d,"href",m),(!S||I[0]&2)&&h!==(h=p[30].parentSiteName+"")&&(_.innerHTML=h)},i(p){S||(Q(g.$$.fragment,p),S=!0)},o(p){$(g.$$.fragment,p),S=!1},d(p){p&&R(e),E.d(),Fe(g)}}}function gn(t){let e,n,l,o,s,i=t[0]&&qt(t);return{c(){e=v(),i&&i.c(),n=Ce()},m(c,a){T(c,e,a),i&&i.m(c,a),T(c,n,a),l=!0,o||(s=j(document.body,"click",t[15]),o=!0)},p(c,a){c[0]?i?(i.p(c,a),a[0]&1&&Q(i,1)):(i=qt(c),i.c(),Q(i,1),i.m(n.parentNode,n)):i&&(Je(),$(i,1,1,()=>{i=null}),Ve())},i(c){l||(Q(i),l=!0)},o(c){$(i),l=!1},d(c){c&&(R(e),R(n)),i&&i.d(c),o=!1,s()}}}function yn(t,e,n){let{magicToken:l}=e,{limit:o=50}=e,{open:s=!1}=e,{buttonRef:i}=e,{anchorRef:c}=e;const a=()=>{n(0,s=!1)};let d=[],g=0,m=1,y=1,_="parent_sites",h="",M=[],S=!1,k=null;const O=()=>{n(3,m++,m),C()},E=()=>{n(3,m=y),C()},p=()=>{n(3,m--,m),C()},I=()=>{n(3,m=1),C()},N=()=>{M=[],_==="child_sites_only"?M=[{type:"parent_website",args:{value:""}}]:_==="parent_sites"&&(M=[{type:"parent_website",args:{value:"1"}}]),n(6,h=h.trim()),h!==""&&M.push({type:"name",args:{string:h,option:"contains"}}),n(3,m=1),C()},C=async()=>{n(7,S=!0);const w=await _n({magicToken:l,items:M,page:m,limit:o});n(2,g=w.count),n(4,y=w.pageMax),n(3,m=y!==0?w.page:0),n(1,d=w.sites),n(7,S=!1)},B=w=>{const te=w.target;s&&tt([i,k],te)&&a()};Ze(async()=>{N()});const J=w=>w.key==="Enter"&&I(),V=w=>w.key==="Enter"&&p(),ne=w=>w.key==="Enter"&&O(),ee=w=>w.key==="Enter"&&E();function G(){_=Wt(this),n(5,_)}function K(){h=this.value,n(6,h)}const ue=w=>w.key==="Enter"&&N();function z(w){ye[w?"unshift":"push"](()=>{k=w,n(8,k)})}return t.$$set=w=>{"magicToken"in w&&n(16,l=w.magicToken),"limit"in w&&n(17,o=w.limit),"open"in w&&n(0,s=w.open),"buttonRef"in w&&n(18,i=w.buttonRef),"anchorRef"in w&&n(19,c=w.anchorRef)},t.$$.update=()=>{t.$$.dirty[0]&524289&&c&&(s?c.classList.add("open"):c.classList.remove("open"))},[s,d,g,m,y,_,h,S,k,a,O,E,p,I,N,B,l,o,i,c,J,V,ne,ee,G,K,ue,z]}class wn extends Ie{constructor(e){super(),Ne(this,e,yn,gn,Te,{magicToken:16,limit:17,open:0,buttonRef:18,anchorRef:19},null,[-1,-1])}}function vn(t,e){const n=new wn({target:t,props:e});e.anchorRef.addEventListener("click",l=>{l.preventDefault(),e.anchorRef.classList.contains("open")?e.open=!1:e.open=!0,n.$set(e)})}var lt,it;const ot=document.querySelector('[data-is="primary-navigation-toggle"]');if(ot!==null){const t="collapsed",e=sessionStorage.getItem(t);ln(ot,{collapsed:e==="true",buttonRef:ot.getElementsByTagName("button")[0],sessionName:t,isStored:e!==null})}const st=document.querySelector('[data-script="admin-header"]');st===null&&console.error("data-script='admin-header' is not set");const at=(lt=st?.getAttribute("data-blog-id"))!==null&&lt!==void 0?lt:"",Se=(it=st?.getAttribute("data-magic-token"))!==null&&it!==void 0?it:"";Se===""&&console.error("data-magic-token is not set");const kn="50",Qe=document.querySelector('[data-is="site-list-button"]');Qe!==null&&Se!==""&&vn(Qe,{magicToken:Se,limit:Number.parseInt(kn),open:!1,buttonRef:Qe,anchorRef:Qe});const Me=document.querySelector('[data-is="create-button"]'),Ue=document.querySelector('[data-is="search-button"]'),Sn=document.querySelector("div.mt-modal");(Me!==null||Ue!==null)&&Se!==""&&Ht({blogId:at,magicToken:Se}).then(t=>{if(Me!==null&&$t({target:Me,props:{blog_id:at,contentTypes:t.contentTypes.filter(e=>e.can_create===1),open:!1,buttonRef:Me,anchorRef:Me,containerRef:Sn}}),Ue!==null){const e=Ue.getElementsByTagName("a")[0];dn(Ue,{blogId:at,magicToken:Se,contentTypes:t.contentTypes.filter(n=>n.can_search===1),open:!1,buttonRef:Ue,anchorRef:e})}});
